!function(a){"use strict";function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function c(a){return a instanceof Array?function(){return h.iter(a)}:"function"==typeof a.iterator?d(a,a.iterator):a.iterator}function d(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=y++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}a.albero=a.albero||{};var e=function(){return w.Boot.__string_rec(this,"")},f=a.DirectAPI=function(){this.eventEmitter=new A};f.__name__=["DirectAPI"],f.getInstance=function(){return null==f.instance&&(f.instance=new f),f.instance},f.main=function(){},f.prototype={setOptions:function(a){null!=a?(z.host=a.host,z.endpoint=a.endpoint,z.accessToken=a.access_token,z.proxyURL=a.proxyURL,z.account=a.account):null!=console&&console.error(t.dateStr(),"Not enough parameters provided. I need a access token","","","","")},listen:function(){this.facade=s.AppFacade.getInstance(),this.api=w.Boot.__cast(this.facade.retrieveProxy("api"),s.proxy.AlberoServiceProxy),this.data=w.Boot.__cast(this.facade.retrieveProxy("dataStore"),s.proxy.DataStoreProxy),this.facade.startup()},emit:function(a,b,c,d){this.eventEmitter.emit(a,b,c,d)},on:function(a,b){return this.eventEmitter.on(a,b)},__class__:f};var g=function(a,b){b=b.split("u").join(""),this.r=new RegExp(a,b)};g.__name__=["EReg"],g.prototype={match:function(a){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(a),this.r.s=a,null!=this.r.m},matched:function(a){if(null!=this.r.m&&a>=0&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched"},replace:function(a,b){return a.replace(this.r,b)},__class__:g};var h=function(){};h.__name__=["HxOverrides"],h.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>f?"0"+f:""+f)},h.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c},h.substr=function(a,b,c){return null!=b&&0!=b&&null!=c&&0>c?"":(null==c&&(c=a.length),0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b),a.substr(b,c))},h.indexOf=function(a,b,c){var d=a.length;for(0>c&&(c+=d,0>c&&(c=0));d>c;){if(a[c]===b)return c;c++}return-1},h.remove=function(a,b){var c=h.indexOf(a,b,0);return-1==c?!1:(a.splice(c,1),!0)},h.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var i=function(){};i.__name__=["Lambda"],i.exists=function(a,b){for(var d=c(a)();d.hasNext();){var e=d.next();if(b(e))return!0}return!1},i.count=function(a,b){var d=0;if(null==b)for(var e=c(a)();e.hasNext();){{e.next()}d++}else for(var f=c(a)();f.hasNext();){var g=f.next();b(g)&&d++}return d};var j=function(){this.length=0};j.__name__=["List"],j.prototype={add:function(a){var b=[a];null==this.h?this.h=b:this.q[1]=b,this.q=b,this.length++},isEmpty:function(){return null==this.h},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c[0]==a)return null==b?this.h=c[1]:b[1]=c[1],this.q==c&&(this.q=b),this.length--,!0;b=c,c=c[1]}return!1},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];return this.h=this.h[1],a}}},__class__:j};var k=function(){};k.__name__=["IMap"],Math.__name__=["Math"];var l=function(){};l.__name__=["Reflect"],l.field=function(a,b){try{return a[b]}catch(c){return null}},l.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty;for(var d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};var m=function(){};m.__name__=["Std"],m.string=function(a){return w.Boot.__string_rec(a,"")},m["int"]=function(a){return 0|a},m.parseInt=function(a){var b=parseInt(a,10);return 0!=b||120!=h.cca(a,1)&&88!=h.cca(a,1)||(b=parseInt(a)),isNaN(b)?null:b},m.parseFloat=function(a){return parseFloat(a)};var n=function(){this.b=""};n.__name__=["StringBuf"],n.prototype={add:function(a){this.b+=m.string(a)},__class__:n};var o=function(){};o.__name__=["StringTools"],o.startsWith=function(a,b){return a.length>=b.length&&h.substr(a,0,b.length)==b},o.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c&&h.substr(a,d-c,c)==b},o.replace=function(a,b,c){return a.split(b).join(c)},o.fastCodeAt=function(a,b){return a.charCodeAt(b)};var p={__ename__:!0,__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};p.TNull=["TNull",0],p.TNull.toString=e,p.TNull.__enum__=p,p.TInt=["TInt",1],p.TInt.toString=e,p.TInt.__enum__=p,p.TFloat=["TFloat",2],p.TFloat.toString=e,p.TFloat.__enum__=p,p.TBool=["TBool",3],p.TBool.toString=e,p.TBool.__enum__=p,p.TObject=["TObject",4],p.TObject.toString=e,p.TObject.__enum__=p,p.TFunction=["TFunction",5],p.TFunction.toString=e,p.TFunction.__enum__=p,p.TClass=function(a){var b=["TClass",6,a];return b.__enum__=p,b.toString=e,b},p.TEnum=function(a){var b=["TEnum",7,a];return b.__enum__=p,b.toString=e,b},p.TUnknown=["TUnknown",8],p.TUnknown.toString=e,p.TUnknown.__enum__=p;var q=function(){};q.__name__=["Type"],q.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__},q.getClassName=function(a){var b=a.__name__;return b.join(".")},q.createInstance=function(a,b){var c=b.length;switch(c){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments"}return null},q["typeof"]=function(a){var b=typeof a;switch(b){case"boolean":return p.TBool;case"string":return p.TClass(String);case"number":return Math.ceil(a)==a%2147483648?p.TInt:p.TFloat;case"object":if(null==a)return p.TNull;var c=a.__enum__;if(null!=c)return p.TEnum(c);var d;return d=a instanceof Array&&null==a.__enum__?Array:a.__class__,null!=d?p.TClass(d):p.TObject;case"function":return a.__name__||a.__ename__?p.TObject:p.TFunction;case"undefined":return p.TNull;default:return p.TUnknown}},q.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;d>c;){var e=c++;if(!q.enumEq(a[e],b[e]))return!1}var f=a.__enum__;if(f!=b.__enum__||null==f)return!1}catch(g){return!1}return!0};var r={};r.interfaces={},r.interfaces.IFacade=function(){},r.interfaces.IFacade.__name__=["puremvc","interfaces","IFacade"],r.interfaces.IFacade.prototype={__class__:r.interfaces.IFacade},r.patterns={},r.patterns.facade={},r.patterns.facade.Facade=function(){r.patterns.facade.Facade.instance=this,this.initializeFacade()},r.patterns.facade.Facade.__name__=["puremvc","patterns","facade","Facade"],r.patterns.facade.Facade.__interfaces__=[r.interfaces.IFacade],r.patterns.facade.Facade.getInstance=function(){return null==r.patterns.facade.Facade.instance&&(r.patterns.facade.Facade.instance=new r.patterns.facade.Facade),r.patterns.facade.Facade.instance},r.patterns.facade.Facade.prototype={initializeFacade:function(){this.initializeModel(),this.initializeController(),this.initializeView()},initializeController:function(){null==this.controller&&(this.controller=r.core.Controller.getInstance())},initializeModel:function(){null==this.model&&(this.model=r.core.Model.getInstance())},initializeView:function(){null==this.view&&(this.view=r.core.View.getInstance())},registerCommand:function(a,b){this.controller.registerCommand(a,b)},removeCommand:function(a){this.controller.removeCommand(a)},hasCommand:function(a){return this.controller.hasCommand(a)},registerProxy:function(a){this.model.registerProxy(a)},retrieveProxy:function(a){return this.model.retrieveProxy(a)},removeProxy:function(a){var b=null;return null!=this.model&&(b=this.model.removeProxy(a)),b},hasProxy:function(a){return this.model.hasProxy(a)},registerMediator:function(a){null!=this.view&&this.view.registerMediator(a)},retrieveMediator:function(a){return this.view.retrieveMediator(a)},removeMediator:function(a){var b=null;return null!=this.view&&(b=this.view.removeMediator(a)),b},hasMediator:function(a){return this.view.hasMediator(a)},sendNotification:function(a,b,c){this.notifyObservers(new r.patterns.observer.Notification(a,b,c))},notifyObservers:function(a){null!=this.view&&this.view.notifyObservers(a)},__class__:r.patterns.facade.Facade};var s={};s.AppFacade=function(){r.patterns.facade.Facade.call(this)},s.AppFacade.__name__=["albero","AppFacade"],s.AppFacade.getInstance=function(){return null==r.patterns.facade.Facade.instance&&(r.patterns.facade.Facade.instance=new s.AppFacade),w.Boot.__cast(r.patterns.facade.Facade.instance,s.AppFacade)},s.AppFacade.__super__=r.patterns.facade.Facade,s.AppFacade.prototype=b(r.patterns.facade.Facade.prototype,{initializeModel:function(){r.patterns.facade.Facade.prototype.initializeModel.call(this);for(var a=[new s.proxy.AppStateProxy,new s.proxy.DataStoreProxy,new s.proxy.SettingsProxy,new s.proxy.MsgPackRpcProxy,new s.proxy.AlberoBroadcastProxy,new s.proxy.AlberoServiceProxy,new s.proxy.FileServiceProxy,new s.proxy.FormatterProxy,new s.proxy.RoutingProxy],b=0;b<a.length;){var c=a[b];++b,this.registerProxy(c)}for(var d=0;d<a.length;){var e=a[d];++d,this.autoBind(e)}},initializeView:function(){r.patterns.facade.Facade.prototype.initializeView.call(this);for(var a=[new u.mediator.CommandLineMediator],b=0;b<a.length;){var c=a[b];++b,this.registerMediator(c)}},initializeController:function(){r.patterns.facade.Facade.prototype.initializeController.call(this);for(var a=[s.command.DomainCommand,s.command.SignInCommand,s.command.SignOutCommand,s.command.ReloadDataCommand,s.command.SendCommand,s.command.TalkCommand,s.command.ManageFriendsCommand,s.command.ReadCommand,s.command.LoadStampSetCommand,s.command.FileCommand,s.command.SelectTalkCommand,s.command.UpdateUserCommand,s.command.UpdateProfileCommand,s.command.UrlCommand],b=0;b<a.length;){var c=a[b];++b;var d=o.replace(q.getClassName(c).split(".").pop(),"Command","");this.registerCommand(d,c)}},registerMediator:function(a){this.autoBind(a),r.patterns.facade.Facade.prototype.registerMediator.call(this,a)},autoBind:function(a){for(var b=v.rtti.Meta.getFields(q.getClass(a)),c=0,d=l.fields(b);c<d.length;){var e=d[c];++c;var f=l.field(b,e);if(Object.prototype.hasOwnProperty.call(f,"inject")){var g=this.retrieveProxy(e);null==g||(a[e]=g)}}},startup:function(){w.Boot.__cast(this.retrieveProxy("appState"),s.proxy.AppStateProxy).start()},__class__:s.AppFacade}),s.AppState={__ename__:!0,__constructs__:["Active","Inactive"]},s.AppState.Active=["Active",0],s.AppState.Active.toString=e,s.AppState.Active.__enum__=s.AppState,s.AppState.Inactive=["Inactive",1],s.AppState.Inactive.toString=e,s.AppState.Inactive.__enum__=s.AppState,s.ConnectionStatus={__ename__:!0,__constructs__:["Ok","Error","ConcurrentAccessError","ForcibliyClosedError"]},s.ConnectionStatus.Ok=["Ok",0],s.ConnectionStatus.Ok.toString=e,s.ConnectionStatus.Ok.__enum__=s.ConnectionStatus,s.ConnectionStatus.Error=["Error",1],s.ConnectionStatus.Error.toString=e,s.ConnectionStatus.Error.__enum__=s.ConnectionStatus,s.ConnectionStatus.ConcurrentAccessError=["ConcurrentAccessError",2],s.ConnectionStatus.ConcurrentAccessError.toString=e,s.ConnectionStatus.ConcurrentAccessError.__enum__=s.ConnectionStatus,s.ConnectionStatus.ForcibliyClosedError=["ForcibliyClosedError",3],s.ConnectionStatus.ForcibliyClosedError.toString=e,s.ConnectionStatus.ForcibliyClosedError.__enum__=s.ConnectionStatus,s.History=function(){},s.History.__name__=["albero","History"],s.History.replaceState=function(a,b,c){return null!=window.history?(window.history.replaceState(a,b,c),!0):!1},s.Int64Helper=function(){},s.Int64Helper.__name__=["albero","Int64Helper"],s.Int64Helper.parse=function(a){var b=new g("^\\d+$","");if(!b.match(a))return null;for(var c=new v.Int64(0,0),d=new v.Int64(0,10),e=0,f=a.length;f>e;){var h=e++;c=v.Int64.add(v.Int64.mul(c,d),v.Int64.make(0,m.parseInt(a.charAt(h))))}return c},s.Int64Helper.getHigh=function(a){return a.high},s.Int64Helper.getLow=function(a){return a.low},s.Int64Helper.idStr=function(a){return"_"+a.high+"_"+a.low},s.Int64Helper.makeFromIdStr=function(a){var b=new g("^_(-?\\d*)_(-?\\d*)$","");return b.match(a)?v.Int64.make(m.parseInt(b.matched(1)),m.parseInt(b.matched(2))):null},s.Int64Helper.eq=function(a,b){return null!=a&&null!=b&&a.high==b.high&&a.low==b.low},s.Int64Helper.toFloat=function(a){var b=4294967296,c=a.high,d=a.low;return c*b+(d>=0?d:d+b)},s.Int64Helper.idStrToInt64=function(a){var b=a.split("_");return b.length>2?v.Int64.make(m.parseInt(b[1]),m.parseInt(b[2])):null},s.Int64Helper.decrement=function(a){return null==a?null:v.Int64.sub(a,new v.Int64(0,1))},s.Int64Helper.contains=function(a,b){if(null==a)return!1;for(var c=0;c<a.length;){var d=a[c];if(++c,null!=d&&null!=b&&d.high==b.high&&d.low==b.low)return!0}return!1},s.Int64Helper.remove=function(a,b){if(null==a)return!1;for(var c=0;c<a.length;){var d=a[c];if(++c,null!=d&&null!=b&&d.high==b.high&&d.low==b.low)return h.remove(a,d),!0}return!1},s.Urls={__ename__:!0,__constructs__:["auto","domains","domain","members","talks","actions","console","settings","announcements","error","loading"]},s.Urls.auto=["auto",0],s.Urls.auto.toString=e,s.Urls.auto.__enum__=s.Urls,s.Urls.domains=["domains",1],s.Urls.domains.toString=e,s.Urls.domains.__enum__=s.Urls,s.Urls.domain=function(a){var b=["domain",2,a];return b.__enum__=s.Urls,b.toString=e,b},s.Urls.members=function(a){var b=["members",3,a];return b.__enum__=s.Urls,b.toString=e,b},s.Urls.talks=function(a){var b=["talks",4,a];return b.__enum__=s.Urls,b.toString=e,b},s.Urls.actions=function(a){var b=["actions",5,a];return b.__enum__=s.Urls,b.toString=e,b},s.Urls.console=function(a){var b=["console",6,a];return b.__enum__=s.Urls,b.toString=e,b},s.Urls.settings=function(a){var b=["settings",7,a];return b.__enum__=s.Urls,b.toString=e,b},s.Urls.announcements=["announcements",8],s.Urls.announcements.toString=e,s.Urls.announcements.__enum__=s.Urls,s.Urls.error=["error",9],s.Urls.error.toString=e,s.Urls.error.__enum__=s.Urls,s.Urls.loading=["loading",10],s.Urls.loading.toString=e,s.Urls.loading.__enum__=s.Urls,r.interfaces.INotifier=function(){},r.interfaces.INotifier.__name__=["puremvc","interfaces","INotifier"],r.interfaces.INotifier.prototype={__class__:r.interfaces.INotifier},r.patterns.observer={},r.patterns.observer.Notifier=function(){this.facade=r.patterns.facade.Facade.getInstance()},r.patterns.observer.Notifier.__name__=["puremvc","patterns","observer","Notifier"],r.patterns.observer.Notifier.__interfaces__=[r.interfaces.INotifier],r.patterns.observer.Notifier.prototype={sendNotification:function(a,b,c){this.facade.sendNotification(a,b,c)},__class__:r.patterns.observer.Notifier},r.interfaces.ICommand=function(){},r.interfaces.ICommand.__name__=["puremvc","interfaces","ICommand"],r.interfaces.ICommand.prototype={__class__:r.interfaces.ICommand},r.patterns.command={},r.patterns.command.SimpleCommand=function(){r.patterns.observer.Notifier.call(this)},r.patterns.command.SimpleCommand.__name__=["puremvc","patterns","command","SimpleCommand"],r.patterns.command.SimpleCommand.__interfaces__=[r.interfaces.ICommand],r.patterns.command.SimpleCommand.__super__=r.patterns.observer.Notifier,r.patterns.command.SimpleCommand.prototype=b(r.patterns.observer.Notifier.prototype,{execute:function(){},__class__:r.patterns.command.SimpleCommand}),s.command={},s.command.AutoBindCommand=function(){r.patterns.command.SimpleCommand.call(this),s.AppFacade.getInstance().autoBind(this)},s.command.AutoBindCommand.__name__=["albero","command","AutoBindCommand"],s.command.AutoBindCommand.__super__=r.patterns.command.SimpleCommand,s.command.AutoBindCommand.prototype=b(r.patterns.command.SimpleCommand.prototype,{__class__:s.command.AutoBindCommand}),s.command.DomainCommand=function(){s.command.AutoBindCommand.call(this)},s.command.DomainCommand.__name__=["albero","command","DomainCommand"],s.command.DomainCommand.__super__=s.command.AutoBindCommand,s.command.DomainCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.api.acceptDomainInvite(c);break;case 1:var d=b[2];this.api.deleteDomainInvite(d);break;case 2:var e=b[2];this.api.leaveDomain(e)}},__class__:s.command.DomainCommand}),s.command.DomainAction={__ename__:!0,__constructs__:["ACCEPT_INVITE","DELETE_INVITE","LEAVE"]},s.command.DomainAction.ACCEPT_INVITE=function(a){var b=["ACCEPT_INVITE",0,a];return b.__enum__=s.command.DomainAction,b.toString=e,b},s.command.DomainAction.DELETE_INVITE=function(a){var b=["DELETE_INVITE",1,a];return b.__enum__=s.command.DomainAction,b.toString=e,b},s.command.DomainAction.LEAVE=function(a){var b=["LEAVE",2,a];return b.__enum__=s.command.DomainAction,b.toString=e,b},s.command.FileCommand=function(){s.command.AutoBindCommand.call(this)},s.command.FileCommand.__name__=["albero","command","FileCommand"],s.command.FileCommand.__super__=s.command.AutoBindCommand,s.command.FileCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.upload(d.domainId,d.id,c);break;case 1:var e=b[2];this.api.deleteAttachment(e.id,e.messageId)}},__class__:s.command.FileCommand}),s.command.FileAction={__ename__:!0,__constructs__:["UPLOAD","DELETE"]},s.command.FileAction.UPLOAD=function(a,b){var c=["UPLOAD",0,a,b];return c.__enum__=s.command.FileAction,c.toString=e,c},s.command.FileAction.DELETE=function(a){var b=["DELETE",1,a];return b.__enum__=s.command.FileAction,b.toString=e,b},s.command.LoadStampSetCommand=function(){s.command.AutoBindCommand.call(this)},s.command.LoadStampSetCommand.__name__=["albero","command","LoadStampSetCommand"],s.command.LoadStampSetCommand.__super__=s.command.AutoBindCommand,s.command.LoadStampSetCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(){new Array},__class__:s.command.LoadStampSetCommand}),s.command.ManageFriendsCommand=function(){s.command.AutoBindCommand.call(this)},s.command.ManageFriendsCommand.__name__=["albero","command","ManageFriendsCommand"],s.command.ManageFriendsCommand.__super__=s.command.AutoBindCommand,s.command.ManageFriendsCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody(),c=b.action;switch(c[1]){case 0:for(var d=0,e=b.users;d<e.length;){var f=e[d];++d,this.api.addFriend(f)}break;case 1:for(var g=0,h=b.users;g<h.length;){var i=h[g];++g,this.api.deleteFriend(i)}}},__class__:s.command.ManageFriendsCommand}),s.command.ManageFriendsAction={__ename__:!0,__constructs__:["ADD","DELETE"]},s.command.ManageFriendsAction.ADD=["ADD",0],s.command.ManageFriendsAction.ADD.toString=e,s.command.ManageFriendsAction.ADD.__enum__=s.command.ManageFriendsAction,s.command.ManageFriendsAction.DELETE=["DELETE",1],s.command.ManageFriendsAction.DELETE.toString=e,s.command.ManageFriendsAction.DELETE.__enum__=s.command.ManageFriendsAction,s.command.ReadCommand=function(){s.command.AutoBindCommand.call(this)},s.command.ReadCommand.__name__=["albero","command","ReadCommand"],s.command.ReadCommand.__super__=s.command.AutoBindCommand,s.command.ReadCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.updateReadStatuses(d,c);break;case 1:var e=b[2];this.api.updateAnnouncementReadStatus(e);break;case 2:var f=b[3],g=b[2];this.api.getReadStatus(g,f)}},__class__:s.command.ReadCommand}),s.command.ReadType={__ename__:!0,__constructs__:["TALK","ANNOUNCEMENT","READ_STATUS"]},s.command.ReadType.TALK=function(a,b){var c=["TALK",0,a,b];return c.__enum__=s.command.ReadType,c.toString=e,c},s.command.ReadType.ANNOUNCEMENT=function(a){var b=["ANNOUNCEMENT",1,a];return b.__enum__=s.command.ReadType,b.toString=e,b},s.command.ReadType.READ_STATUS=function(a,b){var c=["READ_STATUS",2,a,b];return c.__enum__=s.command.ReadType,c.toString=e,c},s.command.ReloadDataCommand=function(){s.command.AutoBindCommand.call(this)},s.command.ReloadDataCommand.__name__=["albero","command","ReloadDataCommand"],s.command.ReloadDataCommand.__super__=s.command.AutoBindCommand,s.command.ReloadDataCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:this.api.getDomains();break;case 1:this.api.getFriends(),this.api.getAcquaintances();break;case 2:this.api.getTalks();break;case 3:var c=b[3],d=b[2];this.api.getMessages(d,c);break;case 4:var e=b[2];this.api.getAllUsers(e);break;case 5:var f=b[3],g=b[2];this.api.getUsers(g,f);break;case 6:var h=b[3],i=b[2];this.api.getProfile(i,h);break;case 7:var j=b[3],k=b[2];this.api.searchDomainUsers(k,j);break;case 8:var l=b[2];this.api.getAnnouncements(l);break;case 9:var m=b[5],n=b[4],o=b[3],p=b[2];this.api.getQuestions(p,o,n,m);break;case 10:var q=b[3],r=b[2];this.api.getQuestion(r,q);break;case 11:var s=b[3],t=b[2];this.api.getAttachments(t,s)}},__class__:s.command.ReloadDataCommand}),s.command.ReloadDataType={__ename__:!0,__constructs__:["Domains","Friends","Talks","Messages","AllUsers","GetUsers","GetProfile","SearchDomainUsers","Announcements","Questions","Question","Files"]},s.command.ReloadDataType.Domains=["Domains",0],s.command.ReloadDataType.Domains.toString=e,s.command.ReloadDataType.Domains.__enum__=s.command.ReloadDataType,s.command.ReloadDataType.Friends=["Friends",1],s.command.ReloadDataType.Friends.toString=e,s.command.ReloadDataType.Friends.__enum__=s.command.ReloadDataType,s.command.ReloadDataType.Talks=["Talks",2],s.command.ReloadDataType.Talks.toString=e,s.command.ReloadDataType.Talks.__enum__=s.command.ReloadDataType,s.command.ReloadDataType.Messages=function(a,b){var c=["Messages",3,a,b];return c.__enum__=s.command.ReloadDataType,c.toString=e,c},s.command.ReloadDataType.AllUsers=function(a){var b=["AllUsers",4,a];return b.__enum__=s.command.ReloadDataType,b.toString=e,b},s.command.ReloadDataType.GetUsers=function(a,b){var c=["GetUsers",5,a,b];return c.__enum__=s.command.ReloadDataType,c.toString=e,c},s.command.ReloadDataType.GetProfile=function(a,b){var c=["GetProfile",6,a,b];return c.__enum__=s.command.ReloadDataType,c.toString=e,c},s.command.ReloadDataType.SearchDomainUsers=function(a,b){var c=["SearchDomainUsers",7,a,b];return c.__enum__=s.command.ReloadDataType,c.toString=e,c},s.command.ReloadDataType.Announcements=function(a){var b=["Announcements",8,a];return b.__enum__=s.command.ReloadDataType,b.toString=e,b},s.command.ReloadDataType.Questions=function(a,b,c,d){var f=["Questions",9,a,b,c,d];return f.__enum__=s.command.ReloadDataType,f.toString=e,f},s.command.ReloadDataType.Question=function(a,b){var c=["Question",10,a,b];return c.__enum__=s.command.ReloadDataType,c.toString=e,c},s.command.ReloadDataType.Files=function(a,b){var c=["Files",11,a,b];return c.__enum__=s.command.ReloadDataType,c.toString=e,c},s.command.SelectTalkCommand=function(){s.command.AutoBindCommand.call(this)},s.command.SelectTalkCommand.__name__=["albero","command","SelectTalkCommand"],s.command.SelectTalkCommand.__super__=s.command.AutoBindCommand,s.command.SelectTalkCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();this.settings.setSelectedTalk(b)},__class__:s.command.SelectTalkCommand}),s.command.SendCommand=function(){s.command.AutoBindCommand.call(this)},s.command.SendCommand.__name__=["albero","command","SendCommand"],s.command.SendCommand.__super__=s.command.AutoBindCommand,s.command.SendCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();this.api.createMessage(b.talkId,b.type,b.content)},__class__:s.command.SendCommand}),s.command.SignInCommand=function(){s.command.AutoBindCommand.call(this)},s.command.SignInCommand.__name__=["albero","command","SignInCommand"],s.command.SignInCommand.__super__=s.command.AutoBindCommand,s.command.SignInCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(){var a=this.settings.getAccessToken();if(null!=a)return void this.api.createSession(a);var b;b=null!=z.account?z.account.split(":"):null,null!=b&&2==b.length&&this.api.createAccessToken(b[0],b[1])},__class__:s.command.SignInCommand}),s.command.SignOutCommand=function(){s.command.AutoBindCommand.call(this)},s.command.SignOutCommand.__name__=["albero","command","SignOutCommand"],s.command.SignOutCommand.__super__=s.command.AutoBindCommand,s.command.SignOutCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(){this.api.deleteSession(),this.settings.clearInputTextForAll()},__class__:s.command.SignOutCommand}),s.command.TalkCommand=function(){s.command.AutoBindCommand.call(this)},s.command.TalkCommand.__name__=["albero","command","TalkCommand"],s.command.TalkCommand.__super__=s.command.AutoBindCommand,s.command.TalkCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.api.createTalk(c);break;case 1:var d=b[3],e=b[2];this.api.addTalkers(e,d);break;case 2:var f=b[2];this.api.deleteTalker(f,this.dataStore.me.id);break;case 3:var g=b[5],h=b[4],i=b[3],j=b[2];this.api.updateGroupTalk(j,i,h,g)}},__class__:s.command.TalkCommand}),s.command.TalkAction={__ename__:!0,__constructs__:["NEW","ADD","DELETE","UPDATE"]},s.command.TalkAction.NEW=function(a){var b=["NEW",0,a];return b.__enum__=s.command.TalkAction,b.toString=e,b},s.command.TalkAction.ADD=function(a,b){var c=["ADD",1,a,b];return c.__enum__=s.command.TalkAction,c.toString=e,c},s.command.TalkAction.DELETE=function(a){var b=["DELETE",2,a];return b.__enum__=s.command.TalkAction,b.toString=e,b},s.command.TalkAction.UPDATE=function(a,b,c,d){var f=["UPDATE",3,a,b,c,d];return f.__enum__=s.command.TalkAction,f.toString=e,f},s.command.UpdateProfileCommand=function(){s.command.AutoBindCommand.call(this)},s.command.UpdateProfileCommand.__name__=["albero","command","UpdateProfileCommand"],s.command.UpdateProfileCommand.__super__=s.command.AutoBindCommand,s.command.UpdateProfileCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody().domainId,c=a.getBody().profileItemValues,d=a.getBody().copyToAllDomains,e=this.dataStore.getDomain(b);if(null!=e&&null!=e.profileDefinition.itemDefinitions){var f=new Array;if(d){for(var g=new Array,i=0;i<c.length;){var j=c[i];++i;var k=s.entity.ProfileItemDefinition.findById(e.profileDefinition.itemDefinitions,j.profileItemId);null!=k&&g.push({name:k.name,value:j.value})}for(var l=0,m=this.dataStore.getDomains();l<m.length;){var n=m[l];if(++l,!n.frozen){for(var o=new Array,p=0,q=n.profileDefinition.itemDefinitions;p<q.length;){var r=q[p];if(++p,r.visible&&!r.locked)for(var t=0;t<g.length;){var u=g[t];if(++t,u.name==r.name){var v=new s.entity.ProfileItemValue;v.profileItemId=r.profileItemId,v.value=u.value,o.push(v);break}}}o.length>0&&f.push({domainId:n.id,profileItemValues:o})}}}else{for(var w=new Array,x=(h.iter(c),0);x<c.length;){var y=c[x];++x;var z=s.entity.ProfileItemDefinition.findById(e.profileDefinition.itemDefinitions,y.profileItemId);null!=z&&z.visible&&!z.locked&&w.push(y)}w.length>0&&f.push({domainId:e.id,profileItemValues:w})}0==f.length?this.sendNotification("update_profile_responsed",this.dataStore.me):this.api.updateProfile(f)}},__class__:s.command.UpdateProfileCommand}),s.command.UpdateUserCommand=function(){s.command.AutoBindCommand.call(this)},s.command.UpdateUserCommand.__name__=["albero","command","UpdateUserCommand"],s.command.UpdateUserCommand.__super__=s.command.AutoBindCommand,s.command.UpdateUserCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();(null==b.profileImage||o.startsWith(b.profileImage.type,"image/"))&&this.api.updateUser(b.displayName,b.profileImage,b.profileImageUrl,b.phoneticDisplayName)},__class__:s.command.UpdateUserCommand}),s.command.UrlCommand=function(){s.command.AutoBindCommand.call(this)},s.command.UrlCommand.__name__=["albero","command","UrlCommand"],s.command.UrlCommand.__super__=s.command.AutoBindCommand,s.command.UrlCommand.prototype=b(s.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.routing.forward(c);break;case 1:var d=b[2];this.routing.redirect(d);break;case 2:this.routing.back()}},__class__:s.command.UrlCommand}),s.command.UrlAction={__ename__:!0,__constructs__:["FORWARD","REDIRECT","BACK"]},s.command.UrlAction.FORWARD=function(a){var b=["FORWARD",0,a];return b.__enum__=s.command.UrlAction,b.toString=e,b},s.command.UrlAction.REDIRECT=function(a){var b=["REDIRECT",1,a];return b.__enum__=s.command.UrlAction,b.toString=e,b},s.command.UrlAction.BACK=["BACK",2],s.command.UrlAction.BACK.toString=e,s.command.UrlAction.BACK.__enum__=s.command.UrlAction,s.entity={},s.entity.Announcement=function(a){null!=a&&(this.id=a.announcement_id,this.domainId=a.domain_id,this.groupId=a.group_id,this.groupName=a.group_name,this.type=s.entity.Message.typeOf(a.type),this.content=a.content,this.userId=a.user_id,this.userName=a.user_name,this.createdAt=a.created_at)},s.entity.Announcement.__name__=["albero","entity","Announcement"],s.entity.Announcement.prototype={__class__:s.entity.Announcement},s.entity.AnnouncementStatus=function(a){null!=a&&(this.domainId=a.domain_id,this.unreadCount=null!=a.unread_count?a.unread_count:0,this.maxAnnouncementId=a.max_announcement_id,this.maxReadAnnouncementId=a.max_read_announcement_id)},s.entity.AnnouncementStatus.__name__=["albero","entity","AnnouncementStatus"],s.entity.AnnouncementStatus.prototype={__class__:s.entity.AnnouncementStatus},s.entity.Configuration=function(){},s.entity.Configuration.__name__=["albero","entity","Configuration"],s.entity.Configuration.prototype={__class__:s.entity.Configuration},s.entity.Domain=function(a){null!=a&&(this.id=a.domain_id,this.name=a.domain_name,this.role=new s.entity.DomainRole(a.role),this.frozen=a.frozen,this.updatedAt=a.updated_at,this.plan=new s.entity.Plan(a.plan),this.closed=!1,this.profileDefinition=new s.entity.ProfileDefinition(a.profile_definition))},s.entity.Domain.__name__=["albero","entity","Domain"],s.entity.Domain.prototype={__class__:s.entity.Domain},s.entity.DomainRole=function(a){null!=a&&(this.type=this.typeOf(a.type),this.allowGuests=this.def(a.allow_guests,!0),this.allowCreateAttachments=this.def(a.allow_create_attachments,!0),this.allowReadAttachments=this.def(a.allow_read_attachments,!0),this.allowCreateAnnouncement=this.def(a.allow_create_announcement,!1),this.allowReadAnnouncements=a.allow_read_announcements,null==this.allowReadAnnouncements&&(this.allowReadAnnouncements=!0),this.allowListUsers=a.allow_list_users,null==this.allowListUsers&&(this.allowListUsers=!0))},s.entity.DomainRole.__name__=["albero","entity","DomainRole"],s.entity.DomainRole.prototype={def:function(a,b){return a?a:b},typeOf:function(a){switch(a){case 10:return s.entity.DomainRoleType.owner;case 20:return s.entity.DomainRoleType.manager;case 30:return s.entity.DomainRoleType.user;default:return s.entity.DomainRoleType.guest}},__class__:s.entity.DomainRole},s.entity.DomainRoleType={__ename__:!0,__constructs__:["owner","manager","user","guest"]},s.entity.DomainRoleType.owner=["owner",0],s.entity.DomainRoleType.owner.toString=e,s.entity.DomainRoleType.owner.__enum__=s.entity.DomainRoleType,s.entity.DomainRoleType.manager=["manager",1],s.entity.DomainRoleType.manager.toString=e,s.entity.DomainRoleType.manager.__enum__=s.entity.DomainRoleType,s.entity.DomainRoleType.user=["user",2],s.entity.DomainRoleType.user.toString=e,s.entity.DomainRoleType.user.__enum__=s.entity.DomainRoleType,s.entity.DomainRoleType.guest=["guest",3],s.entity.DomainRoleType.guest.toString=e,s.entity.DomainRoleType.guest.__enum__=s.entity.DomainRoleType,s.entity.DomainInvite=function(a){null!=a&&(this.id=a.domain_id,this.name=a.domain_name,this.updatedAt=a.updated_at)
},s.entity.DomainInvite.__name__=["albero","entity","DomainInvite"],s.entity.DomainInvite.prototype={__class__:s.entity.DomainInvite},s.entity.User=function(a){null!=a&&(this.id=a.user_id,this.displayName=a.display_name,this.canonicalDisplayName=a.canonical_display_name,this.phoneticDisplayName=a.phonetic_display_name,this.canonicalPhoneticDisplayName=a.canonical_phonetic_display_name,this.profileImageUrl=a.profile_image_url,this.updatedAt=a.updated_at)},s.entity.User.__name__=["albero","entity","User"],s.entity.User.prototype={__class__:s.entity.User},s.entity.DomainUser=function(a){if(s.entity.User.call(this,a),null!=a&&(this.domainId=a.domain_id,null!=a.profile_contact)){this.profileContact=new Array;var b,c=0;for(b=w.Boot.__cast(a.profile_contact,Array);c<b.length;){var d=b[c];++c,this.profileContact.push(new s.entity.ProfileItemValue(d))}}},s.entity.DomainUser.__name__=["albero","entity","DomainUser"],s.entity.DomainUser.__super__=s.entity.User,s.entity.DomainUser.prototype=b(s.entity.User.prototype,{match:function(a,b){if(null==a||0==a.length)return!0;if((null==this.canonicalDisplayName||0==this.canonicalDisplayName.length)&&(this.canonicalDisplayName=s.js.TextCanonicalizer.canonicalize(this.displayName)),this.canonicalDisplayName.indexOf(a)>-1)return!0;if(null!=this.canonicalPhoneticDisplayName&&this.canonicalPhoneticDisplayName.indexOf(a)>-1)return!0;if(null!=this.profileContact&&null!=b.profileDefinition.itemDefinitions)for(var c=0,d=this.profileContact;c<d.length;){var e=d[c];++c;for(var f=0,g=b.profileDefinition.itemDefinitions;f<g.length;){var h=g[f];if(++f,h.profileItemId==e.profileItemId){if(h.visible&&10==h.group&&e.canonicalValue.indexOf(a)>-1)return!0;break}}}return!1},__class__:s.entity.DomainUser}),s.entity.FileInfo=function(a){null!=a&&(this.messageId=a.message_id,this.talkId=a.talk_id,this.id=a.file_id,this.userId=a.user_id,this.name=a.name,this.contentType=a.content_type,this.contentSize=a.content_size,this.url=a.url,this.thumbUrl=a.thumbnail_url,this.updatedAt=a.updated_at,this.file=a.file,this.thumbFile=a.thumbnail_file)},s.entity.FileInfo.__name__=["albero","entity","FileInfo"],s.entity.FileInfo.prototype={__class__:s.entity.FileInfo},s.entity.FileInfoDeletion=function(a){null!=a&&(this.messageId=a[0],this.talkId=a[1],this.fileId=a[2])},s.entity.FileInfoDeletion.__name__=["albero","entity","FileInfoDeletion"],s.entity.FileInfoDeletion.prototype={__class__:s.entity.FileInfoDeletion},s.entity.Me=function(a){if(s.entity.User.call(this,a),null!=a&&(this.email=a.email,null!=a.profiles)){this.profiles=new Array;var b,c=0;for(b=w.Boot.__cast(a.profiles,Array);c<b.length;){var d=b[c];++c,this.profiles.push(new s.entity.Profile(d))}}},s.entity.Me.__name__=["albero","entity","Me"],s.entity.Me.__super__=s.entity.User,s.entity.Me.prototype=b(s.entity.User.prototype,{toDomainUser:function(a){var b=new s.entity.DomainUser;if(b.id=this.id,b.domainId=a,b.displayName=this.displayName,b.canonicalDisplayName=this.canonicalDisplayName,b.phoneticDisplayName=this.phoneticDisplayName,b.canonicalPhoneticDisplayName=this.canonicalPhoneticDisplayName,b.profileImageUrl=this.profileImageUrl,b.updatedAt=this.updatedAt,b.email=this.email,null!=this.profiles)for(var c=0,d=this.profiles;c<d.length;){var e=d[c];if(++c,s.Int64Helper.eq(e.domainId,a)){b.profileContact=e.itemValues;break}}return b},__class__:s.entity.Me}),s.entity.Message=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.userId=a.user_id,this.type=s.entity.Message.typeOf(a.type),this.content=a.content,this.createdAt=a.created_at,this.readCount=a.read_count,this.readUserIds=a.read_user_ids,this.isUnreadCountTarget=null==a.is_unread_count_target?!0:a.is_unread_count_target)},s.entity.Message.__name__=["albero","entity","Message"],s.entity.Message.typeOf=function(a){switch(a){case 0:return s.entity.MessageType.system;case 1:return s.entity.MessageType.text;case 2:return s.entity.MessageType.stamp;case 3:return s.entity.MessageType.geo;case 4:return s.entity.MessageType.file;case 500:return s.entity.MessageType.yesOrNo;case 501:return s.entity.MessageType.yesOrNoReply;case 502:return s.entity.MessageType.selectOne;case 503:return s.entity.MessageType.selectOneReply;case 504:return s.entity.MessageType.todo;case 505:return s.entity.MessageType.todoDone;case 506:return s.entity.MessageType.yesOrNoClosed;case 507:return s.entity.MessageType.selectOneClosed;case 508:return s.entity.MessageType.todoClosed;case 600:return s.entity.MessageType.phoneCall;case 601:return s.entity.MessageType.phoneReceive;default:return s.entity.MessageType.unknown}},s.entity.Message.enumIndex=function(a){switch(a[1]){case 0:case 1:case 2:case 3:case 4:return a[1];case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:return 500+a[1]-5;case 14:case 15:return 600+a[1]-14;default:return-1}},s.entity.Message.prototype={__class__:s.entity.Message},s.entity.MessageType={__ename__:!0,__constructs__:["system","text","stamp","geo","file","yesOrNo","yesOrNoReply","selectOne","selectOneReply","todo","todoDone","yesOrNoClosed","selectOneClosed","todoClosed","phoneCall","phoneReceive","unknown"]},s.entity.MessageType.system=["system",0],s.entity.MessageType.system.toString=e,s.entity.MessageType.system.__enum__=s.entity.MessageType,s.entity.MessageType.text=["text",1],s.entity.MessageType.text.toString=e,s.entity.MessageType.text.__enum__=s.entity.MessageType,s.entity.MessageType.stamp=["stamp",2],s.entity.MessageType.stamp.toString=e,s.entity.MessageType.stamp.__enum__=s.entity.MessageType,s.entity.MessageType.geo=["geo",3],s.entity.MessageType.geo.toString=e,s.entity.MessageType.geo.__enum__=s.entity.MessageType,s.entity.MessageType.file=["file",4],s.entity.MessageType.file.toString=e,s.entity.MessageType.file.__enum__=s.entity.MessageType,s.entity.MessageType.yesOrNo=["yesOrNo",5],s.entity.MessageType.yesOrNo.toString=e,s.entity.MessageType.yesOrNo.__enum__=s.entity.MessageType,s.entity.MessageType.yesOrNoReply=["yesOrNoReply",6],s.entity.MessageType.yesOrNoReply.toString=e,s.entity.MessageType.yesOrNoReply.__enum__=s.entity.MessageType,s.entity.MessageType.selectOne=["selectOne",7],s.entity.MessageType.selectOne.toString=e,s.entity.MessageType.selectOne.__enum__=s.entity.MessageType,s.entity.MessageType.selectOneReply=["selectOneReply",8],s.entity.MessageType.selectOneReply.toString=e,s.entity.MessageType.selectOneReply.__enum__=s.entity.MessageType,s.entity.MessageType.todo=["todo",9],s.entity.MessageType.todo.toString=e,s.entity.MessageType.todo.__enum__=s.entity.MessageType,s.entity.MessageType.todoDone=["todoDone",10],s.entity.MessageType.todoDone.toString=e,s.entity.MessageType.todoDone.__enum__=s.entity.MessageType,s.entity.MessageType.yesOrNoClosed=["yesOrNoClosed",11],s.entity.MessageType.yesOrNoClosed.toString=e,s.entity.MessageType.yesOrNoClosed.__enum__=s.entity.MessageType,s.entity.MessageType.selectOneClosed=["selectOneClosed",12],s.entity.MessageType.selectOneClosed.toString=e,s.entity.MessageType.selectOneClosed.__enum__=s.entity.MessageType,s.entity.MessageType.todoClosed=["todoClosed",13],s.entity.MessageType.todoClosed.toString=e,s.entity.MessageType.todoClosed.__enum__=s.entity.MessageType,s.entity.MessageType.phoneCall=["phoneCall",14],s.entity.MessageType.phoneCall.toString=e,s.entity.MessageType.phoneCall.__enum__=s.entity.MessageType,s.entity.MessageType.phoneReceive=["phoneReceive",15],s.entity.MessageType.phoneReceive.toString=e,s.entity.MessageType.phoneReceive.__enum__=s.entity.MessageType,s.entity.MessageType.unknown=["unknown",16],s.entity.MessageType.unknown.toString=e,s.entity.MessageType.unknown.__enum__=s.entity.MessageType,s.entity.MessageReadStatus=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.readUserIds=a.read_user_ids,this.unreadUserIds=a.unread_user_ids)},s.entity.MessageReadStatus.__name__=["albero","entity","MessageReadStatus"],s.entity.MessageReadStatus.prototype={__class__:s.entity.MessageReadStatus},s.entity.MessageReadStatusesUpdate=function(a){null!=a&&(this.talkId=a.talk_id,this.messageIds=a.message_ids,this.readUserIds=a.read_user_ids,this.messageIdsExcludingUnreadCountTargets=a.message_ids_excluding_unread_count_targets,null==this.messageIdsExcludingUnreadCountTargets&&(this.messageIdsExcludingUnreadCountTargets=new Array))},s.entity.MessageReadStatusesUpdate.__name__=["albero","entity","MessageReadStatusesUpdate"],s.entity.MessageReadStatusesUpdate.prototype={__class__:s.entity.MessageReadStatusesUpdate},s.entity.Plan=function(a){null!=a&&(this.name=a.plan_name,this.trial=a.trial)},s.entity.Plan.__name__=["albero","entity","Plan"],s.entity.Plan.prototype={__class__:s.entity.Plan},s.entity.Profile=function(a){if(null!=a&&(this.domainId=a.domain_id,this.userId=a.user_id,null!=a.item_values)){this.itemValues=new Array;var b,c=0;for(b=w.Boot.__cast(a.item_values,Array);c<b.length;){var d=b[c];++c,this.itemValues.push(new s.entity.ProfileItemValue(d))}}},s.entity.Profile.__name__=["albero","entity","Profile"],s.entity.Profile.prototype={__class__:s.entity.Profile},s.entity.ProfileDefinition=function(a){if(null!=a&&(this.domainId=a.domain_id,null!=a.item_definitions)){this.itemDefinitions=new Array;var b,c=0;for(b=w.Boot.__cast(a.item_definitions,Array);c<b.length;){var d=b[c];++c,this.itemDefinitions.push(new s.entity.ProfileItemDefinition(d))}}},s.entity.ProfileDefinition.__name__=["albero","entity","ProfileDefinition"],s.entity.ProfileDefinition.isSameProfileItemDefinitions=function(a,b){if(b.length!=a.length)return!1;for(var c=0,d=b.length;d>c;){var e=c++;if(b[e].profileItemId!=a[e].profileItemId)return!1}return!0},s.entity.ProfileDefinition.prototype={getVisibleItemDefinition:function(a){null==a&&(a=!1);var b=new Array;if(null!=this.itemDefinitions)for(var c=0,d=this.itemDefinitions;c<d.length;){var e=d[c];++c,e.visible&&(a||10==e.group)&&b.push(e)}return b},__class__:s.entity.ProfileDefinition},s.entity.ProfileItemDefinition=function(a){this.locked=!1,this.visible=!0,null!=a&&(this.profileItemId=a.profile_item_id,this.group=a.group,this.name=a.name,this.valueType=a.value_type,null!=a.visible&&(this.visible=a.visible),null!=a.locked&&(this.locked=a.locked))},s.entity.ProfileItemDefinition.__name__=["albero","entity","ProfileItemDefinition"],s.entity.ProfileItemDefinition.findById=function(a,b){for(var c=0;c<a.length;){var d=a[c];if(++c,d.profileItemId==b)return d}return null},s.entity.ProfileItemDefinition.prototype={__class__:s.entity.ProfileItemDefinition},s.entity.ProfileItemValue=function(a){null!=a&&(this.profileItemId=a.profile_item_id,this.value=a.value,this.canonicalValue=a.canonical_value)},s.entity.ProfileItemValue.__name__=["albero","entity","ProfileItemValue"],s.entity.ProfileItemValue.findById=function(a,b){for(var c=0;c<a.length;){var d=a[c];if(++c,d.profileItemId==b)return d}return null},s.entity.ProfileItemValue.prototype={__class__:s.entity.ProfileItemValue},s.entity.Question=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.type=s.entity.Message.typeOf(a.type),this.content=a.content,this.userId=a.user_id,this.recipientIds=a.assigned_user_ids,this.responses=this.createResponses(a.responses),this.listing=a.listing,this.closingType=s.entity.Question.typeOf(a.closing_type),this.maxResponseId=a.max_response_id,this.lastResponse=a.last_response,this.lastResponseUserId=a.last_response_user_id,this.createdAt=a.created_at,this.updatedAt=a.updated_at,this.responded=a.responded,this.closed=a.closed)},s.entity.Question.__name__=["albero","entity","Question"],s.entity.Question.typeOf=function(a){switch(a){case 0:return s.entity.QuestionClosingType.any;case 1:return s.entity.QuestionClosingType.all;default:return s.entity.QuestionClosingType.unknown}},s.entity.Question.prototype={createResponses:function(a){var b=[];if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c,b.push(new s.entity.QuestionResponse(d))}return b},isCompleted:function(a){if(q.enumEq(this.type,s.entity.MessageType.todo)){if(q.enumEq(this.closingType,s.entity.QuestionClosingType.any)){if(null!=this.lastResponse&&"DONE"==this.responses[this.lastResponse].content)return!0}else{if(!this.responded)return!1;for(var b=0,c=this.responses;b<c.length;){var d=c[b];if(++b,s.Int64Helper.contains(d.userIds,a))return"DONE"==d.content?!0:!1}}return!1}return q.enumEq(this.closingType,s.entity.QuestionClosingType.any)?null!=this.lastResponse:this.responded},__class__:s.entity.Question},s.entity.QuestionResponse=function(a){null!=a&&(this.content=a.content,this.count=a.count,this.userIds=a.user_ids)},s.entity.QuestionResponse.__name__=["albero","entity","QuestionResponse"],s.entity.QuestionResponse.prototype={__class__:s.entity.QuestionResponse},s.entity.QuestionClosingType={__ename__:!0,__constructs__:["any","all","unknown"]},s.entity.QuestionClosingType.any=["any",0],s.entity.QuestionClosingType.any.toString=e,s.entity.QuestionClosingType.any.__enum__=s.entity.QuestionClosingType,s.entity.QuestionClosingType.all=["all",1],s.entity.QuestionClosingType.all.toString=e,s.entity.QuestionClosingType.all.__enum__=s.entity.QuestionClosingType,s.entity.QuestionClosingType.unknown=["unknown",2],s.entity.QuestionClosingType.unknown.toString=e,s.entity.QuestionClosingType.unknown.__enum__=s.entity.QuestionClosingType,s.entity.QuestionFromType={__ename__:!0,__constructs__:["fromSelf","fromOther"]},s.entity.QuestionFromType.fromSelf=["fromSelf",0],s.entity.QuestionFromType.fromSelf.toString=e,s.entity.QuestionFromType.fromSelf.__enum__=s.entity.QuestionFromType,s.entity.QuestionFromType.fromOther=["fromOther",1],s.entity.QuestionFromType.fromOther.toString=e,s.entity.QuestionFromType.fromOther.__enum__=s.entity.QuestionFromType,s.entity.QuestionFilter={__ename__:!0,__constructs__:["onlyClosed","onlyUnclosed","noFilter"]},s.entity.QuestionFilter.onlyClosed=["onlyClosed",0],s.entity.QuestionFilter.onlyClosed.toString=e,s.entity.QuestionFilter.onlyClosed.__enum__=s.entity.QuestionFilter,s.entity.QuestionFilter.onlyUnclosed=["onlyUnclosed",1],s.entity.QuestionFilter.onlyUnclosed.toString=e,s.entity.QuestionFilter.onlyUnclosed.__enum__=s.entity.QuestionFilter,s.entity.QuestionFilter.noFilter=["noFilter",2],s.entity.QuestionFilter.noFilter.toString=e,s.entity.QuestionFilter.noFilter.__enum__=s.entity.QuestionFilter,s.entity.StampSet=function(){},s.entity.StampSet.__name__=["albero","entity","StampSet"],s.entity.StampSet.prototype={__class__:s.entity.StampSet},s.entity.Talk=function(a){null!=a&&(this.id=a.talk_id,this.domainId=a.domain_id,this.type=this.typeOf(a.type),this.name=a.talk_name,this.iconUrl=a.icon_url,this.userIds=a.user_ids,this.guestIds=a.inviting_guest_ids,this.updatedAt=a.updated_at,this.leftUsers=this.getUsers(a.left_users))},s.entity.Talk.__name__=["albero","entity","Talk"],s.entity.Talk.prototype={typeOf:function(a){switch(a){case 1:return s.entity.TalkType.PairTalk;case 2:return s.entity.TalkType.GroupTalk;default:return s.entity.TalkType.Unknown}},getUsers:function(a){if(null==a)return null;for(var b=new Array,c=0;c<a.length;){var d=a[c];++c,b.push(new s.entity.DomainUser(d))}return b},__class__:s.entity.Talk},s.entity.TalkType={__ename__:!0,__constructs__:["Unknown","PairTalk","GroupTalk"]},s.entity.TalkType.Unknown=["Unknown",0],s.entity.TalkType.Unknown.toString=e,s.entity.TalkType.Unknown.__enum__=s.entity.TalkType,s.entity.TalkType.PairTalk=["PairTalk",1],s.entity.TalkType.PairTalk.toString=e,s.entity.TalkType.PairTalk.__enum__=s.entity.TalkType,s.entity.TalkType.GroupTalk=["GroupTalk",2],s.entity.TalkType.GroupTalk.toString=e,s.entity.TalkType.GroupTalk.__enum__=s.entity.TalkType,s.entity.TalkStatus=function(a){this.unreadCount=0,null!=a&&(this.id=a.talk_id,this.unreadCount=null!=a.unread_count?a.unread_count:0,this.maxMessageId=a.max_message_id,this.maxMessage=null!=a.max_message?new s.entity.Message(a.max_message):null,this.maxReadMessageId=a.max_read_message_id,this.maxEveryoneReadMessageId=a.max_everyone_read_message_id)},s.entity.TalkStatus.__name__=["albero","entity","TalkStatus"],s.entity.TalkStatus.prototype={__class__:s.entity.TalkStatus},s.entity.TalkStatusUpdate=function(a){null!=a&&(this.talkId=a.talk_id,this.maxEveryoneReadMessageId=a.max_everyone_read_message_id)},s.entity.TalkStatusUpdate.__name__=["albero","entity","TalkStatusUpdate"],s.entity.TalkStatusUpdate.prototype={__class__:s.entity.TalkStatusUpdate},s.js={},s.js.Base64=function(){},s.js.Base64.__name__=["albero","js","Base64"],s.js.Base64.initCodes=function(){for(var a=new Array,b=0,c=s.js.Base64.BASE64.length;c>b;){var d=b++;a[s.js.Base64.BASE64.charCodeAt(d)]=d}return a},s.js.Base64.encode=function(a){for(var b=a,c=0,d=b.length-2,e=new n,f=s.js.Base64.BASE64;d>c;){var g=b.get(c++),h=b.get(c++),i=b.get(c++);e.add(f.charAt(g>>2)),e.add(f.charAt(63&(g<<4|h>>4))),e.add(f.charAt(63&(h<<2|i>>6))),e.add(f.charAt(63&i))}if(c==d){var j=b.get(c++),k=b.get(c++);e.add(f.charAt(j>>2)),e.add(f.charAt(63&(j<<4|k>>4))),e.add(f.charAt(k<<2&63))}else if(c==d+1){var l=b.get(c++);e.add(f.charAt(l>>2)),e.add(f.charAt(l<<4&63))}var m=e.b,o=m.length%4;switch(o){case 2:m+="==";break;case 3:m+="="}return m},s.js.Base64.decode=function(a){var b=a.length-1;"="==a.charAt(b)&&("="==a.charAt(b-1)&&b--,a=h.substr(a,0,b));var c=a.length,d=a,e=s.js.Base64.CODES;null==e&&(e=s.js.Base64.initCodes(),s.js.Base64.CODES=e);var f,g=0,i=3&c;f=3*(c>>2)+(i>=2?i-1:0);for(var j=g+(c-i),k=v.io.Bytes.alloc(f),l=0;j>g;){var m=e[o.fastCodeAt(d,g++)],n=e[o.fastCodeAt(d,g++)];k.set(l++,m<<2|n>>4);var p=e[o.fastCodeAt(d,g++)];k.set(l++,n<<4|p>>2);var q=e[o.fastCodeAt(d,g++)];k.set(l++,p<<6|q)}if(i>=2){var r=e[o.fastCodeAt(d,g++)],t=e[o.fastCodeAt(d,g++)];if(k.set(l++,r<<2|t>>4),3==i){var u=e[o.fastCodeAt(d,g++)];k.set(l++,t<<4|u>>2)}}return k};var t=a.AlberoLog=function(){};t.__name__=["AlberoLog"],t.dateStr=function(){return"["+function(){var a,b=new Date;return a=h.dateStr(b)}(this)+"] "},s.js.TextCanonicalizer=function(){},s.js.TextCanonicalizer.__name__=["albero","js","TextCanonicalizer"],s.js.TextCanonicalizer.canonicalize=function(a){return s.js.TextCanonicalizer.basicLatinAlphabetToUpperCase(s.js.TextCanonicalizer.hiraganaToKatakana(s.js.TextCanonicalizer.normalize(s.js.TextCanonicalizer.eraseInvisible(a))))},s.js.TextCanonicalizer.basicLatinAlphabetToUpperCase=function(a){return a.toUpperCase()},s.js.TextCanonicalizer.hiraganaToKatakana=function(a){for(var b=0,c="",d=0,e=a.length;e>d;){var f=d++,g=h.cca(a,f);g>=s.js.TextCanonicalizer.HIRAGANA_SMALL_A&&g<=s.js.TextCanonicalizer.HIRAGANA_NN&&(c+=a.substring(b,f),c+=String.fromCharCode(g+(s.js.TextCanonicalizer.KATAKANA_SMALL_A-s.js.TextCanonicalizer.HIRAGANA_SMALL_A)),b=f+1)}return c+=a.substring(b,a.length)},s.js.TextCanonicalizer.normalize=function(a){return a.normalize("NFKC")},s.js.TextCanonicalizer.eraseInvisible=function(a){var b=new g("[\\u0000-\\u0020]","g");return b.replace(a,"")},s.js.WebSocket=function(a){this.ws=new WebSocket(a),H.websocketsbinary&&(this.ws.binaryType="arraybuffer"),this.ws.onopen=d(this,this.onOpen),this.ws.onmessage=d(this,this.onMessage),this.ws.onerror=d(this,this.onError),this.ws.onclose=d(this,this.onClose)},s.js.WebSocket.__name__=["albero","js","WebSocket"],s.js.WebSocket.prototype={onOpen:function(){null!=console&&console.info(t.dateStr(),"WebSocket opened.","","","",""),null!=this.onopen&&this.onopen()},onMessage:function(a){if(null!=this.onmessage){var b=null;b=H.websocketsbinary?v.io.Bytes.ofData(new Uint8Array(a.data)):s.js.Base64.decode(a.data),this.onmessage(b)}},onError:function(a){null!=console&&console.error(t.dateStr(),"WebSocket error. event:",a,"","",""),null!=this.onerror&&this.onerror()},onClose:function(a){null!=console&&console.info(t.dateStr(),"WebSocket closed. event:%s reason:%s wasClean:%s",a.code,a.reason,a.wasClean,""),null!=this.onclose&&this.onclose(a.code,a.reason,a.wasClean)},close:function(){this.ws.close()},send:function(a){this.ws.send(H.websocketsbinary?new Uint8Array(a.b.slice()).buffer:s.js.Base64.encode(a))},isClosed:function(){return null==this.ws||3==this.ws.readyState},__class__:s.js.WebSocket},r.interfaces.IProxy=function(){},r.interfaces.IProxy.__name__=["puremvc","interfaces","IProxy"],r.interfaces.IProxy.prototype={__class__:r.interfaces.IProxy},r.patterns.proxy={},r.patterns.proxy.Proxy=function(a,b){r.patterns.observer.Notifier.call(this),this.proxyName=null!=a?a:r.patterns.proxy.Proxy.NAME,null!=b&&this.setData(b)},r.patterns.proxy.Proxy.__name__=["puremvc","patterns","proxy","Proxy"],r.patterns.proxy.Proxy.__interfaces__=[r.interfaces.IProxy],r.patterns.proxy.Proxy.__super__=r.patterns.observer.Notifier,r.patterns.proxy.Proxy.prototype=b(r.patterns.observer.Notifier.prototype,{getProxyName:function(){return this.proxyName},setData:function(a){this.data=a},getData:function(){return this.data},onRegister:function(){},onRemove:function(){},__class__:r.patterns.proxy.Proxy}),s.proxy={},s.proxy.AlberoBroadcastProxy=function(){r.patterns.proxy.Proxy.call(this,"broadcast")},s.proxy.AlberoBroadcastProxy.__name__=["albero","proxy","AlberoBroadcastProxy"],s.proxy.AlberoBroadcastProxy.__super__=r.patterns.proxy.Proxy,s.proxy.AlberoBroadcastProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{handleNotification:function(a,b,c){var d=this;switch(a){case"notify_update_user":if(b instanceof Array&&null==b.__enum__){var e=new s.entity.DomainUser(b[1]);this.dataStore.setUserIfLatest(null,e)}else{var f=new s.entity.Me(b);t.DEBUG&&null!=console&&console.log(t.dateStr(),"Current user updated. user:",f,"","",""),this.dataStore.setMe(f)}c();break;case"notify_add_friend":var g=new s.entity.DomainUser(b[1]);this.dataStore.addFriend(g),this.sendNotification(a,g),c();break;case"notify_add_acquaintance":var h=new s.entity.DomainUser(b[1]);this.dataStore.addAcquaintance(h),this.sendNotification(a,h),c();break;case"notify_join_domain":var i=new s.entity.Domain(b);this.dataStore.setDomain(i),this.sendNotification(a,[null,i]),c();break;case"notify_update_domain":var j=new s.entity.Domain(b),k=this.dataStore.getDomain(j.id);if(this.dataStore.setDomain(j),null!=k&&k.role.allowReadAnnouncements&&!j.role.allowReadAnnouncements){this.dataStore.removeAnnouncementStatus(k.id);var l=new s.entity.AnnouncementStatus;l.domainId=j.id,this.sendNotification("notify_update_announcement_status",l)}this.sendNotification(a,[k,j]),c();break;case"notify_add_domain_invite":var m=new s.entity.DomainInvite(b);this.dataStore.setDomainInvite(m),this.sendNotification(a,m),c();break;case"notify_create_pair_talk":case"notify_create_group_talk":case"notify_update_group_talk":case"notify_add_talkers":case"notify_delete_talker":var n=new s.entity.Talk(b);this.dataStore.setTalk(n),this.sendNotification(a,n),c();break;case"notify_create_message":var o=new s.entity.Message(b),p=this.newTalkStatusByMessage(o);null!=p&&this.sendNotification("notify_update_local_talk_status",p);var q=o.type;switch(q[1]){case 15:this.sendNotification("phone_call_connected",o.content),this.sendNotification(a,o),c();break;case 5:case 7:case 9:v.Timer.delay(function(){d.sendNotification("ReloadData",s.command.ReloadDataType.Question(o.id,function(){d.sendNotification(a,o),c()}))},500);break;case 6:case 8:case 10:case 11:case 12:case 13:v.Timer.delay(function(){d.sendNotification("ReloadData",s.command.ReloadDataType.Question(o.content.in_reply_to,function(){d.sendNotification(a,o),c()}))},500);break;case 4:if(null!=o.content.file_id){var r=new s.entity.FileInfo;r.messageId=o.id,r.talkId=o.talkId,r.userId=o.userId,r.updatedAt=o.createdAt,r.id=o.content.file_id,r.name=o.content.name,r.contentType=o.content.content_type,r.contentSize=o.content.content_size,r.url=o.content.url,this.sendNotification("notify_create_attachment",r)}this.sendNotification(a,o),c();break;case 0:var u=o.content,w=null,x=u.type;switch(x){case"delete_talker":w=u.deleted_user_id;break;case"hide_pair_talk":w=u.user_id}if(null==w)return;for(var y=o.talkId,z=this.dataStore.getQuestions(y,w),A=0;A<z.length;){var B=z[A];++A,B.closed=!0,this.sendNotification("notify_update_question",B)}this.sendNotification(a,o),c();break;default:this.sendNotification(a,o),c()}break;case"notify_update_read_statuses":var C=new s.entity.MessageReadStatusesUpdate(b),D=this.updateTalkStatus(C);null!=D&&this.sendNotification("notify_update_local_talk_status",D),this.sendNotification(a,C),c();break;case"notify_update_talk_status":var E=new s.entity.TalkStatusUpdate(b),F=this.dataStore.getTalkStatus(E.talkId);null!=F&&(null==F.maxEveryoneReadMessageId||v.Int64.compare(F.maxEveryoneReadMessageId,E.maxEveryoneReadMessageId)<0)&&(F.maxEveryoneReadMessageId=E.maxEveryoneReadMessageId,this.dataStore.setTalkStatus(F),this.sendNotification("notify_update_local_talk_status",F)),this.sendNotification(a,E),c();break;case"notify_create_announcement":var G=new s.entity.Announcement(b);this.sendNotification("notify_update_announcement_status",this.newAnnouncementStatus(G)),this.sendNotification(a,G),c();break;case"notify_update_announcement_status":var H=new s.entity.AnnouncementStatus(b),I=this.dataStore.getAnnouncementStatus(H.domainId);null==I?this.dataStore.setAnnouncementStatus(H):null==I.maxReadAnnouncementId||v.Int64.compare(I.maxReadAnnouncementId,H.maxReadAnnouncementId)<0?this.dataStore.setAnnouncementStatus(H):(t.DEBUG&&null!=console&&console.log(t.dateStr(),"notified announcement status is older than current status. notified:%o, current:%o",H,I,"",""),H.maxReadAnnouncementId=I.maxReadAnnouncementId,H.maxAnnouncementId=I.maxAnnouncementId,H.unreadCount=I.unreadCount),this.sendNotification(a,H),c();break;case"notify_delete_attachment":var J=new s.entity.FileInfoDeletion(b);this.sendNotification(a,J),c();break;case"notify_leave_domain":var K=b;this.dataStore.removeDomain(K),this.sendNotification(a,K),c();break;case"notify_delete_domain_invite":var L=b;this.dataStore.removeDomainInvite(L),this.sendNotification(a,L),c();break;case"notify_delete_friend":this.dataStore.removeFriend(b[0],b[1]),this.sendNotification(a,b),c();break;case"notify_delete_acquaintance":this.dataStore.removeAcquaintance(b[0],b[1]),this.sendNotification(a,b),c();break;case"notify_delete_talk":this.dataStore.removeTalk(b),this.dataStore.removeTalkStatus(b),this.sendNotification("SelectTalk",null),this.sendNotification(a,b),c();break;default:this.sendNotification(a,b),c()}},newTalkStatusByMessage:function(a){var b=this.dataStore.getTalkStatus(a.talkId);return null==b&&(b=new s.entity.TalkStatus,b.id=a.talkId),(null==b.maxMessageId||v.Int64.compare(b.maxMessageId,a.id)<0)&&(b.maxMessageId=a.id,b.maxMessage=a),!this.dataStore.isMe(a.userId)&&a.isUnreadCountTarget&&b.unreadCount++,this.dataStore.setTalkStatus(b),b},updateTalkStatus:function(a){var b=this;if(!i.exists(a.readUserIds,function(a){return b.dataStore.isMe(a)}))return null;for(var c=this.dataStore.getTalkStatus(a.talkId),d=a.messageIds[0],e=0,f=a.messageIds;e<f.length;){var g=f[e];++e,(null==c.maxReadMessageId||v.Int64.compare(c.maxReadMessageId,g)<0)&&(v.Int64.compare(d,g)<0&&(d=g),s.Int64Helper.contains(a.messageIdsExcludingUnreadCountTargets,g)||c.unreadCount--)}return(null==c.maxReadMessageId||v.Int64.compare(c.maxReadMessageId,d)<0)&&(c.maxReadMessageId=d,this.dataStore.setTalkStatus(c)),c},newAnnouncementStatus:function(a){var b=this.dataStore.getAnnouncementStatus(a.domainId);return null==b&&(b=new s.entity.AnnouncementStatus,b.domainId=a.domainId),(null==b.maxAnnouncementId||v.Int64.compare(b.maxAnnouncementId,a.id)<0)&&(b.maxAnnouncementId=a.id),null==b.unreadCount&&(b.unreadCount=0),b.unreadCount++,this.dataStore.setAnnouncementStatus(b),b},__class__:s.proxy.AlberoBroadcastProxy}),s.proxy.AlberoServiceProxy=function(){this.mockMsgId=new v.Int64(-1,-1),r.patterns.proxy.Proxy.call(this,"api"),this.updateReadStatusesTimers=new v.ds.StringMap,this.updateReadAnnouncementStatusesTimers=new v.ds.StringMap},s.proxy.AlberoServiceProxy.__name__=["albero","proxy","AlberoServiceProxy"],s.proxy.AlberoServiceProxy.__super__=r.patterns.proxy.Proxy,s.proxy.AlberoServiceProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{createAccessToken:function(a,b){var c=this,d="pc";d="bot";var e="";this.rpc.call("create_access_token",[a,b,e,d,""],function(a){c.settings.setAccessToken(a),c.createSession(a)},function(){c.sendNotification("Url",s.command.UrlAction.FORWARD(s.Urls.error))})},createSession:function(a){var b=this;this.rpc.call("create_session",[a,"1.35"],function(a){b.dataStore.setMe(new s.entity.Me(a.user)),b.settings.setConfiguration(new s.entity.Configuration(a.configuration));var c=function(){b.dataRecoverd=!0,b.sendNotification("data_recovered"),b.rpc.call("start_notification",[],function(a){var b=a;b||null!=console&&console.error(t.dateStr(),"start_notification failed.","","","","")})};return b.dataRecoverd?void c():void b.recoverData(c)},function(){b.settings.clearAccessToken(),b.sendNotification("Url",s.command.UrlAction.FORWARD(s.Urls.error))})},recoverData:function(a){var b=this;this.rpc.call("reset_notification",[],function(){var c=0,d=function(){c++,4==c&&a()};b.getDomains(function(){var a=b.dataStore.getDomains(),c=0,e=function(){c++,c==a.length&&d()};if(a.length>0)for(var f=0;f<a.length;){var g=a[f];++f,b.getAnnouncementStatuses(g.id,e)}else d();var h=0,i=function(){h++,2==h&&(b.getTalks(d),b.getTalkInvites(d))};b.getFriends(i),b.getAcquaintances(i)}),b.getDomainInvites(d)})},deleteSession:function(){this.settings.clearSelectedStampTabId(),this.settings.clearDomainSelection(),this.settings.clearAccessToken(),this.rpc.restart()},updateUser:function(a,b,c,d){var e=this,f=function(b){e.rpc.call("update_user",[a,b,d],function(a){e.sendNotification("update_user_responsed",new s.entity.Me(a))})};null!=c?f(c):null!=b?this.uploadFile(b,null,s.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE,function(a){f(a.get_url)}):f()},updateProfile:function(a){for(var b=this,c=new Array,d=0;d<a.length;){var e=a[d];++d;var f=new Array;f.push(e.domainId);for(var g=new Array,h=0,i=e.profileItemValues;h<i.length;){var j=i[h];++h,g.push({profile_item_id:j.profileItemId,value:j.value})}f.push(g),c.push(f)}this.rpc.call("update_profile",[c],function(a){b.sendNotification("update_profile_responsed",a)})},addFriend:function(a){var b=this.settings.getSelectedDomainId();this.rpc.call("add_friend",[b,a.id])},deleteFriend:function(a){var b=this.settings.getSelectedDomainId();this.rpc.call("delete_friend",[b,a.id])},getFriends:function(a){var b=this;this.rpc.call("get_friends",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=e[1],g=0;g<f.length;){var h=f[g];++g;var i=new s.entity.DomainUser(h);b.dataStore.addFriend(i),b.sendNotification("notify_add_friend",i)}}null!=a&&a()})},getAcquaintances:function(a){var b=this;this.rpc.call("get_acquaintances",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=e[1],g=0;g<f.length;){var h=f[g];++g;var i=new s.entity.DomainUser(h);b.dataStore.addAcquaintance(i),b.sendNotification("notify_add_acquaintance",i)}}null!=a&&a()})},getAllUsers:function(a){var b=this,c=this.settings.getSelectedDomainId(),d=40,e=14;this.rpc.call("get_domain_users",[c,e,d,a],function(a){var d,e=new Array,f=0;for(d=w.Boot.__cast(a.contents,Array);f<d.length;){var g=d[f];++f,e.push(new s.entity.DomainUser(g))}b.dataStore.setUsersIfLatest(c,e),b.sendNotification("get_domain_users_responsed",[c,a.marker,a.next_marker,e])})},getUsers:function(a,b){var c=this;this.rpc.call("get_users",[a,b],function(b){var d,e=new Array,f=0;for(d=w.Boot.__cast(b,Array);f<d.length;){var g=d[f];++f,e.push(new s.entity.DomainUser(g))}c.dataStore.setUsersIfLatest(a,e),c.sendNotification("get_users_responsed",[a,e])})},getProfile:function(a,b){var c=this;this.rpc.call("get_profile",[a,b],function(a){var b=new s.entity.Profile(a);c.sendNotification("get_profile_responsed",b)})},searchDomainUsers:function(a,b){var c=this,d=this.settings.getSelectedDomainId(),e=40,f=14;this.rpc.call("search_domain_users",[d,a,f,e,b],function(b){var e,f=new Array,g=0;for(e=w.Boot.__cast(b.contents,Array);g<e.length;){var h=e[g];++g,f.push(new s.entity.DomainUser(h))}c.dataStore.setUsersIfLatest(d,f),c.sendNotification("get_domain_users_responsed",[d,b.marker,b.next_marker,f,a])
})},getDomains:function(a){var b=this,c=function(a){a.reverse();for(var c=0;c<a.length;){var d=a[c];++c,b.sendNotification("notify_update_domain",[null,d])}};this.rpc.call("get_domains",[],function(d){for(var e=0;e<d.length;){var f=d[e];++e,b.newDomain(f)}c(b.dataStore.getDomains()),null!=a&&a()})},leaveDomain:function(a){var b=this;this.rpc.call("leave_domain",[a.id],function(a){b.dataStore.removeDomain(a)})},getDomainInvites:function(a){var b=this;this.rpc.call("get_domain_invites",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.sendNotification("notify_add_domain_invite",b.newDomainInvite(e))}null!=a&&a()})},acceptDomainInvite:function(a){this.rpc.call("accept_domain_invite",[a],function(){})},deleteDomainInvite:function(a){this.rpc.call("delete_domain_invite",[a],function(){})},getTalks:function(a){var b=this,c=function(a){var c;c=a.type==s.entity.TalkType.PairTalk?"notify_create_pair_talk":"notify_create_group_talk",b.sendNotification(c,a)},d=function(a){a.sort(function(a,c){var d,e=b.dataStore.getTalkStatus(a.id);d=null!=e?e.maxMessage:null;var f;f=null!=d?d.createdAt:null,(null==f||v.Int64.compare(f,a.updatedAt)<0)&&(f=a.updatedAt);var g,h=b.dataStore.getTalkStatus(c.id);g=null!=h?h.maxMessage:null;var i;return i=null!=g?g.createdAt:null,(null==i||v.Int64.compare(i,c.updatedAt)<0)&&(i=c.updatedAt),v.Int64.compare(f,i)});for(var d=0;d<a.length;){var e=a[d];++d,c(e)}},e=function(a){for(var c=0;c<a.length;){var d=a[c];++c,b.sendNotification("notify_update_local_talk_status",d)}};this.rpc.call("get_talks",[],function(c){for(var f=0;f<c.length;){var g=c[f];++f,b.newTalk(g)}b.rpc.call("get_talk_statuses",[],function(c){for(var f=0;f<c.length;){var g=c[f];++f,b.newTalkStatus(g)}d(b.dataStore.getTalks()),e(b.dataStore.getTalkStatuses()),null!=a&&a()})})},getTalkStatuses:function(){var a=this,b=function(b){var c=a.dataStore.getTalk(b.id);null!=c&&a.sendNotification("notify_update_local_talk_status",b)};this.rpc.call("get_talk_statuses",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b(a.newTalkStatus(e))}})},getReadStatus:function(a,b){var c=this;this.rpc.call("get_read_status",[a,b],function(a){c.sendNotification("notify_get_message_status",new s.entity.MessageReadStatus(a))})},createTalk:function(a){var b=this,c=this.settings.getSelectedDomainId();if(0!=a.length){var d,e=1==a.length;d=e?"create_pair_talk":"create_group_talk";var f;f=e?[c,a.pop()]:[c,a],this.rpc.call(d,f,function(a){var c,d=b.newTalk(a);c=e?"notify_create_pair_talk":"notify_create_group_talk",b.sendNotification(c,d),b.settings.setSelectedTalk(d)})}},updateGroupTalk:function(a,b,c,d){var e=this;if(a.type==s.entity.TalkType.GroupTalk){var f=function(c){e.rpc.call("update_group_talk",[a.id,b,c],function(a){e.sendNotification("notify_update_group_talk",e.newTalk(a))})};null!=d?f(d):null!=c?this.uploadFile(c,a.domainId,s.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON,function(a){f(a.get_url)}):f()}},addTalkers:function(a,b){var c=this;if(a.type==s.entity.TalkType.PairTalk){var d=a.userIds.concat(b);return s.Int64Helper.remove(d,this.dataStore.me.id),void this.createTalk(d)}0!=b.length&&this.rpc.call("add_talkers",[a.id,b],function(a){c.sendNotification("notify_add_talkers",c.newTalk(a))})},deleteTalker:function(a,b){var c=this;this.rpc.call("delete_talker",[a.id,b],function(){s.Int64Helper.remove(a.userIds,b),c.sendNotification("notify_delete_talker",c.dataStore.setTalk(a))})},inviteTalker:function(a,b){this.rpc.call("add_talk_invite",[a.id,b],function(){})},getTalkInvites:function(a){var b=this;this.rpc.call("get_talk_invites",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.acceptTalkInvite(e.talk_id)}null!=a&&a()})},acceptTalkInvite:function(a){this.rpc.call("accept_talk_invite",[a],function(){})},deleteTalkInvite:function(a){this.rpc.call("delete_talk_invite",[a],function(){})},getMessages:function(a,b){var c=this,d=20;null==b&&(b={sinceId:null,maxId:null}),this.rpc.call("get_messages",[a.id,d,b.sinceId,b.maxId],function(b){for(var d=new Array,e=0;e<b.length;){var f=b[e];++e,d.push(c.newMessage(f))}c.sendNotification("notify_get_messages",{talkId:a.id,messages:d})})},createMessage:function(a,b,c){var d=this,e=this.newDummyMessage(a,b,c);this.sendNotification("create_message_start",e),this.rpc.call("create_message",[a,s.entity.Message.enumIndex(b),c],function(a){d.sendNotification("create_message_complete",[d.newMessage(a),e.id])},function(a){d.sendNotification("create_message_fail",e),d.sendNotification("error_occurred",a)})},updateReadStatuses:function(a,b){var c=this,d=this.dataStore.getTalkStatus(a);if(null!=d){if(null==b){if(0==d.unreadCount)return;b=d.maxMessageId}else if(null!=d.maxReadMessageId&&v.Int64.compare(d.maxReadMessageId,b)>=0)return;d.unreadCount=0,d.maxReadMessageId=b,this.dataStore.setTalkStatus(d),this.sendNotification("notify_update_local_talk_status",d);var e="_"+a.high+"_"+a.low,f=this.updateReadStatusesTimers.get(e);null!=f&&f.stop(),f=v.Timer.delay(function(){c.updateReadStatusesTimers.remove(e);var d=c.dataStore.getTalkStatus(a);null!=d&&c.rpc.call("update_read_statuses",[a,b],function(){})},1e3),this.updateReadStatusesTimers.set(e,f)}},upload:function(a,b,c){var d=this,e=c.name.normalize("NFKC"),f={content_type:c.type,content_size:c.size,name:e,file:c},g=this.newDummyMessage(b,s.entity.MessageType.file,f);this.uploadThumbnail(c,a,b,g,function(f){d.uploadFile(c,a,s.proxy._AlberoServiceProxy.UploadUseType.MESSAGE,function(a){var h={url:a.get_url,content_type:c.type,content_size:c.size,name:e,file_id:a.file_id};null!=f&&(h.thumbnail_url=f.get_url),d.rpc.call("create_message",[b,s.entity.Message.enumIndex(s.entity.MessageType.file),h],function(a){d.sendNotification("create_message_complete",[d.newMessage(a),g.id])},function(a){d.sendNotification("create_message_fail",g),d.sendNotification("error_occurred",a)})})})},uploadThumbnail:function(a,b,c,d,e){var f=this;this.fileService.createThumbnail(a,function(a){d.content.thumbnail_file=a,f.sendNotification("create_message_start",d),null!=a?f.uploadFile(a,b,s.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL,e):e(null)})},uploadFile:function(a,b,c,d){var e,f=this;switch(c[1]){case 0:e=0;break;case 1:e=1;break;case 2:e=2;break;case 3:e=4}var g=a.name.normalize("NFKC");this.rpc.call("create_upload_auth",[g,a.type,a.size,b,e],function(b){f.fileService.upload(b,a.type,a,function(){d(b)})})},deleteAttachment:function(a,b){this.rpc.call("delete_attachment",[a,b])},getAttachments:function(a,b){var c=this,d=20;null==b&&(b={sinceId:null,maxId:null}),this.rpc.call("get_attachments",[a.id,d,b.sinceId,b.maxId],function(b){for(var d=new Array,e=0;e<b.length;){var f=b[e];++e,d.push(c.newFileInfo(f))}c.sendNotification("get_file_responsed",{talkId:a.id,files:d})})},createAnnouncement:function(a,b,c){var d=this;(null!=a||(a=this.settings.getSelectedDomainId(),null!=a))&&this.rpc.call("create_announcement",[a,s.entity.Message.enumIndex(b),c],function(a){d.sendNotification("notify_create_announcement",d.newAnnouncement(a))})},getAnnouncements:function(a,b){var c=this,d=20,e=this.settings.getSelectedDomainId();return null==e?void(null!=b&&b()):(null==a&&(a={sinceId:null,maxId:null}),void this.rpc.call("get_announcements",[e,d,a.sinceId,a.maxId],function(a){for(var b=new Array,d=0;d<a.length;){var f=a[d];++d,b.push(new s.entity.Announcement(f))}c.sendNotification("notify_get_announcements",{domainId:e,announcements:b})}))},getAnnouncementStatuses:function(a,b){var c=this;this.rpc.call("get_announcement_status",[a],function(a){c.sendNotification("notify_update_announcement_status",c.newAnnouncementStatus(a)),null!=b&&b()})},updateAnnouncementReadStatus:function(a){var b=this,c=this.dataStore.getAnnouncementStatus(a);if(null!=c&&0!=c.unreadCount){c.unreadCount=0,c.maxReadAnnouncementId=c.maxAnnouncementId,this.dataStore.setAnnouncementStatus(c),this.sendNotification("notify_update_announcement_status",c);var d="_"+a.high+"_"+a.low,e=this.updateReadAnnouncementStatusesTimers.get(d);null!=e&&e.stop(),e=v.Timer.delay(function(){b.updateReadAnnouncementStatusesTimers.remove(d),b.rpc.call("update_announcement_status",[a,c.maxAnnouncementId],function(){})},1e3),this.updateReadAnnouncementStatusesTimers.set(d,e)}},getQuestions:function(a,b,c,d){var e=this,f=20,g=this.settings.getSelectedDomainId(),h=null;null!=a&&(g=a.domainId,h=a.id);var i;switch(b[1]){case 0:i=0;break;case 1:i=1}var j;switch(c[1]){case 0:j=!0;break;case 1:j=!1;break;case 2:j=null}null==d&&(d={sinceId:null,maxId:null}),this.rpc.call("get_actions",[g,h,i,j,f,d.sinceId,d.maxId],function(a){for(var d=new Array,f=0;f<a.length;){var i=a[f];++f,d.push(e.newQuestion(i))}e.sendNotification("get_questions_responsed",{domainId:g,talkId:h,questions:d,fromType:b,filter:c})})},getQuestion:function(a,b){var c=this;this.rpc.call("get_action",[a],function(a){c.sendNotification("notify_update_question",c.newQuestion(a)),null!=b&&b()})},newDomain:function(a){return this.dataStore.setDomain(new s.entity.Domain(a))},newDomainInvite:function(a){return this.dataStore.setDomainInvite(new s.entity.DomainInvite(a))},newTalk:function(a){return this.dataStore.setTalk(new s.entity.Talk(a))},newTalkStatus:function(a){return this.dataStore.setTalkStatus(new s.entity.TalkStatus(a))},newMessage:function(a){return new s.entity.Message(a)},newDummyMessage:function(a,b,c){var d=new s.entity.Message;return d.id=this.mockMsgId,d.userId=this.dataStore.me.id,d.talkId=a,d.type=b,d.content=c,this.mockMsgId=s.Int64Helper.decrement(this.mockMsgId),d},newQuestion:function(a){return this.dataStore.setQuestion(new s.entity.Question(a))},newFileInfo:function(a){return new s.entity.FileInfo(a)},newAnnouncement:function(a){return new s.entity.Announcement(a)},newAnnouncementStatus:function(a){return this.dataStore.setAnnouncementStatus(new s.entity.AnnouncementStatus(a))},createdAtNow:function(){var a=(new Date).getTime(),b=4294967296;return new v.Int64(a/b|0,a%b|0)},__class__:s.proxy.AlberoServiceProxy}),s.proxy._AlberoServiceProxy={},s.proxy._AlberoServiceProxy.UploadUseType={__ename__:!0,__constructs__:["PROFILE_IMAGE","MESSAGE","TALK_ICON","THUMBNAIL"]},s.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE=["PROFILE_IMAGE",0],s.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE.toString=e,s.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE.__enum__=s.proxy._AlberoServiceProxy.UploadUseType,s.proxy._AlberoServiceProxy.UploadUseType.MESSAGE=["MESSAGE",1],s.proxy._AlberoServiceProxy.UploadUseType.MESSAGE.toString=e,s.proxy._AlberoServiceProxy.UploadUseType.MESSAGE.__enum__=s.proxy._AlberoServiceProxy.UploadUseType,s.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON=["TALK_ICON",2],s.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON.toString=e,s.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON.__enum__=s.proxy._AlberoServiceProxy.UploadUseType,s.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL=["THUMBNAIL",3],s.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL.toString=e,s.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL.__enum__=s.proxy._AlberoServiceProxy.UploadUseType,s.proxy.AppStateProxy=function(){r.patterns.proxy.Proxy.call(this,"appState")},s.proxy.AppStateProxy.__name__=["albero","proxy","AppStateProxy"],s.proxy.AppStateProxy.__super__=r.patterns.proxy.Proxy,s.proxy.AppStateProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{start:function(){this.updateLastActivityAt(),this.checkInactiveInterval()},setAppState:function(a){"APP_STATE_CHANGED: "+m.string(a);this.appState=a,this.sendNotification("app_state_changed",this.appState)},updateLastActivityAt:function(){this.lastActivityAt=new Date},checkInactiveInterval:function(){var a=this;this.checkInactive(),v.Timer.delay(function(){a.checkInactiveInterval()},500)},checkInactive:function(){if(this.appState!=s.AppState.Inactive){var a=(new Date).getTime()-this.lastActivityAt.getTime();2e3>a||this.setAppState(s.AppState.Inactive)}},__class__:s.proxy.AppStateProxy}),s.proxy.DataStoreProxy=function(){r.patterns.proxy.Proxy.call(this,"dataStore"),this.clear()},s.proxy.DataStoreProxy.__name__=["albero","proxy","DataStoreProxy"],s.proxy.DataStoreProxy.__super__=r.patterns.proxy.Proxy,s.proxy.DataStoreProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{setMe:function(a){this.me=a;for(var b=0,c=this.getDomains();b<c.length;){var d=c[b];++b,this.sendNotification("notify_update_user",this.me.toDomainUser(d.id))}this.sendNotification("current_user_changed",a)},getMe:function(){return this.me},isMe:function(a){return null!=this.me&&s.Int64Helper.eq(this.me.id,a)},getFriends:function(a){var b=this.users.get("_"+a.high+"_"+a.low),c=[];if(null!=b)for(var d=b.iterator();d.hasNext();){var e=d.next();0==e.type&&c.push(e.user)}return c},isFriend:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);return null!=d&&0==d.type}return!1},addFriend:function(a){var b=this.ensureDomainUserMap(a.domainId),c=s.Int64Helper.idStr(a.id);return b.set(c,{type:0,user:a}),a},addAcquaintance:function(a){var b=this.ensureDomainUserMap(a.domainId),c=s.Int64Helper.idStr(a.id);return b.set(c,{type:1,user:a}),a},ensureDomainUserMap:function(a){var b="_"+a.high+"_"+a.low,c=this.users.get(b);return null==c&&(c=new v.ds.StringMap,this.users.set(b,c)),c},setUserIfLatest:function(a,b){if(null==a){var c=s.Int64Helper.idStr(b.domainId);if(a=this.users.get(c),null==a)return}var d,e=s.Int64Helper.idStr(b.id);if(d=a.get(e),null!=d)(2==d.type||v.Int64.compare(b.updatedAt,d.user.updatedAt)>1)&&(d.user=b,this.sendNotification("notify_update_user",b));else{var f=s.Int64Helper.idStr(b.id);a.set(f,{type:2,user:b})}},setUsersIfLatest:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c)for(var d=0;d<b.length;){var e=b[d];++d,this.setUserIfLatest(c,e)}},removeFriend:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);d.type=2}},removeAcquaintance:function(a,b){this.removeFriend(a,b)},getUser:function(a,b){if(0==(b.high|b.low))return null;if(s.Int64Helper.eq(this.me.id,b))return this.me.toDomainUser(a);var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);if(null!=d)return d.user}return null},getUsers:function(a,b){var c=this,d=function(a,b){var d=c.users.get("_"+a.high+"_"+a.low);if(null!=d){if(null!=b)return b.map(function(b){if(0==(b.high|b.low))return null;if(s.Int64Helper.eq(c.me.id,b))return c.me.toDomainUser(a);var e=d.get("_"+b.high+"_"+b.low);return null!=e?e.user:null});for(var e=new Array,f=d.iterator();f.hasNext();)e.push(f.next().user);return e}return new Array};if(null!=a)return d(a,b);for(var e=this.domains.iterator(),f=null;e.hasNext();)f=null==f?d(e.next().id,b):f.concat(d(e.next().id,b));return f},getTalk:function(a){return this.talks.get("_"+a.high+"_"+a.low)},setTalk:function(a){var b=s.Int64Helper.idStr(a.id);if(this.talks.set(b,a),null!=a.leftUsers)for(var c=this.ensureDomainUserMap(a.domainId),d=0,e=a.leftUsers;d<e.length;){var f=e[d];++d;var g=s.Int64Helper.idStr(f.id),h=c.get(g);null!=h?2==h.type&&v.Int64.compare(f.updatedAt,h.user.updatedAt)>0&&(h.user=f,this.sendNotification("notify_update_user",f)):(c.set(g,{type:2,user:f}),this.sendNotification("notify_update_user",f))}return a},getTalks:function(){for(var a=new Array,b=this.talks.keys();b.hasNext();){var c=b.next();a.push(this.talks.get(c))}return a},setTalks:function(a){for(var b=0;b<a.length;){var c=a[b];++b,this.setTalk(c)}},removeTalk:function(a){this.talks.remove("_"+a.high+"_"+a.low)},getTalkStatuses:function(){for(var a=new Array,b=this.talkStatuses.keys();b.hasNext();){var c=b.next();this.talks.exists(c)&&a.push(this.talkStatuses.get(c))}return a},getTalkStatus:function(a){return this.talkStatuses.get("_"+a.high+"_"+a.low)},setTalkStatus:function(a){var b=s.Int64Helper.idStr(a.id);if(null!=this.domainUnreadCounts){var c=this.talks.get(b),d=s.Int64Helper.idStr(c.domainId);this.domainUnreadCounts.remove(d)}return this.talkStatuses.set(b,a),this.sendNotification("brand_badge_changed"),a},removeTalkStatus:function(a){this.talkStatuses.remove("_"+a.high+"_"+a.low)},getDomains:function(){for(var a=new Array,b=this.domains.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},getDomain:function(a){return this.domains.get("_"+a.high+"_"+a.low)},setDomain:function(a){var b=s.Int64Helper.idStr(a.id);return this.domains.set(b,a),a},removeDomain:function(a){this.domains.remove("_"+a.high+"_"+a.low)},getUnreadCount:function(){for(var a=0,b=this.domains.keys();b.hasNext();){var c=b.next();a+=this._getDomainUnreadCount(c)}for(var d=this.domainInvites.iterator();d.hasNext();){{d.next()}a++}return a},_getDomainUnreadCount:function(a){if(null!=this.domainUnreadCounts&&this.domainUnreadCounts.exists(a))return this.domainUnreadCounts.get(a);null==this.domainUnreadCounts&&(this.domainUnreadCounts=new v.ds.StringMap);for(var b=0,c=this.talkStatuses.iterator();c.hasNext();){var d=c.next();if(null!=d.unreadCount&&0!=d.unreadCount){var e,f=s.Int64Helper.idStr(d.id);e=this.talks.get(f),null!=e&&s.Int64Helper.idStr(e.domainId)==a&&(b+=d.unreadCount)}}var g=this.announcementStatuses.get(a);return null!=g&&null!=g.unreadCount&&(b+=g.unreadCount),this.domainUnreadCounts.set(a,b),b},getDomainUnreadCount:function(a){return this._getDomainUnreadCount("_"+a.high+"_"+a.low)},getDomainInvites:function(){for(var a=new Array,b=this.domainInvites.keys();b.hasNext();){var c=b.next();a.push(this.domainInvites.get(c))}return a},getDomainInvite:function(a){return this.domainInvites.get("_"+a.high+"_"+a.low)},setDomainInvite:function(a){var b=s.Int64Helper.idStr(a.id);return this.domainInvites.set(b,a),this.sendNotification("brand_badge_changed"),a},removeDomainInvite:function(a){this.domainInvites.remove("_"+a.high+"_"+a.low),this.sendNotification("brand_badge_changed")},getQuestions:function(a,b){var c=[];if(null!=this.questions)for(var d=this.questions.iterator();d.hasNext();){var e=d.next();s.Int64Helper.eq(e.talkId,a)&&s.Int64Helper.eq(e.userId,b)&&c.push(e)}return c},getQuestion:function(a){return this.questions.get("_"+a.high+"_"+a.low)},setQuestion:function(a){var b=s.Int64Helper.idStr(a.id);return this.questions.set(b,a),a},getAnnouncementStatus:function(a){return this.announcementStatuses.get("_"+a.high+"_"+a.low)},setAnnouncementStatus:function(a){var b=s.Int64Helper.idStr(a.domainId);return this.announcementStatuses.set(b,a),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(b),this.sendNotification("brand_badge_changed"),a},removeAnnouncementStatus:function(a){var b="_"+a.high+"_"+a.low;this.announcementStatuses.remove(b),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(b),this.sendNotification("brand_badge_changed")},clear:function(){this.users=new v.ds.StringMap,this.talks=new v.ds.StringMap,this.talkStatuses=new v.ds.StringMap,this.domains=new v.ds.StringMap,this.domainInvites=new v.ds.StringMap,this.questions=new v.ds.StringMap,this.announcementStatuses=new v.ds.StringMap},__class__:s.proxy.DataStoreProxy}),s.proxy.FileServiceProxy=function(){r.patterns.proxy.Proxy.call(this,"fileService"),this.validHost=this.getValidHost()},s.proxy.FileServiceProxy.__name__=["albero","proxy","FileServiceProxy"],s.proxy.FileServiceProxy.__super__=r.patterns.proxy.Proxy,s.proxy.FileServiceProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{getValidHost:function(){return"https://"+z.host},downloadUrl:function(a,b){if(null==b&&(b=!1),null==a||0==a.length)return"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(o.startsWith(a,this.validHost)){var c=this.settings.getAccessToken(),d=a;return d+=-1!=a.indexOf("?")?"&":"?",d+="Authorization=ALB%20"+c,b&&(d+="&download=true"),d}return a},download:function(){},upload:function(a,b,c,d){for(var e=this,f={},g=0,h=l.fields(a.post_form);g<h.length;){var i=h[g];++g;var j=i,k=l.field(a.post_form,i);f[j]=k}{var n=a.post_url,o={};"FileServiceProxy#upload. params:"+m.string(f),I.upload({url:n,headers:o,data:f,files:{file:c},complete:function(a,b){return a?void e.uploadFailed(b):void d()},cache:!0})}},uploadFailed:function(){this.sendNotification("error_occurred",{message:""})},createDummyFile:function(a){var b=a.split("\\");if(0==b.length)return null;var c=b[b.length-1];if(0==c.length)return null;var d="application/octet-stream",e=c.split(".");if(e.length>1){var f=e[e.length-1];switch(f){case"txt":d="text/plain";break;case"htm":case"html":d="text/html";break;case"xml":d="text/xml";break;case"gif":d="image/gif";break;case"jpg":case"jpeg":d="image/jpeg";break;case"png":d="image/png";break;case"pdf":d="application/pdf"}}return{name:c,size:1,type:d}},createThumbnail:function(a,b){b(o.startsWith(a.type,"video/")?null:null)},createVideoThumbnail:function(a,b){var c=this;t.DEBUG&&null!=console&&console.log(t.dateStr(),"createVideoThumbnail","","","","");var d=window.document.getElementById("thumb-video");d.pause();var e=URL.createObjectURL(a),f=null,g=null,h=function(a){URL.revokeObjectURL(e),d.removeEventListener("playing",f,!1),d.removeEventListener("error",g,!1),b(a)},i=!1;f=function(){t.DEBUG&&null!=console&&console.log(t.dateStr(),"video playing","","","",""),i||(i=!0,v.Timer.delay(function(){c.captureVideo(d,function(a){d.pause(),h(a)})},100))},d.addEventListener("playing",f,!1),g=function(a){t.DEBUG&&null!=console&&console.log(t.dateStr(),"video error",a,"","",""),h(null)},d.addEventListener("error",g,!1),d.src=e},captureVideo:function(a,b){var c=a.width,d=a.height,e=a.videoWidth,f=a.videoHeight;f>e?(f*=c/e,e=c):(e*=d/f,f=d);var g=(c-e)/2,h=(d-f)/2,i=window.document.getElementById("thumb-canvas");i.getContext("2d").drawImage(a,g,h,e,f),i.toBlob(function(a){t.DEBUG&&null!=console&&console.log(t.dateStr(),"captureVideo blob callback","","","","");var c={name:"thumb.jpeg",type:"image/jpeg",file:"thumb.jpeg",blob:a,size:a.size};b(c)})},__class__:s.proxy.FileServiceProxy}),s.proxy.FormatterProxy=function(){r.patterns.proxy.Proxy.call(this,"formatter"),s.proxy._FormatterProxy.ExternalUserIconListener.formatterProxy=this},s.proxy.FormatterProxy.__name__=["albero","proxy","FormatterProxy"],s.proxy.FormatterProxy.__super__=r.patterns.proxy.Proxy,s.proxy.FormatterProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{dayOfWeekString:function(a){var b=a.getDay();switch(b){case 0:return"";case 1:return"";case 2:return"";case 3:return"";case 4:return"";case 5:return"";default:return""}},dateString:function(a,b){var c=new Date,d="";return a.getFullYear()!=c.getFullYear()&&(d+=a.getFullYear()+"/"),d+=a.getMonth()+1+"/"+a.getDate(),b&&(d+=" ("+this.dayOfWeekString(a)+")"),d},abbreviateDatetimeString:function(a){if(null==a)return"";var b,c=new Date,d=s.Int64Helper.toFloat(a),e=new Date;e.setTime(d),b=e;var f="";return f=c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()?b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes():this.dateString(b,!1)},timeString:function(a){if(null==a)return"";var b,c=s.Int64Helper.toFloat(a),d=new Date;return d.setTime(c),b=d,b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()},datetimeString:function(a){if(null==a)return"";var b,c=m.parseFloat(m.string(a)),d=new Date;return d.setTime(c),b=d,b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate()+" "+b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()},messageString:function(a,b){var c;c=b.type==s.entity.MessageType.system?null:this.dataStore.getUser(a,b.userId);var d;d=null!=c?c.displayName:"";var e=b.type;switch(e[1]){case 0:return this.systemMessageString(a,b.content);case 1:return d+":"+m.string(b.content);case 2:return d+":";case 5:case 7:return d+":[] "+m.string(b.content.question);case 6:case 8:return d+":";case 9:return d+":[] "+m.string(b.content.title);case 10:return d+":[] "+m.string(b.content.title);case 11:case 12:case 13:return d+"";default:return d+""}},announcementString:function(a){var b,c=this.dataStore.getUser(a.domainId,a.userId);b=null!=c?c.displayName:a.userName,null==b&&(b="");var d=a.type;switch(d[1]){case 1:return b+":"+m.string(a.content);default:return null!=console&&console.error(t.dateStr(),"announcement.type is not text. announcment:%o",a,"","",""),b+""}},systemMessageString:function(a,b){var c=b.type;switch(c){case"add_talkers":for(var d="",e=b.added_user_ids,f=0;f<e.length;){var g=e[f];++f;var h=this.dataStore.getUser(a,g);null!=h&&(""!=d&&(d+=""),d+=h.displayName)}var i=null;if(null!=b.added_by){var j=this.dataStore.getUser(a,b.added_by);null!=j&&(i=j.displayName)}return null==i?d+"":i+""+d+"";case"delete_talker":var k="",l=this.dataStore.getUser(a,b.deleted_user_id);return null!=l&&(k+=l.displayName),k+"";case"add_talk_invite":var m=b.email;return m+"";case"delete_talk_invite":var n=b.email;return n+"";case"hide_pair_talk":var o="",p=this.dataStore.getUser(a,b.user_id);return null!=p&&(o+=p.displayName),o+"";default:return""}},createText:function(a){if(null==a)return null;var b=this.emoji(this.linking(a));return o.endsWith(b,"\n")&&(b+="\n"),b},emoji:function(a){var b=new g("\\{p:(\\d+)\\}","g"),c=b.replace(a,"<img class='emoji' src='images/emoji/$1.gif'>");return c},linking:function(a){return twttr.txt.autoLinkUrlsCustom(a,{targetBlank:!0,htmlEscapeNonEntities:!0})},__class__:s.proxy.FormatterProxy}),s.proxy._FormatterProxy={},s.proxy._FormatterProxy.ExternalUserIconListener=a.albero.ExternalUserIconListener=function(){},s.proxy._FormatterProxy.ExternalUserIconListener.__name__=["albero","proxy","_FormatterProxy","ExternalUserIconListener"],s.proxy.MsgPackRpcProxy=function(){this.connectionStatus=s.ConnectionStatus.Ok,r.patterns.proxy.Proxy.call(this,"rpc"),this.responseHandlers=new v.ds.IntMap,this.errorHandler=d(this,this.onServerError),this.connectionKeeper=new s.proxy._MsgPackRpcProxy.ConnectionKeeper(d(this,this.ping))},s.proxy.MsgPackRpcProxy.__name__=["albero","proxy","MsgPackRpcProxy"],s.proxy.MsgPackRpcProxy.__super__=r.patterns.proxy.Proxy,s.proxy.MsgPackRpcProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{initWebSocket:function(){null==this.ws&&(this.ws=new s.js.WebSocket(z.endpoint),this.ws.onopen=d(this,this.onOpen),this.ws.onmessage=d(this,this.onMessage),this.ws.onclose=d(this,this.onClose))},finishWebSocket:function(){null!=this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.close(),this.ws=null)},onRegister:function(){this.initWebSocket(),this.connectionKeeper.start()},onRemove:function(){this.connectionKeeper.stop(),this.finishWebSocket()},onOpen:function(){this.connectionKeeper.setConnected(!0),this.sendNotification("SignIn")},onMessage:function(a){var b,c=this,d=new x.Decoder(a,!0).getResult();if(b=w.Boot.__cast(d[0],B),1==b&&4==d.length){var e;e=w.Boot.__cast(d[1],B);var f=d[2],g=d[3],h=this.responseHandlers.get(e);if(null==h)return void(null!=console&&console.error(t.dateStr(),"No ResponseHandler prepared. msgId:%s error:%s result:",e,f,g,""));if(null==f){var i=h.onSuccess;null!=i&&i(g)}else{null!=console&&console.error(t.dateStr(),"Receive Error Response. method:",h.method," error:",f,"");var j=h.onError;null!=j?j(f):null!=this.errorHandler&&this.errorHandler(h.method,f)}this.responseHandlers.remove(e)}else if(0==b&&4==d.length){var k;k=w.Boot.__cast(d[1],B);var l;l=w.Boot.__cast(d[2],String);var m;m=w.Boot.__cast(d[3],Array);for(var n=0;n<m.length;){var o=m[n];++n,this.broadcast.handleNotification(l,o,function(){c.ws.send(new x.Encoder([1,k,null,!0]).getBytes())})}}},onClose:function(a,b,c){null!=console&&console.info(t.dateStr(),"onClose. code:"+a+", reason:"+b+", wasClean:"+(null==c?"null":""+c),"","","",""),1001==a&&c||(this.connectionStatus=1e3!=a&&1005!=a||"concurrent access"!=b?1e3!=a&&1005!=a||"forcibly closed"!=b?s.ConnectionStatus.Error:s.ConnectionStatus.ForcibliyClosedError:s.ConnectionStatus.ConcurrentAccessError,this.connectionStatus==s.ConnectionStatus.ForcibliyClosedError?this.sendNotification("SignOut"):this.sendNotification("Url",s.command.UrlAction.FORWARD(s.Urls.error))),this.finishWebSocket(),this.connectionKeeper.setConnected(!1)},restart:function(){var a=this;this.finishWebSocket();for(var b=this.responseHandlers.keys();b.hasNext();){var c=b.next();this.responseHandlers.remove(c)}v.Timer.delay(function(){a.initWebSocket()},500)},call:function(a,b,c,d){if(null==this.ws)return void(null!=console&&console.error(t.dateStr(),"disconnected. data:",this.data,"","",""));null==b&&(b=[]);var e=s.proxy.MsgPackRpcProxy.lastMsgId++,f=new s.proxy._MsgPackRpcProxy.ResponseHandler(a,c,d);this.responseHandlers.set(e,f);var g=[0,e,a,b],h=new x.Encoder(g).getBytes();this.ws.send(h)},ping:function(){var a=this.connectionStatus;switch(a[1]){case 2:case 3:return}null==this.ws||this.ws.isClosed()?this.restart():this.ws.send(v.io.Bytes.alloc(0))},onServerError:function(a,b){this.sendNotification("error_occurred",b)},__class__:s.proxy.MsgPackRpcProxy}),s.proxy._MsgPackRpcProxy={},s.proxy._MsgPackRpcProxy.ConnectionKeeper=function(a){this.connected=!1,this.ping=a},s.proxy._MsgPackRpcProxy.ConnectionKeeper.__name__=["albero","proxy","_MsgPackRpcProxy","ConnectionKeeper"],s.proxy._MsgPackRpcProxy.ConnectionKeeper.prototype={start:function(){},stop:function(){this.deleteTimer()},setConnected:function(a){(this.connected!=a||null==this.timer)&&(this.connected=a,this.resetTimer())},resetTimer:function(){var a=this;if(this.deleteTimer(),this.connected)this.timer=new v.Timer(45e3),this.timer.run=this.ping;else{var b=null;b=function(c){var d=m["int"](Math.min(2*c,45e3));return function(){a.ping(),a.timer=v.Timer.delay(b(d),c)}},b(3e3)()}},deleteTimer:function(){null!=this.timer&&(this.timer.stop(),this.timer=null)},__class__:s.proxy._MsgPackRpcProxy.ConnectionKeeper},s.proxy._MsgPackRpcProxy.ResponseHandler=function(a,b,c){this.method=a,this.onSuccess=b,this.onError=c},s.proxy._MsgPackRpcProxy.ResponseHandler.__name__=["albero","proxy","_MsgPackRpcProxy","ResponseHandler"],s.proxy._MsgPackRpcProxy.ResponseHandler.prototype={__class__:s.proxy._MsgPackRpcProxy.ResponseHandler},s.proxy.Error=function(a){this.code=a.code,this.message=a.message,this.detail=a.detail},s.proxy.Error.__name__=["albero","proxy","Error"],s.proxy.Error.prototype={__class__:s.proxy.Error},s.proxy.RoutingProxy=function(){r.patterns.proxy.Proxy.call(this,"routing")},s.proxy.RoutingProxy.__name__=["albero","proxy","RoutingProxy"],s.proxy.RoutingProxy.__super__=r.patterns.proxy.Proxy,s.proxy.RoutingProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{init:function(){null==this.router&&(this.router=new s.proxy._RoutingProxy.LocalRouter(this,this.settings,this.dataStore),this.router.start())},forward:function(a){this.init(),this.router.forward(a)},redirect:function(a,b){this.init(),this.router.redirect(a,b)},back:function(){null!=this.router&&this.router.back()},stop:function(){null!=this.router&&this.router.started&&this.router.stop()},__class__:s.proxy.RoutingProxy}),s.proxy._RoutingProxy={},s.proxy._RoutingProxy.LocalRouter=function(a,b,c){this.proxy=a,this.settings=b,this.dataStore=c,this.started=!1},s.proxy._RoutingProxy.LocalRouter.__name__=["albero","proxy","_RoutingProxy","LocalRouter"],s.proxy._RoutingProxy.LocalRouter.prototype={notify:function(a){var b=this.getDomainId(a);this.settings.setSelectedDomainId(b),this.proxy.sendNotification("current_page_changed",a)},start:function(){this.started=!0},forward:function(a){switch(a[1]){case 0:break;default:this.notify(a)}},redirect:function(){},redirectWithHash:function(){},back:function(){this.notify(this.prev)},stop:function(){this.started=!1},getDomainId:function(a){switch(a[1]){case 2:var b=a[2];return b;case 3:var c=a[2];return c;case 4:var d=a[2];return d;case 5:var e=a[2];return e;case 6:var f=a[2];return f;case 7:var g=a[2];return g;default:return null}},parseFragment:function(a){if(null==a)return null;var b=a.split("/");if(""!=b[0])return null;if(2==b.length){if(""==b[1])return s.Urls.domains;if("settings"==b[1]){var c=this.settings.getLastSelectedDomainId();
if(null!=c&&null!=this.dataStore.getDomain(c))return s.History.replaceState("settings",null,"#"+this.toFragment(s.Urls.settings(c))),s.Urls.settings(c);var d=this.dataStore.getDomains();if(d.length>0){for(var e=null,f=0;f<d.length;){var g=d[f];++f,(null==e||v.Int64.compare(e.id,g.id)>0)&&(e=g)}return s.History.replaceState("settings",null,"#"+this.toFragment(s.Urls.settings(e.id))),s.Urls.settings(e.id)}return s.Urls.settings(null)}if(b[1]==m.string(s.Urls.error))return s.Urls.error;if(b[1]==m.string(s.Urls.loading))return s.Urls.loading}else if(3==b.length){var h=s.Int64Helper.parse(b[1]);if(null!=h){if(""==b[2])return s.Urls.domain(h);if("members"==b[2])return s.Urls.members(h);if("talks"==b[2])return s.Urls.talks(h);if("actions"==b[2])return s.Urls.actions(h);if("console"==b[2])return s.Urls.console(h);if("settings"==b[2])return s.Urls.settings(h)}}return null},toFragment:function(a){switch(a[1]){case 1:return"/";case 9:case 10:return"/"+m.string(a);case 2:var b=a[2];return"/"+b.toString()+"/";case 3:var c=a[2];return"/"+c.toString()+"/members";case 4:var d=a[2];return"/"+d.toString()+"/talks";case 5:var e=a[2];return"/"+e.toString()+"/actions";case 6:var f=a[2];return"/"+f.toString()+"/console";case 7:var g=a[2];return null==g&&(g=this.settings.getLastSelectedDomainId()),null!=g?"/"+g.toString()+"/settings":"/settings";default:return null}},__class__:s.proxy._RoutingProxy.LocalRouter},s.proxy.SettingsProxy=function(){this.selectedDomainId=null,this.remember=!0,r.patterns.proxy.Proxy.call(this,"settings")},s.proxy.SettingsProxy.__name__=["albero","proxy","SettingsProxy"],s.proxy.SettingsProxy.__super__=r.patterns.proxy.Proxy,s.proxy.SettingsProxy.prototype=b(r.patterns.proxy.Proxy.prototype,{setAccessTokenRemember:function(a){this.remember=a},setAccessToken:function(a){this.remember&&(this.accessToken=a,this.sendNotification("access_token_changed",a))},getAccessToken:function(){return null==this.accessToken&&(this.accessToken=z.accessToken),this.accessToken},clearAccessToken:function(){this.accessToken=null},setConfiguration:function(a){this.configuration=a,this.sendNotification("configuration_changed",a)},getConfiguration:function(){return this.configuration},setSelectedDomainId:function(a){s.Int64Helper.eq(this.selectedDomainId,a)||(this.selectedDomainId=a,this.sendNotification("domain_selection_changed",a))},getLastSelectedDomainId:function(){var a,b=null,c=null;return a=null!=b&&null!=c?new v.Int64(b,c):null},getSelectedDomainId:function(){return this.selectedDomainId},clearDomainSelection:function(){this.selectedDomainId=null},clearSelectedTalk:function(){if(this.hasSelectedTalk()){var a=s.Int64Helper.idStr(this.selectedDomainId);this.selectedTalkIds.remove(a)}},setSelectedTalk:function(a){if(t.DEBUG&&null!=console&&console.log(t.dateStr(),"talk selected. talk:",a,"","",""),null==this.selectedTalkIds&&(this.selectedTalkIds=new v.ds.StringMap),null==a){if(null!=this.selectedDomainId){var b=s.Int64Helper.idStr(this.selectedDomainId);this.selectedTalkIds.set(b,null)}this.sendNotification("talk_selection_changed")}else{var c=s.Int64Helper.idStr(a.domainId);if(this.selectedTalkIds.set(c,a.id),!s.Int64Helper.eq(a.domainId,this.selectedDomainId))return!1;this.sendNotification("talk_selection_changed",a)}return!0},hasSelectedTalk:function(){return null!=this.selectedTalkIds&&function(a){var b,c=s.Int64Helper.idStr(a.selectedDomainId);return b=a.selectedTalkIds.exists(c)}(this)},getSelectedTalkId:function(){if(null==this.selectedTalkIds)return null;var a=s.Int64Helper.idStr(this.selectedDomainId);return this.selectedTalkIds.get(a)},isSendByEnter:function(){return null==this.sendByEnter&&(this.sendByEnter=!0),this.sendByEnter},setSendByEnter:function(a){this.sendByEnter=a},setSelectedStampTabId:function(){},getSelectedStampTabId:function(){var a=0;return a},clearSelectedStampTabId:function(){},setInputTextForTalkId:function(a,b){null==a||0==a.length?this.clearInputTextForTalkId(b):(this.loadInputTextForAll(),this.inputTexts["_"+b.high+"_"+b.low]=a)},getInputTextForTalkId:function(a){this.loadInputTextForAll();var b=this.inputTexts["_"+a.high+"_"+a.low];return null!=b?b:""},clearInputTextForTalkId:function(a){this.loadInputTextForAll(),delete this.inputTexts["_"+a.high+"_"+a.low]},loadInputTextForAll:function(){if(null==this.inputTexts){try{}catch(a){}null==this.inputTexts&&(this.inputTexts={})}},saveInputTextForAll:function(){if(null!=this.inputTexts){JSON.stringify(this.inputTexts)}},clearInputTextForAll:function(){w.Browser.getLocalStorage().removeItem("input_text"),this.inputTexts=null},setCopyProfileToAllDomains:function(a){a?w.Browser.getLocalStorage().setItem("copy_profile_to_all_domains","true"):w.Browser.getLocalStorage().removeItem("copy_profile_to_all_domains")},isCopyProfileToAllDomains:function(){return null!=w.Browser.getLocalStorage().getItem("copy_profile_to_all_domains")},__class__:s.proxy.SettingsProxy}),r.interfaces.IMediator=function(){},r.interfaces.IMediator.__name__=["puremvc","interfaces","IMediator"],r.interfaces.IMediator.prototype={__class__:r.interfaces.IMediator},r.patterns.mediator={},r.patterns.mediator.Mediator=function(a,b){r.patterns.observer.Notifier.call(this),this.mediatorName=null!=a?a:r.patterns.mediator.Mediator.NAME,null!=b&&(this.viewComponent=b)},r.patterns.mediator.Mediator.__name__=["puremvc","patterns","mediator","Mediator"],r.patterns.mediator.Mediator.__interfaces__=[r.interfaces.IMediator],r.patterns.mediator.Mediator.__super__=r.patterns.observer.Notifier,r.patterns.mediator.Mediator.prototype=b(r.patterns.observer.Notifier.prototype,{getMediatorName:function(){return this.mediatorName},setViewComponent:function(a){this.viewComponent=a},getViewComponent:function(){return this.viewComponent},listNotificationInterests:function(){return[]},handleNotification:function(){},onRegister:function(){},onRemove:function(){},__class__:r.patterns.mediator.Mediator});var u={};u.mediator={},u.mediator.CommandLineMediator=function(){r.patterns.mediator.Mediator.call(this,"commandline",null)},u.mediator.CommandLineMediator.__name__=["albero_cli","mediator","CommandLineMediator"],u.mediator.CommandLineMediator.__super__=r.patterns.mediator.Mediator,u.mediator.CommandLineMediator.prototype=b(r.patterns.mediator.Mediator.prototype,{onRegister:function(){this.getViewComponent();this.eventEmitter=f.getInstance(),this.dataRecovered=!1},listNotificationInterests:function(){return["app_state_changed","access_token_changed","current_user_changed","configuration_changed","domain_selection_changed","talk_selection_changed","user_selection_needed","user_selection_changed","friend_selection_needed","stamp_set_changed","stamp_selection_changed","phone_call_started","phone_call_accepted","phone_call_connected","phone_call_hangued_up","action_selection_changed","current_page_changed","fileinfo_selection_changed","error_occurred","brand_badge_changed","send_form_top_changed","data_recovered","notify_update_user","notify_add_friend","notify_add_acquaintance","notify_delete_friend","notify_delete_acquaintance","notify_update_domain_users","get_domain_users_responsed","get_users_responsed","get_profile_responsed","update_user_responsed","update_profile_responsed","notify_add_domain_invite","notify_accept_domain_invite","notify_delete_domain_invite","notify_join_domain","notify_update_domain","notify_leave_domain","notify_create_pair_talk","notify_create_group_talk","notify_update_group_talk","notify_add_talkers","notify_delete_talker","notify_add_talk_invite","notify_accept_talk_invite","notify_delete_talk_invite","notify_delete_talk","notify_create_message","notify_update_read_statuses","notify_update_talk_status","notify_update_local_talk_status","notify_get_messages","notify_get_message_status","create_message_start","create_message_complete","create_message_fail","notify_create_announcement","notify_update_announcement_status","notify_get_announcements","notify_update_question","get_questions_responsed","notify_create_attachment","notify_delete_attachment","get_file_responsed"]},handleNotification:function(a){var b=a.getName();switch(b){case"data_recovered":if(this.dataRecovered)return;this.dataRecovered=!0,this.eventEmitter.emit(a.getName());break;case"error_occurred":this.eventEmitter.emit(a.getName(),new Error("AdapterError"),a.getBody());break;default:this.eventEmitter.emit(a.getName(),a.getBody())}},__class__:u.mediator.CommandLineMediator});var v={};v.Int64=function(a,b){this.high=0|a,this.low=0|b},v.Int64.__name__=["haxe","Int64"],v.Int64.make=function(a,b){return new v.Int64(a,b)},v.Int64.getLow=function(a){return a.low},v.Int64.getHigh=function(a){return a.high},v.Int64.add=function(a,b){var c=a.high+b.high|0,d=a.low+b.low|0;return v.Int64.uicompare(d,a.low)<0&&c++,new v.Int64(c,d)},v.Int64.sub=function(a,b){var c=a.high-b.high|0,d=a.low-b.low|0;return v.Int64.uicompare(a.low,b.low)<0&&c--,new v.Int64(c,d)},v.Int64.mul=function(a,b){var c=65535,d=a.low&c,e=a.low>>>16,f=b.low&c,g=b.low>>>16,h=d*f,i=e*f,j=d*g,k=e*g,l=h,m=k+(j>>>16)+(i>>>16)|0;return j=j<<16|0,l=l+j|0,v.Int64.uicompare(l,j)<0&&(m=m+1|0),i=i<<16|0,l=l+i|0,v.Int64.uicompare(l,i)<0&&(m=m+1|0),m=m+function(){var c,d=a.low,e=b.high;return c=(d*(e>>>16)<<16|0)+d*(65535&e)|0}(this)|0,m=m+function(){var c,d=a.high,e=b.low;return c=(d*(e>>>16)<<16|0)+d*(65535&e)|0}(this)|0,new v.Int64(m,l)},v.Int64.divMod=function(a,b){var c=new v.Int64(0,0),d=0,e=1;for(b=new v.Int64(b.high,b.low);b.high>=0;){var f=v.Int64.ucompare(b,a);if(b.high=b.high<<1|0|b.low>>>31|0,b.low=b.low<<1|0,d=d<<1|0|e>>>31|0,e=e<<1|0,f>=0)break}for(;0!=(e|d|0);)v.Int64.ucompare(a,b)>=0&&(c.high=c.high|d|0,c.low=c.low|e|0,a=v.Int64.sub(a,b)),e=e>>>1|(d<<31|0)|0,d>>>=1,b.low=b.low>>>1|(b.high<<31|0)|0,b.high=b.high>>>1;return{quotient:c,modulus:a}},v.Int64.neg=function(a){var b=0|~a.high,c=0|-a.low;return 0==c&&b++,new v.Int64(b,c)},v.Int64.uicompare=function(a,b){return 0>a?0>b?~b-~a|0:1:0>b?-1:a-b|0},v.Int64.compare=function(a,b){var c=a.high-b.high|0;return 0!=c?c:v.Int64.uicompare(a.low,b.low)},v.Int64.ucompare=function(a,b){var c=v.Int64.uicompare(a.high,b.high);return 0!=c?c:v.Int64.uicompare(a.low,b.low)},v.Int64.prototype={toString:function(){if(0==(this.high|this.low))return"0";var a="",b=!1,c=this;c.high<0&&(b=!0,c=v.Int64.neg(c));for(var d=new v.Int64(0,10);0!=(c.high|c.low);){var e=v.Int64.divMod(c,d);a=e.modulus.low+a,c=e.quotient}return b&&(a="-"+a),a},__class__:v.Int64},v.Timer=function(a){var b=this;this.id=setInterval(function(){b.run()},a)},v.Timer.__name__=["haxe","Timer"],v.Timer.delay=function(a,b){var c=new v.Timer(b);return c.run=function(){c.stop(),a()},c},v.Timer.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:v.Timer},v.ds={},v.ds.IntMap=function(){this.h={}},v.ds.IntMap.__name__=["haxe","ds","IntMap"],v.ds.IntMap.__interfaces__=[k],v.ds.IntMap.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},remove:function(a){return this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(0|b);return h.iter(a)},__class__:v.ds.IntMap},v.ds.ObjectMap=function(){this.h={},this.h.__keys__={}},v.ds.ObjectMap.__name__=["haxe","ds","ObjectMap"],v.ds.ObjectMap.__interfaces__=[k],v.ds.ObjectMap.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++v.ds.ObjectMap.count);this.h[c]=b,this.h.__keys__[c]=a},__class__:v.ds.ObjectMap},v.ds.StringMap=function(){this.h={}},v.ds.StringMap.__name__=["haxe","ds","StringMap"],v.ds.StringMap.__interfaces__=[k],v.ds.StringMap.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){return a="$"+a,this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return h.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref["$"+a]}}},__class__:v.ds.StringMap},v.io={},v.io.Bytes=function(a,b){this.length=a,this.b=b},v.io.Bytes.__name__=["haxe","io","Bytes"],v.io.Bytes.alloc=function(a){for(var b=new Array,c=0;a>c;){{c++}b.push(0)}return new v.io.Bytes(a,b)},v.io.Bytes.ofString=function(a){for(var b=new Array,c=0;c<a.length;){var d=o.fastCodeAt(a,c++);d>=55296&&56319>=d&&(d=d-55232<<10|1023&o.fastCodeAt(a,c++)),127>=d?b.push(d):2047>=d?(b.push(192|d>>6),b.push(128|63&d)):65535>=d?(b.push(224|d>>12),b.push(128|d>>6&63),b.push(128|63&d)):(b.push(240|d>>18),b.push(128|d>>12&63),b.push(128|d>>6&63),b.push(128|63&d))}return new v.io.Bytes(b.length,b)},v.io.Bytes.ofData=function(a){return new v.io.Bytes(a.length,a)},v.io.Bytes.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=255&b},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw v.io.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,f=a,g=a+b;g>f;){var h=d[f++];if(128>h){if(0==h)break;c+=e(h)}else if(224>h)c+=e((63&h)<<6|127&d[f++]);else if(240>h){var i=d[f++];c+=e((31&h)<<12|(127&i)<<6|127&d[f++])}else{var j=d[f++],k=d[f++],l=(15&h)<<18|(127&j)<<12|(127&k)<<6|127&d[f++];c+=e((l>>10)+55232),c+=e(1023&l|56320)}}return c},toString:function(){return this.getString(0,this.length)},__class__:v.io.Bytes},v.io.BytesBuffer=function(){this.b=new Array},v.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"],v.io.BytesBuffer.prototype={addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw v.io.Error.OutsideBounds;for(var d=(this.b,a.b),e=b,f=b+c;f>e;){var g=e++;this.b.push(d[g])}},getBytes:function(){var a=new v.io.Bytes(this.b.length,this.b);return this.b=null,a},__class__:v.io.BytesBuffer},v.io.Input=function(){},v.io.Input.__name__=["haxe","io","Input"],v.io.Input.prototype={readByte:function(){throw"Not implemented"},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw v.io.Error.OutsideBounds;for(;d>0;)e[b]=this.readByte(),b++,d--;return c},set_bigEndian:function(a){return this.bigEndian=a,a},read:function(a){for(var b=v.io.Bytes.alloc(a),c=0;a>0;){var d=this.readBytes(b,c,a);if(0==d)throw v.io.Error.Blocked;c+=d,a-=d}return b},readFloat:function(){var a=[];a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),this.bigEndian||a.reverse();var b=1-(a[0]>>7<<1),c=(a[0]<<1&255|a[1]>>7)-127,d=(127&a[1])<<16|a[2]<<8|a[3];return 0==d&&-127==c?0:b*(1+Math.pow(2,-23)*d)*Math.pow(2,c)},readDouble:function(){var a=[];a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),this.bigEndian||a.reverse();var b=1-(a[0]>>7<<1),c=(a[0]<<4&2047|a[1]>>4)-1023,d=this.getDoubleSig(a);return 0==d&&-1023==c?0:b*(1+Math.pow(2,-52)*d)*Math.pow(2,c)},readInt8:function(){var a=this.readByte();return a>=128?a-256:a},readInt16:function(){var a,b=this.readByte(),c=this.readByte();return a=this.bigEndian?c|b<<8:b|c<<8,0!=(32768&a)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<8|b<<16|a<<24:a|b<<8|c<<16|d<<24},getDoubleSig:function(a){return 4294967296*((15&a[1])<<16|a[2]<<8|a[3])+2147483648*(a[4]>>7)+((127&a[4])<<24|a[5]<<16|a[6]<<8|a[7])},__class__:v.io.Input},v.io.BytesInput=function(a,b,c){if(null==b&&(b=0),null==c&&(c=a.length-b),0>b||0>c||b+c>a.length)throw v.io.Error.OutsideBounds;this.b=a.b,this.pos=b,this.len=c,this.totlen=c},v.io.BytesInput.__name__=["haxe","io","BytesInput"],v.io.BytesInput.__super__=v.io.Input,v.io.BytesInput.prototype=b(v.io.Input.prototype,{readByte:function(){if(0==this.len)throw new v.io.Eof;return this.len--,this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw v.io.Error.OutsideBounds;if(0==this.len&&c>0)throw new v.io.Eof;this.len<c&&(c=this.len);for(var d=this.b,e=a.b,f=0;c>f;){var g=f++;e[b+g]=d[this.pos+g]}return this.pos+=c,this.len-=c,c},__class__:v.io.BytesInput}),v.io.Output=function(){},v.io.Output.__name__=["haxe","io","Output"],v.io.Output.prototype={writeByte:function(){throw"Not implemented"},writeBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw v.io.Error.OutsideBounds;for(;d>0;)this.writeByte(e[b]),b++,d--;return c},set_bigEndian:function(a){return this.bigEndian=a,a},write:function(a){for(var b=a.length,c=0;b>0;){var d=this.writeBytes(a,c,b);if(0==d)throw v.io.Error.Blocked;c+=d,b-=d}},writeFloat:function(a){if(0==a)return this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var b,c=Math.floor(Math.log(Math.abs(a))/v.io.Output.LN2),d=8388607&Math.floor(Math.abs(a)/Math.pow(2,c)*8388608);b=c+127>>1|(c>0?0>a?128:64:0>a?128:0);var e=c+127<<7&255|d>>16&127,f=d>>8&255,g=255&d;this.bigEndian?(this.writeByte(b),this.writeByte(e),this.writeByte(f),this.writeByte(g)):(this.writeByte(g),this.writeByte(f),this.writeByte(e),this.writeByte(b))},writeDouble:function(a){if(0==a)return this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var b,c=Math.floor(Math.log(Math.abs(a))/v.io.Output.LN2),d=Math.floor(Math.abs(a)/Math.pow(2,c)*Math.pow(2,52)),e=34359738367&d,f=Math.floor(d/Math.pow(2,32));b=c+1023>>4|(c>0?0>a?128:64:0>a?128:0);var g=c+1023<<4&255|f>>16&15,h=f>>8&255,i=255&f,j=e>>24&255,k=e>>16&255,l=e>>8&255,m=255&e;this.bigEndian?(this.writeByte(b),this.writeByte(g),this.writeByte(h),this.writeByte(i),this.writeByte(j),this.writeByte(k),this.writeByte(l),this.writeByte(m)):(this.writeByte(m),this.writeByte(l),this.writeByte(k),this.writeByte(j),this.writeByte(i),this.writeByte(h),this.writeByte(g),this.writeByte(b))},writeInt8:function(a){if(-128>a||a>=128)throw v.io.Error.Overflow;this.writeByte(255&a)},writeInt16:function(a){if(-32768>a||a>=32768)throw v.io.Error.Overflow;this.writeUInt16(65535&a)},writeUInt16:function(a){if(0>a||a>=65536)throw v.io.Error.Overflow;this.bigEndian?(this.writeByte(a>>8),this.writeByte(255&a)):(this.writeByte(255&a),this.writeByte(a>>8))},writeInt32:function(a){this.bigEndian?(this.writeByte(a>>>24),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)):(this.writeByte(255&a),this.writeByte(a>>8&255),this.writeByte(a>>16&255),this.writeByte(a>>>24))},__class__:v.io.Output},v.io.BytesOutput=function(){this.b=new v.io.BytesBuffer},v.io.BytesOutput.__name__=["haxe","io","BytesOutput"],v.io.BytesOutput.__super__=v.io.Output,v.io.BytesOutput.prototype=b(v.io.Output.prototype,{writeByte:function(a){this.b.b.push(a)},writeBytes:function(a,b,c){return this.b.addBytes(a,b,c),c},getBytes:function(){return this.b.getBytes()},__class__:v.io.BytesOutput}),v.io.Eof=function(){},v.io.Eof.__name__=["haxe","io","Eof"],v.io.Eof.prototype={toString:function(){return"Eof"},__class__:v.io.Eof},v.io.Error={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},v.io.Error.Blocked=["Blocked",0],v.io.Error.Blocked.toString=e,v.io.Error.Blocked.__enum__=v.io.Error,v.io.Error.Overflow=["Overflow",1],v.io.Error.Overflow.toString=e,v.io.Error.Overflow.__enum__=v.io.Error,v.io.Error.OutsideBounds=["OutsideBounds",2],v.io.Error.OutsideBounds.toString=e,v.io.Error.OutsideBounds.__enum__=v.io.Error,v.io.Error.Custom=function(a){var b=["Custom",3,a];return b.__enum__=v.io.Error,b.toString=e,b},v.rtti={},v.rtti.Meta=function(){},v.rtti.Meta.__name__=["haxe","rtti","Meta"],v.rtti.Meta.getFields=function(a){var b=a.__meta__;return null==b||null==b.fields?{}:b.fields};var w={};w.Boot=function(){},w.Boot.__name__=["js","Boot"],w.Boot.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__},w.Boot.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+w.Boot.__string_rec(a[g],b):w.Boot.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0;h>j;){var k=j++;i+=(k>0?",":"")+w.Boot.__string_rec(a[k],b)}return i+="]"}var l;try{l=a.toString}catch(m){return"???"}if(null!=l&&l!=Object.toString){var n=a.toString();if("[object Object]"!=n)return n}var o=null,p="{\n";b+="	";var q=null!=a.hasOwnProperty;for(var o in a)(!q||a.hasOwnProperty(o))&&"prototype"!=o&&"__class__"!=o&&"__super__"!=o&&"__interfaces__"!=o&&"__properties__"!=o&&(2!=p.length&&(p+=", \n"),p+=b+o+" : "+w.Boot.__string_rec(a[o],b));return b=b.substring(1),p+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}},w.Boot.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||w.Boot.__interfLoop(g,b))return!0}return w.Boot.__interfLoop(a.__super__,b)},w.Boot.__instanceof=function(a,b){if(null==b)return!1;switch(b){case B:return(0|a)===a;case D:return"number"==typeof a;case E:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case C:return!0;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(w.Boot.__interfLoop(w.Boot.getClass(a),b))return!0}return b==F&&null!=a.__name__?!0:b==G&&null!=a.__ename__?!0:a.__enum__==b}},w.Boot.__cast=function(a,b){if(w.Boot.__instanceof(a,b))return a;throw"Cannot cast "+m.string(a)+" to "+m.string(b)},w.Browser=function(){},w.Browser.__name__=["js","Browser"],w.Browser.getLocalStorage=function(){try{var a=window.localStorage;return a.getItem(""),a}catch(b){return null}};var x={};x.Decoder=function(a,b){var c=new v.io.BytesInput(a);c.set_bigEndian(!0),this.o=this.decode(c,b)},x.Decoder.__name__=["msgpack","Decoder"],x.Decoder.prototype={decode:function(a,b){try{var c=a.readByte();switch(c){case 192:return null;case 194:return!1;case 195:return!0;case 202:return a.readFloat();case 203:return a.readDouble();case 204:return a.readByte();case 205:return a.readUInt16();case 206:return a.readInt32();case 207:return v.Int64.make(a.readInt32(),a.readInt32());case 208:return a.readInt8();case 209:return a.readInt16();case 210:return a.readInt32();case 211:return v.Int64.make(a.readInt32(),a.readInt32());case 218:case 219:return a.read(218==c?a.readUInt16():a.readInt32()).toString();case 220:case 221:return this.readArray(a,220==c?a.readUInt16():a.readInt32(),b);case 222:case 223:return this.readMap(a,222==c?a.readUInt16():a.readInt32(),b);default:if(128>c)return c;if(144>c)return this.readMap(a,15&c,b);if(160>c)return this.readArray(a,15&c,b);if(192>c)return a.read(31&c).toString();if(c>223)return-256|c}}catch(d){if(!w.Boot.__instanceof(d,v.io.Eof))throw d}return null},readArray:function(a,b,c){for(var d=[],e=0;b>e;){{e++}d.push(this.decode(a,c))}return d},readMap:function(a,b,c){if(c){for(var d={},e=0;b>e;){var f=(e++,this.decode(a,c)),g=this.decode(a,c);d[f]=g}return d}for(var h=new v.ds.ObjectMap,i=0;b>i;){var j=(i++,this.decode(a,c)),k=this.decode(a,c);h.set(j,k)}return h},getResult:function(){return this.o},__class__:x.Decoder},x.Encoder=function(a){this.o=new v.io.BytesOutput,this.o.set_bigEndian(!0),this.encode(a)},x.Encoder.__name__=["msgpack","Encoder"],x.Encoder.prototype={encode:function(a){var b=q["typeof"](a);switch(b[1]){case 0:this.o.writeByte(192);break;case 3:this.o.writeByte(a?195:194);break;case 1:this.writeInt(a);break;case 2:this.writeFloat(a);break;case 6:var c=b[2],d=q.getClassName(c);switch(d){case"String":this.writeRaw(v.io.Bytes.ofString(a));break;case"Array":this.writeArray(a);break;case"Hash":this.writeHashMap(a);break;case"haxe.Int64":this.writeInt64(a)}break;case 4:this.writeObjectMap(a);break;case 7:throw"Error: Enum not supported";case 5:throw"Error: Function not supported";case 8:throw"Error: Unknown Data Type"}},writeInt:function(a){-32>a?-32768>a?(this.o.writeByte(210),this.o.writeInt32(a)):-128>a?(this.o.writeByte(209),this.o.writeInt16(a)):(this.o.writeByte(208),this.o.writeInt8(a)):128>a?this.o.writeByte(255&a):256>a?(this.o.writeByte(204),this.o.writeByte(a)):65536>a?(this.o.writeByte(205),this.o.writeUInt16(a)):(this.o.writeByte(206),this.o.writeInt32(a))},writeInt64:function(a){this.o.writeByte(a.high<0?211:207),this.o.writeInt32(v.Int64.getHigh(a)),this.o.writeInt32(v.Int64.getLow(a))},writeFloat:function(a){var b=Math.abs(a);b>1.401298464324817e-45&&3.4028234663852886e38>b?(this.o.writeByte(202),this.o.writeFloat(a)):(this.o.writeByte(203),this.o.writeDouble(a))},writeRaw:function(a){var b=a.length;32>b?this.o.writeByte(160|b):65536>b?(this.o.writeByte(218),this.o.writeUInt16(b)):(this.o.writeByte(219),this.o.writeInt32(b)),this.o.write(a)},writeArray:function(a){var b=a.length;16>b?this.o.writeByte(144|b):65536>b?(this.o.writeByte(220),this.o.writeUInt16(b)):(this.o.writeByte(221),this.o.writeInt32(b));for(var c=0;c<a.length;){var d=a[c];++c,this.encode(d)}},writeMapLength:function(a){16>a?this.o.writeByte(128|a):65536>a?(this.o.writeByte(222),this.o.writeUInt16(a)):(this.o.writeByte(223),this.o.writeInt32(a))},writeHashMap:function(a){this.writeMapLength(i.count(a));for(var b=a.keys();b.hasNext();){var c=b.next();this.writeRaw(v.io.Bytes.ofString(c)),this.encode(a.get(c))}},writeObjectMap:function(a){var b=l.fields(a);this.writeMapLength(i.count(b));for(var c=0;c<b.length;){var d=b[c];++c,this.writeRaw(v.io.Bytes.ofString(d)),this.encode(l.field(a,d))}},getBytes:function(){return this.o.getBytes()},__class__:x.Encoder},x.MsgPack=function(){},x.MsgPack.__name__=["msgpack","MsgPack"],x.MsgPack.encode=function(a){return new x.Encoder(a).getBytes()},x.MsgPack.decode=function(a,b){return null==b&&(b=!0),new x.Decoder(a,b).getResult()},r.interfaces.IController=function(){},r.interfaces.IController.__name__=["puremvc","interfaces","IController"],r.interfaces.IController.prototype={__class__:r.interfaces.IController},r.core={},r.core.Controller=function(){r.core.Controller.instance=this,this.commandMap=new v.ds.StringMap,this.initializeController()},r.core.Controller.__name__=["puremvc","core","Controller"],r.core.Controller.__interfaces__=[r.interfaces.IController],r.core.Controller.getInstance=function(){return null==r.core.Controller.instance&&(r.core.Controller.instance=new r.core.Controller),r.core.Controller.instance},r.core.Controller.prototype={initializeController:function(){this.view=r.core.View.getInstance()},executeCommand:function(a){var b=this.commandMap.get(a.getName());if(null!=b){var c=q.createInstance(b,[]);c.execute(a)}},registerCommand:function(a,b){this.commandMap.exists(a)||this.view.registerObserver(a,new r.patterns.observer.Observer(d(this,this.executeCommand),this)),this.commandMap.set(a,b)},hasCommand:function(a){return this.commandMap.exists(a)},removeCommand:function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap.remove(a))},__class__:r.core.Controller},r.interfaces.IModel=function(){},r.interfaces.IModel.__name__=["puremvc","interfaces","IModel"],r.interfaces.IModel.prototype={__class__:r.interfaces.IModel},r.core.Model=function(){r.core.Model.instance=this,this.proxyMap=new v.ds.StringMap,this.initializeModel()},r.core.Model.__name__=["puremvc","core","Model"],r.core.Model.__interfaces__=[r.interfaces.IModel],r.core.Model.getInstance=function(){return null==r.core.Model.instance&&(r.core.Model.instance=new r.core.Model),r.core.Model.instance},r.core.Model.prototype={initializeModel:function(){},registerProxy:function(a){this.proxyMap.set(a.getProxyName(),a),a.onRegister()},retrieveProxy:function(a){return this.proxyMap.get(a)},hasProxy:function(a){return this.proxyMap.exists(a)},removeProxy:function(a){var b=this.proxyMap.get(a);return null!=b&&(this.proxyMap.remove(a),b.onRemove()),b},__class__:r.core.Model},r.interfaces.IView=function(){},r.interfaces.IView.__name__=["puremvc","interfaces","IView"],r.interfaces.IView.prototype={__class__:r.interfaces.IView},r.core.View=function(){r.core.View.instance=this,this.mediatorMap=new v.ds.StringMap,this.observerMap=new v.ds.StringMap,this.initializeView()},r.core.View.__name__=["puremvc","core","View"],r.core.View.__interfaces__=[r.interfaces.IView],r.core.View.getInstance=function(){return null==r.core.View.instance&&(r.core.View.instance=new r.core.View),r.core.View.instance},r.core.View.prototype={initializeView:function(){},registerObserver:function(a,b){this.observerMap.exists(a)||this.observerMap.set(a,new j),this.observerMap.get(a).add(b)},notifyObservers:function(a){if(this.observerMap.exists(a.getName())){for(var b=this.observerMap.get(a.getName()),c=new j,d=b.iterator();d.hasNext();){var e=d.next();c.add(e)}for(var f=c.iterator();f.hasNext();){var g=f.next();g.notifyObserver(a)}}},removeObserver:function(a,b){for(var c=this.observerMap.get(a),d=c.iterator();d.hasNext();){var e=d.next();if(1==e.compareNotifyContext(b)){c.remove(e);break}}c.isEmpty()&&this.observerMap.remove(a)},registerMediator:function(a){if(!this.mediatorMap.exists(a.getMediatorName())){this.mediatorMap.set(a.getMediatorName(),a);var b=a.listNotificationInterests();if(b.length>0)for(var c=new r.patterns.observer.Observer(d(a,a.handleNotification),a),e=0,f=b.length;f>e;){var g=e++;this.registerObserver(b[g],c)}a.onRegister()}},retrieveMediator:function(a){return this.mediatorMap.get(a)},removeMediator:function(a){var b=this.mediatorMap.get(a);if(null!=b){for(var c=b.listNotificationInterests(),d=0,e=c.length;e>d;){var f=d++;this.removeObserver(c[f],b)}this.mediatorMap.remove(a),b.onRemove()}return b},hasMediator:function(a){return this.mediatorMap.exists(a)},__class__:r.core.View},r.interfaces.INotification=function(){},r.interfaces.INotification.__name__=["puremvc","interfaces","INotification"],r.interfaces.INotification.prototype={__class__:r.interfaces.INotification},r.interfaces.IObserver=function(){},r.interfaces.IObserver.__name__=["puremvc","interfaces","IObserver"],r.interfaces.IObserver.prototype={__class__:r.interfaces.IObserver},r.patterns.observer.Notification=function(a,b,c){this.name=a,null!=b&&(this.body=b),null!=c&&(this.type=c)},r.patterns.observer.Notification.__name__=["puremvc","patterns","observer","Notification"],r.patterns.observer.Notification.__interfaces__=[r.interfaces.INotification],r.patterns.observer.Notification.prototype={getName:function(){return this.name},setBody:function(a){this.body=a},getBody:function(){return this.body},setType:function(a){this.type=a},getType:function(){return this.type},toString:function(){var a="Notification Name: "+this.getName();return a+="\nBody:"+(null==this.body?"null":this.body.toString()),a+="\nType:"+(null==this.type?"null":this.type)},__class__:r.patterns.observer.Notification},r.patterns.observer.Observer=function(a,b){this.setNotifyMethod(a),this.setNotifyContext(b)},r.patterns.observer.Observer.__name__=["puremvc","patterns","observer","Observer"],r.patterns.observer.Observer.__interfaces__=[r.interfaces.IObserver],r.patterns.observer.Observer.prototype={setNotifyMethod:function(a){this.notify=a},setNotifyContext:function(a){this.context=a},getNotifyMethod:function(){return this.notify},getNotifyContext:function(){return this.context},notifyObserver:function(a){this.getNotifyMethod()(a)},compareNotifyContext:function(a){return a==this.context},__class__:r.patterns.observer.Observer};var y=0,z={},A=function(a){function b(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(a){return"function"==typeof a}function d(a){return"number"==typeof a}function e(a){return"object"==typeof a&&null!==a}function f(a){return void 0===a}return a.exports=null,a.exports=b,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.prototype.setMaxListeners=function(a){if(!d(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");
return this._maxListeners=a,this},b.prototype.emit=function(a){var b,d,g,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||e(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(d=this._events[a],f(d))return!1;if(c(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),d.apply(this,h)}else if(e(d))for(h=Array.prototype.slice.call(arguments,1),j=d.slice(),g=j.length,i=0;g>i;i++)j[i].apply(this,h);return!0},b.prototype.addListener=function(a,d){var g;if(!c(d))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,c(d.listener)?d.listener:d),this._events[a]?e(this._events[a])?this._events[a].push(d):this._events[a]=[this._events[a],d]:this._events[a]=d,e(this._events[a])&&!this._events[a].warned&&(g=f(this._maxListeners)?b.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[a].length>g&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(a,b){function d(){this.removeListener(a,d),e||(e=!0,b.apply(this,arguments))}if(!c(b))throw TypeError("listener must be a function");var e=!1;return d.listener=b,this.on(a,d),this},b.prototype.removeListener=function(a,b){var d,f,g,h;if(!c(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(d=this._events[a],g=d.length,f=-1,d===b||c(d.listener)&&d.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(e(d)){for(h=g;h-->0;)if(d[h]===b||d[h].listener&&d[h].listener===b){f=h;break}if(0>f)return this;1===d.length?(d.length=0,delete this._events[a]):d.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},b.prototype.removeAllListeners=function(a){var b,d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[a],c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);return delete this._events[a],this},b.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]},b.listenerCount=function(a,b){var d;return d=a._events&&a._events[b]?c(a._events[b])?1:a._events[b].length:0},a.exports}({});Array.prototype.indexOf&&(h.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}),Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(a){return isFinite(a)},Math.isNaN=function(a){return isNaN(a)},String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"],Date.prototype.__class__=Date,Date.__name__=["Date"];var B={__name__:["Int"]},C={__name__:["Dynamic"]},D=Number;D.__name__=["Float"];var E=Boolean;E.__ename__=["Bool"];var F={__name__:["Class"]},G={};null==Array.prototype.map&&(Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++;b[e]=a(this[e])}return b});var H,I=function(a){function b(a){var b="POST",c=a.url,d=a.headers,e=a.data,f=a.files,g=a.complete,h=new FormData;for(var i in e)e.hasOwnProperty(i)&&h.append(i,e[i]);for(var i in f)f.hasOwnProperty(i)&&h.append(i,f[i]);var j=new XMLHttpRequest;j.open(b,c,!0);for(var i in d)d.hasOwnProperty(i)&&j.setRequestHeader(i,d[i]);return j.onload=function(){4===j.readyState&&g(200===j.status,j)},j.onerror=function(){g(!1,j)},j.send(h),j}return a.exports=null,a.exports={upload:b},a.exports}({});H={websockets:!0,websocketsbinary:!0,pdf:!1,audio:!1},s.AppFacade.APP_STATE_CHANGED="app_state_changed",s.AppFacade.ACCESS_TOKEN_CHANGED="access_token_changed",s.AppFacade.CURRENT_USER_CHANGED="current_user_changed",s.AppFacade.CONFIGURATION_CHANGED="configuration_changed",s.AppFacade.DOMAIN_SELECTION_CHANGED="domain_selection_changed",s.AppFacade.TALK_SELECTION_CHANGED="talk_selection_changed",s.AppFacade.USER_SELECTION_NEEDED="user_selection_needed",s.AppFacade.USER_SELECTION_CHANGED="user_selection_changed",s.AppFacade.FRIEND_SELECTION_NEEDED="friend_selection_needed",s.AppFacade.STAMP_SET_CHANGED="stamp_set_changed",s.AppFacade.STAMP_SELECTION_CHANGED="stamp_selection_changed",s.AppFacade.PHONE_CALL_STARTED="phone_call_started",s.AppFacade.PHONE_CALL_ACCEPTED="phone_call_accepted",s.AppFacade.PHONE_CALL_CONNECTED="phone_call_connected",s.AppFacade.PHONE_CALL_HANGED_UP="phone_call_hangued_up",s.AppFacade.ACTION_SELECTION_CHANGED="action_selection_changed",s.AppFacade.CURRENT_PAGE_CHANGED="current_page_changed",s.AppFacade.CURRENT_PAGE_NOT_CHANGED="current_page_not_changed",s.AppFacade.FILEINFO_SELECTION_CHANGED="fileinfo_selection_changed",s.AppFacade.ERROR_OCCURRED="error_occurred",s.AppFacade.UNREAD_COUNT_CHANGED="brand_badge_changed",s.AppFacade.SEND_FORM_TOP_CHANGED="send_form_top_changed",s.AppFacade.DATA_RECOVERED="data_recovered",s.AppFacade.NOTIFY_UPDATE_USER="notify_update_user",s.AppFacade.NOTIFY_ADD_FRIEND="notify_add_friend",s.AppFacade.NOTIFY_ADD_ACQUAINTANCE="notify_add_acquaintance",s.AppFacade.NOTIFY_DELETE_FRIEND="notify_delete_friend",s.AppFacade.NOTIFY_DELETE_ACQUAINTANCE="notify_delete_acquaintance",s.AppFacade.NOTIFY_UPDATE_DOMAIN_USERS="notify_update_domain_users",s.AppFacade.GET_DOMAIN_USERS_RESPONSED="get_domain_users_responsed",s.AppFacade.GET_USERS_RESPONSED="get_users_responsed",s.AppFacade.GET_PROFILE_RESPONSED="get_profile_responsed",s.AppFacade.UPDATE_USER_RESPONSED="update_user_responsed",s.AppFacade.UPDATE_PROFILE_RESPONSED="update_profile_responsed",s.AppFacade.NOTIFY_ADD_DOMAIN_INVITE="notify_add_domain_invite",s.AppFacade.NOTIFY_ACCEPT_DOMAIN_INVITE="notify_accept_domain_invite",s.AppFacade.NOTIFY_DELETE_DOMAIN_INVITE="notify_delete_domain_invite",s.AppFacade.NOTIFY_JOIN_DOMAIN="notify_join_domain",s.AppFacade.NOTIFY_UPDATE_DOMAIN="notify_update_domain",s.AppFacade.NOTIFY_LEAVE_DOMAIN="notify_leave_domain",s.AppFacade.NOTIFY_CREATE_PAIR_TALK="notify_create_pair_talk",s.AppFacade.NOTIFY_CREATE_GROUP_TALK="notify_create_group_talk",s.AppFacade.NOTIFY_UPDATE_GROUP_TALK="notify_update_group_talk",s.AppFacade.NOTIFY_ADD_TALKERS="notify_add_talkers",s.AppFacade.NOTIFY_DELETE_TALKER="notify_delete_talker",s.AppFacade.NOTIFY_ADD_TALK_INVITE="notify_add_talk_invite",s.AppFacade.NOTIFY_ACCEPT_TALK_INVITE="notify_accept_talk_invite",s.AppFacade.NOTIFY_DELETE_TALK_INVITE="notify_delete_talk_invite",s.AppFacade.NOTIFY_DELETE_TALK="notify_delete_talk",s.AppFacade.NOTIFY_CREATE_MESSAGE="notify_create_message",s.AppFacade.NOTIFY_UPDATE_READ_STATUSES="notify_update_read_statuses",s.AppFacade.NOTIFY_UPDATE_TALK_STATUS="notify_update_talk_status",s.AppFacade.NOTIFY_UPDATE_LOCAL_TALK_STATUS="notify_update_local_talk_status",s.AppFacade.NOTIFY_GET_MESSAGES="notify_get_messages",s.AppFacade.NOTIFY_GET_MESSAGE_READ_STATUS="notify_get_message_status",s.AppFacade.CREATE_MESSAGE_START="create_message_start",s.AppFacade.CREATE_MESSAGE_COMPLETE="create_message_complete",s.AppFacade.CREATE_MESSAGE_FAIL="create_message_fail",s.AppFacade.NOTIFY_CREATE_ANNOUNCEMENT="notify_create_announcement",s.AppFacade.NOTIFY_UPDATE_ANNOUNCEMENT_STATUS="notify_update_announcement_status",s.AppFacade.NOTIFY_GET_ANNOUNCEMENTS="notify_get_announcements",s.AppFacade.NOTIFY_UPDATE_QUESTION="notify_update_question",s.AppFacade.NOTIFY_GET_QUESTIONS="get_questions_responsed",s.AppFacade.NOTIFY_CREATE_ATTACHMENT="notify_create_attachment",s.AppFacade.NOTIFY_DELETE_ATTACHMENT="notify_delete_attachment",s.AppFacade.GET_FILE_RESPONSED="get_file_responsed",s.command.DomainCommand.__meta__={fields:{api:{inject:null}}},s.command.DomainCommand.NAME="Domain",s.command.FileCommand.__meta__={fields:{api:{inject:null}}},s.command.FileCommand.NAME="File",s.command.LoadStampSetCommand.NAME="LoadStampSet",s.command.LoadStampSetCommand.TAB_URL="./json/app_ja.json",s.command.LoadStampSetCommand.TAB_PANE_URL="./json/illust_category_ja.json",s.command.ManageFriendsCommand.__meta__={fields:{api:{inject:null}}},s.command.ManageFriendsCommand.NAME="ManageFriends",s.command.ReadCommand.__meta__={fields:{api:{inject:null}}},s.command.ReadCommand.NAME="Read",s.command.ReloadDataCommand.__meta__={fields:{api:{inject:null}}},s.command.ReloadDataCommand.NAME="ReloadData",s.command.SelectTalkCommand.__meta__={fields:{dataStore:{inject:null},settings:{inject:null}}},s.command.SelectTalkCommand.NAME="SelectTalk",s.command.SendCommand.__meta__={fields:{api:{inject:null}}},s.command.SendCommand.NAME="Send",s.command.SignInCommand.__meta__={fields:{api:{inject:null},settings:{inject:null}}},s.command.SignInCommand.NAME="SignIn",s.command.SignOutCommand.__meta__={fields:{api:{inject:null},settings:{inject:null}}},s.command.SignOutCommand.NAME="SignOut",s.command.TalkCommand.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},s.command.TalkCommand.NAME="Talk",s.command.UpdateProfileCommand.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},s.command.UpdateProfileCommand.NAME="UpdateProfile",s.command.UpdateUserCommand.__meta__={fields:{api:{inject:null}}},s.command.UpdateUserCommand.NAME="UpdateUser",s.command.UrlCommand.__meta__={fields:{routing:{inject:null}}},s.command.UrlCommand.NAME="Url",s.entity.Message.MAX_READ_USER_IDS_COUNT=16,s.js.Base64.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.DEBUG=!1,s.js.TextCanonicalizer.HIRAGANA_SMALL_A=12353,s.js.TextCanonicalizer.HIRAGANA_NN=12435,s.js.TextCanonicalizer.KATAKANA_SMALL_A=12449,r.patterns.proxy.Proxy.NAME="Proxy",s.proxy.AlberoBroadcastProxy.__meta__={fields:{api:{inject:null},dataStore:{inject:null},settings:{inject:null}}},s.proxy.AlberoBroadcastProxy.NAME="broadcast",s.proxy.AlberoServiceProxy.__meta__={fields:{rpc:{inject:null},settings:{inject:null},dataStore:{inject:null},fileService:{inject:null}}},s.proxy.AlberoServiceProxy.NAME="api",s.proxy.AlberoServiceProxy.API_VERSION="1.35",s.proxy.AppStateProxy.NAME="appState",s.proxy.DataStoreProxy.NAME="dataStore",s.proxy.DataStoreProxy.TYPE_FRIEND=0,s.proxy.DataStoreProxy.TYPE_ACQUAINSTANCE=1,s.proxy.DataStoreProxy.TYPE_NONE=2,s.proxy.FileServiceProxy.__meta__={fields:{settings:{inject:null}}},s.proxy.FileServiceProxy.NAME="fileService",s.proxy.FormatterProxy.__meta__={fields:{dataStore:{inject:null},fileService:{inject:null},settings:{inject:null}}},s.proxy.FormatterProxy.NAME="formatter",s.proxy.MsgPackRpcProxy.__meta__={fields:{broadcast:{inject:null}}},s.proxy.MsgPackRpcProxy.NAME="rpc",s.proxy.MsgPackRpcProxy.lastMsgId=0,s.proxy._MsgPackRpcProxy.ConnectionKeeper.PING_INTERVAL_ON_CONNECTED=45e3,s.proxy.RoutingProxy.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},s.proxy.RoutingProxy.NAME="routing",s.proxy.SettingsProxy.NAME="settings",s.proxy.SettingsProxy.KEY_ACCESS_TOKEN="access_token",s.proxy.SettingsProxy.KEY_SELECTED_DOMAIN_ID_H="selected_domain_id_h",s.proxy.SettingsProxy.KEY_SELECTED_DOMAIN_ID_L="selected_domain_id_l",s.proxy.SettingsProxy.COOKIE_KEY_SEND_BY_ENTER="send-by-enter",s.proxy.SettingsProxy.COOKIE_EXPIRES_SEND_BY_ENTER=31536e3,s.proxy.SettingsProxy.KEY_SELECTED_STAMP_TAB_ID="selected_stamp_tab_id",s.proxy.SettingsProxy.KEY_INPUT_TEXT="input_text",s.proxy.SettingsProxy.KEY_COPY_PROFILE_TO_ALL_DOMAINS="copy_profile_to_all_domains",r.patterns.mediator.Mediator.NAME="Mediator",u.mediator.CommandLineMediator.__meta__={fields:{dataStore:{inject:null},api:{inject:null}}},u.mediator.CommandLineMediator.NAME="commandline",v.ds.ObjectMap.count=0,v.io.Output.LN2=Math.log(2),x.Encoder.FLOAT_SINGLE_MIN=1.401298464324817e-45,x.Encoder.FLOAT_SINGLE_MAX=3.4028234663852886e38,x.Encoder.FLOAT_DOUBLE_MIN=5e-324,x.Encoder.FLOAT_DOUBLE_MAX=1.7976931348623157e308,f.main()}("undefined"!=typeof window?window:exports);