!function(a){"use strict";function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function c(a){return a instanceof Array?function(){return i.iter(a)}:"function"==typeof a.iterator?d(a,a.iterator):a.iterator}function d(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=z++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}a.albero=a.albero||{};var e={},f=function(){return x.Boot.__string_rec(this,"")},g=a.DirectAPI=function(){this.eventEmitter=new B};e.DirectAPI=g,g.__name__=["DirectAPI"],g.getInstance=function(){return null==g.instance&&(g.instance=new g),g.instance},g.main=function(){},g.prototype={setOptions:function(a){null!=a?(A.host=a.host,A.endpoint=a.endpoint,A.accessToken=a.access_token,A.proxyURL=a.proxyURL,A.account=a.account):u._e(u.dateStr(),"Not enough parameters provided. I need a access token","","","","")},parseInt64:function(a){return t.Int64Helper.parse(a)},stringifyInt64:function(a){return a.toString()},listen:function(){this.facade=t.AppFacade.getInstance(),this.api=x.Boot.__cast(this.facade.retrieveProxy("api"),t.proxy.AlberoServiceProxy),this.data=x.Boot.__cast(this.facade.retrieveProxy("dataStore"),t.proxy.DataStoreProxy),this.facade.startup()},emit:function(a,b,c,d){this.eventEmitter.emit(a,b,c,d)},on:function(a,b){return this.eventEmitter.on(a,b)},__class__:g};var h=function(a,b){b=b.split("u").join(""),this.r=new RegExp(a,b)};e.EReg=h,h.__name__=["EReg"],h.prototype={match:function(a){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(a),this.r.s=a,null!=this.r.m},matched:function(a){if(null!=this.r.m&&a>=0&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched"},split:function(a){var b="#__delim__#";return a.replace(this.r,b).split(b)},replace:function(a,b){return a.replace(this.r,b)},__class__:h};var i=function(){};e.HxOverrides=i,i.__name__=["HxOverrides"],i.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>f?"0"+f:""+f)},i.strDate=function(a){var b=a.length;switch(b){case 8:var c=a.split(":"),d=new Date;return d.setTime(0),d.setUTCHours(c[0]),d.setUTCMinutes(c[1]),d.setUTCSeconds(c[2]),d;case 10:var e=a.split("-");return new Date(e[0],e[1]-1,e[2],0,0,0);case 19:var f=a.split(" "),g=f[0].split("-"),h=f[1].split(":");return new Date(g[0],g[1]-1,g[2],h[0],h[1],h[2]);default:throw"Invalid date format : "+a}},i.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c},i.substr=function(a,b,c){return null!=b&&0!=b&&null!=c&&0>c?"":(null==c&&(c=a.length),0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b),a.substr(b,c))},i.indexOf=function(a,b,c){var d=a.length;for(0>c&&(c+=d,0>c&&(c=0));d>c;){if(a[c]===b)return c;c++}return-1},i.remove=function(a,b){var c=i.indexOf(a,b,0);return-1==c?!1:(a.splice(c,1),!0)},i.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var j=function(){};e.Lambda=j,j.__name__=["Lambda"],j.array=function(a){for(var b=new Array,d=c(a)();d.hasNext();){var e=d.next();b.push(e)}return b},j.map=function(a,b){for(var d=new k,e=c(a)();e.hasNext();){var f=e.next();d.add(b(f))}return d},j.exists=function(a,b){for(var d=c(a)();d.hasNext();){var e=d.next();if(b(e))return!0}return!1},j.fold=function(a,b,d){for(var e=c(a)();e.hasNext();){var f=e.next();d=b(f,d)}return d},j.count=function(a,b){var d=0;if(null==b)for(var e=c(a)();e.hasNext();){{e.next()}d++}else for(var f=c(a)();f.hasNext();){var g=f.next();b(g)&&d++}return d},j.find=function(a,b){for(var d=c(a)();d.hasNext();){var e=d.next();if(b(e))return e}return null};var k=function(){this.length=0};e.List=k,k.__name__=["List"],k.prototype={add:function(a){var b=[a];null==this.h?this.h=b:this.q[1]=b,this.q=b,this.length++},isEmpty:function(){return null==this.h},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c[0]==a)return null==b?this.h=c[1]:b[1]=c[1],this.q==c&&(this.q=b),this.length--,!0;b=c,c=c[1]}return!1},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];return this.h=this.h[1],a}}},__class__:k};var l=function(){};e.IMap=l,l.__name__=["IMap"],Math.__name__=["Math"];var m=function(){};e.Reflect=m,m.__name__=["Reflect"],m.field=function(a,b){try{return a[b]}catch(c){return null}},m.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty;for(var d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b},m.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)},m.deleteField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)?(delete a[b],!0):!1};var n=function(){};e.Std=n,n.__name__=["Std"],n.string=function(a){return x.Boot.__string_rec(a,"")},n["int"]=function(a){return 0|a},n.parseInt=function(a){var b=parseInt(a,10);return 0!=b||120!=i.cca(a,1)&&88!=i.cca(a,1)||(b=parseInt(a)),isNaN(b)?null:b},n.parseFloat=function(a){return parseFloat(a)};var o=function(){this.b=""};e.StringBuf=o,o.__name__=["StringBuf"],o.prototype={add:function(a){this.b+=n.string(a)},toString:function(){return this.b},__class__:o};var p=function(){};e.StringTools=p,p.__name__=["StringTools"],p.htmlEscape=function(a,b){return a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"),b?a.split('"').join("&quot;").split("'").join("&#039;"):a},p.startsWith=function(a,b){return a.length>=b.length&&i.substr(a,0,b.length)==b},p.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c&&i.substr(a,d-c,c)==b},p.replace=function(a,b,c){return a.split(b).join(c)},p.fastCodeAt=function(a,b){return a.charCodeAt(b)};var q=e.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};q.TNull=["TNull",0],q.TNull.toString=f,q.TNull.__enum__=q,q.TInt=["TInt",1],q.TInt.toString=f,q.TInt.__enum__=q,q.TFloat=["TFloat",2],q.TFloat.toString=f,q.TFloat.__enum__=q,q.TBool=["TBool",3],q.TBool.toString=f,q.TBool.__enum__=q,q.TObject=["TObject",4],q.TObject.toString=f,q.TObject.__enum__=q,q.TFunction=["TFunction",5],q.TFunction.toString=f,q.TFunction.__enum__=q,q.TClass=function(a){var b=["TClass",6,a];return b.__enum__=q,b.toString=f,b},q.TEnum=function(a){var b=["TEnum",7,a];return b.__enum__=q,b.toString=f,b},q.TUnknown=["TUnknown",8],q.TUnknown.toString=f,q.TUnknown.__enum__=q;var r=function(){};e.Type=r,r.__name__=["Type"],r.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__},r.getClassName=function(a){var b=a.__name__;return b.join(".")},r.getEnumName=function(a){var b=a.__ename__;return b.join(".")},r.resolveClass=function(a){var b=e[a];return null!=b&&b.__name__?b:null},r.resolveEnum=function(a){var b=e[a];return null!=b&&b.__ename__?b:null},r.createInstance=function(a,b){var c=b.length;switch(c){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments"}return null},r.createEmptyInstance=function(a){function b(){}return b.prototype=a.prototype,new b},r.createEnum=function(a,b,c){var d=m.field(a,b);if(null==d)throw"No such constructor "+b;if(m.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d},r.getEnumConstructs=function(a){var b=a.__constructs__;return b.slice()},r["typeof"]=function(a){var b=typeof a;switch(b){case"boolean":return q.TBool;case"string":return q.TClass(String);case"number":return Math.ceil(a)==a%2147483648?q.TInt:q.TFloat;case"object":if(null==a)return q.TNull;var c=a.__enum__;if(null!=c)return q.TEnum(c);var d;return d=a instanceof Array&&null==a.__enum__?Array:a.__class__,null!=d?q.TClass(d):q.TObject;case"function":return a.__name__||a.__ename__?q.TObject:q.TFunction;case"undefined":return q.TNull;default:return q.TUnknown}},r.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;d>c;){var e=c++;if(!r.enumEq(a[e],b[e]))return!1}var f=a.__enum__;if(f!=b.__enum__||null==f)return!1}catch(g){return!1}return!0};var s={};s.interfaces={},s.interfaces.IFacade=function(){},e["puremvc.interfaces.IFacade"]=s.interfaces.IFacade,s.interfaces.IFacade.__name__=["puremvc","interfaces","IFacade"],s.interfaces.IFacade.prototype={__class__:s.interfaces.IFacade},s.patterns={},s.patterns.facade={},s.patterns.facade.Facade=function(){s.patterns.facade.Facade.instance=this,this.initializeFacade()},e["puremvc.patterns.facade.Facade"]=s.patterns.facade.Facade,s.patterns.facade.Facade.__name__=["puremvc","patterns","facade","Facade"],s.patterns.facade.Facade.__interfaces__=[s.interfaces.IFacade],s.patterns.facade.Facade.getInstance=function(){return null==s.patterns.facade.Facade.instance&&(s.patterns.facade.Facade.instance=new s.patterns.facade.Facade),s.patterns.facade.Facade.instance},s.patterns.facade.Facade.prototype={initializeFacade:function(){this.initializeModel(),this.initializeController(),this.initializeView()},initializeController:function(){null==this.controller&&(this.controller=s.core.Controller.getInstance())},initializeModel:function(){null==this.model&&(this.model=s.core.Model.getInstance())},initializeView:function(){null==this.view&&(this.view=s.core.View.getInstance())},registerCommand:function(a,b){this.controller.registerCommand(a,b)},removeCommand:function(a){this.controller.removeCommand(a)},hasCommand:function(a){return this.controller.hasCommand(a)},registerProxy:function(a){this.model.registerProxy(a)},retrieveProxy:function(a){return this.model.retrieveProxy(a)},removeProxy:function(a){var b=null;return null!=this.model&&(b=this.model.removeProxy(a)),b},hasProxy:function(a){return this.model.hasProxy(a)},registerMediator:function(a){null!=this.view&&this.view.registerMediator(a)},retrieveMediator:function(a){return this.view.retrieveMediator(a)},removeMediator:function(a){var b=null;return null!=this.view&&(b=this.view.removeMediator(a)),b},hasMediator:function(a){return this.view.hasMediator(a)},sendNotification:function(a,b,c){this.notifyObservers(new s.patterns.observer.Notification(a,b,c))},notifyObservers:function(a){null!=this.view&&this.view.notifyObservers(a)},__class__:s.patterns.facade.Facade};var t={};t.AppFacade=function(){s.patterns.facade.Facade.call(this)},e["albero.AppFacade"]=t.AppFacade,t.AppFacade.__name__=["albero","AppFacade"],t.AppFacade.getInstance=function(){return null==s.patterns.facade.Facade.instance&&(s.patterns.facade.Facade.instance=new t.AppFacade),x.Boot.__cast(s.patterns.facade.Facade.instance,t.AppFacade)},t.AppFacade.__super__=s.patterns.facade.Facade,t.AppFacade.prototype=b(s.patterns.facade.Facade.prototype,{initializeModel:function(){s.patterns.facade.Facade.prototype.initializeModel.call(this);for(var a=[new t.proxy.AppStateProxy,new t.proxy.DataStoreProxy,new t.proxy.SettingsProxy,new t.proxy.MsgPackRpcProxy,new t.proxy.AlberoBroadcastProxy,new t.proxy.AlberoServiceProxy,new t.proxy.FileServiceProxy,new t.proxy.FormatterProxy,new t.proxy.RoutingProxy,new t.proxy.StagedFileInfoStoreProxy,new t.proxy.SearchServiceProxy],b=0;b<a.length;){var c=a[b];++b,this.registerProxy(c)}for(var d=0;d<a.length;){var e=a[d];++d,this.autoBind(e)}},initializeView:function(){s.patterns.facade.Facade.prototype.initializeView.call(this);for(var a=[new v.mediator.CommandLineMediator],b=0;b<a.length;){var c=a[b];++b,this.registerMediator(c)}},initializeController:function(){s.patterns.facade.Facade.prototype.initializeController.call(this);for(var a=[t.command.DomainCommand,t.command.SignInCommand,t.command.SignOutCommand,t.command.ReloadDataCommand,t.command.SendCommand,t.command.TalkCommand,t.command.ManageFriendsCommand,t.command.ReadCommand,t.command.LoadStampSetCommand,t.command.FileCommand,t.command.SelectTalkCommand,t.command.UpdateUserCommand,t.command.UpdateProfileCommand,t.command.UrlCommand,t.command.SearchCommand],b=0;b<a.length;){var c=a[b];++b;var d=p.replace(r.getClassName(c).split(".").pop(),"Command","");this.registerCommand(d,c)}},registerMediator:function(a){this.autoBind(a),s.patterns.facade.Facade.prototype.registerMediator.call(this,a)},autoBind:function(a){for(var b=w.rtti.Meta.getFields(r.getClass(a)),c=0,d=m.fields(b);c<d.length;){var e=d[c];++c;var f=m.field(b,e);if(Object.prototype.hasOwnProperty.call(f,"inject")){var g=this.retrieveProxy(e);null==g||(a[e]=g)}}},startup:function(){x.Boot.__cast(this.retrieveProxy("appState"),t.proxy.AppStateProxy).start()},__class__:t.AppFacade}),t.AppState=e["albero.AppState"]={__ename__:["albero","AppState"],__constructs__:["Active","Inactive"]},t.AppState.Active=["Active",0],t.AppState.Active.toString=f,t.AppState.Active.__enum__=t.AppState,t.AppState.Inactive=["Inactive",1],t.AppState.Inactive.toString=f,t.AppState.Inactive.__enum__=t.AppState,t.ConnectionStatus=e["albero.ConnectionStatus"]={__ename__:["albero","ConnectionStatus"],__constructs__:["Ok","Error","ConcurrentAccessError","ForcibliyClosedError"]},t.ConnectionStatus.Ok=["Ok",0],t.ConnectionStatus.Ok.toString=f,t.ConnectionStatus.Ok.__enum__=t.ConnectionStatus,t.ConnectionStatus.Error=["Error",1],t.ConnectionStatus.Error.toString=f,t.ConnectionStatus.Error.__enum__=t.ConnectionStatus,t.ConnectionStatus.ConcurrentAccessError=["ConcurrentAccessError",2],t.ConnectionStatus.ConcurrentAccessError.toString=f,t.ConnectionStatus.ConcurrentAccessError.__enum__=t.ConnectionStatus,t.ConnectionStatus.ForcibliyClosedError=["ForcibliyClosedError",3],t.ConnectionStatus.ForcibliyClosedError.toString=f,t.ConnectionStatus.ForcibliyClosedError.__enum__=t.ConnectionStatus,t.History=function(){},e["albero.History"]=t.History,t.History.__name__=["albero","History"],t.History.replaceState=function(a,b,c){return null!=window.history?(window.history.replaceState(a,b,c),!0):!1},t.Int64Helper=function(){},e["albero.Int64Helper"]=t.Int64Helper,t.Int64Helper.__name__=["albero","Int64Helper"],t.Int64Helper.parse=function(a){var b=new h("^\\d+$","");if(!b.match(a))return null;for(var c=new w.Int64(0,0),d=new w.Int64(0,10),e=0,f=a.length;f>e;){var g=e++;c=w.Int64.add(w.Int64.mul(c,d),w.Int64.make(0,n.parseInt(a.charAt(g))))}return c},t.Int64Helper.getHigh=function(a){return a.high},t.Int64Helper.getLow=function(a){return a.low},t.Int64Helper.idStr=function(a){return"_"+a.high+"_"+a.low},t.Int64Helper.makeFromIdStr=function(a){var b=new h("^_(-?\\d*)_(-?\\d*)$","");return b.match(a)?w.Int64.make(n.parseInt(b.matched(1)),n.parseInt(b.matched(2))):null},t.Int64Helper.eq=function(a,b){return null!=a&&null!=b&&a.high==b.high&&a.low==b.low},t.Int64Helper.toFloat=function(a){var b=4294967296,c=a.high,d=a.low;return c*b+(d>=0?d:d+b)},t.Int64Helper.idStrToInt64=function(a){var b=a.split("_");return b.length>2?w.Int64.make(n.parseInt(b[1]),n.parseInt(b[2])):null},t.Int64Helper.decrement=function(a){return null==a?null:w.Int64.sub(a,new w.Int64(0,1))},t.Int64Helper.increment=function(a){return null==a?null:w.Int64.add(a,new w.Int64(0,1))},t.Int64Helper.contains=function(a,b){if(null==a)return!1;for(var c=0;c<a.length;){var d=a[c];if(++c,null!=d&&null!=b&&d.high==b.high&&d.low==b.low)return!0}return!1},t.Int64Helper.remove=function(a,b){if(null==a)return!1;for(var c=0;c<a.length;){var d=a[c];if(++c,null!=d&&null!=b&&d.high==b.high&&d.low==b.low)return i.remove(a,d),!0}return!1},t.Urls=e["albero.Urls"]={__ename__:["albero","Urls"],__constructs__:["auto","domains","domain","members","talks","actions","console","settings","announcements","error","loading"]},t.Urls.auto=["auto",0],t.Urls.auto.toString=f,t.Urls.auto.__enum__=t.Urls,t.Urls.domains=["domains",1],t.Urls.domains.toString=f,t.Urls.domains.__enum__=t.Urls,t.Urls.domain=function(a){var b=["domain",2,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.members=function(a){var b=["members",3,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.talks=function(a){var b=["talks",4,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.actions=function(a){var b=["actions",5,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.console=function(a){var b=["console",6,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.settings=function(a){var b=["settings",7,a];return b.__enum__=t.Urls,b.toString=f,b},t.Urls.announcements=["announcements",8],t.Urls.announcements.toString=f,t.Urls.announcements.__enum__=t.Urls,t.Urls.error=["error",9],t.Urls.error.toString=f,t.Urls.error.__enum__=t.Urls,t.Urls.loading=["loading",10],t.Urls.loading.toString=f,t.Urls.loading.__enum__=t.Urls,s.interfaces.INotifier=function(){},e["puremvc.interfaces.INotifier"]=s.interfaces.INotifier,s.interfaces.INotifier.__name__=["puremvc","interfaces","INotifier"],s.interfaces.INotifier.prototype={__class__:s.interfaces.INotifier},s.patterns.observer={},s.patterns.observer.Notifier=function(){this.facade=s.patterns.facade.Facade.getInstance()},e["puremvc.patterns.observer.Notifier"]=s.patterns.observer.Notifier,s.patterns.observer.Notifier.__name__=["puremvc","patterns","observer","Notifier"],s.patterns.observer.Notifier.__interfaces__=[s.interfaces.INotifier],s.patterns.observer.Notifier.prototype={sendNotification:function(a,b,c){this.facade.sendNotification(a,b,c)},__class__:s.patterns.observer.Notifier},s.interfaces.ICommand=function(){},e["puremvc.interfaces.ICommand"]=s.interfaces.ICommand,s.interfaces.ICommand.__name__=["puremvc","interfaces","ICommand"],s.interfaces.ICommand.prototype={__class__:s.interfaces.ICommand},s.patterns.command={},s.patterns.command.SimpleCommand=function(){s.patterns.observer.Notifier.call(this)},e["puremvc.patterns.command.SimpleCommand"]=s.patterns.command.SimpleCommand,s.patterns.command.SimpleCommand.__name__=["puremvc","patterns","command","SimpleCommand"],s.patterns.command.SimpleCommand.__interfaces__=[s.interfaces.ICommand],s.patterns.command.SimpleCommand.__super__=s.patterns.observer.Notifier,s.patterns.command.SimpleCommand.prototype=b(s.patterns.observer.Notifier.prototype,{execute:function(){},__class__:s.patterns.command.SimpleCommand}),t.command={},t.command.AutoBindCommand=function(){s.patterns.command.SimpleCommand.call(this),t.AppFacade.getInstance().autoBind(this)},e["albero.command.AutoBindCommand"]=t.command.AutoBindCommand,t.command.AutoBindCommand.__name__=["albero","command","AutoBindCommand"],t.command.AutoBindCommand.__super__=s.patterns.command.SimpleCommand,t.command.AutoBindCommand.prototype=b(s.patterns.command.SimpleCommand.prototype,{__class__:t.command.AutoBindCommand}),t.command.DomainCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.DomainCommand"]=t.command.DomainCommand,t.command.DomainCommand.__name__=["albero","command","DomainCommand"],t.command.DomainCommand.__super__=t.command.AutoBindCommand,t.command.DomainCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.api.acceptDomainInvite(c);break;case 1:var d=b[2];this.api.deleteDomainInvite(d);break;case 2:var e=b[2];this.api.leaveDomain(e)}},__class__:t.command.DomainCommand}),t.command.DomainAction=e["albero.command.DomainAction"]={__ename__:["albero","command","DomainAction"],__constructs__:["ACCEPT_INVITE","DELETE_INVITE","LEAVE"]},t.command.DomainAction.ACCEPT_INVITE=function(a){var b=["ACCEPT_INVITE",0,a];return b.__enum__=t.command.DomainAction,b.toString=f,b},t.command.DomainAction.DELETE_INVITE=function(a){var b=["DELETE_INVITE",1,a];return b.__enum__=t.command.DomainAction,b.toString=f,b},t.command.DomainAction.LEAVE=function(a){var b=["LEAVE",2,a];return b.__enum__=t.command.DomainAction,b.toString=f,b},t.command.FileCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.FileCommand"]=t.command.FileCommand,t.command.FileCommand.__name__=["albero","command","FileCommand"],t.command.FileCommand.__super__=t.command.AutoBindCommand,t.command.FileCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.upload(d.domainId,d.id,c);break;case 1:var e=b[4],f=b[3],g=b[2];this.api.uploadMulti(g.domainId,g.id,f,e);break;case 2:var h=b[2];this.api.deleteAttachment(h.id,h.messageId)}},__class__:t.command.FileCommand}),t.command.FileAction=e["albero.command.FileAction"]={__ename__:["albero","command","FileAction"],__constructs__:["UPLOAD","UPLOAD_MULTI","DELETE"]},t.command.FileAction.UPLOAD=function(a,b){var c=["UPLOAD",0,a,b];return c.__enum__=t.command.FileAction,c.toString=f,c},t.command.FileAction.UPLOAD_MULTI=function(a,b,c){var d=["UPLOAD_MULTI",1,a,b,c];return d.__enum__=t.command.FileAction,d.toString=f,d},t.command.FileAction.DELETE=function(a){var b=["DELETE",2,a];return b.__enum__=t.command.FileAction,b.toString=f,b},t.command.LoadStampSetCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.LoadStampSetCommand"]=t.command.LoadStampSetCommand,t.command.LoadStampSetCommand.__name__=["albero","command","LoadStampSetCommand"],t.command.LoadStampSetCommand.__super__=t.command.AutoBindCommand,t.command.LoadStampSetCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(){new Array},__class__:t.command.LoadStampSetCommand}),t.command.ManageFriendsCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.ManageFriendsCommand"]=t.command.ManageFriendsCommand,t.command.ManageFriendsCommand.__name__=["albero","command","ManageFriendsCommand"],t.command.ManageFriendsCommand.__super__=t.command.AutoBindCommand,t.command.ManageFriendsCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody(),c=b.action;switch(c[1]){case 0:for(var d=0,e=b.users;d<e.length;){var f=e[d];++d,this.api.addFriend(f)}break;case 1:for(var g=0,h=b.users;g<h.length;){var i=h[g];++g,this.api.deleteFriend(i)}}},__class__:t.command.ManageFriendsCommand}),t.command.ManageFriendsAction=e["albero.command.ManageFriendsAction"]={__ename__:["albero","command","ManageFriendsAction"],__constructs__:["ADD","DELETE"]},t.command.ManageFriendsAction.ADD=["ADD",0],t.command.ManageFriendsAction.ADD.toString=f,t.command.ManageFriendsAction.ADD.__enum__=t.command.ManageFriendsAction,t.command.ManageFriendsAction.DELETE=["DELETE",1],t.command.ManageFriendsAction.DELETE.toString=f,t.command.ManageFriendsAction.DELETE.__enum__=t.command.ManageFriendsAction,t.command.ReadCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.ReadCommand"]=t.command.ReadCommand,t.command.ReadCommand.__name__=["albero","command","ReadCommand"],t.command.ReadCommand.__super__=t.command.AutoBindCommand,t.command.ReadCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[3],d=b[2];this.api.updateReadStatuses(d,c);break;case 1:var e=b[2];this.api.updateAnnouncementReadStatus(e);break;case 2:var f=b[3],g=b[2];this.api.getReadStatus(g,f)}},__class__:t.command.ReadCommand}),t.command.ReadType=e["albero.command.ReadType"]={__ename__:["albero","command","ReadType"],__constructs__:["TALK","ANNOUNCEMENT","READ_STATUS"]},t.command.ReadType.TALK=function(a,b){var c=["TALK",0,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReadType.ANNOUNCEMENT=function(a){var b=["ANNOUNCEMENT",1,a];return b.__enum__=t.command.ReadType,b.toString=f,b},t.command.ReadType.READ_STATUS=function(a,b){var c=["READ_STATUS",2,a,b];return c.__enum__=t.command.ReadType,c.toString=f,c},t.command.ReloadDataCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.ReloadDataCommand"]=t.command.ReloadDataCommand,t.command.ReloadDataCommand.__name__=["albero","command","ReloadDataCommand"],t.command.ReloadDataCommand.__super__=t.command.AutoBindCommand,t.command.ReloadDataCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:this.api.getDomains();break;case 1:this.api.getFriends(),this.api.getAcquaintances();break;case 2:this.api.getTalks();break;case 3:var c=b[4],d=b[3],e=b[2];this.api.getMessages(e,d,c);break;case 4:var f=b[2];this.api.getAllUsers(f);break;case 5:var g=b[3],h=b[2];this.api.getUsers(h,g);break;case 6:var i=b[3],j=b[2];this.api.getProfile(j,i);break;case 7:var k=b[3],l=b[2];this.api.searchDomainUsers(l,k);break;case 8:var m=b[2];this.api.getAnnouncements(m);break;case 9:var n=b[5],o=b[4],p=b[3],q=b[2];this.api.getQuestions(q,p,o,n);break;case 10:var r=b[3],s=b[2];this.api.getQuestion(s,r);break;case 11:var t=b[3],u=b[2];this.api.getAttachments(u,t)}},__class__:t.command.ReloadDataCommand}),t.command.ReloadDataType=e["albero.command.ReloadDataType"]={__ename__:["albero","command","ReloadDataType"],__constructs__:["Domains","Friends","Talks","Messages","AllUsers","GetUsers","GetProfile","SearchDomainUsers","Announcements","Questions","Question","Files"]},t.command.ReloadDataType.Domains=["Domains",0],t.command.ReloadDataType.Domains.toString=f,t.command.ReloadDataType.Domains.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.Friends=["Friends",1],t.command.ReloadDataType.Friends.toString=f,t.command.ReloadDataType.Friends.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.Talks=["Talks",2],t.command.ReloadDataType.Talks.toString=f,t.command.ReloadDataType.Talks.__enum__=t.command.ReloadDataType,t.command.ReloadDataType.Messages=function(a,b,c){var d=["Messages",3,a,b,c];return d.__enum__=t.command.ReloadDataType,d.toString=f,d},t.command.ReloadDataType.AllUsers=function(a){var b=["AllUsers",4,a];return b.__enum__=t.command.ReloadDataType,b.toString=f,b},t.command.ReloadDataType.GetUsers=function(a,b){var c=["GetUsers",5,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.GetProfile=function(a,b){var c=["GetProfile",6,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.SearchDomainUsers=function(a,b){var c=["SearchDomainUsers",7,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.Announcements=function(a){var b=["Announcements",8,a];return b.__enum__=t.command.ReloadDataType,b.toString=f,b},t.command.ReloadDataType.Questions=function(a,b,c,d){var e=["Questions",9,a,b,c,d];return e.__enum__=t.command.ReloadDataType,e.toString=f,e},t.command.ReloadDataType.Question=function(a,b){var c=["Question",10,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.ReloadDataType.Files=function(a,b){var c=["Files",11,a,b];return c.__enum__=t.command.ReloadDataType,c.toString=f,c},t.command.SearchCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SearchCommand"]=t.command.SearchCommand,t.command.SearchCommand.__name__=["albero","command","SearchCommand"],t.command.SearchCommand.__super__=t.command.AutoBindCommand,t.command.SearchCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[4],d=b[3],e=b[2];this.searchService.isSearching()||(null==c&&this.searchService.saveParams(e),this.api.search(e,d,c));break;case 1:this.searchService.clearEditingParams(),this.searchService.clearRecentParams(),this.searchService.clearSearching(),this.sendNotification("notify_search_clear",{})}},__class__:t.command.SearchCommand}),t.command.SearchAction=e["albero.command.SearchAction"]={__ename__:["albero","command","SearchAction"],__constructs__:["SEARCH","CLEAR"]},t.command.SearchAction.SEARCH=function(a,b,c){var d=["SEARCH",0,a,b,c];return d.__enum__=t.command.SearchAction,d.toString=f,d},t.command.SearchAction.CLEAR=["CLEAR",1],t.command.SearchAction.CLEAR.toString=f,t.command.SearchAction.CLEAR.__enum__=t.command.SearchAction,t.command.SelectTalkCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SelectTalkCommand"]=t.command.SelectTalkCommand,t.command.SelectTalkCommand.__name__=["albero","command","SelectTalkCommand"],t.command.SelectTalkCommand.__super__=t.command.AutoBindCommand,t.command.SelectTalkCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();this.settings.setSelectedTalk(b)},__class__:t.command.SelectTalkCommand}),t.command.SendCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SendCommand"]=t.command.SendCommand,t.command.SendCommand.__name__=["albero","command","SendCommand"],t.command.SendCommand.__super__=t.command.AutoBindCommand,t.command.SendCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();this.api.createMessage(b.talkId,b.type,b.content)},__class__:t.command.SendCommand}),t.command.SignInCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SignInCommand"]=t.command.SignInCommand,t.command.SignInCommand.__name__=["albero","command","SignInCommand"],t.command.SignInCommand.__super__=t.command.AutoBindCommand,t.command.SignInCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(){var a=this.settings.getAccessToken();if(null!=a)return void this.api.createSession(a);var b;b=null!=A.account?A.account.split(":"):null,null!=b&&2==b.length&&this.api.createAccessToken(b[0],b[1])},__class__:t.command.SignInCommand}),t.command.SignOutCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.SignOutCommand"]=t.command.SignOutCommand,t.command.SignOutCommand.__name__=["albero","command","SignOutCommand"],t.command.SignOutCommand.__super__=t.command.AutoBindCommand,t.command.SignOutCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(){this.api.deleteSession(),this.settings.clearInputTextForAll(),this.dataStore.clear(!0)},__class__:t.command.SignOutCommand}),t.command.TalkCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.TalkCommand"]=t.command.TalkCommand,t.command.TalkCommand.__name__=["albero","command","TalkCommand"],t.command.TalkCommand.__super__=t.command.AutoBindCommand,t.command.TalkCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.api.createTalk(c);break;case 1:var d=b[3],e=b[2];this.api.addTalkers(e,d);break;case 2:var f=b[2];this.api.deleteTalker(f,this.dataStore.me.id);break;case 3:var g=b[5],h=b[4],i=b[3],j=b[2];this.api.updateGroupTalk(j,i,h,g)}},__class__:t.command.TalkCommand}),t.command.TalkAction=e["albero.command.TalkAction"]={__ename__:["albero","command","TalkAction"],__constructs__:["NEW","ADD","DELETE","UPDATE"]},t.command.TalkAction.NEW=function(a){var b=["NEW",0,a];return b.__enum__=t.command.TalkAction,b.toString=f,b},t.command.TalkAction.ADD=function(a,b){var c=["ADD",1,a,b];return c.__enum__=t.command.TalkAction,c.toString=f,c},t.command.TalkAction.DELETE=function(a){var b=["DELETE",2,a];return b.__enum__=t.command.TalkAction,b.toString=f,b},t.command.TalkAction.UPDATE=function(a,b,c,d){var e=["UPDATE",3,a,b,c,d];return e.__enum__=t.command.TalkAction,e.toString=f,e},t.command.UpdateProfileCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.UpdateProfileCommand"]=t.command.UpdateProfileCommand,t.command.UpdateProfileCommand.__name__=["albero","command","UpdateProfileCommand"],t.command.UpdateProfileCommand.__super__=t.command.AutoBindCommand,t.command.UpdateProfileCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody().domainId,c=a.getBody().profileItemValues,d=a.getBody().copyToAllDomains,e=this.dataStore.getDomain(b);
if(null!=e&&null!=e.profileDefinition.itemDefinitions){var f=new Array;if(d){for(var g=new Array,h=0;h<c.length;){var j=c[h];++h;var k=t.entity.ProfileItemDefinition.findById(e.profileDefinition.itemDefinitions,j.profileItemId);null!=k&&g.push({name:k.name,value:j.value})}for(var l=0,m=this.dataStore.getDomains();l<m.length;){var n=m[l];if(++l,!n.frozen){for(var o=new Array,p=0,q=n.profileDefinition.itemDefinitions;p<q.length;){var r=q[p];if(++p,r.visible&&!r.locked)for(var s=0;s<g.length;){var u=g[s];if(++s,u.name==r.name){var v=new t.entity.ProfileItemValue;v.profileItemId=r.profileItemId,v.value=u.value,o.push(v);break}}}o.length>0&&f.push({domainId:n.id,profileItemValues:o})}}}else{for(var w=new Array,x=(i.iter(c),0);x<c.length;){var y=c[x];++x;var z=t.entity.ProfileItemDefinition.findById(e.profileDefinition.itemDefinitions,y.profileItemId);null!=z&&z.visible&&!z.locked&&w.push(y)}w.length>0&&f.push({domainId:e.id,profileItemValues:w})}0==f.length?this.sendNotification("update_profile_responsed",this.dataStore.me):this.api.updateProfile(f)}},__class__:t.command.UpdateProfileCommand}),t.command.UpdateUserCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.UpdateUserCommand"]=t.command.UpdateUserCommand,t.command.UpdateUserCommand.__name__=["albero","command","UpdateUserCommand"],t.command.UpdateUserCommand.__super__=t.command.AutoBindCommand,t.command.UpdateUserCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();(null==b.profileImage||p.startsWith(b.profileImage.type,"image/"))&&this.api.updateUser(b.displayName,b.profileImage,b.profileImageUrl,b.phoneticDisplayName)},__class__:t.command.UpdateUserCommand}),t.command.UrlCommand=function(){t.command.AutoBindCommand.call(this)},e["albero.command.UrlCommand"]=t.command.UrlCommand,t.command.UrlCommand.__name__=["albero","command","UrlCommand"],t.command.UrlCommand.__super__=t.command.AutoBindCommand,t.command.UrlCommand.prototype=b(t.command.AutoBindCommand.prototype,{execute:function(a){var b=a.getBody();switch(b[1]){case 0:var c=b[2];this.routing.forward(c);break;case 1:var d=b[2];this.routing.redirect(d);break;case 2:this.routing.back()}},__class__:t.command.UrlCommand}),t.command.UrlAction=e["albero.command.UrlAction"]={__ename__:["albero","command","UrlAction"],__constructs__:["FORWARD","REDIRECT","BACK"]},t.command.UrlAction.FORWARD=function(a){var b=["FORWARD",0,a];return b.__enum__=t.command.UrlAction,b.toString=f,b},t.command.UrlAction.REDIRECT=function(a){var b=["REDIRECT",1,a];return b.__enum__=t.command.UrlAction,b.toString=f,b},t.command.UrlAction.BACK=["BACK",2],t.command.UrlAction.BACK.toString=f,t.command.UrlAction.BACK.__enum__=t.command.UrlAction,t.entity={},t.entity.Announcement=function(a){null!=a&&(this.id=a.announcement_id,this.domainId=a.domain_id,this.groupId=a.group_id,this.groupName=a.group_name,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.userId=a.user_id,this.userName=a.user_name,this.createdAt=a.created_at)},e["albero.entity.Announcement"]=t.entity.Announcement,t.entity.Announcement.__name__=["albero","entity","Announcement"],t.entity.Announcement.prototype={__class__:t.entity.Announcement},t.entity.AnnouncementStatus=function(a){null!=a&&(this.domainId=a.domain_id,this.unreadCount=null!=a.unread_count?a.unread_count:0,this.maxAnnouncementId=a.max_announcement_id,null!=a.max_annoucement&&(this.maxAnnouncement=new t.entity.Announcement(a.max_annoucement)),this.maxReadAnnouncementId=a.max_read_announcement_id)},e["albero.entity.AnnouncementStatus"]=t.entity.AnnouncementStatus,t.entity.AnnouncementStatus.__name__=["albero","entity","AnnouncementStatus"],t.entity.AnnouncementStatus.prototype={updateRead:function(a){var b=0,c=null;if(null!=a.readAnnouncementIds)for(var d=0,e=a.readAnnouncementIds;d<e.length;){var f=e[d];++d,(null==this.maxReadAnnouncementId||w.Int64.compare(f,this.maxReadAnnouncementId)>0)&&((null==c||w.Int64.compare(f,c)>0)&&(c=f),b++)}if(null!=c){this.maxReadAnnouncementId=c,this.unreadCount=this.unreadCount-b,this.unreadCount<0&&(this.unreadCount=0);{"Announcement status is updated. domainId:"+n.string(this.domainId)+", maxReadAnnouncementId:"+n.string(this.maxReadAnnouncementId)+", unreadCount:"+this.unreadCount}}},__class__:t.entity.AnnouncementStatus},t.entity.AnnouncementStatusUpdate=function(a){null!=a&&(this.domainId=a.domain_id,this.readAnnouncementIds=a.read_announcement_ids)},e["albero.entity.AnnouncementStatusUpdate"]=t.entity.AnnouncementStatusUpdate,t.entity.AnnouncementStatusUpdate.__name__=["albero","entity","AnnouncementStatusUpdate"],t.entity.AnnouncementStatusUpdate.prototype={__class__:t.entity.AnnouncementStatusUpdate},t.entity.Configuration=function(){},e["albero.entity.Configuration"]=t.entity.Configuration,t.entity.Configuration.__name__=["albero","entity","Configuration"],t.entity.Configuration.prototype={__class__:t.entity.Configuration},t.entity.Domain=function(a){null!=a&&(this.id=a.domain_id,this.name=a.domain_name,this.role=new t.entity.DomainRole(a.role),this.frozen=a.frozen,this.updatedAt=a.updated_at,this.plan=new t.entity.Plan(a.plan),this.closed=!1,this.profileDefinition=new t.entity.ProfileDefinition(a.profile_definition))},e["albero.entity.Domain"]=t.entity.Domain,t.entity.Domain.__name__=["albero","entity","Domain"],t.entity.Domain.prototype={__class__:t.entity.Domain},t.entity.DomainRole=function(a){null!=a&&(this.type=this.typeOf(a.type),this.allowGuests=this.def(a.allow_guests,!0),this.allowCreateAttachments=this.def(a.allow_create_attachments,!0),this.allowReadAttachments=this.def(a.allow_read_attachments,!0),this.allowCreateAnnouncement=this.def(a.allow_create_announcement,!1),this.allowReadAnnouncements=a.allow_read_announcements,null==this.allowReadAnnouncements&&(this.allowReadAnnouncements=!0),this.allowListUsers=a.allow_list_users,null==this.allowListUsers&&(this.allowListUsers=!0))},e["albero.entity.DomainRole"]=t.entity.DomainRole,t.entity.DomainRole.__name__=["albero","entity","DomainRole"],t.entity.DomainRole.prototype={def:function(a,b){return a?a:b},typeOf:function(a){switch(a){case 10:return t.entity.DomainRoleType.owner;case 20:return t.entity.DomainRoleType.manager;case 30:return t.entity.DomainRoleType.user;default:return t.entity.DomainRoleType.guest}},__class__:t.entity.DomainRole},t.entity.DomainRoleType=e["albero.entity.DomainRoleType"]={__ename__:["albero","entity","DomainRoleType"],__constructs__:["owner","manager","user","guest"]},t.entity.DomainRoleType.owner=["owner",0],t.entity.DomainRoleType.owner.toString=f,t.entity.DomainRoleType.owner.__enum__=t.entity.DomainRoleType,t.entity.DomainRoleType.manager=["manager",1],t.entity.DomainRoleType.manager.toString=f,t.entity.DomainRoleType.manager.__enum__=t.entity.DomainRoleType,t.entity.DomainRoleType.user=["user",2],t.entity.DomainRoleType.user.toString=f,t.entity.DomainRoleType.user.__enum__=t.entity.DomainRoleType,t.entity.DomainRoleType.guest=["guest",3],t.entity.DomainRoleType.guest.toString=f,t.entity.DomainRoleType.guest.__enum__=t.entity.DomainRoleType,t.entity.DomainInvite=function(a){null!=a&&(this.id=a.domain_id,this.name=a.domain_name,this.updatedAt=a.updated_at)},e["albero.entity.DomainInvite"]=t.entity.DomainInvite,t.entity.DomainInvite.__name__=["albero","entity","DomainInvite"],t.entity.DomainInvite.prototype={__class__:t.entity.DomainInvite},t.entity.User=function(a){null!=a&&(this.id=a.user_id,this.displayName=a.display_name,this.canonicalDisplayName=a.canonical_display_name,this.phoneticDisplayName=a.phonetic_display_name,this.canonicalPhoneticDisplayName=a.canonical_phonetic_display_name,this.profileImageUrl=a.profile_image_url,this.updatedAt=a.updated_at)},e["albero.entity.User"]=t.entity.User,t.entity.User.__name__=["albero","entity","User"],t.entity.User.prototype={__class__:t.entity.User},t.entity.DomainUser=function(a){if(t.entity.User.call(this,a),null!=a&&(this.domainId=a.domain_id,null!=a.profile_contact)){this.profileContact=new Array;var b,c=0;for(b=x.Boot.__cast(a.profile_contact,Array);c<b.length;){var d=b[c];++c,this.profileContact.push(new t.entity.ProfileItemValue(d))}}},e["albero.entity.DomainUser"]=t.entity.DomainUser,t.entity.DomainUser.__name__=["albero","entity","DomainUser"],t.entity.DomainUser.__super__=t.entity.User,t.entity.DomainUser.prototype=b(t.entity.User.prototype,{match:function(a,b){if(null==a||0==a.length)return!0;if((null==this.canonicalDisplayName||0==this.canonicalDisplayName.length)&&(this.canonicalDisplayName=t.js.TextCanonicalizer.canonicalize(this.displayName)),this.canonicalDisplayName.indexOf(a)>-1)return!0;if(null!=this.canonicalPhoneticDisplayName&&this.canonicalPhoneticDisplayName.indexOf(a)>-1)return!0;if(null!=this.profileContact&&null!=b.profileDefinition.itemDefinitions)for(var c=0,d=this.profileContact;c<d.length;){var e=d[c];++c;for(var f=0,g=b.profileDefinition.itemDefinitions;f<g.length;){var h=g[f];if(++f,h.profileItemId==e.profileItemId){if(h.visible&&10==h.group&&e.canonicalValue.indexOf(a)>-1)return!0;break}}}return!1},__class__:t.entity.DomainUser}),t.entity.FileInfo=function(a){null!=a&&(this.attachmentId=a.attachment_id,this.messageId=a.message_id,this.talkId=a.talk_id,this.id=a.file_id,this.userId=a.user_id,this.name=a.name,this.contentType=a.content_type,this.contentSize=a.content_size,this.url=a.url,this.thumbUrl=a.thumbnail_url,this.updatedAt=a.updated_at,this.file=a.file,this.thumbFile=a.thumbnail_file,this.deleted=null!=a.deleted?a.deleted:!1)},e["albero.entity.FileInfo"]=t.entity.FileInfo,t.entity.FileInfo.__name__=["albero","entity","FileInfo"],t.entity.FileInfo.prototype={__class__:t.entity.FileInfo},t.entity.FileInfoDeletion=function(a){null!=a&&(this.messageId=a[0],this.talkId=a[1],this.fileId=a[2])},e["albero.entity.FileInfoDeletion"]=t.entity.FileInfoDeletion,t.entity.FileInfoDeletion.__name__=["albero","entity","FileInfoDeletion"],t.entity.FileInfoDeletion.prototype={__class__:t.entity.FileInfoDeletion},t.entity.HitContext=function(a){if(null!=a&&(this.talkId=a.talk_id,null!=a.messages)){this.messages=new Array;var b,c=0;for(b=x.Boot.__cast(a.messages,Array);c<b.length;){var d=b[c];++c,this.messages.push(new t.entity.HitMessage(d))}}},e["albero.entity.HitContext"]=t.entity.HitContext,t.entity.HitContext.__name__=["albero","entity","HitContext"],t.entity.HitContext.prototype={__class__:t.entity.HitContext},t.entity.HitMessage=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.userId=a.user_id,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.createdAt=a.created_at,this.hit=a.hit)},e["albero.entity.HitMessage"]=t.entity.HitMessage,t.entity.HitMessage.__name__=["albero","entity","HitMessage"],t.entity.HitMessage.prototype={__class__:t.entity.HitMessage},t.entity.Me=function(a){if(t.entity.User.call(this,a),null!=a&&(this.email=a.email,null!=a.profiles)){this.profiles=new Array;var b,c=0;for(b=x.Boot.__cast(a.profiles,Array);c<b.length;){var d=b[c];++c,this.profiles.push(new t.entity.Profile(d))}}},e["albero.entity.Me"]=t.entity.Me,t.entity.Me.__name__=["albero","entity","Me"],t.entity.Me.__super__=t.entity.User,t.entity.Me.prototype=b(t.entity.User.prototype,{toDomainUser:function(a){var b=new t.entity.DomainUser;if(b.id=this.id,b.domainId=a,b.displayName=this.displayName,b.canonicalDisplayName=this.canonicalDisplayName,b.phoneticDisplayName=this.phoneticDisplayName,b.canonicalPhoneticDisplayName=this.canonicalPhoneticDisplayName,b.profileImageUrl=this.profileImageUrl,b.updatedAt=this.updatedAt,b.email=this.email,null!=this.profiles)for(var c=0,d=this.profiles;c<d.length;){var e=d[c];if(++c,t.Int64Helper.eq(e.domainId,a)){b.profileContact=e.itemValues;break}}return b},__class__:t.entity.Me}),t.entity.Message=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.userId=a.user_id,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.createdAt=a.created_at,this.readCount=a.read_count,this.readUserIds=a.read_user_ids,this.isUnreadCountTarget=null==a.is_unread_count_target?!0:a.is_unread_count_target)},e["albero.entity.Message"]=t.entity.Message,t.entity.Message.__name__=["albero","entity","Message"],t.entity.Message.typeOf=function(a){switch(a){case 0:return t.entity.MessageType.system;case 1:return t.entity.MessageType.text;case 2:return t.entity.MessageType.stamp;case 3:return t.entity.MessageType.geo;case 4:return t.entity.MessageType.file;case 5:return t.entity.MessageType.textMultipleFile;case 500:return t.entity.MessageType.yesOrNo;case 501:return t.entity.MessageType.yesOrNoReply;case 502:return t.entity.MessageType.selectOne;case 503:return t.entity.MessageType.selectOneReply;case 504:return t.entity.MessageType.todo;case 505:return t.entity.MessageType.todoDone;case 506:return t.entity.MessageType.yesOrNoClosed;case 507:return t.entity.MessageType.selectOneClosed;case 508:return t.entity.MessageType.todoClosed;case 600:return t.entity.MessageType.phoneCall;case 601:return t.entity.MessageType.phoneReceive;default:return t.entity.MessageType.unknown}},t.entity.Message.enumIndex=function(a){switch(a[1]){case 0:case 1:case 2:case 3:case 4:case 5:return a[1];case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:return 500+a[1]-6;case 15:case 16:return 600+a[1]-15;default:return-1}},t.entity.Message.prototype={__class__:t.entity.Message},t.entity.MessageType=e["albero.entity.MessageType"]={__ename__:["albero","entity","MessageType"],__constructs__:["system","text","stamp","geo","file","textMultipleFile","yesOrNo","yesOrNoReply","selectOne","selectOneReply","todo","todoDone","yesOrNoClosed","selectOneClosed","todoClosed","phoneCall","phoneReceive","unknown"]},t.entity.MessageType.system=["system",0],t.entity.MessageType.system.toString=f,t.entity.MessageType.system.__enum__=t.entity.MessageType,t.entity.MessageType.text=["text",1],t.entity.MessageType.text.toString=f,t.entity.MessageType.text.__enum__=t.entity.MessageType,t.entity.MessageType.stamp=["stamp",2],t.entity.MessageType.stamp.toString=f,t.entity.MessageType.stamp.__enum__=t.entity.MessageType,t.entity.MessageType.geo=["geo",3],t.entity.MessageType.geo.toString=f,t.entity.MessageType.geo.__enum__=t.entity.MessageType,t.entity.MessageType.file=["file",4],t.entity.MessageType.file.toString=f,t.entity.MessageType.file.__enum__=t.entity.MessageType,t.entity.MessageType.textMultipleFile=["textMultipleFile",5],t.entity.MessageType.textMultipleFile.toString=f,t.entity.MessageType.textMultipleFile.__enum__=t.entity.MessageType,t.entity.MessageType.yesOrNo=["yesOrNo",6],t.entity.MessageType.yesOrNo.toString=f,t.entity.MessageType.yesOrNo.__enum__=t.entity.MessageType,t.entity.MessageType.yesOrNoReply=["yesOrNoReply",7],t.entity.MessageType.yesOrNoReply.toString=f,t.entity.MessageType.yesOrNoReply.__enum__=t.entity.MessageType,t.entity.MessageType.selectOne=["selectOne",8],t.entity.MessageType.selectOne.toString=f,t.entity.MessageType.selectOne.__enum__=t.entity.MessageType,t.entity.MessageType.selectOneReply=["selectOneReply",9],t.entity.MessageType.selectOneReply.toString=f,t.entity.MessageType.selectOneReply.__enum__=t.entity.MessageType,t.entity.MessageType.todo=["todo",10],t.entity.MessageType.todo.toString=f,t.entity.MessageType.todo.__enum__=t.entity.MessageType,t.entity.MessageType.todoDone=["todoDone",11],t.entity.MessageType.todoDone.toString=f,t.entity.MessageType.todoDone.__enum__=t.entity.MessageType,t.entity.MessageType.yesOrNoClosed=["yesOrNoClosed",12],t.entity.MessageType.yesOrNoClosed.toString=f,t.entity.MessageType.yesOrNoClosed.__enum__=t.entity.MessageType,t.entity.MessageType.selectOneClosed=["selectOneClosed",13],t.entity.MessageType.selectOneClosed.toString=f,t.entity.MessageType.selectOneClosed.__enum__=t.entity.MessageType,t.entity.MessageType.todoClosed=["todoClosed",14],t.entity.MessageType.todoClosed.toString=f,t.entity.MessageType.todoClosed.__enum__=t.entity.MessageType,t.entity.MessageType.phoneCall=["phoneCall",15],t.entity.MessageType.phoneCall.toString=f,t.entity.MessageType.phoneCall.__enum__=t.entity.MessageType,t.entity.MessageType.phoneReceive=["phoneReceive",16],t.entity.MessageType.phoneReceive.toString=f,t.entity.MessageType.phoneReceive.__enum__=t.entity.MessageType,t.entity.MessageType.unknown=["unknown",17],t.entity.MessageType.unknown.toString=f,t.entity.MessageType.unknown.__enum__=t.entity.MessageType,t.entity.MessageReadStatus=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.readUserIds=a.read_user_ids,this.unreadUserIds=a.unread_user_ids)},e["albero.entity.MessageReadStatus"]=t.entity.MessageReadStatus,t.entity.MessageReadStatus.__name__=["albero","entity","MessageReadStatus"],t.entity.MessageReadStatus.prototype={__class__:t.entity.MessageReadStatus},t.entity.MessageReadStatusesUpdate=function(a){null!=a&&(this.talkId=a.talk_id,this.messageIds=a.message_ids,this.readUserIds=a.read_user_ids,this.messageIdsExcludingUnreadCountTargets=a.message_ids_excluding_unread_count_targets,null==this.messageIdsExcludingUnreadCountTargets&&(this.messageIdsExcludingUnreadCountTargets=new Array))},e["albero.entity.MessageReadStatusesUpdate"]=t.entity.MessageReadStatusesUpdate,t.entity.MessageReadStatusesUpdate.__name__=["albero","entity","MessageReadStatusesUpdate"],t.entity.MessageReadStatusesUpdate.prototype={__class__:t.entity.MessageReadStatusesUpdate},t.entity.Plan=function(a){null!=a&&(this.name=a.plan_name,this.trial=a.trial)},e["albero.entity.Plan"]=t.entity.Plan,t.entity.Plan.__name__=["albero","entity","Plan"],t.entity.Plan.prototype={__class__:t.entity.Plan},t.entity.Profile=function(a){if(null!=a&&(this.domainId=a.domain_id,this.userId=a.user_id,null!=a.item_values)){this.itemValues=new Array;var b,c=0;for(b=x.Boot.__cast(a.item_values,Array);c<b.length;){var d=b[c];++c,this.itemValues.push(new t.entity.ProfileItemValue(d))}}},e["albero.entity.Profile"]=t.entity.Profile,t.entity.Profile.__name__=["albero","entity","Profile"],t.entity.Profile.prototype={__class__:t.entity.Profile},t.entity.ProfileDefinition=function(a){if(null!=a&&(this.domainId=a.domain_id,null!=a.item_definitions)){this.itemDefinitions=new Array;var b,c=0;for(b=x.Boot.__cast(a.item_definitions,Array);c<b.length;){var d=b[c];++c,this.itemDefinitions.push(new t.entity.ProfileItemDefinition(d))}}},e["albero.entity.ProfileDefinition"]=t.entity.ProfileDefinition,t.entity.ProfileDefinition.__name__=["albero","entity","ProfileDefinition"],t.entity.ProfileDefinition.isSameProfileItemDefinitions=function(a,b){if(b.length!=a.length)return!1;for(var c=0,d=b.length;d>c;){var e=c++;if(b[e].profileItemId!=a[e].profileItemId)return!1}return!0},t.entity.ProfileDefinition.prototype={getVisibleItemDefinition:function(a){null==a&&(a=!1);var b=new Array;if(null!=this.itemDefinitions)for(var c=0,d=this.itemDefinitions;c<d.length;){var e=d[c];++c,e.visible&&(a||10==e.group)&&b.push(e)}return b},__class__:t.entity.ProfileDefinition},t.entity.ProfileItemDefinition=function(a){this.locked=!1,this.visible=!0,null!=a&&(this.profileItemId=a.profile_item_id,this.group=a.group,this.name=a.name,this.valueType=a.value_type,null!=a.visible&&(this.visible=a.visible),null!=a.locked&&(this.locked=a.locked))},e["albero.entity.ProfileItemDefinition"]=t.entity.ProfileItemDefinition,t.entity.ProfileItemDefinition.__name__=["albero","entity","ProfileItemDefinition"],t.entity.ProfileItemDefinition.findById=function(a,b){for(var c=0;c<a.length;){var d=a[c];if(++c,d.profileItemId==b)return d}return null},t.entity.ProfileItemDefinition.prototype={__class__:t.entity.ProfileItemDefinition},t.entity.ProfileItemValue=function(a){null!=a&&(this.profileItemId=a.profile_item_id,this.value=a.value,this.canonicalValue=a.canonical_value)},e["albero.entity.ProfileItemValue"]=t.entity.ProfileItemValue,t.entity.ProfileItemValue.__name__=["albero","entity","ProfileItemValue"],t.entity.ProfileItemValue.findById=function(a,b){for(var c=0;c<a.length;){var d=a[c];if(++c,d.profileItemId==b)return d}return null},t.entity.ProfileItemValue.prototype={__class__:t.entity.ProfileItemValue},t.entity.Question=function(a){null!=a&&(this.id=a.message_id,this.talkId=a.talk_id,this.type=t.entity.Message.typeOf(a.type),this.content=a.content,this.userId=a.user_id,this.recipientIds=a.assigned_user_ids,this.responses=this.createResponses(a.responses),this.listing=a.listing,this.closingType=t.entity.Question.typeOf(a.closing_type),this.maxResponseId=a.max_response_id,this.lastResponse=a.last_response,this.lastResponseUserId=a.last_response_user_id,this.createdAt=a.created_at,this.updatedAt=a.updated_at,this.responded=a.responded,this.closed=a.closed)},e["albero.entity.Question"]=t.entity.Question,t.entity.Question.__name__=["albero","entity","Question"],t.entity.Question.typeOf=function(a){switch(a){case 0:return t.entity.QuestionClosingType.any;case 1:return t.entity.QuestionClosingType.all;default:return t.entity.QuestionClosingType.unknown}},t.entity.Question.prototype={createResponses:function(a){var b=[];if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c,b.push(new t.entity.QuestionResponse(d))}return b},isCompleted:function(a){if(r.enumEq(this.type,t.entity.MessageType.todo)){if(r.enumEq(this.closingType,t.entity.QuestionClosingType.any)){if(null!=this.lastResponse&&"DONE"==this.responses[this.lastResponse].content)return!0}else{if(!this.responded)return!1;for(var b=0,c=this.responses;b<c.length;){var d=c[b];if(++b,t.Int64Helper.contains(d.userIds,a))return"DONE"==d.content?!0:!1}}return!1}return r.enumEq(this.closingType,t.entity.QuestionClosingType.any)?null!=this.lastResponse:this.responded},__class__:t.entity.Question},t.entity.QuestionResponse=function(a){null!=a&&(this.content=a.content,this.count=a.count,this.userIds=a.user_ids)},e["albero.entity.QuestionResponse"]=t.entity.QuestionResponse,t.entity.QuestionResponse.__name__=["albero","entity","QuestionResponse"],t.entity.QuestionResponse.prototype={__class__:t.entity.QuestionResponse},t.entity.QuestionClosingType=e["albero.entity.QuestionClosingType"]={__ename__:["albero","entity","QuestionClosingType"],__constructs__:["any","all","unknown"]},t.entity.QuestionClosingType.any=["any",0],t.entity.QuestionClosingType.any.toString=f,t.entity.QuestionClosingType.any.__enum__=t.entity.QuestionClosingType,t.entity.QuestionClosingType.all=["all",1],t.entity.QuestionClosingType.all.toString=f,t.entity.QuestionClosingType.all.__enum__=t.entity.QuestionClosingType,t.entity.QuestionClosingType.unknown=["unknown",2],t.entity.QuestionClosingType.unknown.toString=f,t.entity.QuestionClosingType.unknown.__enum__=t.entity.QuestionClosingType,t.entity.QuestionFromType=e["albero.entity.QuestionFromType"]={__ename__:["albero","entity","QuestionFromType"],__constructs__:["fromSelf","fromOther"]},t.entity.QuestionFromType.fromSelf=["fromSelf",0],t.entity.QuestionFromType.fromSelf.toString=f,t.entity.QuestionFromType.fromSelf.__enum__=t.entity.QuestionFromType,t.entity.QuestionFromType.fromOther=["fromOther",1],t.entity.QuestionFromType.fromOther.toString=f,t.entity.QuestionFromType.fromOther.__enum__=t.entity.QuestionFromType,t.entity.QuestionFilter=e["albero.entity.QuestionFilter"]={__ename__:["albero","entity","QuestionFilter"],__constructs__:["onlyClosed","onlyUnclosed","noFilter"]},t.entity.QuestionFilter.onlyClosed=["onlyClosed",0],t.entity.QuestionFilter.onlyClosed.toString=f,t.entity.QuestionFilter.onlyClosed.__enum__=t.entity.QuestionFilter,t.entity.QuestionFilter.onlyUnclosed=["onlyUnclosed",1],t.entity.QuestionFilter.onlyUnclosed.toString=f,t.entity.QuestionFilter.onlyUnclosed.__enum__=t.entity.QuestionFilter,t.entity.QuestionFilter.noFilter=["noFilter",2],t.entity.QuestionFilter.noFilter.toString=f,t.entity.QuestionFilter.noFilter.__enum__=t.entity.QuestionFilter,t.entity.SearchAttachmentsResult=function(a){if(null!=a&&(this.total=a.total,this.marker=a.marker,this.nextMarker=a.next_marker,this.contents=new Array,null!=a.contents)){var b,c=0;for(b=x.Boot.__cast(a.contents,Array);c<b.length;){var d=b[c];++c,this.contents.push(new t.entity.FileInfo(d))}}},e["albero.entity.SearchAttachmentsResult"]=t.entity.SearchAttachmentsResult,t.entity.SearchAttachmentsResult.__name__=["albero","entity","SearchAttachmentsResult"],t.entity.SearchAttachmentsResult.prototype={__class__:t.entity.SearchAttachmentsResult},t.entity.SearchMessagesResult=function(a){if(null!=a&&(this.total=a.total,this.marker=a.marker,this.nextMarker=a.next_marker,this.contents=new Array,null!=a.contents)){var b,c=0;for(b=x.Boot.__cast(a.contents,Array);c<b.length;){var d=b[c];++c,this.contents.push(new t.entity.HitContext(d))}}},e["albero.entity.SearchMessagesResult"]=t.entity.SearchMessagesResult,t.entity.SearchMessagesResult.__name__=["albero","entity","SearchMessagesResult"],t.entity.SearchMessagesResult.prototype={__class__:t.entity.SearchMessagesResult},t.entity.SearchParams=function(a){null!=a&&(null!=a.domain_id_str&&(this.domainId=t.Int64Helper.makeFromIdStr(a.domain_id_str)),null!=a.talk_id_str&&(this.talkId=t.Int64Helper.makeFromIdStr(a.talk_id_str)),this.keyword=a.keyword,this.searchType=null==a.search_type||""==a.search_type?t.entity.SearchType.MESSAGES:t.entity.SearchType.ATTACHMENTS,this.sinceText=a.since,this.untilText=a.until,null!=a.from_id_str&&(this.fromUserId=t.Int64Helper.makeFromIdStr(a.from_id_str)))},e["albero.entity.SearchParams"]=t.entity.SearchParams,t.entity.SearchParams.__name__=["albero","entity","SearchParams"],t.entity.SearchParams.dateQueryToText=function(a,b){if(null==a)return b;switch(a){case"t":return"";case"-1d":return"";case"-3d":return"3";default:return p.replace(a,"-","/")}},t.entity.SearchParams.prototype={toProps:function(){var a={};null!=this.domainId&&(a.domain_id_str=t.Int64Helper.idStr(this.domainId)),null!=this.talkId&&(a.talk_id_str=t.Int64Helper.idStr(this.talkId)),a.keyword=this.keyword;var b=this.searchType;switch(b[1]){case 0:a.search_type="";break;case 1:a.search_type=""}return a.since=this.sinceText,a.until=this.untilText,null!=this.fromUserId&&(a.from_id_str=t.Int64Helper.idStr(this.fromUserId)),a},copy:function(){return new t.entity.SearchParams(this.toProps())},eq:function(a){return(this.domainId==a.domainId||t.Int64Helper.eq(this.domainId,a.domainId))&&(this.talkId==a.talkId||t.Int64Helper.eq(this.talkId,a.talkId))?this.keyword!=a.keyword?!1:r.enumEq(this.searchType,a.searchType)?this.sinceText!=a.sinceText?!1:this.untilText!=a.untilText?!1:this.fromUserId==a.fromUserId||t.Int64Helper.eq(this.fromUserId,a.fromUserId)?!0:!1:!1:!1},getQueryText:function(){var a=new Array;return null!=this.keyword&&0!=this.keyword.length&&a.push(this.keyword),null!=this.sinceText&&a.push("since:"+this.sinceText),null!=this.untilText&&a.push("until:"+this.untilText),null!=this.fromUserId&&a.push("from:"+this.fromUserId.toString()),a.join(" ")},getPeriodText:function(){return""+t.entity.SearchParams.dateQueryToText(this.sinceText,"")+"~"+t.entity.SearchParams.dateQueryToText(this.untilText,"")},__class__:t.entity.SearchParams},t.entity.SearchType=e["albero.entity.SearchType"]={__ename__:["albero","entity","SearchType"],__constructs__:["MESSAGES","ATTACHMENTS"]},t.entity.SearchType.MESSAGES=["MESSAGES",0],t.entity.SearchType.MESSAGES.toString=f,t.entity.SearchType.MESSAGES.__enum__=t.entity.SearchType,t.entity.SearchType.ATTACHMENTS=["ATTACHMENTS",1],t.entity.SearchType.ATTACHMENTS.toString=f,t.entity.SearchType.ATTACHMENTS.__enum__=t.entity.SearchType,t.entity.StampSet=function(){},e["albero.entity.StampSet"]=t.entity.StampSet,t.entity.StampSet.__name__=["albero","entity","StampSet"],t.entity.StampSet.prototype={__class__:t.entity.StampSet},t.entity.Talk=function(a){null!=a&&(this.id=a.talk_id,this.domainId=a.domain_id,this.type=this.typeOf(a.type),this.name=a.talk_name,this.iconUrl=a.icon_url,this.userIds=a.user_ids,this.guestIds=a.inviting_guest_ids,this.updatedAt=a.updated_at,this.leftUsers=this.getUsers(a.left_users))},e["albero.entity.Talk"]=t.entity.Talk,t.entity.Talk.__name__=["albero","entity","Talk"],t.entity.Talk.prototype={typeOf:function(a){switch(a){case 1:return t.entity.TalkType.PairTalk;case 2:return t.entity.TalkType.GroupTalk;default:return t.entity.TalkType.Unknown}},getUsers:function(a){if(null==a)return null;for(var b=new Array,c=0;c<a.length;){var d=a[c];++c,b.push(new t.entity.DomainUser(d))}return b},__class__:t.entity.Talk},t.entity.TalkType=e["albero.entity.TalkType"]={__ename__:["albero","entity","TalkType"],__constructs__:["Unknown","PairTalk","GroupTalk"]},t.entity.TalkType.Unknown=["Unknown",0],t.entity.TalkType.Unknown.toString=f,t.entity.TalkType.Unknown.__enum__=t.entity.TalkType,t.entity.TalkType.PairTalk=["PairTalk",1],t.entity.TalkType.PairTalk.toString=f,t.entity.TalkType.PairTalk.__enum__=t.entity.TalkType,t.entity.TalkType.GroupTalk=["GroupTalk",2],t.entity.TalkType.GroupTalk.toString=f,t.entity.TalkType.GroupTalk.__enum__=t.entity.TalkType,t.entity.TalkStatus=function(a){this.unreadCount=0,null!=a&&(this.id=a.talk_id,this.unreadCount=null!=a.unread_count?a.unread_count:0,this.maxMessageId=a.max_message_id,this.maxMessage=null!=a.max_message?new t.entity.Message(a.max_message):null,this.maxReadMessageId=a.max_read_message_id,this.maxEveryoneReadMessageId=a.max_everyone_read_message_id)},e["albero.entity.TalkStatus"]=t.entity.TalkStatus,t.entity.TalkStatus.__name__=["albero","entity","TalkStatus"],t.entity.TalkStatus.prototype={__class__:t.entity.TalkStatus},t.entity.TalkStatusUpdate=function(a){null!=a&&(this.talkId=a.talk_id,this.maxEveryoneReadMessageId=a.max_everyone_read_message_id)},e["albero.entity.TalkStatusUpdate"]=t.entity.TalkStatusUpdate,t.entity.TalkStatusUpdate.__name__=["albero","entity","TalkStatusUpdate"],t.entity.TalkStatusUpdate.prototype={__class__:t.entity.TalkStatusUpdate},t.js={},t.js.Base64=function(){},e["albero.js.Base64"]=t.js.Base64,t.js.Base64.__name__=["albero","js","Base64"],t.js.Base64.initCodes=function(){for(var a=new Array,b=0,c=t.js.Base64.BASE64.length;c>b;){var d=b++;a[t.js.Base64.BASE64.charCodeAt(d)]=d}return a},t.js.Base64.encode=function(a){for(var b=a,c=0,d=b.length-2,e=new o,f=t.js.Base64.BASE64;d>c;){var g=b.get(c++),h=b.get(c++),i=b.get(c++);e.add(f.charAt(g>>2)),e.add(f.charAt(63&(g<<4|h>>4))),e.add(f.charAt(63&(h<<2|i>>6))),e.add(f.charAt(63&i))}if(c==d){var j=b.get(c++),k=b.get(c++);e.add(f.charAt(j>>2)),e.add(f.charAt(63&(j<<4|k>>4))),e.add(f.charAt(k<<2&63))}else if(c==d+1){var l=b.get(c++);e.add(f.charAt(l>>2)),e.add(f.charAt(l<<4&63))}var m=e.b,n=m.length%4;switch(n){case 2:m+="==";break;case 3:m+="="}return m},t.js.Base64.decode=function(a){var b=a.length-1;"="==a.charAt(b)&&("="==a.charAt(b-1)&&b--,a=i.substr(a,0,b));var c=a.length,d=a,e=t.js.Base64.CODES;null==e&&(e=t.js.Base64.initCodes(),t.js.Base64.CODES=e);var f,g=0,h=3&c;f=3*(c>>2)+(h>=2?h-1:0);for(var j=g+(c-h),k=w.io.Bytes.alloc(f),l=0;j>g;){var m=e[p.fastCodeAt(d,g++)],n=e[p.fastCodeAt(d,g++)];k.set(l++,m<<2|n>>4);var o=e[p.fastCodeAt(d,g++)];k.set(l++,n<<4|o>>2);var q=e[p.fastCodeAt(d,g++)];k.set(l++,o<<6|q)}if(h>=2){var r=e[p.fastCodeAt(d,g++)],s=e[p.fastCodeAt(d,g++)];if(k.set(l++,r<<2|s>>4),3==h){var u=e[p.fastCodeAt(d,g++)];k.set(l++,s<<4|u>>2)}}return k},t.js.LocalStorage=function(){this.isDirty=!1},e["albero.js.LocalStorage"]=t.js.LocalStorage,t.js.LocalStorage.__name__=["albero","js","LocalStorage"],t.js.LocalStorage.prototype={load:function(){var a=this.val();if(null==a||""==a)return null;var b=null;try{b=w.Unserializer.run(a),this.isDirty=!1}catch(c){u._w(u.dateStr(),c,"","","","")}return b},save:function(a){try{this.val(w.Serializer.run(a)),this.isDirty=!1}catch(b){u._w(u.dateStr(),b,"","","","")}},setDirtyFlag:function(){0==this.isDirty&&(this.val(""),this.isDirty=!0)},val:function(a){var b=null;return b=x.Browser.getLocalStorage(),null!=b&&(null==a?a=b.getItem("dataStore"):""==a?b.removeItem("dataStore"):b.setItem("dataStore",a)),a},__class__:t.js.LocalStorage};var u=a.AlberoLog=function(){};e.AlberoLog=u,u.__name__=["AlberoLog"],u._nop=function(){},u.dateStr=function(){return"["+function(){var a,b=new Date;
return a=i.dateStr(b)}(this)+"] "},t.js.NFKCTextSearch=function(a,b){this.ignoreCase=b,b&&(a=a.toUpperCase()),this.normalizedPattern=a.normalize("NFKC")},e["albero.js.NFKCTextSearch"]=t.js.NFKCTextSearch,t.js.NFKCTextSearch.__name__=["albero","js","NFKCTextSearch"],t.js.NFKCTextSearch.prototype={search:function(a){var b=new o,c=new Array;this.ignoreCase&&(a=a.toUpperCase()),this.normalize(a,b,c);for(var d,e=0,f=new Array,g=b.b;-1!=(d=g.indexOf(this.normalizedPattern,e));){e=d+this.normalizedPattern.length;for(var h=c[d],i=c[e-1],j=null,k=e,l=c.length;l>k;){var m=k++;if(j=c[m],i!=j)break;j=null}null==j&&(j=a.length),f.push(new t.js.HitSpan(h,j))}return f},normalize:function(a,b,c){for(var d=a.length,e=new o,f=0,g=0;d>g;){var h=g++,i=e.b.length,j=e.b,k=j+a.charAt(h),l=k.normalize("NFKC");if(k!=l)if(p.startsWith(l,j)){b.add(j.substring(0,i)),e=new o,e.add(l.substring(i,l.length));for(var m=0;i>m;){{m++}c.push(f)}f=h}else e=new o,e.b+=null==l?"null":""+l;else{b.b+=n.string(e),e=new o,e.add(a.charAt(h));for(var q=0;i>q;){{q++}c.push(f)}f=h}}b.b+=null==e.b?"null":""+e.b;for(var r=0,s=e.b.length;s>r;){{r++}c.push(f)}},__class__:t.js.NFKCTextSearch},t.js.HitSpan=function(a,b){this.start=a,this.end=b},e["albero.js.HitSpan"]=t.js.HitSpan,t.js.HitSpan.__name__=["albero","js","HitSpan"],t.js.HitSpan.prototype={__class__:t.js.HitSpan},t.js.TextCanonicalizer=function(){},e["albero.js.TextCanonicalizer"]=t.js.TextCanonicalizer,t.js.TextCanonicalizer.__name__=["albero","js","TextCanonicalizer"],t.js.TextCanonicalizer.canonicalize=function(a){return t.js.TextCanonicalizer.basicLatinAlphabetToUpperCase(t.js.TextCanonicalizer.hiraganaToKatakana(t.js.TextCanonicalizer.normalize(t.js.TextCanonicalizer.eraseInvisible(a))))},t.js.TextCanonicalizer.basicLatinAlphabetToUpperCase=function(a){return a.toUpperCase()},t.js.TextCanonicalizer.hiraganaToKatakana=function(a){for(var b=0,c="",d=0,e=a.length;e>d;){var f=d++,g=i.cca(a,f);g>=t.js.TextCanonicalizer.HIRAGANA_SMALL_A&&g<=t.js.TextCanonicalizer.HIRAGANA_NN&&(c+=a.substring(b,f),c+=String.fromCharCode(g+(t.js.TextCanonicalizer.KATAKANA_SMALL_A-t.js.TextCanonicalizer.HIRAGANA_SMALL_A)),b=f+1)}return c+=a.substring(b,a.length)},t.js.TextCanonicalizer.normalize=function(a){return a.normalize("NFKC")},t.js.TextCanonicalizer.eraseInvisible=function(a){var b=new h("[\\u0000-\\u0020]","g");return b.replace(a,"")},t.js.WebSocket=function(a){this.ws=new WebSocket(a),I.websocketsbinary&&(this.ws.binaryType="arraybuffer"),this.ws.onopen=d(this,this.onOpen),this.ws.onmessage=d(this,this.onMessage),this.ws.onerror=d(this,this.onError),this.ws.onclose=d(this,this.onClose)},e["albero.js.WebSocket"]=t.js.WebSocket,t.js.WebSocket.__name__=["albero","js","WebSocket"],t.js.WebSocket.prototype={onOpen:function(){u._i(u.dateStr(),"WebSocket opened.","","","",""),null!=this.onopen&&this.onopen()},onMessage:function(a){if(null!=this.onmessage){var b=null;b=I.websocketsbinary?w.io.Bytes.ofData(new Uint8Array(a.data)):t.js.Base64.decode(a.data),this.onmessage(b)}},onError:function(a){u._e(u.dateStr(),"WebSocket error. event:",a,"","",""),null!=this.onerror&&this.onerror()},onClose:function(a){u._i(u.dateStr(),"WebSocket closed. event:%s reason:%s wasClean:%s",a.code,a.reason,a.wasClean,""),null!=this.onclose&&this.onclose(a.code,a.reason,a.wasClean)},close:function(){this.ws.close()},send:function(a){this.ws.send(I.websocketsbinary?new Uint8Array(a.b.slice()).buffer:t.js.Base64.encode(a))},isClosed:function(){return null==this.ws||3==this.ws.readyState},__class__:t.js.WebSocket},s.interfaces.IProxy=function(){},e["puremvc.interfaces.IProxy"]=s.interfaces.IProxy,s.interfaces.IProxy.__name__=["puremvc","interfaces","IProxy"],s.interfaces.IProxy.prototype={__class__:s.interfaces.IProxy},s.patterns.proxy={},s.patterns.proxy.Proxy=function(a,b){s.patterns.observer.Notifier.call(this),this.proxyName=null!=a?a:s.patterns.proxy.Proxy.NAME,null!=b&&this.setData(b)},e["puremvc.patterns.proxy.Proxy"]=s.patterns.proxy.Proxy,s.patterns.proxy.Proxy.__name__=["puremvc","patterns","proxy","Proxy"],s.patterns.proxy.Proxy.__interfaces__=[s.interfaces.IProxy],s.patterns.proxy.Proxy.__super__=s.patterns.observer.Notifier,s.patterns.proxy.Proxy.prototype=b(s.patterns.observer.Notifier.prototype,{getProxyName:function(){return this.proxyName},setData:function(a){this.data=a},getData:function(){return this.data},onRegister:function(){},onRemove:function(){},__class__:s.patterns.proxy.Proxy}),t.proxy={},t.proxy.AlberoBroadcastProxy=function(){s.patterns.proxy.Proxy.call(this,"broadcast")},e["albero.proxy.AlberoBroadcastProxy"]=t.proxy.AlberoBroadcastProxy,t.proxy.AlberoBroadcastProxy.__name__=["albero","proxy","AlberoBroadcastProxy"],t.proxy.AlberoBroadcastProxy.__super__=s.patterns.proxy.Proxy,t.proxy.AlberoBroadcastProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{handleNotification:function(a,b,c){var d=this;switch(a){case"notify_update_user":if(b instanceof Array&&null==b.__enum__){var e=new t.entity.DomainUser(b[1]);this.dataStore.setUserIfLatest(null,e)}else{var f=new t.entity.Me(b);u._d(u.dateStr(),"Current user updated. user:",f,"","",""),this.dataStore.setMe(f)}c();break;case"notify_add_friend":var g=new t.entity.DomainUser(b[1]);this.dataStore.addFriend(g),this.sendNotification(a,g),c();break;case"notify_add_acquaintance":var h=new t.entity.DomainUser(b[1]);this.dataStore.addAcquaintance(h),this.sendNotification(a,h),c();break;case"notify_join_domain":var i=new t.entity.Domain(b);this.dataStore.setDomain(i),this.sendNotification(a,[null,i]),c();break;case"notify_update_domain":var j=new t.entity.Domain(b),k=this.dataStore.getDomain(j.id);if(this.dataStore.setDomain(j),null!=k&&k.role.allowReadAnnouncements&&!j.role.allowReadAnnouncements){this.dataStore.removeAnnouncementStatus(k.id);var l=new t.entity.AnnouncementStatusUpdate;l.domainId=j.id,this.sendNotification("notify_update_announcement_status",l)}null!=k&&k.role.allowReadAnnouncements||!j.role.allowReadAnnouncements||this.api.getAnnouncementStatus(j.id),this.sendNotification(a,[k,j]),c();break;case"notify_add_domain_invite":var m=new t.entity.DomainInvite(b);this.dataStore.setDomainInvite(m),this.sendNotification(a,m),c();break;case"notify_create_pair_talk":case"notify_create_group_talk":case"notify_update_group_talk":case"notify_add_talkers":case"notify_delete_talker":var n=new t.entity.Talk(b);this.dataStore.setTalk(n),this.sendNotification(a,n),c();break;case"notify_create_message":var o=new t.entity.Message(b),p=this.newTalkStatusByMessage(o);null!=p&&this.sendNotification("notify_update_local_talk_status",p);var q=o.type;switch(q[1]){case 16:this.sendNotification("phone_call_connected",o.content),this.sendNotification(a,o),c();break;case 6:case 8:case 10:w.Timer.delay(function(){d.sendNotification("ReloadData",t.command.ReloadDataType.Question(o.id,function(){d.sendNotification(a,o),c()}))},500);break;case 7:case 9:case 11:case 12:case 13:case 14:w.Timer.delay(function(){d.sendNotification("ReloadData",t.command.ReloadDataType.Question(o.content.in_reply_to,function(){d.sendNotification(a,o),c()}))},500);break;case 4:if(null!=o.content.file_id){var r=new t.entity.FileInfo;r.messageId=o.id,r.talkId=o.talkId,r.userId=o.userId,r.updatedAt=o.createdAt,r.id=o.content.file_id,r.name=o.content.name,r.contentType=o.content.content_type,r.contentSize=o.content.content_size,r.url=o.content.url,this.sendNotification("notify_create_attachment",r)}this.sendNotification(a,o),c();break;case 5:for(var s=o.content.files,v=0;v<s.length;){var x=s[v];++v;var y=new t.entity.FileInfo;y.messageId=o.id,y.talkId=o.talkId,y.userId=o.userId,y.updatedAt=o.createdAt,y.id=x.file_id,y.name=x.name,y.contentType=x.content_type,y.contentSize=x.content_size,y.url=x.url,this.sendNotification("notify_create_attachment",y)}this.sendNotification(a,o),c();break;case 0:var z=o.content,A=null,B=z.type;switch(B){case"delete_talker":A=z.deleted_user_id;break;case"hide_pair_talk":A=z.user_id}if(null==A)return this.sendNotification(a,o),void c();for(var C=o.talkId,D=this.dataStore.getQuestions(C,A),E=0;E<D.length;){var F=D[E];++E,F.closed=!0,this.sendNotification("notify_update_question",F)}this.sendNotification(a,o),c();break;default:this.sendNotification(a,o),c()}break;case"notify_update_read_statuses":var G=new t.entity.MessageReadStatusesUpdate(b),H=this.updateTalkStatus(G);null!=H&&this.sendNotification("notify_update_local_talk_status",H),this.sendNotification(a,G),c();break;case"notify_update_talk_status":var I=new t.entity.TalkStatusUpdate(b),J=this.dataStore.getTalkStatus(I.talkId);null!=J&&(null==J.maxEveryoneReadMessageId||w.Int64.compare(J.maxEveryoneReadMessageId,I.maxEveryoneReadMessageId)<0)&&(J.maxEveryoneReadMessageId=I.maxEveryoneReadMessageId,this.dataStore.setTalkStatus(J),this.sendNotification("notify_update_local_talk_status",J)),this.sendNotification(a,I),c();break;case"notify_create_announcement":var K=new t.entity.Announcement(b);this.sendNotification("notify_update_announcement_status",this.newAnnouncementStatus(K)),this.sendNotification(a,K),c();break;case"notify_update_announcement_status":var L=new t.entity.AnnouncementStatusUpdate(b),M=this.dataStore.getAnnouncementStatus(L.domainId);null==M&&(M=this.assureAnnouncementStatus(L.domainId)),M.updateRead(L),this.sendNotification(a,L),c();break;case"notify_delete_attachment":var N=new t.entity.FileInfoDeletion(b);this.sendNotification(a,N),c();break;case"notify_leave_domain":var O=b;this.dataStore.removeDomain(O),this.sendNotification(a,O),c();break;case"notify_delete_domain_invite":var P=b;this.dataStore.removeDomainInvite(P),this.sendNotification(a,P),c();break;case"notify_delete_friend":this.dataStore.removeFriend(b[0],b[1]),this.sendNotification(a,b),c();break;case"notify_delete_acquaintance":this.dataStore.removeAcquaintance(b[0],b[1]),this.sendNotification(a,b),c();break;case"notify_delete_talk":this.dataStore.removeTalk(b),this.dataStore.removeTalkStatus(b),this.sendNotification("SelectTalk",null),this.sendNotification(a,b),c();break;default:this.sendNotification(a,b),c()}},newTalkStatusByMessage:function(a){var b=this.dataStore.getTalkStatus(a.talkId);return null==b&&(b=new t.entity.TalkStatus,b.id=a.talkId),(null==b.maxMessageId||w.Int64.compare(b.maxMessageId,a.id)<0)&&(b.maxMessageId=a.id,b.maxMessage=a),!this.dataStore.isMe(a.userId)&&a.isUnreadCountTarget&&b.unreadCount++,this.dataStore.setTalkStatus(b),b},updateTalkStatus:function(a){var b=this;if(!j.exists(a.readUserIds,function(a){return b.dataStore.isMe(a)}))return null;for(var c=this.dataStore.getTalkStatus(a.talkId),d=a.messageIds[0],e=0,f=a.messageIds;e<f.length;){var g=f[e];++e,(null==c.maxReadMessageId||w.Int64.compare(c.maxReadMessageId,g)<0)&&(w.Int64.compare(d,g)<0&&(d=g),t.Int64Helper.contains(a.messageIdsExcludingUnreadCountTargets,g)||c.unreadCount--)}return(null==c.maxReadMessageId||w.Int64.compare(c.maxReadMessageId,d)<0)&&(c.maxReadMessageId=d,this.dataStore.setTalkStatus(c)),c},newAnnouncementStatus:function(a){var b=this.dataStore.getAnnouncementStatus(a.domainId);return null==b&&(b=new t.entity.AnnouncementStatus,b.domainId=a.domainId),(null==b.maxAnnouncementId||w.Int64.compare(b.maxAnnouncementId,a.id)<0)&&(b.maxAnnouncementId=a.id,b.maxAnnouncement=a),null==b.unreadCount&&(b.unreadCount=0),b.unreadCount++,this.dataStore.setAnnouncementStatus(b),b},assureAnnouncementStatus:function(a){var b=this.dataStore.getAnnouncementStatus(a);return null==b&&(b=new t.entity.AnnouncementStatus,b.domainId=a,b.unreadCount=0,this.dataStore.setAnnouncementStatus(b)),b},__class__:t.proxy.AlberoBroadcastProxy}),t.proxy.AlberoServiceProxy=function(){this.mockMsgId=new w.Int64(-1,-1),s.patterns.proxy.Proxy.call(this,"api"),this.updateReadStatusesTimers=new w.ds.StringMap,this.updateReadAnnouncementStatusesTimers=new w.ds.StringMap},e["albero.proxy.AlberoServiceProxy"]=t.proxy.AlberoServiceProxy,t.proxy.AlberoServiceProxy.__name__=["albero","proxy","AlberoServiceProxy"],t.proxy.AlberoServiceProxy.__super__=s.patterns.proxy.Proxy,t.proxy.AlberoServiceProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{createAccessToken:function(a,b){var c=this,d="pc";d="bot";var e="";this.rpc.call("create_access_token",[a,b,e,d,""],function(a){c.settings.setAccessToken(a),c.createSession(a)},function(){c.sendNotification("Url",t.command.UrlAction.FORWARD(t.Urls.error))})},createSession:function(a){var b=this;this.rpc.call("create_session",[a,"1.50"],function(a){b.dataRecoverd=a.notification&&b.dataStore.isMe(a.user.user_id),b.dataStore.setMe(new t.entity.Me(a.user)),b.settings.setConfiguration(new t.entity.Configuration(a.configuration));var c=function(){b.dataRecoverd=!0,b.sendNotification("data_recovered"),b.rpc.call("start_notification",[],function(a){var c=a;c||(b.dataStore.clear(!0),u._e(u.dateStr(),"start_notification failed.","","","",""))})};b.dataRecoverd?(b.recoverDataNotifications(),c()):(b.dataStore.clear(!1),b.recoverData(c))},function(){b.settings.clearAccessToken(),b.sendNotification("Url",t.command.UrlAction.FORWARD(t.Urls.error))})},recoverData:function(a){var b=this;this.rpc.call("reset_notification",[],function(){var c=0,d=function(){c++,4==c&&a()};b.getDomains(function(){var a=b.dataStore.getDomains(),c=0,e=function(){c++,c==a.length&&d()};a.length>0?b.getAnnouncementStatuses(e):d();var f=0,g=function(){f++,2==f&&(b.getTalks(d),b.getTalkInvites(d))};b.getFriends(g),b.getAcquaintances(g)}),b.getDomainInvites(d)})},recoverDataNotifications:function(){var a=this.dataStore.getDomains();this.sendDomainNotifications(a);for(var b=0;b<a.length;){var c=a[b];++b;var d=this.dataStore.getAnnouncementStatus(c.id);null==d&&(d=new t.entity.AnnouncementStatus,d.domainId=c.id,d.unreadCount=0,this.dataStore.setAnnouncementStatus(d)),this.sendAnnouncementStatusNotification(d);for(var e=0,f=this.dataStore.getFriends(c.id);e<f.length;){var g=f[e];++e,this.sendNotification("notify_add_friend",g)}for(var h=0,i=this.dataStore.getAcquaintances(c.id);h<i.length;){var j=i[h];++h,this.sendNotification("notify_add_acquaintance",j)}}this.sendTalkNotifications(this.dataStore.getTalks()),this.sendTalkStatusNotifications(this.dataStore.getTalkStatuses());for(var k=0,l=this.dataStore.getDomainInvites();k<l.length;){var m=l[k];++k,this.sendNotification("notify_add_domain_invite",m)}},sendDomainNotifications:function(a){a.reverse();for(var b=0;b<a.length;){var c=a[b];++b,this.sendNotification("notify_update_domain",[null,c])}},sendAnnouncementStatusNotification:function(a){var b=new t.entity.AnnouncementStatusUpdate;b.domainId=a.domainId,this.sendNotification("notify_update_announcement_status",b)},sendTalkNotification:function(a){var b;b=a.type==t.entity.TalkType.PairTalk?"notify_create_pair_talk":"notify_create_group_talk",this.sendNotification(b,a)},sendTalkNotifications:function(a){var b=this;a.sort(function(a,c){var d,e=b.dataStore.getTalkStatus(a.id);d=null!=e?e.maxMessage:null;var f;f=null!=d?d.createdAt:null,(null==f||w.Int64.compare(f,a.updatedAt)<0)&&(f=a.updatedAt);var g,h=b.dataStore.getTalkStatus(c.id);g=null!=h?h.maxMessage:null;var i;return i=null!=g?g.createdAt:null,(null==i||w.Int64.compare(i,c.updatedAt)<0)&&(i=c.updatedAt),w.Int64.compare(f,i)});for(var c=0;c<a.length;){var d=a[c];++c,this.sendTalkNotification(d)}},sendTalkStatusNotifications:function(a){for(var b=0;b<a.length;){var c=a[b];++b,this.sendNotification("notify_update_local_talk_status",c)}},deleteSession:function(){this.settings.clearSelectedStampTabId(),this.settings.clearDomainSelection(),this.settings.clearAccessToken(),this.rpc.restart()},updateUser:function(a,b,c,d){var e=this,f=function(b){e.rpc.call("update_user",[a,b,d],function(a){e.sendNotification("update_user_responsed",new t.entity.Me(a))})};if(null!=c)f(c);else if(null!=b){var g=function(){};this.uploadFile(b,null,t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE,function(a){f(a.get_url)},g)}else f()},updateProfile:function(a){for(var b=this,c=new Array,d=0;d<a.length;){var e=a[d];++d;var f=new Array;f.push(e.domainId);for(var g=new Array,h=0,i=e.profileItemValues;h<i.length;){var j=i[h];++h,g.push({profile_item_id:j.profileItemId,value:j.value})}f.push(g),c.push(f)}this.rpc.call("update_profile",[c],function(a){b.sendNotification("update_profile_responsed",a)})},addFriend:function(a){var b=this.settings.getSelectedDomainId();this.rpc.call("add_friend",[b,a.id])},deleteFriend:function(a){var b=this.settings.getSelectedDomainId();this.rpc.call("delete_friend",[b,a.id])},getFriends:function(a){var b=this;this.rpc.call("get_friends",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=e[1],g=0;g<f.length;){var h=f[g];++g;var i=new t.entity.DomainUser(h);b.dataStore.addFriend(i),b.sendNotification("notify_add_friend",i)}}null!=a&&a()})},getAcquaintances:function(a){var b=this;this.rpc.call("get_acquaintances",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=e[1],g=0;g<f.length;){var h=f[g];++g;var i=new t.entity.DomainUser(h);b.dataStore.addAcquaintance(i),b.sendNotification("notify_add_acquaintance",i)}}null!=a&&a()})},getAllUsers:function(a){var b=this,c=this.settings.getSelectedDomainId(),d=40,e=14;this.rpc.call("get_domain_users",[c,e,d,a],function(a){var d,e=new Array,f=0;for(d=x.Boot.__cast(a.contents,Array);f<d.length;){var g=d[f];++f,e.push(new t.entity.DomainUser(g))}b.dataStore.setUsersIfLatest(c,e),b.sendNotification("get_domain_users_responsed",[c,a.marker,a.next_marker,e])})},getUsers:function(a,b){var c=this;this.rpc.call("get_users",[a,b],function(b){var d,e=new Array,f=0;for(d=x.Boot.__cast(b,Array);f<d.length;){var g=d[f];++f,e.push(new t.entity.DomainUser(g))}c.dataStore.setUsersIfLatest(a,e),c.sendNotification("get_users_responsed",[a,e])})},getProfile:function(a,b){var c=this;this.rpc.call("get_profile",[a,b],function(a){var b=new t.entity.Profile(a);c.sendNotification("get_profile_responsed",b)})},searchDomainUsers:function(a,b){var c=this,d=this.settings.getSelectedDomainId(),e=40,f=14;this.rpc.call("search_domain_users",[d,a,f,e,b],function(b){var e,f=new Array,g=0;for(e=x.Boot.__cast(b.contents,Array);g<e.length;){var h=e[g];++g,f.push(new t.entity.DomainUser(h))}c.dataStore.setUsersIfLatest(d,f),c.sendNotification("get_domain_users_responsed",[d,b.marker,b.next_marker,f,a])})},getDomains:function(a){var b=this;this.rpc.call("get_domains",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.newDomain(e)}b.sendDomainNotifications(b.dataStore.getDomains()),null!=a&&a()})},leaveDomain:function(a){var b=this;this.rpc.call("leave_domain",[a.id],function(a){b.dataStore.removeDomain(a)})},getDomainInvites:function(a){var b=this;this.rpc.call("get_domain_invites",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.sendNotification("notify_add_domain_invite",b.newDomainInvite(e))}null!=a&&a()})},acceptDomainInvite:function(a){this.rpc.call("accept_domain_invite",[a],function(){})},deleteDomainInvite:function(a){this.rpc.call("delete_domain_invite",[a],function(){})},getTalks:function(a){var b=this;this.rpc.call("get_talks",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.newTalk(e)}b.rpc.call("get_talk_statuses",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.newTalkStatus(e)}b.sendTalkNotifications(b.dataStore.getTalks()),b.sendTalkStatusNotifications(b.dataStore.getTalkStatuses()),null!=a&&a()})})},getTalkStatuses:function(){var a=this,b=function(b){var c=a.dataStore.getTalk(b.id);null!=c&&a.sendNotification("notify_update_local_talk_status",b)};this.rpc.call("get_talk_statuses",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b(a.newTalkStatus(e))}})},getReadStatus:function(a,b){var c=this;this.rpc.call("get_read_status",[a,b],function(a){c.sendNotification("notify_get_message_status",new t.entity.MessageReadStatus(a))})},createTalk:function(a){var b=this,c=this.settings.getSelectedDomainId();if(0!=a.length){var d,e=1==a.length;d=e?"create_pair_talk":"create_group_talk";var f;f=e?[c,a.pop()]:[c,a],this.rpc.call(d,f,function(a){var c,d=b.newTalk(a);c=e?"notify_create_pair_talk":"notify_create_group_talk",b.sendNotification(c,d),b.settings.setSelectedTalk(d)})}},updateGroupTalk:function(a,b,c,d){var e=this;if(a.type==t.entity.TalkType.GroupTalk){var f=function(c){e.rpc.call("update_group_talk",[a.id,b,c],function(a){e.sendNotification("notify_update_group_talk",e.newTalk(a))})};if(null!=d)f(d);else if(null!=c){var g=function(){};this.uploadFile(c,a.domainId,t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON,function(a){f(a.get_url)},g)}else f()}},addTalkers:function(a,b){var c=this;if(a.type==t.entity.TalkType.PairTalk){var d=a.userIds.concat(b);return t.Int64Helper.remove(d,this.dataStore.me.id),void this.createTalk(d)}0!=b.length&&this.rpc.call("add_talkers",[a.id,b],function(a){c.sendNotification("notify_add_talkers",c.newTalk(a))})},deleteTalker:function(a,b){var c=this;this.rpc.call("delete_talker",[a.id,b],function(){t.Int64Helper.remove(a.userIds,b),c.sendNotification("notify_delete_talker",c.dataStore.setTalk(a))})},inviteTalker:function(a,b){this.rpc.call("add_talk_invite",[a.id,b],function(){})},getTalkInvites:function(a){var b=this;this.rpc.call("get_talk_invites",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d,b.acceptTalkInvite(e.talk_id)}null!=a&&a()})},acceptTalkInvite:function(a){this.rpc.call("accept_talk_invite",[a],function(){})},deleteTalkInvite:function(a){this.rpc.call("delete_talk_invite",[a],function(){})},getMessages:function(a,b,c){var d=this,e=20;null==b&&(b={sinceId:null,maxId:null}),null==c&&(c=2),this.rpc.call("get_messages",[a.id,e,b.sinceId,b.maxId,c],function(b){for(var e=new Array,f=0;f<b.length;){var g=b[f];++f,e.push(d.newMessage(g))}d.sendNotification("notify_get_messages",{talkId:a.id,messages:e,sortOrder:c})})},createMessage:function(a,b,c){var d=this,e=this.newDummyMessage(a,b,c);this.sendNotification("create_message_start",e),this.rpc.call("create_message",[a,t.entity.Message.enumIndex(b),c],function(a){d.sendNotification("create_message_complete",[d.newMessage(a),e.id])},function(a){d.sendNotification("create_message_fail",e),d.sendNotification("error_occurred",a)})},updateReadStatuses:function(a,b){var c=this,d=this.dataStore.getTalkStatus(a);if(null!=d){if(null==b){if(0==d.unreadCount)return;b=d.maxMessageId}else if(null!=d.maxReadMessageId&&w.Int64.compare(d.maxReadMessageId,b)>=0)return;d.unreadCount=0,d.maxReadMessageId=b,this.dataStore.setTalkStatus(d),this.sendNotification("notify_update_local_talk_status",d);var e="_"+a.high+"_"+a.low,f=this.updateReadStatusesTimers.get(e);null!=f&&f.stop(),f=w.Timer.delay(function(){c.updateReadStatusesTimers.remove(e);var d=c.dataStore.getTalkStatus(a);null!=d&&c.rpc.call("update_read_statuses",[a,b],function(){})},1e3),this.updateReadStatusesTimers.set(e,f)}},upload:function(a,b,c){var d=this,e=c.name.normalize("NFKC"),f={content_type:c.type,content_size:c.size,name:e,file:c},g=this.newDummyMessage(b,t.entity.MessageType.file,f),h=function(){d.sendNotification("create_message_fail",g)};this.uploadThumbnail(c,a,b,g,function(f){d.uploadFile(c,a,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE,function(a){var i={url:a.get_url,content_type:c.type,content_size:c.size,name:e,file_id:a.file_id};null!=f&&(i.thumbnail_url=f.get_url),d.rpc.call("create_message",[b,t.entity.Message.enumIndex(t.entity.MessageType.file),i],function(a){d.sendNotification("create_message_complete",[d.newMessage(a),g.id])},function(a){h(),d.sendNotification("error_occurred",a)})},h)},h)},uploadMulti:function(a,b,c,d){var e=this,f=this.newDummyMessage(b,t.entity.MessageType.textMultipleFile,{text:c,files:j.array(j.map(d,function(a){var b=a.name.normalize("NFKC"),c={content_type:a.type,content_size:a.size,name:b,file:a};return c}))});this.sendNotification("create_message_start",f);var g=function(){e.sendNotification("create_message_fail",f)},h=new Array,k=function(){if(h.length==d.length){var a={files:h};null!=c&&c.length>0&&(a.text=c),e.rpc.call("create_message",[b,t.entity.Message.enumIndex(t.entity.MessageType.textMultipleFile),a],function(a){e.sendNotification("create_message_complete",[e.newMessage(a),f.id])},function(a){g(),e.sendNotification("error_occurred",a)})}},l=null;(l=function(c){if(c.hasNext()){var d=c.next();e.uploadThumbnail(d,a,b,null,function(b){e.uploadFile(d,a,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE,function(a){var e=d.name.normalize("NFKC"),f={url:a.get_url,content_type:d.type,content_size:d.size,name:e,file_id:a.file_id};null!=b&&(f.thumbnail_url=b.get_url),h.push(f),l(c)},g)},g)}else k()})(i.iter(d))},uploadThumbnail:function(a,b,c,d,e,f){var g=this;this.fileService.createThumbnail(a,function(a){null!=d&&(d.content.thumbnail_file=a,g.sendNotification("create_message_start",d)),null!=a?g.uploadFile(a,b,t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL,e,f):e(null)})},uploadFile:function(a,b,c,d,e){var f,g=this;switch(c[1]){case 0:f=0;break;case 1:f=1;break;case 2:f=2;break;case 3:f=4}var h=a.name.normalize("NFKC");this.rpc.call("create_upload_auth",[h,a.type,a.size,b,f],function(b){g.fileService.upload(b,a.type,a,function(){d(b)},e)},function(a){if(null!=a)if(502==a.code){var b=g.fileService.createByteSizeStringWithUnit(a.detail.limit_max);g.sendNotification("error_occurred",{message:" "+b+" "})}else g.sendNotification("error_occurred",a);e()})},deleteAttachment:function(a,b){this.rpc.call("delete_attachment",[a,b])},getAttachments:function(a,b){var c=this,d=20;null==b&&(b={sinceId:null,maxId:null}),this.rpc.call("get_attachments",[a.id,d,b.sinceId,b.maxId],function(b){for(var d=new Array,e=0;e<b.length;){var f=b[e];++e,d.push(c.newFileInfo(f))}c.sendNotification("get_file_responsed",{talkId:a.id,files:d})})},createAnnouncement:function(a,b,c){var d=this;if(null!=a||(a=this.settings.getSelectedDomainId(),null!=a)){var e=this.newDummyMessage(null,b,c);this.sendNotification("create_announcement_start",e),this.rpc.call("create_announcement",[a,t.entity.Message.enumIndex(b),c],function(a){d.sendNotification("create_announcement_complete",[d.newAnnouncement(a),e.id])},function(a){d.sendNotification("create_announcement_fail",e),d.sendNotification("error_occurred",a)})}},getAnnouncements:function(a,b){var c=this,d=20,e=this.settings.getSelectedDomainId();return null==e?void(null!=b&&b()):(null==a&&(a={sinceId:null,maxId:null}),void this.rpc.call("get_announcements",[e,d,a.sinceId,a.maxId],function(a){for(var b=new Array,d=0;d<a.length;){var f=a[d];++d,b.push(new t.entity.Announcement(f))}c.sendNotification("notify_get_announcements",{domainId:e,announcements:b})}))},getAnnouncementStatuses:function(a){var b=this;this.rpc.call("get_announcement_statuses",[],function(c){for(var d=0;d<c.length;){var e=c[d];++d;var f=b.newAnnouncementStatus(e);b.sendAnnouncementStatusNotification(f),null!=a&&a()}})},getAnnouncementStatus:function(a,b){var c=this;this.rpc.call("get_announcement_status",[a],function(a){var d=c.newAnnouncementStatus(a);c.sendAnnouncementStatusNotification(d),null!=b&&b()})},updateAnnouncementReadStatus:function(a){var b=this,c=this.dataStore.getAnnouncementStatus(a);if(null!=c&&0!=c.unreadCount){c.unreadCount=0,c.maxReadAnnouncementId=c.maxAnnouncementId,this.dataStore.setAnnouncementStatus(c),this.sendAnnouncementStatusNotification(c);var d="_"+a.high+"_"+a.low,e=this.updateReadAnnouncementStatusesTimers.get(d);null!=e&&e.stop(),e=w.Timer.delay(function(){b.updateReadAnnouncementStatusesTimers.remove(d),b.rpc.call("update_announcement_status",[a,c.maxAnnouncementId],function(){})},1e3),this.updateReadAnnouncementStatusesTimers.set(d,e)}},getQuestions:function(a,b,c,d){var e=this,f=20,g=this.settings.getSelectedDomainId(),h=null;null!=a&&(g=a.domainId,h=a.id);var i;switch(b[1]){case 0:i=0;break;case 1:i=1}var j;switch(c[1]){case 0:j=!0;break;case 1:j=!1;break;case 2:j=null}null==d&&(d={sinceId:null,maxId:null}),this.rpc.call("get_actions",[g,h,i,j,f,d.sinceId,d.maxId],function(a){for(var d=new Array,f=0;f<a.length;){var i=a[f];++f,d.push(e.newQuestion(i))}e.sendNotification("get_questions_responsed",{domainId:g,talkId:h,questions:d,fromType:b,filter:c})})},getQuestion:function(a,b){var c=this;this.rpc.call("get_action",[a],function(a){c.sendNotification("notify_update_question",c.newQuestion(a)),null!=b&&b()})},search:function(a,b,c,d){var e=this;this.searchService.prepareForSearching(a,c);var f=a.getQueryText(),g=function(f){return 400==f.code&&null!=c?void e.search(a,b,null,d):void e.sendNotification("error_occurred",f)},h=a.searchType;switch(h[1]){case 0:this.rpc.call("search_messages",[a.domainId,a.talkId,f,b,c],function(b){e.searchService.isRecentParams(a)&&e.searchService.isSearching()&&e.searchService.saveSearchMessagesResult(new t.entity.SearchMessagesResult(b)),null!=d&&d()},function(a){e.searchService.notifySearchMessagesFail(),g(a)});break;case 1:this.rpc.call("search_attachments",[a.domainId,a.talkId,f,b,c],function(b){e.searchService.isRecentParams(a)&&e.searchService.isSearching()&&e.searchService.saveSearchAttachmentsResult(new t.entity.SearchAttachmentsResult(b)),null!=d&&d()},function(a){e.searchService.notifySearchAttachmentsFail(),g(a)})}},newDomain:function(a){return this.dataStore.setDomain(new t.entity.Domain(a))},newDomainInvite:function(a){return this.dataStore.setDomainInvite(new t.entity.DomainInvite(a))},newTalk:function(a){return this.dataStore.setTalk(new t.entity.Talk(a))},newTalkStatus:function(a){return this.dataStore.setTalkStatus(new t.entity.TalkStatus(a))},newMessage:function(a){return new t.entity.Message(a)},newDummyMessage:function(a,b,c){var d=new t.entity.Message;return d.id=this.mockMsgId,d.userId=this.dataStore.me.id,d.talkId=a,d.type=b,d.content=c,this.mockMsgId=t.Int64Helper.decrement(this.mockMsgId),d},newQuestion:function(a){return this.dataStore.setQuestion(new t.entity.Question(a))},newFileInfo:function(a){return new t.entity.FileInfo(a)},newAnnouncement:function(a){return new t.entity.Announcement(a)},newAnnouncementStatus:function(a){return this.dataStore.setAnnouncementStatus(new t.entity.AnnouncementStatus(a))},createdAtNow:function(){var a=(new Date).getTime(),b=4294967296;return new w.Int64(a/b|0,a%b|0)},__class__:t.proxy.AlberoServiceProxy}),t.proxy._AlberoServiceProxy={},t.proxy._AlberoServiceProxy.UploadUseType=e["albero.proxy._AlberoServiceProxy.UploadUseType"]={__ename__:["albero","proxy","_AlberoServiceProxy","UploadUseType"],__constructs__:["PROFILE_IMAGE","MESSAGE","TALK_ICON","THUMBNAIL"]},t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE=["PROFILE_IMAGE",0],t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.PROFILE_IMAGE.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE=["MESSAGE",1],t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.MESSAGE.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON=["TALK_ICON",2],t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.TALK_ICON.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL=["THUMBNAIL",3],t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL.toString=f,t.proxy._AlberoServiceProxy.UploadUseType.THUMBNAIL.__enum__=t.proxy._AlberoServiceProxy.UploadUseType,t.proxy.AppStateProxy=function(){s.patterns.proxy.Proxy.call(this,"appState")},e["albero.proxy.AppStateProxy"]=t.proxy.AppStateProxy,t.proxy.AppStateProxy.__name__=["albero","proxy","AppStateProxy"],t.proxy.AppStateProxy.__super__=s.patterns.proxy.Proxy,t.proxy.AppStateProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{start:function(){this.updateLastActivityAt(),this.checkInactiveInterval()},setAppState:function(a){"APP_STATE_CHANGED: "+n.string(a);this.appState=a,this.sendNotification("app_state_changed",this.appState)},updateLastActivityAt:function(){this.lastActivityAt=new Date},checkInactiveInterval:function(){var a=this;this.checkInactive(),w.Timer.delay(function(){a.checkInactiveInterval()
},500)},checkInactive:function(){if(this.appState!=t.AppState.Inactive){var a=(new Date).getTime()-this.lastActivityAt.getTime();2e3>a||this.setAppState(t.AppState.Inactive)}},__class__:t.proxy.AppStateProxy}),t.proxy.DataStoreProxy=function(){s.patterns.proxy.Proxy.call(this,"dataStore"),this.init()},e["albero.proxy.DataStoreProxy"]=t.proxy.DataStoreProxy,t.proxy.DataStoreProxy.__name__=["albero","proxy","DataStoreProxy"],t.proxy.DataStoreProxy.__super__=s.patterns.proxy.Proxy,t.proxy.DataStoreProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{setMe:function(a){this.me=a;for(var b=0,c=this.getDomains();b<c.length;){var d=c[b];++b,this.sendNotification("notify_update_user",this.me.toDomainUser(d.id))}this.sendNotification("current_user_changed",a),this.storage.setDirtyFlag()},getMe:function(){return this.me},isMe:function(a){return null!=this.me&&t.Int64Helper.eq(this.me.id,a)},getFriends:function(a){var b=this.users.get("_"+a.high+"_"+a.low),c=[];if(null!=b)for(var d=b.iterator();d.hasNext();){var e=d.next();0==e.type&&c.push(e.user)}return c},getAcquaintances:function(a){var b=this.users.get("_"+a.high+"_"+a.low),c=[];if(null!=b)for(var d=b.iterator();d.hasNext();){var e=d.next();1==e.type&&c.push(e.user)}return c},isFriend:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);return null!=d&&0==d.type}return!1},addFriend:function(a){var b=this.ensureDomainUserMap(a.domainId),c=t.Int64Helper.idStr(a.id);return b.set(c,{type:0,user:a}),this.storage.setDirtyFlag(),a},addAcquaintance:function(a){var b=this.ensureDomainUserMap(a.domainId),c=t.Int64Helper.idStr(a.id);return b.set(c,{type:1,user:a}),this.storage.setDirtyFlag(),a},ensureDomainUserMap:function(a){var b="_"+a.high+"_"+a.low,c=this.users.get(b);return null==c&&(c=new w.ds.StringMap,this.users.set(b,c)),c},setUserIfLatest:function(a,b){if(null==a){var c=t.Int64Helper.idStr(b.domainId);if(a=this.users.get(c),null==a)return}var d,e=t.Int64Helper.idStr(b.id);if(d=a.get(e),null!=d)(2==d.type||w.Int64.compare(b.updatedAt,d.user.updatedAt)>1)&&(d.user=b,this.sendNotification("notify_update_user",b));else{var f=t.Int64Helper.idStr(b.id);a.set(f,{type:2,user:b})}this.storage.setDirtyFlag()},setUsersIfLatest:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c)for(var d=0;d<b.length;){var e=b[d];++d,this.setUserIfLatest(c,e)}},removeFriend:function(a,b){var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);d.type=2}this.storage.setDirtyFlag()},removeAcquaintance:function(a,b){this.removeFriend(a,b)},getUser:function(a,b){if(0==(b.high|b.low))return null;if(t.Int64Helper.eq(this.me.id,b))return this.me.toDomainUser(a);var c=this.users.get("_"+a.high+"_"+a.low);if(null!=c){var d=c.get("_"+b.high+"_"+b.low);if(null!=d)return d.user}return null},getUsers:function(a,b){var c=this,d=function(a,b){var d=c.users.get("_"+a.high+"_"+a.low);if(null!=d){if(null!=b)return b.map(function(b){if(0==(b.high|b.low))return null;if(t.Int64Helper.eq(c.me.id,b))return c.me.toDomainUser(a);var e=d.get("_"+b.high+"_"+b.low);return null!=e?e.user:null});for(var e=new Array,f=d.iterator();f.hasNext();)e.push(f.next().user);return e}return new Array};if(null!=a)return d(a,b);for(var e=this.domains.iterator(),f=null;e.hasNext();)f=null==f?d(e.next().id,b):f.concat(d(e.next().id,b));return f},getTalk:function(a){return this.talks.get("_"+a.high+"_"+a.low)},setTalk:function(a){var b=t.Int64Helper.idStr(a.id);if(this.talks.set(b,a),null!=a.leftUsers)for(var c=this.ensureDomainUserMap(a.domainId),d=0,e=a.leftUsers;d<e.length;){var f=e[d];++d;var g=t.Int64Helper.idStr(f.id),h=c.get(g);null!=h?2==h.type&&w.Int64.compare(f.updatedAt,h.user.updatedAt)>0&&(h.user=f,this.sendNotification("notify_update_user",f)):(c.set(g,{type:2,user:f}),this.sendNotification("notify_update_user",f))}return this.storage.setDirtyFlag(),a},getTalks:function(){for(var a=new Array,b=this.talks.keys();b.hasNext();){var c=b.next();a.push(this.talks.get(c))}return a},setTalks:function(a){for(var b=0;b<a.length;){var c=a[b];++b,this.setTalk(c)}},removeTalk:function(a){this.talks.remove("_"+a.high+"_"+a.low),this.storage.setDirtyFlag()},getTalkStatuses:function(){for(var a=new Array,b=this.talkStatuses.keys();b.hasNext();){var c=b.next();this.talks.exists(c)&&a.push(this.talkStatuses.get(c))}return a},getTalkStatus:function(a){return this.talkStatuses.get("_"+a.high+"_"+a.low)},setTalkStatus:function(a){var b=t.Int64Helper.idStr(a.id);if(null!=this.domainUnreadCounts){var c=this.talks.get(b),d=t.Int64Helper.idStr(c.domainId);this.domainUnreadCounts.remove(d)}return this.talkStatuses.set(b,a),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),a},removeTalkStatus:function(a){this.talkStatuses.remove("_"+a.high+"_"+a.low),this.storage.setDirtyFlag()},getDomains:function(){for(var a=new Array,b=this.domains.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},getDomain:function(a){return this.domains.get("_"+a.high+"_"+a.low)},setDomain:function(a){var b=t.Int64Helper.idStr(a.id);return this.domains.set(b,a),this.storage.setDirtyFlag(),a},removeDomain:function(a){this.domains.remove("_"+a.high+"_"+a.low),this.storage.setDirtyFlag()},getUnreadCount:function(){for(var a=0,b=this.domains.keys();b.hasNext();){var c=b.next();a+=this._getDomainUnreadCount(c)}for(var d=this.domainInvites.iterator();d.hasNext();){{d.next()}a++}return a},_getDomainUnreadCount:function(a){if(null!=this.domainUnreadCounts&&this.domainUnreadCounts.exists(a))return this.domainUnreadCounts.get(a);null==this.domainUnreadCounts&&(this.domainUnreadCounts=new w.ds.StringMap);for(var b=0,c=this.talkStatuses.iterator();c.hasNext();){var d=c.next();if(null!=d.unreadCount&&0!=d.unreadCount){var e,f=t.Int64Helper.idStr(d.id);e=this.talks.get(f),null!=e&&t.Int64Helper.idStr(e.domainId)==a&&(b+=d.unreadCount)}}var g=this.announcementStatuses.get(a);return null!=g&&null!=g.unreadCount&&(b+=g.unreadCount),this.domainUnreadCounts.set(a,b),b},getDomainUnreadCount:function(a){return this._getDomainUnreadCount("_"+a.high+"_"+a.low)},getDomainInvites:function(){for(var a=new Array,b=this.domainInvites.keys();b.hasNext();){var c=b.next();a.push(this.domainInvites.get(c))}return a},getDomainInvite:function(a){return this.domainInvites.get("_"+a.high+"_"+a.low)},setDomainInvite:function(a){var b=t.Int64Helper.idStr(a.id);return this.domainInvites.set(b,a),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),a},removeDomainInvite:function(a){this.domainInvites.remove("_"+a.high+"_"+a.low),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag()},getQuestions:function(a,b){var c=[];if(null!=this.questions)for(var d=this.questions.iterator();d.hasNext();){var e=d.next();t.Int64Helper.eq(e.talkId,a)&&t.Int64Helper.eq(e.userId,b)&&c.push(e)}return c},getQuestion:function(a){return this.questions.get("_"+a.high+"_"+a.low)},setQuestion:function(a){var b=t.Int64Helper.idStr(a.id);return this.questions.set(b,a),this.storage.setDirtyFlag(),a},getAnnouncementStatus:function(a){return this.announcementStatuses.get("_"+a.high+"_"+a.low)},setAnnouncementStatus:function(a){var b=t.Int64Helper.idStr(a.domainId);return this.announcementStatuses.set(b,a),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(b),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),a},removeAnnouncementStatus:function(a){var b="_"+a.high+"_"+a.low;this.announcementStatuses.remove(b),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(b),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag()},clear:function(a){this.users=new w.ds.StringMap,this.talks=new w.ds.StringMap,this.talkStatuses=new w.ds.StringMap,this.domains=new w.ds.StringMap,this.domainInvites=new w.ds.StringMap,this.questions=new w.ds.StringMap,this.announcementStatuses=new w.ds.StringMap,a&&(this.me=null),this.storage.setDirtyFlag()},init:function(){this.storage=new t.js.LocalStorage;var a=this.storage.load();null==a?(this.me=null,this.clear(!0),u._d(u.dateStr(),"dataStore is initialized.","","","","")):(this.me=a.shift(),this.users=a.shift(),this.talks=a.shift(),this.talkStatuses=a.shift(),this.domains=a.shift(),this.domainInvites=a.shift(),this.questions=a.shift(),this.announcementStatuses=a.shift(),u._d(u.dateStr(),"dataStore is loaded.","","","",""))},saveIfNeeded:function(){this.storage.isDirty&&(this.storage.save([this.me,this.users,this.talks,this.talkStatuses,this.domains,this.domainInvites,this.questions,this.announcementStatuses]),u._d(u.dateStr(),"dataStore is saved.","","","",""))},__class__:t.proxy.DataStoreProxy}),t.proxy.FileServiceProxy=function(){s.patterns.proxy.Proxy.call(this,"fileService"),this.validHost=this.getValidHost()},e["albero.proxy.FileServiceProxy"]=t.proxy.FileServiceProxy,t.proxy.FileServiceProxy.__name__=["albero","proxy","FileServiceProxy"],t.proxy.FileServiceProxy.__super__=s.patterns.proxy.Proxy,t.proxy.FileServiceProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{getValidHost:function(){return"https://"+A.host},downloadUrl:function(a,b){if(null==b&&(b=!1),null==a||0==a.length)return"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(p.startsWith(a,this.validHost)){var c=this.settings.getAccessToken(),d=a;return d+=-1!=a.indexOf("?")?"&":"?",d+="Authorization=ALB%20"+c,b&&(d+="&download=true"),d}return a},download:function(){},upload:function(a,b,c,d,e){for(var f=this,g={},h=0,i=m.fields(a.post_form);h<i.length;){var j=i[h];++h;var k=j,l=m.field(a.post_form,j);g[k]=l}{var o=a.post_url,p={};"FileServiceProxy#upload. params:"+n.string(g),J.upload({url:o,headers:p,data:g,files:{file:c},complete:function(a,b){return a?void f.uploadFailed(b,e):void d()},cache:!0})}},uploadFailed:function(a,b){this.sendNotification("error_occurred",{message:""}),b()},createDummyFile:function(a,b,c){var d=p.replace(a,"/","\\").split("\\");if(0==d.length)return null;var e=d[d.length-1];if(null!=b&&(e=b),0==e.length)return null;var f="application/octet-stream",g=e.split(".");if(g.length>1){var h=g[g.length-1];switch(h){case"txt":f="text/plain";break;case"htm":case"html":f="text/html";break;case"xml":f="text/xml";break;case"gif":f="image/gif";break;case"jpg":case"jpeg":f="image/jpeg";break;case"png":f="image/png";break;case"pdf":f="application/pdf"}}null!=c&&(f=c);var i=1;return{name:e,size:i,type:f}},createThumbnail:function(a,b){b(p.startsWith(a.type,"video/")?null:p.startsWith(a.type,"image/")?null:null)},captureVideo:function(a,b,c){var d=a.width,e=a.height,f=b.videoWidth,g=b.videoHeight;f>g?f>d&&(g*=d/f,f=d):g>e&&(f*=e/g,g=e),1>g&&(g=1),1>f&&(f=1);var h=0,i=0;a.height=0|g,a.width=0|f;var j=a.getContext("2d");j.drawImage(b,h,i,f,g),a.toBlob(function(a){u._d(u.dateStr(),"captureVideo blob callback","","","","");var b={name:"thumb.jpeg",type:"image/jpeg",file:"thumb.jpeg",blob:a,size:a.size};c(b)})},normalizeImage:function(a,b,c){var d=a.width,e=a.height,f=b.width,g=b.height;f>g?f>d&&(g*=d/f,f=d):g>e&&(f*=e/g,g=e),1>g&&(g=1),1>f&&(f=1);var h=0,i=0;a.height=0|g,a.width=0|f;var j=a.getContext("2d");j.drawImage(b,h,i,f,g),a.toBlob(function(a){u._d(u.dateStr(),"blob callback","","","","");var b={name:"thumb.jpeg",type:"image/jpeg",file:"thumb.jpeg",blob:a,size:a.size};c(b)})},createByteSizeStringWithUnit:function(a){for(var b,c=["","K","M","G","T"];(b=a/1024|0)>0;)a=b,c.shift();return a+" "+c.shift()+"B"},__class__:t.proxy.FileServiceProxy}),t.proxy.FormatterProxy=function(){s.patterns.proxy.Proxy.call(this,"formatter"),t.proxy._FormatterProxy.ExternalUserIconListener.formatterProxy=this},e["albero.proxy.FormatterProxy"]=t.proxy.FormatterProxy,t.proxy.FormatterProxy.__name__=["albero","proxy","FormatterProxy"],t.proxy.FormatterProxy.__super__=s.patterns.proxy.Proxy,t.proxy.FormatterProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{dayOfWeekString:function(a){var b=a.getDay();switch(b){case 0:return"";case 1:return"";case 2:return"";case 3:return"";case 4:return"";case 5:return"";default:return""}},dateString:function(a,b){var c=new Date,d="";return a.getFullYear()!=c.getFullYear()&&(d+=a.getFullYear()+"/"),d+=a.getMonth()+1+"/"+a.getDate(),b&&(d+=" ("+this.dayOfWeekString(a)+")"),d},abbreviateDatetimeString:function(a){if(null==a)return"";var b,c=new Date,d=t.Int64Helper.toFloat(a),e=new Date;e.setTime(d),b=e;var f="";return f=c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()&&c.getDate()==b.getDate()?b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes():this.dateString(b,!1)},datetimeStringIn11Chars:function(a){if(null==a)return"";var b,c=new Date,d=t.Int64Helper.toFloat(a),e=new Date;e.setTime(d),b=e;var f=this.dateString(b,!1);return c.getFullYear()==b.getFullYear()&&(f+=" "+b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()),f},timeString:function(a){if(null==a)return"";var b,c=t.Int64Helper.toFloat(a),d=new Date;return d.setTime(c),b=d,b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()},datetimeString:function(a){if(null==a)return"";var b,c=n.parseFloat(n.string(a)),d=new Date;return d.setTime(c),b=d,b.getFullYear()+"/"+(b.getMonth()+1)+"/"+b.getDate()+" "+b.getHours()+":"+(b.getMinutes()<10?"0":"")+b.getMinutes()},messageString:function(a,b){var c;c=b.type==t.entity.MessageType.system?null:this.dataStore.getUser(a,b.userId);var d;d=null!=c?c.displayName:"";var e=b.type;switch(e[1]){case 0:return this.systemMessageString(a,b.content);case 1:return d+""+n.string(b.content);case 3:return d+" ";case 4:return d+" ";case 5:return null!=b.content.text&&b.content.text.length>0?d+""+n.string(b.content.text):d+" ";case 2:return null!=b.content.text&&b.content.text.length>0?d+""+n.string(b.content.text):d+" ";case 6:case 8:return d+" "+n.string(b.content.question);case 7:case 9:return d+" ";case 10:return d+""+n.string(b.content.title);case 11:return b.content.done?d+" ":d+" ";case 12:case 13:return d+" ";case 14:return d+" ";default:return d+" "}},announcementString:function(a){var b,c=this.dataStore.getUser(a.domainId,a.userId);b=null!=c?c.displayName:a.userName,null==b&&(b="");var d=a.type;switch(d[1]){case 1:return b+":"+n.string(a.content);default:return u._e(u.dateStr(),"announcement.type is not text. announcment:%o",a,"","",""),b+" "}},systemMessageString:function(a,b){var c=b.type;switch(c){case"add_talkers":for(var d="",e=b.added_user_ids,f=0;f<e.length;){var g=e[f];++f;var h=this.dataStore.getUser(a,g);null!=h&&(""!=d&&(d+=""),d+=h.displayName)}var i=null;if(null!=b.added_by){var j=this.dataStore.getUser(a,b.added_by);null!=j&&(i=j.displayName)}return null==i?d+"":i+""+d+"";case"delete_talker":var k="",l=this.dataStore.getUser(a,b.deleted_user_id);return null!=l&&(k+=l.displayName),k+"";case"add_talk_invite":var m=b.email;return m+"";case"delete_talk_invite":var n=b.email;return n+"";case"hide_pair_talk":var o="",p=this.dataStore.getUser(a,b.user_id);return null!=p&&(o+=p.displayName),o+"";default:return""}},createText:function(a){if(null==a)return null;var b=this.emoji(this.linking(a));return p.endsWith(b,"\n")&&(b+="\n"),b},emoji:function(a){var b=new h("\\{p:(\\d+)\\}","g"),c=b.replace(a,"<img class='emoji' src='images/emoji/$1.gif'>");return c},linking:function(a){return twttr.txt.autoLinkUrlsCustom(a,{targetBlank:!0,htmlEscapeNonEntities:!0})},__class__:t.proxy.FormatterProxy}),t.proxy._FormatterProxy={},t.proxy._FormatterProxy.ExternalUserIconListener=a.albero.ExternalUserIconListener=function(){},e["albero.proxy._FormatterProxy.ExternalUserIconListener"]=t.proxy._FormatterProxy.ExternalUserIconListener,t.proxy._FormatterProxy.ExternalUserIconListener.__name__=["albero","proxy","_FormatterProxy","ExternalUserIconListener"],t.proxy.MsgPackRpcProxy=function(){this.connectionStatus=t.ConnectionStatus.Ok,s.patterns.proxy.Proxy.call(this,"rpc"),this.responseHandlers=new w.ds.IntMap,this.errorHandler=d(this,this.onServerError),this.connectionKeeper=new t.proxy._MsgPackRpcProxy.ConnectionKeeper(d(this,this.ping))},e["albero.proxy.MsgPackRpcProxy"]=t.proxy.MsgPackRpcProxy,t.proxy.MsgPackRpcProxy.__name__=["albero","proxy","MsgPackRpcProxy"],t.proxy.MsgPackRpcProxy.__super__=s.patterns.proxy.Proxy,t.proxy.MsgPackRpcProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{initWebSocket:function(){null==this.ws&&(this.ws=new t.js.WebSocket(A.endpoint),this.ws.onopen=d(this,this.onOpen),this.ws.onmessage=d(this,this.onMessage),this.ws.onclose=d(this,this.onClose))},finishWebSocket:function(){null!=this.ws&&(this.ws.onopen=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.close(),this.ws=null)},onRegister:function(){this.initWebSocket(),this.connectionKeeper.start()},onRemove:function(){this.connectionKeeper.stop(),this.finishWebSocket()},onOpen:function(){this.connectionKeeper.setConnected(!0),this.sendNotification("SignIn")},onMessage:function(a){var b,c=this,d=new y.Decoder(a,!0).getResult();if(b=x.Boot.__cast(d[0],C),1==b&&4==d.length){var e;e=x.Boot.__cast(d[1],C);var f=d[2],g=d[3],h=this.responseHandlers.get(e);if(null==h)return void u._e(u.dateStr(),"No ResponseHandler prepared. msgId:%s error:%s result:",e,f,g,"");if(null==f){var i=h.onSuccess;null!=i&&i(g)}else{u._e(u.dateStr(),"Receive Error Response. method:",h.method," error:",f,"");var j=h.onError;null!=j?j(f):null!=this.errorHandler&&this.errorHandler(h.method,f)}this.responseHandlers.remove(e)}else if(0==b&&4==d.length){var k;k=x.Boot.__cast(d[1],C);var l;l=x.Boot.__cast(d[2],String);var m;m=x.Boot.__cast(d[3],Array);for(var n=0;n<m.length;){var o=m[n];++n,this.broadcast.handleNotification(l,o,function(){c.ws.send(new y.Encoder([1,k,null,!0]).getBytes())})}}},onClose:function(a,b,c){u._i(u.dateStr(),"onClose. code:"+a+", reason:"+b+", wasClean:"+(null==c?"null":""+c),"","","",""),1001==a&&c||(this.connectionStatus=1e3!=a&&1005!=a||"concurrent access"!=b?1e3!=a&&1005!=a||"forcibly closed"!=b?t.ConnectionStatus.Error:t.ConnectionStatus.ForcibliyClosedError:t.ConnectionStatus.ConcurrentAccessError,this.connectionStatus==t.ConnectionStatus.ForcibliyClosedError?this.sendNotification("SignOut"):this.sendNotification("Url",t.command.UrlAction.FORWARD(t.Urls.error))),this.finishWebSocket(),this.connectionKeeper.setConnected(!1)},restart:function(){var a=this;this.finishWebSocket();for(var b=this.responseHandlers.keys();b.hasNext();){var c=b.next();this.responseHandlers.remove(c)}w.Timer.delay(function(){a.initWebSocket()},500)},call:function(a,b,c,d){if(null==this.ws)return void u._e(u.dateStr(),"disconnected. data:",this.data,"","","");null==b&&(b=[]);var e=t.proxy.MsgPackRpcProxy.lastMsgId++,f=new t.proxy._MsgPackRpcProxy.ResponseHandler(a,c,d);this.responseHandlers.set(e,f);var g=[0,e,a,b],h=new y.Encoder(g).getBytes();this.ws.send(h)},ping:function(){var a=this.connectionStatus;switch(a[1]){case 2:case 3:return}null==this.ws||this.ws.isClosed()?this.restart():this.ws.send(w.io.Bytes.alloc(0))},onServerError:function(a,b){this.sendNotification("error_occurred",b)},__class__:t.proxy.MsgPackRpcProxy}),t.proxy._MsgPackRpcProxy={},t.proxy._MsgPackRpcProxy.ConnectionKeeper=function(a){this.connected=!1,this.ping=a},e["albero.proxy._MsgPackRpcProxy.ConnectionKeeper"]=t.proxy._MsgPackRpcProxy.ConnectionKeeper,t.proxy._MsgPackRpcProxy.ConnectionKeeper.__name__=["albero","proxy","_MsgPackRpcProxy","ConnectionKeeper"],t.proxy._MsgPackRpcProxy.ConnectionKeeper.prototype={start:function(){},stop:function(){this.deleteTimer()},setConnected:function(a){(this.connected!=a||null==this.timer)&&(this.connected=a,this.resetTimer())},resetTimer:function(){var a=this;if(this.deleteTimer(),this.connected)this.timer=new w.Timer(45e3),this.timer.run=this.ping;else{var b=null;b=function(c){var d=n["int"](Math.min(2*c,45e3));return function(){a.ping(),a.timer=w.Timer.delay(b(d),c)}},b(3e3)()}},deleteTimer:function(){null!=this.timer&&(this.timer.stop(),this.timer=null)},__class__:t.proxy._MsgPackRpcProxy.ConnectionKeeper},t.proxy._MsgPackRpcProxy.ResponseHandler=function(a,b,c){this.method=a,this.onSuccess=b,this.onError=c},e["albero.proxy._MsgPackRpcProxy.ResponseHandler"]=t.proxy._MsgPackRpcProxy.ResponseHandler,t.proxy._MsgPackRpcProxy.ResponseHandler.__name__=["albero","proxy","_MsgPackRpcProxy","ResponseHandler"],t.proxy._MsgPackRpcProxy.ResponseHandler.prototype={__class__:t.proxy._MsgPackRpcProxy.ResponseHandler},t.proxy.Error=function(a){this.code=a.code,this.message=a.message,this.detail=a.detail},e["albero.proxy.Error"]=t.proxy.Error,t.proxy.Error.__name__=["albero","proxy","Error"],t.proxy.Error.prototype={__class__:t.proxy.Error},t.proxy.RoutingProxy=function(){s.patterns.proxy.Proxy.call(this,"routing")},e["albero.proxy.RoutingProxy"]=t.proxy.RoutingProxy,t.proxy.RoutingProxy.__name__=["albero","proxy","RoutingProxy"],t.proxy.RoutingProxy.__super__=s.patterns.proxy.Proxy,t.proxy.RoutingProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{init:function(){null==this.router&&(this.router=new t.proxy._RoutingProxy.LocalRouter(this,this.settings,this.dataStore),this.router.start())},forward:function(a){this.init(),this.router.forward(a)},redirect:function(a,b){this.init(),this.router.redirect(a,b)},back:function(){null!=this.router&&this.router.back()},stop:function(){null!=this.router&&this.router.started&&this.router.stop()},__class__:t.proxy.RoutingProxy}),t.proxy._RoutingProxy={},t.proxy._RoutingProxy.LocalRouter=function(a,b,c){this.proxy=a,this.settings=b,this.dataStore=c,this.started=!1},e["albero.proxy._RoutingProxy.LocalRouter"]=t.proxy._RoutingProxy.LocalRouter,t.proxy._RoutingProxy.LocalRouter.__name__=["albero","proxy","_RoutingProxy","LocalRouter"],t.proxy._RoutingProxy.LocalRouter.prototype={notify:function(a){var b=this.getDomainId(a);this.settings.setSelectedDomainId(b),this.proxy.sendNotification("current_page_changed",a)},start:function(){this.started=!0},forward:function(a){switch(a[1]){case 0:break;default:this.notify(a)}},redirect:function(){},redirectWithHash:function(){},back:function(){this.notify(this.prev)},stop:function(){this.started=!1},getDomainId:function(a){switch(a[1]){case 2:var b=a[2];return b;case 3:var c=a[2];return c;case 4:var d=a[2];return d;case 5:var e=a[2];return e;case 6:var f=a[2];return f;case 7:var g=a[2];return g;default:return null}},parseFragment:function(a){if(null==a)return null;var b=a.split("/");if(""!=b[0])return null;if(2==b.length){if(""==b[1])return t.Urls.domains;if("settings"==b[1]){var c=this.settings.getLastSelectedDomainId();if(null!=c&&null!=this.dataStore.getDomain(c))return t.History.replaceState("settings",null,"#"+this.toFragment(t.Urls.settings(c))),t.Urls.settings(c);var d=this.dataStore.getDomains();if(d.length>0){for(var e=null,f=0;f<d.length;){var g=d[f];++f,(null==e||w.Int64.compare(e.id,g.id)>0)&&(e=g)}return t.History.replaceState("settings",null,"#"+this.toFragment(t.Urls.settings(e.id))),t.Urls.settings(e.id)}return t.Urls.settings(null)}if(b[1]==n.string(t.Urls.error))return t.Urls.error;if(b[1]==n.string(t.Urls.loading))return t.Urls.loading}else if(3==b.length){var h=t.Int64Helper.parse(b[1]);if(null!=h){if(""==b[2])return t.Urls.domain(h);if("members"==b[2])return t.Urls.members(h);if("talks"==b[2])return t.Urls.talks(h);if("actions"==b[2])return t.Urls.actions(h);if("console"==b[2])return t.Urls.console(h);if("settings"==b[2])return t.Urls.settings(h)}}return null},toFragment:function(a){switch(a[1]){case 1:return"/";case 9:case 10:return"/"+n.string(a);case 2:var b=a[2];return"/"+b.toString()+"/";case 3:var c=a[2];return"/"+c.toString()+"/members";case 4:var d=a[2];return"/"+d.toString()+"/talks";case 5:var e=a[2];return"/"+e.toString()+"/actions";case 6:var f=a[2];return"/"+f.toString()+"/console";case 7:var g=a[2];return null==g&&(g=this.settings.getLastSelectedDomainId()),null!=g?"/"+g.toString()+"/settings":"/settings";default:return null}},__class__:t.proxy._RoutingProxy.LocalRouter},t.proxy.SearchServiceProxy=function(){s.patterns.proxy.Proxy.call(this,"searchService")},e["albero.proxy.SearchServiceProxy"]=t.proxy.SearchServiceProxy,t.proxy.SearchServiceProxy.__name__=["albero","proxy","SearchServiceProxy"],t.proxy.SearchServiceProxy.__super__=s.patterns.proxy.Proxy,t.proxy.SearchServiceProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{isSearching:function(){return this.searching},clearSearching:function(){this.searching=!1},isRecentParams:function(a){return null==this.recentParams||null==a?!1:this.recentParams.eq(a)},clearRecentParams:function(){this.recentParams=null},clearEditingParams:function(){this.editingParams=null},saveParams:function(a){this.editingParams=a,this.recentParams=a.copy(),null==this.normalizedKeywords?this.normalizedKeywords=new Array:this.normalizedKeywords.splice(0,this.normalizedKeywords.length);for(var b=new h("[ ]","g").split(p.htmlEscape(this.recentParams.keyword,!0)),c=0;c<b.length;){var d=b[c];++c,null!=d&&0!=d.length&&this.normalizedKeywords.push(new t.js.NFKCTextSearch(d,!0))}},updateTalkIdParam:function(a){this.assureParams(),this.editingParams.talkId=a},updateSearchTypeParam:function(a){this.assureParams(),this.editingParams.searchType=a},updateFromUserIdParam:function(a){this.assureParams(),this.editingParams.fromUserId=a},updateKeywordParam:function(a){this.assureParams(),this.editingParams.keyword=a},updateDomainIdParam:function(a){this.assureParams(),this.editingParams.domainId=a},updateSinceTextParam:function(a){this.assureParams(),this.editingParams.sinceText=a},updateUntilTextParam:function(a){this.assureParams(),this.editingParams.untilText=a},assureParams:function(){if(null==this.editingParams){var a={domain_id_str:t.Int64Helper.idStr(this.settings.getSelectedDomainId())};this.editingParams=new t.entity.SearchParams(a)}},prepareForSearching:function(a,b){this.searching=!0,null==b&&this.sendNotification("notify_search_prepare",{searching:!0,params:a})},notifySearchMessagesFail:function(){this.searching=!1,this.sendNotification("notify_search_messages_fail",{})},notifySearchAttachmentsFail:function(){this.searching=!1,this.sendNotification("notify_search_attachments_fail",{})},saveSearchMessagesResult:function(a){null==this.contextMap&&(this.contextMap=new w.ds.StringMap),this.messagesNextMarker=a.nextMarker,null==a.marker&&(this.hitMessageIdSet=new w.ds.StringMap);for(var b=0,c=a.contents;b<c.length;){var d=c[b];++b;var e=t.Int64Helper.idStr(d.messages[0].id);this.contextMap.set(e,d),this.hitMessageIdSet=j.fold(d.messages,function(a,b){if(a.hit){var c=t.Int64Helper.idStr(a.id);b.set(c,1)}return b},this.hitMessageIdSet)}this.searching=!1,this.sendNotification("notify_search_messages",a)},saveSearchAttachmentsResult:function(a){null==this.attachmentsMap&&(this.attachmentsMap=new w.ds.StringMap),this.attachmentsNextMarker=a.nextMarker;for(var b=0,c=a.contents;b<c.length;){var d=c[b];++b;var e=t.Int64Helper.idStr(d.id);this.attachmentsMap.set(e,d)}this.searching=!1,this.sendNotification("notify_search_attachments",a)},getHitContext:function(a){return this.contextMap.get(a)},getFileInfo:function(a){return this.attachmentsMap.get(a)},isHitMessage:function(a){return this.hitMessageIdSet.exists("_"+a.high+"_"+a.low)},emphasisKeyword:function(a){for(var b=p.htmlEscape(a,!0),c=new Array,d=0,e=this.normalizedKeywords;d<e.length;){var f=e[d];++d,c=c.concat(f.search(b))}if(0==c.length)return b;c.sort(function(a,b){return a.start-b.start});for(var g=new o,h=0,i=0;i<c.length;){var j=c[i];++i,h<j.start&&(g.add(b.substring(h,j.start)),h=j.start),h==j.start&&(g.add("<em>"+b.substring(j.start,j.end)+"</em>"),h=j.end)}return h!=b.length&&g.add(b.substring(h)),g.b},__class__:t.proxy.SearchServiceProxy}),t.proxy.SettingsProxy=function(){this.selectedDomainId=null,this.remember=!0,s.patterns.proxy.Proxy.call(this,"settings")},e["albero.proxy.SettingsProxy"]=t.proxy.SettingsProxy,t.proxy.SettingsProxy.__name__=["albero","proxy","SettingsProxy"],t.proxy.SettingsProxy.__super__=s.patterns.proxy.Proxy,t.proxy.SettingsProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{setAccessTokenRemember:function(a){this.remember=a},setAccessToken:function(a){this.remember&&(this.accessToken=a,this.sendNotification("access_token_changed",a))},getAccessToken:function(){return null==this.accessToken&&(this.accessToken=A.accessToken),this.accessToken},clearAccessToken:function(){this.accessToken=null},setConfiguration:function(a){this.configuration=a,this.sendNotification("configuration_changed",a)},getConfiguration:function(){return this.configuration},setSelectedDomainId:function(a){t.Int64Helper.eq(this.selectedDomainId,a)||(this.selectedDomainId=a,this.sendNotification("domain_selection_changed",a))},getLastSelectedDomainId:function(){var a,b=null,c=null;return a=null!=b&&null!=c?new w.Int64(b,c):null},getSelectedDomainId:function(){return this.selectedDomainId},clearDomainSelection:function(){this.selectedDomainId=null},clearSelectedTalk:function(){if(this.hasSelectedTalk()){var a=t.Int64Helper.idStr(this.selectedDomainId);this.selectedTalkIds.remove(a)}},setSelectedTalk:function(a){if(u._d(u.dateStr(),"talk selected. talk:",a,"","",""),null==this.selectedTalkIds&&(this.selectedTalkIds=new w.ds.StringMap),null==a){if(null!=this.selectedDomainId){var b=t.Int64Helper.idStr(this.selectedDomainId);this.selectedTalkIds.set(b,null)}this.sendNotification("talk_selection_changed")}else{var c=t.Int64Helper.idStr(a.domainId);if(this.selectedTalkIds.set(c,a.id),!t.Int64Helper.eq(a.domainId,this.selectedDomainId))return!1;this.sendNotification("talk_selection_changed",a)}return!0},hasSelectedTalk:function(){return null!=this.selectedTalkIds&&function(a){var b,c=t.Int64Helper.idStr(a.selectedDomainId);return b=a.selectedTalkIds.exists(c)}(this)},getSelectedTalkId:function(){if(null==this.selectedTalkIds)return null;var a=t.Int64Helper.idStr(this.selectedDomainId);return this.selectedTalkIds.get(a)},isSendByEnter:function(){return null==this.sendByEnter&&(this.sendByEnter=!0),this.sendByEnter},setSendByEnter:function(a){this.sendByEnter=a},setSelectedStampTabId:function(){},getSelectedStampTabId:function(){var a=0;return a},clearSelectedStampTabId:function(){},setInputTextForTalkId:function(a,b){null==a||0==a.length?this.clearInputTextForTalkId(b):(this.loadInputTextForAll(),this.inputTexts["_"+b.high+"_"+b.low]=a)},getInputTextForTalkId:function(a){this.loadInputTextForAll();var b=this.inputTexts["_"+a.high+"_"+a.low];return null!=b?b:""},clearInputTextForTalkId:function(a){this.loadInputTextForAll(),delete this.inputTexts["_"+a.high+"_"+a.low]},loadInputTextForAll:function(){if(null==this.inputTexts){try{}catch(a){}null==this.inputTexts&&(this.inputTexts={})}},saveInputTextForAll:function(){if(null!=this.inputTexts){JSON.stringify(this.inputTexts)}},clearInputTextForAll:function(){x.Browser.getLocalStorage().removeItem("input_text"),this.inputTexts=null},setCopyProfileToAllDomains:function(a){a?x.Browser.getLocalStorage().setItem("copy_profile_to_all_domains","true"):x.Browser.getLocalStorage().removeItem("copy_profile_to_all_domains")},isCopyProfileToAllDomains:function(){return null!=x.Browser.getLocalStorage().getItem("copy_profile_to_all_domains")},setSearchHistoriesForSelectedDomain:function(a){null!=this.selectedDomainId&&(null==a?this.clearSearchHistoriesForSelectedDomain():(this.loadSearchHistoryForAll(),this.searchHistories[t.Int64Helper.idStr(this.selectedDomainId)]=a,this.saveSearchHistoryForAll()))},getSearchHistoriesForSelectedDomain:function(){if(null==this.selectedDomainId)return null;this.loadSearchHistoryForAll();var a=this.searchHistories[t.Int64Helper.idStr(this.selectedDomainId)];return a},clearSearchHistoriesForSelectedDomain:function(){this.loadSearchHistoryForAll(),delete this.searchHistories[t.Int64Helper.idStr(this.selectedDomainId)]},loadSearchHistoryForAll:function(){if(null==this.searchHistories){try{}catch(a){}null==this.searchHistories&&(this.searchHistories={})
}},saveSearchHistoryForAll:function(){if(null!=this.searchHistories){JSON.stringify(this.searchHistories)}},clearSearchHistoryForAll:function(){x.Browser.getLocalStorage().removeItem("input_text"),this.searchHistories=null},__class__:t.proxy.SettingsProxy}),t.proxy.StagedFileInfoStoreProxy=function(){s.patterns.proxy.Proxy.call(this,"stagedFileInfoStore"),this.stagedFileInfosMap=new w.ds.StringMap,this.maxId=0},e["albero.proxy.StagedFileInfoStoreProxy"]=t.proxy.StagedFileInfoStoreProxy,t.proxy.StagedFileInfoStoreProxy.__name__=["albero","proxy","StagedFileInfoStoreProxy"],t.proxy.StagedFileInfoStoreProxy.__super__=s.patterns.proxy.Proxy,t.proxy.StagedFileInfoStoreProxy.prototype=b(s.patterns.proxy.Proxy.prototype,{ensureStagedFileInfos:function(a){var b="_"+a.high+"_"+a.low,c=this.stagedFileInfosMap.get(b);return null==c&&(c=new Array,this.stagedFileInfosMap.set(b,c)),c},getStagedFileInfo:function(a,b){var c=this.ensureStagedFileInfos(a);return j.find(c,function(a){return t.Int64Helper.eq(a.id,b)})},createStagedFileInfo:function(a,b,c){var d=new t.entity.FileInfo;return d.id=w.Int64.make(0,++this.maxId),d.talkId=a,null!=b&&(d.name=b.name,d.contentType=b.type,d.contentSize=b.size,d.url=URL.createObjectURL(b),d.file=b),null!=c&&(d.thumbUrl=URL.createObjectURL(c.blob)),d},__class__:t.proxy.StagedFileInfoStoreProxy}),s.interfaces.IMediator=function(){},e["puremvc.interfaces.IMediator"]=s.interfaces.IMediator,s.interfaces.IMediator.__name__=["puremvc","interfaces","IMediator"],s.interfaces.IMediator.prototype={__class__:s.interfaces.IMediator},s.patterns.mediator={},s.patterns.mediator.Mediator=function(a,b){s.patterns.observer.Notifier.call(this),this.mediatorName=null!=a?a:s.patterns.mediator.Mediator.NAME,null!=b&&(this.viewComponent=b)},e["puremvc.patterns.mediator.Mediator"]=s.patterns.mediator.Mediator,s.patterns.mediator.Mediator.__name__=["puremvc","patterns","mediator","Mediator"],s.patterns.mediator.Mediator.__interfaces__=[s.interfaces.IMediator],s.patterns.mediator.Mediator.__super__=s.patterns.observer.Notifier,s.patterns.mediator.Mediator.prototype=b(s.patterns.observer.Notifier.prototype,{getMediatorName:function(){return this.mediatorName},setViewComponent:function(a){this.viewComponent=a},getViewComponent:function(){return this.viewComponent},listNotificationInterests:function(){return[]},handleNotification:function(){},onRegister:function(){},onRemove:function(){},__class__:s.patterns.mediator.Mediator});var v={};v.mediator={},v.mediator.CommandLineMediator=function(){s.patterns.mediator.Mediator.call(this,"commandline",null)},e["albero_cli.mediator.CommandLineMediator"]=v.mediator.CommandLineMediator,v.mediator.CommandLineMediator.__name__=["albero_cli","mediator","CommandLineMediator"],v.mediator.CommandLineMediator.__super__=s.patterns.mediator.Mediator,v.mediator.CommandLineMediator.prototype=b(s.patterns.mediator.Mediator.prototype,{onRegister:function(){this.getViewComponent();this.eventEmitter=g.getInstance(),this.dataRecovered=!1,this.startDataSaver()},listNotificationInterests:function(){return["app_state_changed","access_token_changed","current_user_changed","configuration_changed","domain_selection_changed","talk_selection_changed","user_selection_needed","user_selection_changed","friend_selection_needed","stamp_set_changed","stamp_selection_changed","phone_call_started","phone_call_accepted","phone_call_connected","phone_call_hangued_up","action_selection_changed","current_page_changed","fileinfo_selection_changed","error_occurred","brand_badge_changed","send_form_top_changed","data_recovered","notify_update_user","notify_add_friend","notify_add_acquaintance","notify_delete_friend","notify_delete_acquaintance","notify_update_domain_users","get_domain_users_responsed","get_users_responsed","get_profile_responsed","update_user_responsed","update_profile_responsed","notify_add_domain_invite","notify_accept_domain_invite","notify_delete_domain_invite","notify_join_domain","notify_update_domain","notify_leave_domain","notify_create_pair_talk","notify_create_group_talk","notify_update_group_talk","notify_add_talkers","notify_delete_talker","notify_add_talk_invite","notify_accept_talk_invite","notify_delete_talk_invite","notify_delete_talk","notify_create_message","notify_update_read_statuses","notify_update_talk_status","notify_update_local_talk_status","notify_get_messages","notify_get_message_status","create_message_start","create_message_complete","create_message_fail","notify_create_announcement","notify_update_announcement_status","notify_get_announcements","create_announcement_start","create_announcement_complete","create_announcement_fail","notify_update_question","get_questions_responsed","notify_create_attachment","notify_delete_attachment","get_file_responsed"]},handleNotification:function(a){var b=a.getName();switch(b){case"data_recovered":if(this.dataRecovered)return;this.dataRecovered=!0,this.eventEmitter.emit(a.getName());break;case"error_occurred":this.eventEmitter.emit(a.getName(),new Error("AdapterError"),a.getBody());break;case"current_page_changed":var c=a.getBody();r.enumEq(c,t.Urls.error)&&(this.dataRecovered=!1);break;default:this.eventEmitter.emit(a.getName(),a.getBody())}},startDataSaver:function(){var a=this;w.Timer.delay(function(){a.dataRecovered&&a.dataStore.saveIfNeeded(),a.startDataSaver()},5e3)},__class__:v.mediator.CommandLineMediator});var w={};w.Int64=function(a,b){this.high=0|a,this.low=0|b},e["haxe.Int64"]=w.Int64,w.Int64.__name__=["haxe","Int64"],w.Int64.make=function(a,b){return new w.Int64(a,b)},w.Int64.getLow=function(a){return a.low},w.Int64.getHigh=function(a){return a.high},w.Int64.add=function(a,b){var c=a.high+b.high|0,d=a.low+b.low|0;return w.Int64.uicompare(d,a.low)<0&&c++,new w.Int64(c,d)},w.Int64.sub=function(a,b){var c=a.high-b.high|0,d=a.low-b.low|0;return w.Int64.uicompare(a.low,b.low)<0&&c--,new w.Int64(c,d)},w.Int64.mul=function(a,b){var c=65535,d=a.low&c,e=a.low>>>16,f=b.low&c,g=b.low>>>16,h=d*f,i=e*f,j=d*g,k=e*g,l=h,m=k+(j>>>16)+(i>>>16)|0;return j=j<<16|0,l=l+j|0,w.Int64.uicompare(l,j)<0&&(m=m+1|0),i=i<<16|0,l=l+i|0,w.Int64.uicompare(l,i)<0&&(m=m+1|0),m=m+function(){var c,d=a.low,e=b.high;return c=(d*(e>>>16)<<16|0)+d*(65535&e)|0}(this)|0,m=m+function(){var c,d=a.high,e=b.low;return c=(d*(e>>>16)<<16|0)+d*(65535&e)|0}(this)|0,new w.Int64(m,l)},w.Int64.divMod=function(a,b){var c=new w.Int64(0,0),d=0,e=1;for(b=new w.Int64(b.high,b.low);b.high>=0;){var f=w.Int64.ucompare(b,a);if(b.high=b.high<<1|0|b.low>>>31|0,b.low=b.low<<1|0,d=d<<1|0|e>>>31|0,e=e<<1|0,f>=0)break}for(;0!=(e|d|0);)w.Int64.ucompare(a,b)>=0&&(c.high=c.high|d|0,c.low=c.low|e|0,a=w.Int64.sub(a,b)),e=e>>>1|(d<<31|0)|0,d>>>=1,b.low=b.low>>>1|(b.high<<31|0)|0,b.high=b.high>>>1;return{quotient:c,modulus:a}},w.Int64.neg=function(a){var b=0|~a.high,c=0|-a.low;return 0==c&&b++,new w.Int64(b,c)},w.Int64.uicompare=function(a,b){return 0>a?0>b?~b-~a|0:1:0>b?-1:a-b|0},w.Int64.compare=function(a,b){var c=a.high-b.high|0;return 0!=c?c:w.Int64.uicompare(a.low,b.low)},w.Int64.ucompare=function(a,b){var c=w.Int64.uicompare(a.high,b.high);return 0!=c?c:w.Int64.uicompare(a.low,b.low)},w.Int64.prototype={toString:function(){if(0==(this.high|this.low))return"0";var a="",b=!1,c=this;c.high<0&&(b=!0,c=w.Int64.neg(c));for(var d=new w.Int64(0,10);0!=(c.high|c.low);){var e=w.Int64.divMod(c,d);a=e.modulus.low+a,c=e.quotient}return b&&(a="-"+a),a},__class__:w.Int64},w.Serializer=function(){this.buf=new o,this.cache=new Array,this.useCache=w.Serializer.USE_CACHE,this.useEnumIndex=w.Serializer.USE_ENUM_INDEX,this.shash=new w.ds.StringMap,this.scount=0},e["haxe.Serializer"]=w.Serializer,w.Serializer.__name__=["haxe","Serializer"],w.Serializer.run=function(a){var b=new w.Serializer;return b.serialize(a),b.toString()},w.Serializer.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);return null!=b?(this.buf.b+="R",void(this.buf.b+=null==b?"null":""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b+=null==a.length?"null":""+a.length,this.buf.b+=":",void(this.buf.b+=null==a?"null":""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;d>c;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+="r",this.buf.b+=null==e?"null":""+e,!0}return this.cache.push(a),!1},serializeFields:function(a){for(var b=0,c=m.fields(a);b<c.length;){var d=c[b];++b,this.serializeString(d),this.serialize(m.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=r["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:var c=a;if(0==c)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==c?"null":""+c;break;case 2:var d=a;Math.isNaN(d)?this.buf.b+="k":Math.isFinite(d)?(this.buf.b+="d",this.buf.b+=null==d?"null":""+d):this.buf.b+=0>d?"m":"p";break;case 3:this.buf.b+=a?"t":"f";break;case 6:var e=b[2];if(e==String)return void this.serializeString(a);if(this.useCache&&this.serializeRef(a))return;switch(e){case Array:var f=0;this.buf.b+="a";for(var g=a.length,h=0;g>h;){var j=h++;null==a[j]?f++:(f>0&&(1==f?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==f?"null":""+f),f=0),this.serialize(a[j]))}f>0&&(1==f?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==f?"null":""+f)),this.buf.b+="h";break;case k:this.buf.b+="l";for(var l=a,p=l.iterator();p.hasNext();){var q=p.next();this.serialize(q)}this.buf.b+="h";break;case Date:var s=a;this.buf.b+="v",this.buf.add(i.dateStr(s));break;case w.ds.StringMap:this.buf.b+="b";for(var t=a,u=t.keys();u.hasNext();){var v=u.next();this.serializeString(v),this.serialize(t.get(v))}this.buf.b+="h";break;case w.ds.IntMap:this.buf.b+="q";for(var x=a,y=x.keys();y.hasNext();){var z=y.next();this.buf.b+=":",this.buf.b+=null==z?"null":""+z,this.serialize(x.get(z))}this.buf.b+="h";break;case w.ds.ObjectMap:this.buf.b+="M";for(var A=a,B=A.keys();B.hasNext();){var C=B.next(),D=m.field(C,"__id__");m.deleteField(C,"__id__"),this.serialize(C),C.__id__=D,this.serialize(A.h[C.__id__])}this.buf.b+="h";break;case w.io.Bytes:for(var E=a,F=0,G=E.length-2,H=new o,I=w.Serializer.BASE64;G>F;){var J=E.get(F++),K=E.get(F++),L=E.get(F++);H.add(I.charAt(J>>2)),H.add(I.charAt(63&(J<<4|K>>4))),H.add(I.charAt(63&(K<<2|L>>6))),H.add(I.charAt(63&L))}if(F==G){var M=E.get(F++),N=E.get(F++);H.add(I.charAt(M>>2)),H.add(I.charAt(63&(M<<4|N>>4))),H.add(I.charAt(N<<2&63))}else if(F==G+1){var O=E.get(F++);H.add(I.charAt(O>>2)),H.add(I.charAt(O<<4&63))}var P=H.b;this.buf.b+="s",this.buf.b+=null==P.length?"null":""+P.length,this.buf.b+=":",this.buf.b+=null==P?"null":""+P;break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(r.getClassName(e)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(r.getClassName(e)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))return;this.buf.b+="o",this.serializeFields(a);break;case 7:var Q=b[2];if(this.useCache){if(this.serializeRef(a))return;this.cache.pop()}this.buf.b+=this.useEnumIndex?"j":"w",this.serializeString(r.getEnumName(Q)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=n.string(a[1])):this.serializeString(a[0]),this.buf.b+=":";var R=a.length;this.buf.b+=n.string(R-2);for(var S=2;R>S;){var T=S++;this.serialize(a[T])}this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+n.string(a)}},__class__:w.Serializer},w.Timer=function(a){var b=this;this.id=setInterval(function(){b.run()},a)},e["haxe.Timer"]=w.Timer,w.Timer.__name__=["haxe","Timer"],w.Timer.delay=function(a,b){var c=new w.Timer(b);return c.run=function(){c.stop(),a()},c},w.Timer.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:w.Timer},w.Unserializer=function(a){this.buf=a,this.length=a.length,this.pos=0,this.scache=new Array,this.cache=new Array;var b=w.Unserializer.DEFAULT_RESOLVER;null==b&&(b=r,w.Unserializer.DEFAULT_RESOLVER=b),this.setResolver(b)},e["haxe.Unserializer"]=w.Unserializer,w.Unserializer.__name__=["haxe","Unserializer"],w.Unserializer.initCodes=function(){for(var a=new Array,b=0,c=w.Unserializer.BASE64.length;c>b;){var d=b++;a[w.Unserializer.BASE64.charCodeAt(d)]=d}return a},w.Unserializer.run=function(a){return new w.Unserializer(a).unserialize()},w.Unserializer.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45!=d){if(48>d||d>57)break;a=10*a+(d-48),this.pos++}else{if(this.pos!=c)break;b=!0,this.pos++}}return b&&(a*=-1),a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return r.createEnum(a,b);for(var d=new Array;c-->0;)d.push(this.unserialize());return r.createEnum(a,b,d)},unserialize:function(){var a=this.get(this.pos++);switch(a){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var b=this.pos;;){var c=this.buf.charCodeAt(this.pos);if(!(c>=43&&58>c||101==c||69==c))break;this.pos++}return n.parseFloat(i.substr(this.buf,b,this.pos-b));case 121:var d=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<d)throw"Invalid string length";var e=i.substr(this.buf,this.pos,d);return this.pos+=d,e=decodeURIComponent(e.split("+").join(" ")),this.scache.push(e),e;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var f=(this.buf,new Array);for(this.cache.push(f);;){var g=this.buf.charCodeAt(this.pos);if(104==g){this.pos++;break}if(117==g){this.pos++;var h=this.readDigits();f[f.length+h-1]=null}else f.push(this.unserialize())}return f;case 111:var j={};return this.cache.push(j),this.unserializeObject(j),j;case 114:var l=this.readDigits();if(0>l||l>=this.cache.length)throw"Invalid reference";return this.cache[l];case 82:var m=this.readDigits();if(0>m||m>=this.scache.length)throw"Invalid string reference";return this.scache[m];case 120:throw this.unserialize();case 99:var o=this.unserialize(),q=this.resolver.resolveClass(o);if(null==q)throw"Class not found "+o;var s=r.createEmptyInstance(q);return this.cache.push(s),this.unserializeObject(s),s;case 119:var t=this.unserialize(),u=this.resolver.resolveEnum(t);if(null==u)throw"Enum not found "+t;var v=this.unserializeEnum(u,this.unserialize());return this.cache.push(v),v;case 106:var x=this.unserialize(),y=this.resolver.resolveEnum(x);if(null==y)throw"Enum not found "+x;this.pos++;var z=this.readDigits(),A=r.getEnumConstructs(y)[z];if(null==A)throw"Unknown enum index "+x+"@"+z;var B=this.unserializeEnum(y,A);return this.cache.push(B),B;case 108:var C=new k;this.cache.push(C);for(this.buf;104!=this.buf.charCodeAt(this.pos);)C.add(this.unserialize());return this.pos++,C;case 98:var D=new w.ds.StringMap;this.cache.push(D);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var E=this.unserialize();D.set(E,this.unserialize())}return this.pos++,D;case 113:var F=new w.ds.IntMap;this.cache.push(F);for(var G=(this.buf,this.get(this.pos++));58==G;){var H=this.readDigits();F.set(H,this.unserialize()),G=this.get(this.pos++)}if(104!=G)throw"Invalid IntMap format";return F;case 77:var I=new w.ds.ObjectMap;this.cache.push(I);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var J=this.unserialize();I.set(J,this.unserialize())}return this.pos++,I;case 118:var K,L=i.substr(this.buf,this.pos,19);return K=i.strDate(L),this.cache.push(K),this.pos+=19,K;case 115:var M=this.readDigits(),N=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<M)throw"Invalid bytes length";var O=w.Unserializer.CODES;null==O&&(O=w.Unserializer.initCodes(),w.Unserializer.CODES=O);var P,Q=this.pos,R=3&M;P=3*(M>>2)+(R>=2?R-1:0);for(var S=Q+(M-R),T=w.io.Bytes.alloc(P),U=0;S>Q;){var V=O[p.fastCodeAt(N,Q++)],W=O[p.fastCodeAt(N,Q++)];T.set(U++,V<<2|W>>4);var X=O[p.fastCodeAt(N,Q++)];T.set(U++,W<<4|X>>2);var Y=O[p.fastCodeAt(N,Q++)];T.set(U++,X<<6|Y)}if(R>=2){var Z=O[p.fastCodeAt(N,Q++)],$=O[p.fastCodeAt(N,Q++)];if(T.set(U++,Z<<2|$>>4),3==R){var _=O[p.fastCodeAt(N,Q++)];T.set(U++,$<<4|_>>2)}}return this.pos+=M,this.cache.push(T),T;case 67:var ab=this.unserialize(),bb=this.resolver.resolveClass(ab);if(null==bb)throw"Class not found "+ab;var cb=r.createEmptyInstance(bb);if(this.cache.push(cb),cb.hxUnserialize(this),103!=this.get(this.pos++))throw"Invalid custom data";return cb}throw this.pos--,"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos},__class__:w.Unserializer},w.ds={},w.ds.IntMap=function(){this.h={}},e["haxe.ds.IntMap"]=w.ds.IntMap,w.ds.IntMap.__name__=["haxe","ds","IntMap"],w.ds.IntMap.__interfaces__=[l],w.ds.IntMap.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},remove:function(a){return this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(0|b);return i.iter(a)},__class__:w.ds.IntMap},w.ds.ObjectMap=function(){this.h={},this.h.__keys__={}},e["haxe.ds.ObjectMap"]=w.ds.ObjectMap,w.ds.ObjectMap.__name__=["haxe","ds","ObjectMap"],w.ds.ObjectMap.__interfaces__=[l],w.ds.ObjectMap.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++w.ds.ObjectMap.count);this.h[c]=b,this.h.__keys__[c]=a},keys:function(){var a=[];for(var b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return i.iter(a)},__class__:w.ds.ObjectMap},w.ds.StringMap=function(){this.h={}},e["haxe.ds.StringMap"]=w.ds.StringMap,w.ds.StringMap.__name__=["haxe","ds","StringMap"],w.ds.StringMap.__interfaces__=[l],w.ds.StringMap.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){return a="$"+a,this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return i.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref["$"+a]}}},__class__:w.ds.StringMap},w.io={},w.io.Bytes=function(a,b){this.length=a,this.b=b},e["haxe.io.Bytes"]=w.io.Bytes,w.io.Bytes.__name__=["haxe","io","Bytes"],w.io.Bytes.alloc=function(a){for(var b=new Array,c=0;a>c;){{c++}b.push(0)}return new w.io.Bytes(a,b)},w.io.Bytes.ofString=function(a){for(var b=new Array,c=0;c<a.length;){var d=p.fastCodeAt(a,c++);d>=55296&&56319>=d&&(d=d-55232<<10|1023&p.fastCodeAt(a,c++)),127>=d?b.push(d):2047>=d?(b.push(192|d>>6),b.push(128|63&d)):65535>=d?(b.push(224|d>>12),b.push(128|d>>6&63),b.push(128|63&d)):(b.push(240|d>>18),b.push(128|d>>12&63),b.push(128|d>>6&63),b.push(128|63&d))}return new w.io.Bytes(b.length,b)},w.io.Bytes.ofData=function(a){return new w.io.Bytes(a.length,a)},w.io.Bytes.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=255&b},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw w.io.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,f=a,g=a+b;g>f;){var h=d[f++];if(128>h){if(0==h)break;c+=e(h)}else if(224>h)c+=e((63&h)<<6|127&d[f++]);else if(240>h){var i=d[f++];c+=e((31&h)<<12|(127&i)<<6|127&d[f++])}else{var j=d[f++],k=d[f++],l=(15&h)<<18|(127&j)<<12|(127&k)<<6|127&d[f++];c+=e((l>>10)+55232),c+=e(1023&l|56320)}}return c},toString:function(){return this.getString(0,this.length)},__class__:w.io.Bytes},w.io.BytesBuffer=function(){this.b=new Array},e["haxe.io.BytesBuffer"]=w.io.BytesBuffer,w.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"],w.io.BytesBuffer.prototype={addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw w.io.Error.OutsideBounds;for(var d=(this.b,a.b),e=b,f=b+c;f>e;){var g=e++;this.b.push(d[g])}},getBytes:function(){var a=new w.io.Bytes(this.b.length,this.b);return this.b=null,a},__class__:w.io.BytesBuffer},w.io.Input=function(){},e["haxe.io.Input"]=w.io.Input,w.io.Input.__name__=["haxe","io","Input"],w.io.Input.prototype={readByte:function(){throw"Not implemented"},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw w.io.Error.OutsideBounds;for(;d>0;)e[b]=this.readByte(),b++,d--;return c},set_bigEndian:function(a){return this.bigEndian=a,a},read:function(a){for(var b=w.io.Bytes.alloc(a),c=0;a>0;){var d=this.readBytes(b,c,a);if(0==d)throw w.io.Error.Blocked;c+=d,a-=d}return b},readFloat:function(){var a=[];a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),this.bigEndian||a.reverse();var b=1-(a[0]>>7<<1),c=(a[0]<<1&255|a[1]>>7)-127,d=(127&a[1])<<16|a[2]<<8|a[3];return 0==d&&-127==c?0:b*(1+Math.pow(2,-23)*d)*Math.pow(2,c)},readDouble:function(){var a=[];a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),a.push(this.readByte()),this.bigEndian||a.reverse();var b=1-(a[0]>>7<<1),c=(a[0]<<4&2047|a[1]>>4)-1023,d=this.getDoubleSig(a);return 0==d&&-1023==c?0:b*(1+Math.pow(2,-52)*d)*Math.pow(2,c)},readInt8:function(){var a=this.readByte();return a>=128?a-256:a},readInt16:function(){var a,b=this.readByte(),c=this.readByte();return a=this.bigEndian?c|b<<8:b|c<<8,0!=(32768&a)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<8|b<<16|a<<24:a|b<<8|c<<16|d<<24},getDoubleSig:function(a){return 4294967296*((15&a[1])<<16|a[2]<<8|a[3])+2147483648*(a[4]>>7)+((127&a[4])<<24|a[5]<<16|a[6]<<8|a[7])},__class__:w.io.Input},w.io.BytesInput=function(a,b,c){if(null==b&&(b=0),null==c&&(c=a.length-b),0>b||0>c||b+c>a.length)throw w.io.Error.OutsideBounds;this.b=a.b,this.pos=b,this.len=c,this.totlen=c},e["haxe.io.BytesInput"]=w.io.BytesInput,w.io.BytesInput.__name__=["haxe","io","BytesInput"],w.io.BytesInput.__super__=w.io.Input,w.io.BytesInput.prototype=b(w.io.Input.prototype,{readByte:function(){if(0==this.len)throw new w.io.Eof;return this.len--,this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw w.io.Error.OutsideBounds;if(0==this.len&&c>0)throw new w.io.Eof;this.len<c&&(c=this.len);for(var d=this.b,e=a.b,f=0;c>f;){var g=f++;e[b+g]=d[this.pos+g]}return this.pos+=c,this.len-=c,c},__class__:w.io.BytesInput}),w.io.Output=function(){},e["haxe.io.Output"]=w.io.Output,w.io.Output.__name__=["haxe","io","Output"],w.io.Output.prototype={writeByte:function(){throw"Not implemented"},writeBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw w.io.Error.OutsideBounds;for(;d>0;)this.writeByte(e[b]),b++,d--;return c},set_bigEndian:function(a){return this.bigEndian=a,a},write:function(a){for(var b=a.length,c=0;b>0;){var d=this.writeBytes(a,c,b);if(0==d)throw w.io.Error.Blocked;c+=d,b-=d}},writeFloat:function(a){if(0==a)return this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var b,c=Math.floor(Math.log(Math.abs(a))/w.io.Output.LN2),d=8388607&Math.floor(Math.abs(a)/Math.pow(2,c)*8388608);b=c+127>>1|(c>0?0>a?128:64:0>a?128:0);var e=c+127<<7&255|d>>16&127,f=d>>8&255,g=255&d;this.bigEndian?(this.writeByte(b),this.writeByte(e),this.writeByte(f),this.writeByte(g)):(this.writeByte(g),this.writeByte(f),this.writeByte(e),this.writeByte(b))},writeDouble:function(a){if(0==a)return this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeByte(0),void this.writeByte(0);var b,c=Math.floor(Math.log(Math.abs(a))/w.io.Output.LN2),d=Math.floor(Math.abs(a)/Math.pow(2,c)*Math.pow(2,52)),e=34359738367&d,f=Math.floor(d/Math.pow(2,32));b=c+1023>>4|(c>0?0>a?128:64:0>a?128:0);var g=c+1023<<4&255|f>>16&15,h=f>>8&255,i=255&f,j=e>>24&255,k=e>>16&255,l=e>>8&255,m=255&e;this.bigEndian?(this.writeByte(b),this.writeByte(g),this.writeByte(h),this.writeByte(i),this.writeByte(j),this.writeByte(k),this.writeByte(l),this.writeByte(m)):(this.writeByte(m),this.writeByte(l),this.writeByte(k),this.writeByte(j),this.writeByte(i),this.writeByte(h),this.writeByte(g),this.writeByte(b))},writeInt8:function(a){if(-128>a||a>=128)throw w.io.Error.Overflow;this.writeByte(255&a)},writeInt16:function(a){if(-32768>a||a>=32768)throw w.io.Error.Overflow;this.writeUInt16(65535&a)},writeUInt16:function(a){if(0>a||a>=65536)throw w.io.Error.Overflow;this.bigEndian?(this.writeByte(a>>8),this.writeByte(255&a)):(this.writeByte(255&a),this.writeByte(a>>8))},writeInt32:function(a){this.bigEndian?(this.writeByte(a>>>24),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)):(this.writeByte(255&a),this.writeByte(a>>8&255),this.writeByte(a>>16&255),this.writeByte(a>>>24))},__class__:w.io.Output},w.io.BytesOutput=function(){this.b=new w.io.BytesBuffer},e["haxe.io.BytesOutput"]=w.io.BytesOutput,w.io.BytesOutput.__name__=["haxe","io","BytesOutput"],w.io.BytesOutput.__super__=w.io.Output,w.io.BytesOutput.prototype=b(w.io.Output.prototype,{writeByte:function(a){this.b.b.push(a)},writeBytes:function(a,b,c){return this.b.addBytes(a,b,c),c},getBytes:function(){return this.b.getBytes()},__class__:w.io.BytesOutput}),w.io.Eof=function(){},e["haxe.io.Eof"]=w.io.Eof,w.io.Eof.__name__=["haxe","io","Eof"],w.io.Eof.prototype={toString:function(){return"Eof"},__class__:w.io.Eof},w.io.Error=e["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]},w.io.Error.Blocked=["Blocked",0],w.io.Error.Blocked.toString=f,w.io.Error.Blocked.__enum__=w.io.Error,w.io.Error.Overflow=["Overflow",1],w.io.Error.Overflow.toString=f,w.io.Error.Overflow.__enum__=w.io.Error,w.io.Error.OutsideBounds=["OutsideBounds",2],w.io.Error.OutsideBounds.toString=f,w.io.Error.OutsideBounds.__enum__=w.io.Error,w.io.Error.Custom=function(a){var b=["Custom",3,a];return b.__enum__=w.io.Error,b.toString=f,b},w.rtti={},w.rtti.Meta=function(){},e["haxe.rtti.Meta"]=w.rtti.Meta,w.rtti.Meta.__name__=["haxe","rtti","Meta"],w.rtti.Meta.getFields=function(a){var b=a.__meta__;return null==b||null==b.fields?{}:b.fields};var x={};x.Boot=function(){},e["js.Boot"]=x.Boot,x.Boot.__name__=["js","Boot"],x.Boot.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__},x.Boot.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+x.Boot.__string_rec(a[g],b):x.Boot.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0;h>j;){var k=j++;i+=(k>0?",":"")+x.Boot.__string_rec(a[k],b)}return i+="]"}var l;try{l=a.toString}catch(m){return"???"}if(null!=l&&l!=Object.toString){var n=a.toString();if("[object Object]"!=n)return n}var o=null,p="{\n";b+="	";var q=null!=a.hasOwnProperty;for(var o in a)(!q||a.hasOwnProperty(o))&&"prototype"!=o&&"__class__"!=o&&"__super__"!=o&&"__interfaces__"!=o&&"__properties__"!=o&&(2!=p.length&&(p+=", \n"),p+=b+o+" : "+x.Boot.__string_rec(a[o],b));return b=b.substring(1),p+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}},x.Boot.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||x.Boot.__interfLoop(g,b))return!0}return x.Boot.__interfLoop(a.__super__,b)},x.Boot.__instanceof=function(a,b){if(null==b)return!1;switch(b){case C:return(0|a)===a;case E:return"number"==typeof a;case F:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case D:return!0;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(x.Boot.__interfLoop(x.Boot.getClass(a),b))return!0}return b==G&&null!=a.__name__?!0:b==H&&null!=a.__ename__?!0:a.__enum__==b}},x.Boot.__cast=function(a,b){if(x.Boot.__instanceof(a,b))return a;throw"Cannot cast "+n.string(a)+" to "+n.string(b)},x.Browser=function(){},e["js.Browser"]=x.Browser,x.Browser.__name__=["js","Browser"],x.Browser.getLocalStorage=function(){try{var a=window.localStorage;return a.getItem(""),a}catch(b){return null}};var y={};y.Decoder=function(a,b){var c=new w.io.BytesInput(a);c.set_bigEndian(!0),this.o=this.decode(c,b)},e["msgpack.Decoder"]=y.Decoder,y.Decoder.__name__=["msgpack","Decoder"],y.Decoder.prototype={decode:function(a,b){try{var c=a.readByte();switch(c){case 192:return null;case 194:return!1;case 195:return!0;case 202:return a.readFloat();case 203:return a.readDouble();case 204:return a.readByte();case 205:return a.readUInt16();case 206:return a.readInt32();case 207:return w.Int64.make(a.readInt32(),a.readInt32());case 208:return a.readInt8();case 209:return a.readInt16();case 210:return a.readInt32();case 211:return w.Int64.make(a.readInt32(),a.readInt32());case 218:case 219:return a.read(218==c?a.readUInt16():a.readInt32()).toString();case 220:case 221:return this.readArray(a,220==c?a.readUInt16():a.readInt32(),b);case 222:case 223:return this.readMap(a,222==c?a.readUInt16():a.readInt32(),b);default:if(128>c)return c;if(144>c)return this.readMap(a,15&c,b);if(160>c)return this.readArray(a,15&c,b);if(192>c)return a.read(31&c).toString();if(c>223)return-256|c}}catch(d){if(!x.Boot.__instanceof(d,w.io.Eof))throw d}return null},readArray:function(a,b,c){for(var d=[],e=0;b>e;){{e++}d.push(this.decode(a,c))}return d},readMap:function(a,b,c){if(c){for(var d={},e=0;b>e;){var f=(e++,this.decode(a,c)),g=this.decode(a,c);d[f]=g}return d}for(var h=new w.ds.ObjectMap,i=0;b>i;){var j=(i++,this.decode(a,c)),k=this.decode(a,c);h.set(j,k)}return h},getResult:function(){return this.o},__class__:y.Decoder},y.Encoder=function(a){this.o=new w.io.BytesOutput,this.o.set_bigEndian(!0),this.encode(a)},e["msgpack.Encoder"]=y.Encoder,y.Encoder.__name__=["msgpack","Encoder"],y.Encoder.prototype={encode:function(a){var b=r["typeof"](a);switch(b[1]){case 0:this.o.writeByte(192);break;case 3:this.o.writeByte(a?195:194);break;case 1:this.writeInt(a);break;case 2:this.writeFloat(a);break;case 6:var c=b[2],d=r.getClassName(c);switch(d){case"String":this.writeRaw(w.io.Bytes.ofString(a));break;case"Array":this.writeArray(a);break;case"Hash":this.writeHashMap(a);break;case"haxe.Int64":this.writeInt64(a)}break;case 4:this.writeObjectMap(a);break;case 7:throw"Error: Enum not supported";case 5:throw"Error: Function not supported";case 8:throw"Error: Unknown Data Type"}},writeInt:function(a){-32>a?-32768>a?(this.o.writeByte(210),this.o.writeInt32(a)):-128>a?(this.o.writeByte(209),this.o.writeInt16(a)):(this.o.writeByte(208),this.o.writeInt8(a)):128>a?this.o.writeByte(255&a):256>a?(this.o.writeByte(204),this.o.writeByte(a)):65536>a?(this.o.writeByte(205),this.o.writeUInt16(a)):(this.o.writeByte(206),this.o.writeInt32(a))},writeInt64:function(a){this.o.writeByte(a.high<0?211:207),this.o.writeInt32(w.Int64.getHigh(a)),this.o.writeInt32(w.Int64.getLow(a))},writeFloat:function(a){var b=Math.abs(a);b>1.401298464324817e-45&&3.4028234663852886e38>b?(this.o.writeByte(202),this.o.writeFloat(a)):(this.o.writeByte(203),this.o.writeDouble(a))},writeRaw:function(a){var b=a.length;32>b?this.o.writeByte(160|b):65536>b?(this.o.writeByte(218),this.o.writeUInt16(b)):(this.o.writeByte(219),this.o.writeInt32(b)),this.o.write(a)},writeArray:function(a){var b=a.length;16>b?this.o.writeByte(144|b):65536>b?(this.o.writeByte(220),this.o.writeUInt16(b)):(this.o.writeByte(221),this.o.writeInt32(b));for(var c=0;c<a.length;){var d=a[c];
++c,this.encode(d)}},writeMapLength:function(a){16>a?this.o.writeByte(128|a):65536>a?(this.o.writeByte(222),this.o.writeUInt16(a)):(this.o.writeByte(223),this.o.writeInt32(a))},writeHashMap:function(a){this.writeMapLength(j.count(a));for(var b=a.keys();b.hasNext();){var c=b.next();this.writeRaw(w.io.Bytes.ofString(c)),this.encode(a.get(c))}},writeObjectMap:function(a){var b=m.fields(a);this.writeMapLength(j.count(b));for(var c=0;c<b.length;){var d=b[c];++c,this.writeRaw(w.io.Bytes.ofString(d)),this.encode(m.field(a,d))}},getBytes:function(){return this.o.getBytes()},__class__:y.Encoder},y.MsgPack=function(){},e["msgpack.MsgPack"]=y.MsgPack,y.MsgPack.__name__=["msgpack","MsgPack"],y.MsgPack.encode=function(a){return new y.Encoder(a).getBytes()},y.MsgPack.decode=function(a,b){return null==b&&(b=!0),new y.Decoder(a,b).getResult()},s.interfaces.IController=function(){},e["puremvc.interfaces.IController"]=s.interfaces.IController,s.interfaces.IController.__name__=["puremvc","interfaces","IController"],s.interfaces.IController.prototype={__class__:s.interfaces.IController},s.core={},s.core.Controller=function(){s.core.Controller.instance=this,this.commandMap=new w.ds.StringMap,this.initializeController()},e["puremvc.core.Controller"]=s.core.Controller,s.core.Controller.__name__=["puremvc","core","Controller"],s.core.Controller.__interfaces__=[s.interfaces.IController],s.core.Controller.getInstance=function(){return null==s.core.Controller.instance&&(s.core.Controller.instance=new s.core.Controller),s.core.Controller.instance},s.core.Controller.prototype={initializeController:function(){this.view=s.core.View.getInstance()},executeCommand:function(a){var b=this.commandMap.get(a.getName());if(null!=b){var c=r.createInstance(b,[]);c.execute(a)}},registerCommand:function(a,b){this.commandMap.exists(a)||this.view.registerObserver(a,new s.patterns.observer.Observer(d(this,this.executeCommand),this)),this.commandMap.set(a,b)},hasCommand:function(a){return this.commandMap.exists(a)},removeCommand:function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap.remove(a))},__class__:s.core.Controller},s.interfaces.IModel=function(){},e["puremvc.interfaces.IModel"]=s.interfaces.IModel,s.interfaces.IModel.__name__=["puremvc","interfaces","IModel"],s.interfaces.IModel.prototype={__class__:s.interfaces.IModel},s.core.Model=function(){s.core.Model.instance=this,this.proxyMap=new w.ds.StringMap,this.initializeModel()},e["puremvc.core.Model"]=s.core.Model,s.core.Model.__name__=["puremvc","core","Model"],s.core.Model.__interfaces__=[s.interfaces.IModel],s.core.Model.getInstance=function(){return null==s.core.Model.instance&&(s.core.Model.instance=new s.core.Model),s.core.Model.instance},s.core.Model.prototype={initializeModel:function(){},registerProxy:function(a){this.proxyMap.set(a.getProxyName(),a),a.onRegister()},retrieveProxy:function(a){return this.proxyMap.get(a)},hasProxy:function(a){return this.proxyMap.exists(a)},removeProxy:function(a){var b=this.proxyMap.get(a);return null!=b&&(this.proxyMap.remove(a),b.onRemove()),b},__class__:s.core.Model},s.interfaces.IView=function(){},e["puremvc.interfaces.IView"]=s.interfaces.IView,s.interfaces.IView.__name__=["puremvc","interfaces","IView"],s.interfaces.IView.prototype={__class__:s.interfaces.IView},s.core.View=function(){s.core.View.instance=this,this.mediatorMap=new w.ds.StringMap,this.observerMap=new w.ds.StringMap,this.initializeView()},e["puremvc.core.View"]=s.core.View,s.core.View.__name__=["puremvc","core","View"],s.core.View.__interfaces__=[s.interfaces.IView],s.core.View.getInstance=function(){return null==s.core.View.instance&&(s.core.View.instance=new s.core.View),s.core.View.instance},s.core.View.prototype={initializeView:function(){},registerObserver:function(a,b){this.observerMap.exists(a)||this.observerMap.set(a,new k),this.observerMap.get(a).add(b)},notifyObservers:function(a){if(this.observerMap.exists(a.getName())){for(var b=this.observerMap.get(a.getName()),c=new k,d=b.iterator();d.hasNext();){var e=d.next();c.add(e)}for(var f=c.iterator();f.hasNext();){var g=f.next();g.notifyObserver(a)}}},removeObserver:function(a,b){for(var c=this.observerMap.get(a),d=c.iterator();d.hasNext();){var e=d.next();if(1==e.compareNotifyContext(b)){c.remove(e);break}}c.isEmpty()&&this.observerMap.remove(a)},registerMediator:function(a){if(!this.mediatorMap.exists(a.getMediatorName())){this.mediatorMap.set(a.getMediatorName(),a);var b=a.listNotificationInterests();if(b.length>0)for(var c=new s.patterns.observer.Observer(d(a,a.handleNotification),a),e=0,f=b.length;f>e;){var g=e++;this.registerObserver(b[g],c)}a.onRegister()}},retrieveMediator:function(a){return this.mediatorMap.get(a)},removeMediator:function(a){var b=this.mediatorMap.get(a);if(null!=b){for(var c=b.listNotificationInterests(),d=0,e=c.length;e>d;){var f=d++;this.removeObserver(c[f],b)}this.mediatorMap.remove(a),b.onRemove()}return b},hasMediator:function(a){return this.mediatorMap.exists(a)},__class__:s.core.View},s.interfaces.INotification=function(){},e["puremvc.interfaces.INotification"]=s.interfaces.INotification,s.interfaces.INotification.__name__=["puremvc","interfaces","INotification"],s.interfaces.INotification.prototype={__class__:s.interfaces.INotification},s.interfaces.IObserver=function(){},e["puremvc.interfaces.IObserver"]=s.interfaces.IObserver,s.interfaces.IObserver.__name__=["puremvc","interfaces","IObserver"],s.interfaces.IObserver.prototype={__class__:s.interfaces.IObserver},s.patterns.observer.Notification=function(a,b,c){this.name=a,null!=b&&(this.body=b),null!=c&&(this.type=c)},e["puremvc.patterns.observer.Notification"]=s.patterns.observer.Notification,s.patterns.observer.Notification.__name__=["puremvc","patterns","observer","Notification"],s.patterns.observer.Notification.__interfaces__=[s.interfaces.INotification],s.patterns.observer.Notification.prototype={getName:function(){return this.name},setBody:function(a){this.body=a},getBody:function(){return this.body},setType:function(a){this.type=a},getType:function(){return this.type},toString:function(){var a="Notification Name: "+this.getName();return a+="\nBody:"+(null==this.body?"null":this.body.toString()),a+="\nType:"+(null==this.type?"null":this.type)},__class__:s.patterns.observer.Notification},s.patterns.observer.Observer=function(a,b){this.setNotifyMethod(a),this.setNotifyContext(b)},e["puremvc.patterns.observer.Observer"]=s.patterns.observer.Observer,s.patterns.observer.Observer.__name__=["puremvc","patterns","observer","Observer"],s.patterns.observer.Observer.__interfaces__=[s.interfaces.IObserver],s.patterns.observer.Observer.prototype={setNotifyMethod:function(a){this.notify=a},setNotifyContext:function(a){this.context=a},getNotifyMethod:function(){return this.notify},getNotifyContext:function(){return this.context},notifyObserver:function(a){this.getNotifyMethod()(a)},compareNotifyContext:function(a){return a==this.context},__class__:s.patterns.observer.Observer};var z=0,A={},B=function(a){function b(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(a){return"function"==typeof a}function d(a){return"number"==typeof a}function e(a){return"object"==typeof a&&null!==a}function f(a){return void 0===a}return a.exports=null,a.exports=b,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.prototype.setMaxListeners=function(a){if(!d(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},b.prototype.emit=function(a){var b,d,g,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||e(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(d=this._events[a],f(d))return!1;if(c(d))switch(arguments.length){case 1:d.call(this);break;case 2:d.call(this,arguments[1]);break;case 3:d.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),d.apply(this,h)}else if(e(d))for(h=Array.prototype.slice.call(arguments,1),j=d.slice(),g=j.length,i=0;g>i;i++)j[i].apply(this,h);return!0},b.prototype.addListener=function(a,d){var g;if(!c(d))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,c(d.listener)?d.listener:d),this._events[a]?e(this._events[a])?this._events[a].push(d):this._events[a]=[this._events[a],d]:this._events[a]=d,e(this._events[a])&&!this._events[a].warned&&(g=f(this._maxListeners)?b.defaultMaxListeners:this._maxListeners,g&&g>0&&this._events[a].length>g&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(a,b){function d(){this.removeListener(a,d),e||(e=!0,b.apply(this,arguments))}if(!c(b))throw TypeError("listener must be a function");var e=!1;return d.listener=b,this.on(a,d),this},b.prototype.removeListener=function(a,b){var d,f,g,h;if(!c(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(d=this._events[a],g=d.length,f=-1,d===b||c(d.listener)&&d.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(e(d)){for(h=g;h-->0;)if(d[h]===b||d[h].listener&&d[h].listener===b){f=h;break}if(0>f)return this;1===d.length?(d.length=0,delete this._events[a]):d.splice(f,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},b.prototype.removeAllListeners=function(a){var b,d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(d=this._events[a],c(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);return delete this._events[a],this},b.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]},b.listenerCount=function(a,b){var d;return d=a._events&&a._events[b]?c(a._events[b])?1:a._events[b].length:0},a.exports}({});Array.prototype.indexOf&&(i.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}),Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,e.Math=Math,Math.isFinite=function(a){return isFinite(a)},Math.isNaN=function(a){return isNaN(a)},String.prototype.__class__=e.String=String,String.__name__=["String"],e.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=e.Date=Date,Date.__name__=["Date"];var C=e.Int={__name__:["Int"]},D=e.Dynamic={__name__:["Dynamic"]},E=e.Float=Number;E.__name__=["Float"];var F=e.Bool=Boolean;F.__ename__=["Bool"];var G=e.Class={__name__:["Class"]},H={};null==Array.prototype.map&&(Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++;b[e]=a(this[e])}return b});var I,J=function(a){function b(a){var b="POST",c=a.url,d=a.headers,e=a.data,f=a.files,g=a.complete,h=new FormData;for(var i in e)e.hasOwnProperty(i)&&h.append(i,e[i]);for(var i in f)f.hasOwnProperty(i)&&h.append(i,f[i]);var j=new XMLHttpRequest;j.open(b,c,!0);for(var i in d)d.hasOwnProperty(i)&&j.setRequestHeader(i,d[i]);return j.onload=function(){4===j.readyState&&g(200===j.status,j)},j.onerror=function(){g(!1,j)},j.send(h),j}return a.exports=null,a.exports={upload:b},a.exports}({});I={websockets:!0,websocketsbinary:!0,pdf:!1,audio:!1},t.AppFacade.APP_STATE_CHANGED="app_state_changed",t.AppFacade.ACCESS_TOKEN_CHANGED="access_token_changed",t.AppFacade.CURRENT_USER_CHANGED="current_user_changed",t.AppFacade.CONFIGURATION_CHANGED="configuration_changed",t.AppFacade.DOMAIN_SELECTION_CHANGED="domain_selection_changed",t.AppFacade.TALK_SELECTION_CHANGED="talk_selection_changed",t.AppFacade.TALK_LIST_SCROLL_TO_TALK_TOP_NEEDED="talk_list_scroll_to_talk_top_needed",t.AppFacade.USER_SELECTION_NEEDED="user_selection_needed",t.AppFacade.USER_SELECTION_CHANGED="user_selection_changed",t.AppFacade.FRIEND_SELECTION_NEEDED="friend_selection_needed",t.AppFacade.STAMP_SET_CHANGED="stamp_set_changed",t.AppFacade.STAMP_SELECTION_CHANGED="stamp_selection_changed",t.AppFacade.PHONE_CALL_STARTED="phone_call_started",t.AppFacade.PHONE_CALL_ACCEPTED="phone_call_accepted",t.AppFacade.PHONE_CALL_CONNECTED="phone_call_connected",t.AppFacade.PHONE_CALL_HANGED_UP="phone_call_hangued_up",t.AppFacade.ACTION_SELECTION_CHANGED="action_selection_changed",t.AppFacade.CURRENT_PAGE_CHANGED="current_page_changed",t.AppFacade.CURRENT_PAGE_NOT_CHANGED="current_page_not_changed",t.AppFacade.FILEINFO_SELECTION_CHANGED="fileinfo_selection_changed",t.AppFacade.MESSAGE_FILEINFO_SELECTION_CHANGED="message_fileinfo_selection_changed",t.AppFacade.STAGED_FILEINFO_SELECTION_CHANGED="staged_fileinfo_selection_changed",t.AppFacade.ERROR_OCCURRED="error_occurred",t.AppFacade.UNREAD_COUNT_CHANGED="brand_badge_changed",t.AppFacade.SEND_FORM_TOP_CHANGED="send_form_top_changed",t.AppFacade.DATA_RECOVERED="data_recovered",t.AppFacade.NOTIFY_UPDATE_USER="notify_update_user",t.AppFacade.NOTIFY_ADD_FRIEND="notify_add_friend",t.AppFacade.NOTIFY_ADD_ACQUAINTANCE="notify_add_acquaintance",t.AppFacade.NOTIFY_DELETE_FRIEND="notify_delete_friend",t.AppFacade.NOTIFY_DELETE_ACQUAINTANCE="notify_delete_acquaintance",t.AppFacade.NOTIFY_UPDATE_DOMAIN_USERS="notify_update_domain_users",t.AppFacade.GET_DOMAIN_USERS_RESPONSED="get_domain_users_responsed",t.AppFacade.GET_USERS_RESPONSED="get_users_responsed",t.AppFacade.GET_PROFILE_RESPONSED="get_profile_responsed",t.AppFacade.UPDATE_USER_RESPONSED="update_user_responsed",t.AppFacade.UPDATE_PROFILE_RESPONSED="update_profile_responsed",t.AppFacade.NOTIFY_ADD_DOMAIN_INVITE="notify_add_domain_invite",t.AppFacade.NOTIFY_ACCEPT_DOMAIN_INVITE="notify_accept_domain_invite",t.AppFacade.NOTIFY_DELETE_DOMAIN_INVITE="notify_delete_domain_invite",t.AppFacade.NOTIFY_JOIN_DOMAIN="notify_join_domain",t.AppFacade.NOTIFY_UPDATE_DOMAIN="notify_update_domain",t.AppFacade.NOTIFY_LEAVE_DOMAIN="notify_leave_domain",t.AppFacade.NOTIFY_CREATE_PAIR_TALK="notify_create_pair_talk",t.AppFacade.NOTIFY_CREATE_GROUP_TALK="notify_create_group_talk",t.AppFacade.NOTIFY_UPDATE_GROUP_TALK="notify_update_group_talk",t.AppFacade.NOTIFY_ADD_TALKERS="notify_add_talkers",t.AppFacade.NOTIFY_DELETE_TALKER="notify_delete_talker",t.AppFacade.NOTIFY_ADD_TALK_INVITE="notify_add_talk_invite",t.AppFacade.NOTIFY_ACCEPT_TALK_INVITE="notify_accept_talk_invite",t.AppFacade.NOTIFY_DELETE_TALK_INVITE="notify_delete_talk_invite",t.AppFacade.NOTIFY_DELETE_TALK="notify_delete_talk",t.AppFacade.NOTIFY_CREATE_MESSAGE="notify_create_message",t.AppFacade.NOTIFY_UPDATE_READ_STATUSES="notify_update_read_statuses",t.AppFacade.NOTIFY_UPDATE_TALK_STATUS="notify_update_talk_status",t.AppFacade.NOTIFY_UPDATE_LOCAL_TALK_STATUS="notify_update_local_talk_status",t.AppFacade.NOTIFY_GET_MESSAGES="notify_get_messages",t.AppFacade.NOTIFY_GET_MESSAGE_READ_STATUS="notify_get_message_status",t.AppFacade.CREATE_MESSAGE_START="create_message_start",t.AppFacade.CREATE_MESSAGE_COMPLETE="create_message_complete",t.AppFacade.CREATE_MESSAGE_FAIL="create_message_fail",t.AppFacade.NOTIFY_CREATE_ANNOUNCEMENT="notify_create_announcement",t.AppFacade.NOTIFY_UPDATE_ANNOUNCEMENT_STATUS="notify_update_announcement_status",t.AppFacade.NOTIFY_GET_ANNOUNCEMENTS="notify_get_announcements",t.AppFacade.CREATE_ANNOUNCEMENT_START="create_announcement_start",t.AppFacade.CREATE_ANNOUNCEMENT_COMPLETE="create_announcement_complete",t.AppFacade.CREATE_ANNOUNCEMENT_FAIL="create_announcement_fail",t.AppFacade.NOTIFY_UPDATE_QUESTION="notify_update_question",t.AppFacade.NOTIFY_GET_QUESTIONS="get_questions_responsed",t.AppFacade.NOTIFY_CREATE_ATTACHMENT="notify_create_attachment",t.AppFacade.NOTIFY_DELETE_ATTACHMENT="notify_delete_attachment",t.AppFacade.GET_FILE_RESPONSED="get_file_responsed",t.AppFacade.NOTIFY_SEARCH_MESSAGES="notify_search_messages",t.AppFacade.NOTIFY_SEARCH_ATTACHMENTS="notify_search_attachments",t.AppFacade.NOTIFY_SEARCH_MESSAGES_FAIL="notify_search_messages_fail",t.AppFacade.NOTIFY_SEARCH_ATTACHMENTS_FAIL="notify_search_attachments_fail",t.AppFacade.NOTIFY_SEARCH_PREPARE="notify_search_prepare",t.AppFacade.NOTIFY_SEARCH_CLEAR="notify_search_clear",t.AppFacade.NOTIFY_SEARCH_BOX_TEXT_CHANGED="notify_search_box_text_changed",t.AppFacade.NOTIFY_SEARCH_BOX_POPUP="notify_search_box_popup",t.command.DomainCommand.__meta__={fields:{api:{inject:null}}},t.command.DomainCommand.NAME="Domain",t.command.FileCommand.__meta__={fields:{api:{inject:null}}},t.command.FileCommand.NAME="File",t.command.LoadStampSetCommand.NAME="LoadStampSet",t.command.LoadStampSetCommand.TAB_URL="./json/app_ja.json",t.command.LoadStampSetCommand.TAB_PANE_URL="./json/illust_category_ja.json",t.command.ManageFriendsCommand.__meta__={fields:{api:{inject:null}}},t.command.ManageFriendsCommand.NAME="ManageFriends",t.command.ReadCommand.__meta__={fields:{api:{inject:null}}},t.command.ReadCommand.NAME="Read",t.command.ReloadDataCommand.__meta__={fields:{api:{inject:null}}},t.command.ReloadDataCommand.NAME="ReloadData",t.command.SearchCommand.__meta__={fields:{api:{inject:null},searchService:{inject:null}}},t.command.SearchCommand.NAME="Search",t.command.SelectTalkCommand.__meta__={fields:{dataStore:{inject:null},settings:{inject:null}}},t.command.SelectTalkCommand.NAME="SelectTalk",t.command.SendCommand.__meta__={fields:{api:{inject:null}}},t.command.SendCommand.NAME="Send",t.command.SignInCommand.__meta__={fields:{api:{inject:null},settings:{inject:null}}},t.command.SignInCommand.NAME="SignIn",t.command.SignOutCommand.__meta__={fields:{api:{inject:null},settings:{inject:null},dataStore:{inject:null}}},t.command.SignOutCommand.NAME="SignOut",t.command.TalkCommand.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},t.command.TalkCommand.NAME="Talk",t.command.UpdateProfileCommand.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},t.command.UpdateProfileCommand.NAME="UpdateProfile",t.command.UpdateUserCommand.__meta__={fields:{api:{inject:null}}},t.command.UpdateUserCommand.NAME="UpdateUser",t.command.UrlCommand.__meta__={fields:{routing:{inject:null}}},t.command.UrlCommand.NAME="Url",t.entity.Message.SORT_ORDER_ASC=1,t.entity.Message.SORT_ORDER_DESC=2,t.entity.Message.MAX_READ_USER_IDS_COUNT=16,t.entity.SearchParams.TEXT_DATE_NONE="",t.entity.SearchParams.TEXT_DATE_TODAY="",t.entity.SearchParams.TEXT_DATE_YESTERDAY="",t.entity.SearchParams.TEXT_DATE_THREE_DAYS_BEFORE="3",t.entity.SearchParams.TEXT_DATE_CALENDER="",t.entity.SearchParams.QUERY_DATE_TODAY="t",t.entity.SearchParams.QUERY_DATE_YESTERDAY="-1d",t.entity.SearchParams.QUERY_DATE_THREE_DAYS_BEFORE="-3d",t.entity.SearchParams.TEXT_TYPE_MESSAGES="",t.entity.SearchParams.TEXT_TYPE_ATTACHMENTS="",t.js.Base64.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u.EMERGENCY=0,u.ALERT=1,u.CRITICAL=2,u.ERROR=3,u.WARNING=4,u.NOTICE=5,u.INFO=6,u.DEBUG=7,u.level=6,u._d=u._nop,u._i=null!=console?console.info:u._nop,u._w=null!=console?console.warn:u._nop,u._e=null!=console?console.error:u._nop,t.js.TextCanonicalizer.HIRAGANA_SMALL_A=12353,t.js.TextCanonicalizer.HIRAGANA_NN=12435,t.js.TextCanonicalizer.KATAKANA_SMALL_A=12449,s.patterns.proxy.Proxy.NAME="Proxy",t.proxy.AlberoBroadcastProxy.__meta__={fields:{api:{inject:null},dataStore:{inject:null},settings:{inject:null}}},t.proxy.AlberoBroadcastProxy.NAME="broadcast",t.proxy.AlberoServiceProxy.__meta__={fields:{rpc:{inject:null},settings:{inject:null},dataStore:{inject:null},fileService:{inject:null},searchService:{inject:null}}},t.proxy.AlberoServiceProxy.NAME="api",t.proxy.AlberoServiceProxy.API_VERSION="1.50",t.proxy.AppStateProxy.NAME="appState",t.proxy.DataStoreProxy.NAME="dataStore",t.proxy.DataStoreProxy.TYPE_FRIEND=0,t.proxy.DataStoreProxy.TYPE_ACQUAINSTANCE=1,t.proxy.DataStoreProxy.TYPE_NONE=2,t.proxy.FileServiceProxy.__meta__={fields:{settings:{inject:null}}},t.proxy.FileServiceProxy.NAME="fileService",t.proxy.FileServiceProxy.THUMBNAIL_WIDTH=300,t.proxy.FileServiceProxy.THUMBNAIL_HEIGHT=300,t.proxy.FormatterProxy.__meta__={fields:{dataStore:{inject:null},fileService:{inject:null},settings:{inject:null}}},t.proxy.FormatterProxy.NAME="formatter",t.proxy.MsgPackRpcProxy.__meta__={fields:{broadcast:{inject:null}}},t.proxy.MsgPackRpcProxy.NAME="rpc",t.proxy.MsgPackRpcProxy.lastMsgId=0,t.proxy._MsgPackRpcProxy.ConnectionKeeper.PING_INTERVAL_ON_CONNECTED=45e3,t.proxy.RoutingProxy.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},t.proxy.RoutingProxy.NAME="routing",t.proxy.SearchServiceProxy.__meta__={fields:{settings:{inject:null}}},t.proxy.SearchServiceProxy.NAME="searchService",t.proxy.SearchServiceProxy.LOAD_SIZE=20,t.proxy.SearchServiceProxy.DUMMY_VALUE_FOR_SET=1,t.proxy.SettingsProxy.NAME="settings",t.proxy.SettingsProxy.KEY_ACCESS_TOKEN="access_token",t.proxy.SettingsProxy.KEY_ACCESS_TOKEN_WITHOUT_MANAGEMENT_CONSOLE="access_token_without_management_console",t.proxy.SettingsProxy.KEY_SELECTED_DOMAIN_ID_H="selected_domain_id_h",t.proxy.SettingsProxy.KEY_SELECTED_DOMAIN_ID_L="selected_domain_id_l",t.proxy.SettingsProxy.COOKIE_KEY_SEND_BY_ENTER="send-by-enter",t.proxy.SettingsProxy.COOKIE_EXPIRES_SEND_BY_ENTER=31536e3,t.proxy.SettingsProxy.KEY_SELECTED_STAMP_TAB_ID="selected_stamp_tab_id",t.proxy.SettingsProxy.KEY_INPUT_TEXT="input_text",t.proxy.SettingsProxy.KEY_COPY_PROFILE_TO_ALL_DOMAINS="copy_profile_to_all_domains",t.proxy.SettingsProxy.KEY_SEARCH_HISTORIES="search_histories",t.proxy.StagedFileInfoStoreProxy.NAME="stagedFileInfoStore",s.patterns.mediator.Mediator.NAME="Mediator",v.mediator.CommandLineMediator.__meta__={fields:{dataStore:{inject:null},api:{inject:null}}},v.mediator.CommandLineMediator.NAME="commandline",v.mediator.CommandLineMediator.DATA_SAVE_SPAN=5e3,w.Serializer.USE_CACHE=!1,w.Serializer.USE_ENUM_INDEX=!1,w.Serializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",w.Unserializer.DEFAULT_RESOLVER=r,w.Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",w.ds.ObjectMap.count=0,w.io.Output.LN2=Math.log(2),y.Encoder.FLOAT_SINGLE_MIN=1.401298464324817e-45,y.Encoder.FLOAT_SINGLE_MAX=3.4028234663852886e38,y.Encoder.FLOAT_DOUBLE_MIN=5e-324,y.Encoder.FLOAT_DOUBLE_MAX=1.7976931348623157e308,g.main()}("undefined"!=typeof window?window:exports);