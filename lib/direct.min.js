!function(e,t){"use strict";var n={},s=function(){return vr.__string_rec(this,"")};function i(e,t){function n(){}n.prototype=e;var i=new n;for(var r in t)i[r]=t[r];return t.toString!==Object.prototype.toString&&(i.toString=t.toString),i}var r=e.DirectAPI=function(){this.eventEmitter=new Hr};(n.DirectAPI=r).__name__=["DirectAPI"],r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.main=function(){},r.prototype={setOptions:function(e){null!=e&&(Br.host=e.host,Br.endpoint=e.endpoint,Br.accessToken=e.access_token,Br.proxyURL=e.proxyURL,Br.account=e.account,Br.talkWithBot=e.talkWithBot),Qn._d("["+Ee.dateStr(new Date)+"] ","current settings",Br,"","",""),null==Br.accessToken&&Qn._e("["+Ee.dateStr(new Date)+"] ","Not enough parameters provided. I need a access token","","","","")},parseInt64:function(e){return 0<e.length&&"_"==e.charAt(0)?be.makeFromIdStr(e):be.parse(e)},stringifyInt64:function(e,t){return null==t&&(t=!1),t?"_"+e.high+"_"+e.low:qi.toString(e)},listen:function(){this.facade=_.getInstance(),this.api=vr.__cast(this.facade.retrieveProxy("api"),si),this.data=vr.__cast(this.facade.retrieveProxy("dataStore"),hi),this.facade.startup()},emit:function(e,t,n,i){this.eventEmitter.emit(e,t,n,i)},on:function(e,t){return this.eventEmitter.on(e,t)},getDomainInvites:function(e){this.api._getDomainInvites(e)},acceptDomainInvite:function(e){this.api.acceptDomainInvite(e)},__class__:r};var y=function(e,t){this.r=new RegExp(e,t.split("u").join(""))};(n.EReg=y).__name__=["EReg"],y.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},matched:function(e){if(null!=this.r.m&&0<=e&&e<this.r.m.length)return this.r.m[e];throw new gr("EReg::matched")},matchedPos:function(){if(null==this.r.m)throw new gr("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(e,t,n){if(null==n&&(n=-1),this.r.global){this.r.lastIndex=t;var i=this.r,r=n<0?e:Ee.substr(e,0,t+n);this.r.m=i.exec(r);var a=null!=this.r.m;return a&&(this.r.s=e),a}var o=this.match(n<0?Ee.substr(e,t,null):Ee.substr(e,t,n));return o&&(this.r.s=e,this.r.m.index+=t),o},split:function(e){var t="#__delim__#";return e.replace(this.r,t).split(t)},map:function(e,t){for(var n=0,i="";!(n>=e.length);){if(!this.matchSub(e,n)){i+=K.string(Ee.substr(e,n,null));break}var r=this.matchedPos();if(i+=K.string(Ee.substr(e,n,r.pos-n)),i+=K.string(t(this)),0==r.len?(i+=K.string(Ee.substr(e,r.pos,1)),n=r.pos+1):n=r.pos+r.len,!this.r.global)break}return!this.r.global&&0<n&&n<e.length&&(i+=K.string(Ee.substr(e,n,null))),i},__class__:y};var Ee=function(){};(n.HxOverrides=Ee).__name__=["HxOverrides"],Ee.dateStr=function(e){var t=e.getMonth()+1,n=e.getDate(),i=e.getHours(),r=e.getMinutes(),a=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(n<10?"0"+n:""+n)+" "+(i<10?"0"+i:""+i)+":"+(r<10?"0"+r:""+r)+":"+(a<10?"0"+a:""+a)},Ee.strDate=function(e){switch(e.length){case 8:var t=e.split(":"),n=new Date;return n.setTime(0),n.setUTCHours(t[0]),n.setUTCMinutes(t[1]),n.setUTCSeconds(t[2]),n;case 10:var i=e.split("-");return new Date(i[0],i[1]-1,i[2],0,0,0);case 19:var r=e.split(" "),a=r[0].split("-"),o=r[1].split(":");return new Date(a[0],a[1]-1,a[2],o[0],o[1],o[2]);default:throw new gr("Invalid date format : "+e)}},Ee.cca=function(e,t){var n=e.charCodeAt(t);if(n==n)return n},Ee.substr=function(e,t,n){if(null==n)n=e.length;else if(n<0){if(0!=t)return"";n=e.length+n}return e.substr(t,n)},Ee.remove=function(e,t){var n=e.indexOf(t);return-1!=n&&(e.splice(n,1),!0)},Ee.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ae=function(){};(n.Lambda=Ae).__name__=["Lambda"],Ae.array=function(e){for(var t=[],n=Ur(e)();n.hasNext();){var i=n.next();t.push(i)}return t},Ae.mapi=function(e,t){for(var n=new $,i=0,r=Ur(e)();r.hasNext();){var a=r.next();n.add(t(i++,a))}return n},Ae.exists=function(e,t){for(var n=Ur(e)();n.hasNext();){if(t(n.next()))return!0}return!1},Ae.iter=function(e,t){for(var n=Ur(e)();n.hasNext();){t(n.next())}},Ae.filter=function(e,t){for(var n=new $,i=Ur(e)();i.hasNext();){var r=i.next();t(r)&&n.add(r)}return n},Ae.fold=function(e,t,n){for(var i=Ur(e)();i.hasNext();){n=t(i.next(),n)}return n},Ae.count=function(e,t){var n=0;if(null==t)for(var i=Ur(e)();i.hasNext();){i.next();++n}else for(var r=Ur(e)();r.hasNext();){t(r.next())&&++n}return n},Ae.find=function(e,t){for(var n=Ur(e)();n.hasNext();){var i=n.next();if(t(i))return i}return null};var $=function(){this.length=0};(n.List=$).__name__=["List"],$.prototype={add:function(e){var t=new a(e,null);null==this.h?this.h=t:this.q.next=t,this.q=t,this.length++},isEmpty:function(){return null==this.h},remove:function(e){for(var t=null,n=this.h;null!=n;){if(n.item==e)return null==t?this.h=n.next:t.next=n.next,this.q==n&&(this.q=t),this.length--,!0;n=(t=n).next}return!1},iterator:function(){return new c(this.h)},map:function(e){for(var t=new $,n=this.h;null!=n;){var i=n.item;n=n.next,t.add(e(i))}return t},__class__:$};var a=function(e,t){this.item=e,this.next=t};(n["_List.ListNode"]=a).__name__=["_List","ListNode"],a.prototype={__class__:a};var c=function(e){this.head=e};(n["_List.ListIterator"]=c).__name__=["_List","ListIterator"],c.prototype={hasNext:function(){return null!=this.head},next:function(){var e=this.head.item;return this.head=this.head.next,e},__class__:c},Math.__name__=["Math"];var j=function(){};(n.Reflect=j).__name__=["Reflect"],j.field=function(e,t){try{return e[t]}catch(e){return null}},j.fields=function(e){var t=[];if(null!=e){var n=Object.prototype.hasOwnProperty;for(var i in e)"__id__"!=i&&"hx__closures__"!=i&&n.call(e,i)&&t.push(i)}return t},j.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},j.compare=function(e,t){return e==t?0:t<e?1:-1},j.isEnumValue=function(e){return null!=e&&null!=e.__enum__},j.deleteField=function(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)&&(delete e[t],!0)};var K=function(){};(n.Std=K).__name__=["Std"],K.string=function(e){return vr.__string_rec(e,"")},K.parseInt=function(e){var t=parseInt(e,10);return 0!=t||120!=Ee.cca(e,1)&&88!=Ee.cca(e,1)||(t=parseInt(e)),isNaN(t)?null:t};var T=function(){this.b=""};(n.StringBuf=T).__name__=["StringBuf"],T.prototype={toString:function(){return this.b},__class__:T};var I=function(){};(n.StringTools=I).__name__=["StringTools"],I.htmlEscape=function(e,t){return e=e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"),t?e.split('"').join("&quot;").split("'").join("&#039;"):e},I.startsWith=function(e,t){return e.length>=t.length&&Ee.substr(e,0,t.length)==t},I.replace=function(e,t,n){return e.split(t).join(n)},I.hex=function(e,t){for(var n="";n="0123456789ABCDEF".charAt(15&e)+n,0<(e>>>=4););if(null!=t)for(;n.length<t;)n="0"+n;return n};var o=n.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};o.TNull=["TNull",0],o.TNull.toString=s,(o.TNull.__enum__=o).TInt=["TInt",1],o.TInt.toString=s,(o.TInt.__enum__=o).TFloat=["TFloat",2],o.TFloat.toString=s,(o.TFloat.__enum__=o).TBool=["TBool",3],o.TBool.toString=s,(o.TBool.__enum__=o).TObject=["TObject",4],o.TObject.toString=s,(o.TObject.__enum__=o).TFunction=["TFunction",5],o.TFunction.toString=s,(o.TFunction.__enum__=o).TClass=function(e){var t=["TClass",6,e];return t.__enum__=o,t.toString=s,t},o.TEnum=function(e){var t=["TEnum",7,e];return t.__enum__=o,t.toString=s,t},o.TUnknown=["TUnknown",8],o.TUnknown.toString=s,(o.TUnknown.__enum__=o).__empty_constructs__=[o.TNull,o.TInt,o.TFloat,o.TBool,o.TObject,o.TFunction,o.TUnknown];var ee=function(){};(n.Type=ee).__name__=["Type"],ee.getClassName=function(e){var t=e.__name__;return null==t?null:t.join(".")},ee.getEnumName=function(e){return e.__ename__.join(".")},ee.resolveClass=function(e){var t=n[e];return null!=t&&t.__name__?t:null},ee.resolveEnum=function(e){var t=n[e];return null!=t&&t.__ename__?t:null},ee.createInstance=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);default:throw new gr("Too many arguments")}},ee.createEmptyInstance=function(e){function t(){}return t.prototype=e.prototype,new t},ee.createEnum=function(e,t,n){var i=j.field(e,t);if(null==i)throw new gr("No such constructor "+t);if(j.isFunction(i)){if(null==n)throw new gr("Constructor "+t+" need parameters");return i.apply(e,n)}if(null!=n&&0!=n.length)throw new gr("Constructor "+t+" does not need parameters");return i},ee.typeof=function(e){switch(typeof e){case"boolean":return o.TBool;case"function":return e.__name__||e.__ename__?o.TObject:o.TFunction;case"number":return Math.ceil(e)==e%2147483648?o.TInt:o.TFloat;case"object":if(null==e)return o.TNull;var t=e.__enum__;if(null!=t)return o.TEnum(t);var n=vr.getClass(e);return null!=n?o.TClass(n):o.TObject;case"string":return o.TClass(String);case"undefined":return o.TNull;default:return o.TUnknown}},ee.enumEq=function(e,t){if(e==t)return!0;try{if(e[0]!=t[0])return!1;for(var n=2,i=e.length;n<i;){var r=n++;if(!ee.enumEq(e[r],t[r]))return!1}var a=e.__enum__;if(a!=t.__enum__||null==a)return!1}catch(e){return!1}return!0};var l=function(){};(n["puremvc.interfaces.IFacade"]=l).__name__=["puremvc","interfaces","IFacade"],l.prototype={__class__:l};var u=function(){(u.instance=this).initializeFacade()};(n["puremvc.patterns.facade.Facade"]=u).__name__=["puremvc","patterns","facade","Facade"],u.__interfaces__=[l],u.getInstance=function(){return null==u.instance&&(u.instance=new u),u.instance},u.prototype={initializeFacade:function(){this.initializeModel(),this.initializeController(),this.initializeView()},initializeController:function(){null==this.controller&&(this.controller=br.getInstance())},initializeModel:function(){null==this.model&&(this.model=kr.getInstance())},initializeView:function(){null==this.view&&(this.view=Cr.getInstance())},registerCommand:function(e,t){this.controller.registerCommand(e,t)},removeCommand:function(e){this.controller.removeCommand(e)},hasCommand:function(e){return this.controller.hasCommand(e)},registerProxy:function(e){this.model.registerProxy(e)},retrieveProxy:function(e){return this.model.retrieveProxy(e)},removeProxy:function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},hasProxy:function(e){return this.model.hasProxy(e)},registerMediator:function(e){null!=this.view&&this.view.registerMediator(e)},retrieveMediator:function(e){return this.view.retrieveMediator(e)},removeMediator:function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},hasMediator:function(e){return this.view.hasMediator(e)},sendNotification:function(e,t,n){this.notifyObservers(new Mr(e,t,n))},notifyObservers:function(e){null!=this.view&&this.view.notifyObservers(e)},__class__:u};var _=function(){u.call(this)};(n["albero.AppFacade"]=_).__name__=["albero","AppFacade"],_.getInstance=function(){return null==u.instance&&(u.instance=new _),vr.__cast(u.instance,_)},_.__super__=u,_.prototype=i(u.prototype,{initializeModel:function(){u.prototype.initializeModel.call(this);for(var e=[new Ei,new ui,new hi,new _i,new di,new Ui,new oi,new si,new li,new pi,new Ci,new mi,new Mi,new Pi,new gi,new fi,new Ii,new Li,new xi,new Di,new Ti,new Bi,new ci,new Fi,ii.newInstance()],t=0;t<e.length;){var n=e[t];++t,this.registerProxy(n)}for(var i=0;i<e.length;){var r=e[i];++i,this.autoBind(r)}},initializeView:function(){u.prototype.initializeView.call(this);for(var e=[new Yi],t=0;t<e.length;){var n=e[t];++t,this.registerMediator(n)}},initializeController:function(){u.prototype.initializeController.call(this);for(var e=[H,ue,ce,ie,le,_e,W,te,V,G,oe,fe,de,me,pe,re,x,Q,L,P,X],t=0;t<e.length;){var n=e[t];++t;var i=I.replace(ee.getClassName(n).split(".").pop(),"Command","");this.registerCommand(i,n)}},registerMediator:function(e){this.autoBind(e),u.prototype.registerMediator.call(this,e)},autoBind:function(e){for(var t=e,n=pr.getFields(null==t?null:vr.getClass(t)),i=0,r=j.fields(n);i<r.length;){var a=r[i];++i;var o=j.field(n,a);if(Object.prototype.hasOwnProperty.call(o,"inject")){var s=this.retrieveProxy(a);null!=s&&(e[a]=s)}}},startup:function(){vr.__cast(this.retrieveProxy("appState"),ui).start()},__class__:_});var h=n["albero.AppState"]={__ename__:["albero","AppState"],__constructs__:["Active","Inactive"]};h.Active=["Active",0],h.Active.toString=s,(h.Active.__enum__=h).Inactive=["Inactive",1],h.Inactive.toString=s,(h.Inactive.__enum__=h).__empty_constructs__=[h.Active,h.Inactive];var d=n["albero.ConnectionStatus"]={__ename__:["albero","ConnectionStatus"],__constructs__:["Ok","Error","ConcurrentAccessError","ForcibliyClosedError"]};d.Ok=["Ok",0],d.Ok.toString=s,(d.Ok.__enum__=d).Error=["Error",1],d.Error.toString=s,(d.Error.__enum__=d).ConcurrentAccessError=["ConcurrentAccessError",2],d.ConcurrentAccessError.toString=s,(d.ConcurrentAccessError.__enum__=d).ForcibliyClosedError=["ForcibliyClosedError",3],d.ForcibliyClosedError.toString=s,(d.ForcibliyClosedError.__enum__=d).__empty_constructs__=[d.Ok,d.Error,d.ConcurrentAccessError,d.ForcibliyClosedError];var f=function(){};(n["albero.DateTimeHelper"]=f).__name__=["albero","DateTimeHelper"],f.isSameDate=function(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()&&e.getDate()==t.getDate()},f.dateString=function(e,t){var n=new Date,i="";return e.getFullYear()!=n.getFullYear()&&(i+=e.getFullYear()+"/"),i+=e.getMonth()+1+"/"+e.getDate(),t&&(i+=" ("+f.dayOfWeekString(e)+")"),i},f.dayOfWeekString=function(e){switch(e.getDay()){case 0:return qn.localize("DateTimeHelper.sun");case 1:return qn.localize("DateTimeHelper.mon");case 2:return qn.localize("DateTimeHelper.tue");case 3:return qn.localize("DateTimeHelper.wed");case 4:return qn.localize("DateTimeHelper.thu");case 5:return qn.localize("DateTimeHelper.fri");default:return qn.localize("DateTimeHelper.sat")}},f.getDateStringForFile=function(){var e=new Date;return e.getFullYear()+f.toDoubleDigits(e.getMonth()+1)+f.toDoubleDigits(e.getDate())+"_"+f.toDoubleDigits(e.getHours())+f.toDoubleDigits(e.getMinutes())+f.toDoubleDigits(e.getSeconds())},f.getTimeStringForVoice=function(e){return f.toDoubleDigits(e/60|0)+":"+f.toDoubleDigits((0|e)%60)},f.toDoubleDigits=function(e){var t=null==e?"null":""+e;return 1==t.length&&(t="0"+t),t},f.nowAsInt64=function(){return f.dateAsInt64((new Date).getTime())},f.oneDayAfterAsInt64=function(){return f.dateAsInt64((new Date).getTime()+864e5)},f.afterAsInt64=function(e){return f.dateAsInt64((new Date).getTime()+e)},f.dateAsInt64=function(e){var t=4294967296;return new En(e/t|0,e%t|0)},f.abbreviateDatetimeString=function(e){if(null==e)return"";var t=new Date,n=4294967296,i=e.high,r=e.low,a=new Date(i*n+(0<=r?r:r+n));return t.getFullYear()==a.getFullYear()&&t.getMonth()==a.getMonth()&&t.getDate()==a.getDate()?a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes():f.dateString(a,!1)},f.datetimeStringIn11Chars=function(e){if(null==e)return"";var t=new Date,n=4294967296,i=e.high,r=e.low,a=new Date(i*n+(0<=r?r:r+n)),o=f.dateString(a,!1);return t.getFullYear()==a.getFullYear()&&(o+=" "+a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes()),o},f.timeString=function(e){if(null==e)return"";var t=4294967296,n=e.high,i=e.low,r=new Date(n*t+(0<=i?i:i+t));return r.getHours()+":"+(r.getMinutes()<10?"0":"")+r.getMinutes()},f.datetimeString=function(e){if(null==e)return"";var t=parseFloat(qi.toString(e)),n=new Date(t);return n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()};var m=function(){};(n["albero.FileDynamicHelper"]=m).__name__=["albero","FileDynamicHelper"],m.filterDeleted=function(e){return null==e?[]:e.filter(m.isNotDeleted)},m.isNotDeleted=function(e){return null==e.deleted||!e.deleted},m.createFileInfoDynamic=function(e,t,n,i){var r={url:i.get_url,content_type:e.type,content_size:e.size,name:t,file_id:i.file_id};return ke.foreach(n,function(e){null!=e.auth&&(r.thumbnail_url=e.auth.get_url),null!=e.dimension&&(r.thumbnail_dimension=e.dimension.toObject())}),r};var p=function(){};(n["albero.FileHelper"]=p).__name__=["albero","FileHelper"],p.createByteSizeStringWithUnit=function(e){for(var t,n=["","K","M","G","T"];0<(t=e/1024|0);)e=t,n.shift();return e+" "+n.shift()+"B"};var g=function(){};(n["albero.History"]=g).__name__=["albero","History"],g.replaceState=function(e,t,n){return null!=window.history&&(window.history.replaceState(e,t,n),!0)};var be=function(){};(n["albero.Int64Helper"]=be).__name__=["albero","Int64Helper"],be.parse=function(e){if(!new y("^\\d+$","").match(e))return null;for(var t=new En(0,0),n=new En(0,10),i=0,r=e.length;i<r;){var a=i++,o=65535&t.low,s=t.low>>>16,l=65535&n.low,u=n.low>>>16,c=Wi._mul(o,l),_=Wi._mul(s,l),h=Wi._mul(o,u),d=c,f=(Wi._mul(s,u)+(h>>>16)|0)+(_>>>16)|0;if(d=d+(h<<=16)|0,Wi.ucompare(d,h)<0){f++;f|=0}if(d=d+(_<<=16)|0,Wi.ucompare(d,_)<0){f++;f|=0}f=f+(Wi._mul(t.low,n.high)+Wi._mul(t.high,n.low)|0)|0;var m=new En(f,d),p=new En(0,K.parseInt(e.charAt(a))),g=m.high+p.high|0,v=m.low+p.low|0;if(Wi.ucompare(v,m.low)<0){g++;g|=0}t=new En(g,v)}return t},be.getHigh=function(e){return e.high},be.getLow=function(e){return e.low},be.idStr=function(e){return"_"+e.high+"_"+e.low},be.makeFromIdStr=function(e){var t=new y("^_(-?\\d*)_(-?\\d*)$","");return t.match(e)?new En(K.parseInt(t.matched(1)),K.parseInt(t.matched(2))):null},be.toStr=function(e){return qi.toString(e)},be.isNeg=function(e){return e.high<0},be.add=function(e,t){var n=e.high+t.high|0,i=e.low+t.low|0;if(Wi.ucompare(i,e.low)<0){n++;n|=0}return new En(n,i)},be.sub=function(e,t){var n=e.high-t.high|0,i=e.low-t.low|0;if(Wi.ucompare(e.low,t.low)<0){n--;n|=0}return new En(n,i)},be.compare=function(e,t){var n=e.high-t.high|0;return n=0!=n?n:Wi.ucompare(e.low,t.low),e.high<0?t.high<0?n:-1:0<=t.high?n:1},be.eq=function(e,t){return null!=e&&null!=t&&e.high==t.high&&e.low==t.low},be.eqOrBothNull=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.high==t.high&&e.low==t.low},be.toFloat=function(e){var t=4294967296,n=e.high,i=e.low;return n*t+(0<=i?i:i+t)},be.idStrToInt64=function(e){var t=e.split("_");return 2<t.length?new En(K.parseInt(t[1]),K.parseInt(t[2])):null},be.decrement=function(e){if(null==e)return null;var t=new En(0,1),n=e.high-t.high|0,i=e.low-t.low|0;if(Wi.ucompare(e.low,t.low)<0){n--;n|=0}return new En(n,i)},be.increment=function(e){if(null==e)return null;var t=new En(0,1),n=e.high+t.high|0,i=e.low+t.low|0;if(Wi.ucompare(i,e.low)<0){n++;n|=0}return new En(n,i)},be.unique=function(e){if(null==e)return[];for(var t=[],n=0,i=e.length;n<i;){var r=n++,a=e[r];be.indexOf(e,a)==r&&t.push(a)}return t},be.indexOf=function(e,t){if(null==e)return-1;for(var n=0,i=e.length;n<i;){var r=n++,a=e[r];if(null!=a&&null!=t&&a.high==t.high&&a.low==t.low)return r}return-1},be.contains=function(e,t){if(null==e)return!1;for(var n=0;n<e.length;){var i=e[n];if(++n,null!=i&&null!=t&&i.high==t.high&&i.low==t.low)return!0}return!1},be.notContains=function(e,t){return!be.contains(e,t)},be.remove=function(e,t){if(null==e)return!1;for(var n=0;n<e.length;){var i=e[n];if(++n,null!=i&&null!=t&&i.high==t.high&&i.low==t.low)return Ee.remove(e,i),!0}return!1},be.fromIntOrInt64=function(e){if(null==e||vr.__instanceof(e,En))return e;var t=vr.__cast(e,Kr);return new En(t>>31,t)},be.eqArray=function(e,t){if(e!=t){if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0,i=e.length;n<i;){var r=n++,a=e[r],o=t[r];if(null==a||null==o||a.high!=o.high||a.low!=o.low)return!1}}return!0};var v=function(){};(n["albero.LambdaHelper"]=v).__name__=["albero","LambdaHelper"],v.flatten=function(e){return Ae.filter(e,function(e){return ke.isDefined(e)}).map(function(e){return ke.get(e)})},v.headOption=function(e){for(var t=Ur(e)();t.hasNext();){var n=t.next();return rr.Some(n)}return rr.None},v.lastOption=function(e){for(var t=rr.None,n=Ur(e)();n.hasNext();){var i=n.next();t=rr.Some(i)}return t},v.findOption=function(e,t){return ke.option(Ae.find(e,t))},v.indexWhere=function(e,t){for(var n=0,i=Ur(e)();i.hasNext();){if(t(i.next()))return n;++n}return-1},v.forall=function(e,t){return!Ae.exists(e,function(e){return!t(e)})};var Ne=function(){};(n["albero.ArrayHelper"]=Ne).__name__=["albero","ArrayHelper"],Ne.lastOption=function(e){return 0==e.length?rr.None:rr.Some(e[e.length-1])},Ne.sortAndReturn=function(e,t){return e.sort(t),e},Ne.reverseAndReturn=function(e){return e.reverse(),e},Ne.asArray=function(e){return vr.__cast(e,Array)};var ke=function(){};(n["albero.OptionHelper"]=ke).__name__=["albero","OptionHelper"],ke.map=function(e,t){switch(e[1]){case 0:var n=e[2];return rr.Some(t(n));case 1:return rr.None}},ke.flatMap=function(e,t){switch(e[1]){case 0:return t(e[2]);case 1:return rr.None}},ke.foreach=function(e,t){switch(e[1]){case 0:t(e[2])}},ke.filter=function(e,t){switch(e[1]){case 0:return t(e[2])?e:rr.None;case 1:return rr.None}},ke.exists=function(e,t){return ke.isDefined(ke.filter(e,t))},ke.isDefined=function(e){switch(e[1]){case 0:return!0;case 1:return!1}},ke.isEmpty=function(e){switch(e[1]){case 0:return!1;case 1:return!0}},ke.get=function(e){switch(e[1]){case 0:return e[2];case 1:throw new gr("None.get called")}},ke.orNull=function(e){switch(e[1]){case 0:return e[2];case 1:return null}},ke.flatten=function(e){return ke.flatMap(e,function(e){return e})},ke.eq=function(e,t){return ee.enumEq(e,t)},ke.option=function(e){return null!=e?rr.Some(e):rr.None};var S=function(){};(n["albero.StorageHelper"]=S).__name__=["albero","StorageHelper"],S.getItemAsJson=function(e){var t=S.getItem(e);if(null==t)return null;try{return JSON.parse(t)}catch(e){return null}},S.getItemAsInt=function(e){var t=S.getItem(e);return null==t?null:K.parseInt(t)},S.getItem=function(e){var t=Wn.getLocalStorage();if(null==t)Qn._e("["+Ee.dateStr(new Date)+"] ","storage not found","","","","");else try{return t.getItem(e)}catch(e){e instanceof gr&&(e=e.val),Qn._e("["+Ee.dateStr(new Date)+"] ","storage error occered.",e,"","","")}return null},S.removeItem=function(e){var t=Wn.getLocalStorage();if(null==t)Qn._e("["+Ee.dateStr(new Date)+"] ","storage not found","","","","");else try{return t.removeItem(e),!0}catch(e){e instanceof gr&&(e=e.val),Qn._e("["+Ee.dateStr(new Date)+"] ","storage error occered.",e,"","","")}return!1},S.setItem=function(e,t){var n=Wn.getLocalStorage();if(null==n)Qn._e("["+Ee.dateStr(new Date)+"] ","storage not found","","","","");else try{return n.setItem(e,t),!0}catch(e){e instanceof gr&&(e=e.val),Qn._e("["+Ee.dateStr(new Date)+"] ","storage error occered.",e,"","","")}return!1},S.getItemWithUnserialize=function(e){var t=S.getItem(e);if(null!=t)try{return Zi.run(t)}catch(e){e instanceof gr&&(e=e.val),Qn._w("["+Ee.dateStr(new Date)+"] ",e,"","","","")}return null},S.setItemWithSerialize=function(e,t){S.setItem(e,Qi.run(t))};var w=function(){};(n["albero.StringHelper"]=w).__name__=["albero","StringHelper"],w.trim=function(e){return e.trim()},w.compare=function(e,t){return t<e?1:e<t?-1:0},w.isEmpty=function(e){return null==e||0==e.length},w.isNotEmpty=function(e){return!w.isEmpty(e)},w.randomString=function(){var e="",t=8;for(e+=K.string(I.hex(0|(new Date).getTime(),8));t++<36;)e+=K.string(0!=(51*t&52)?I.hex(0!=(15^t)?8^(Math.random()*(0!=(20^t)?16:4)|0):4):"-");return e.toLowerCase()};var E=n["albero.Urls"]={__ename__:["albero","Urls"],__constructs__:["auto","domains","domain","members","talks","actions","settings","announcements","error","loading","environment","unknown"]};E.auto=["auto",0],E.auto.toString=s,(E.auto.__enum__=E).domains=["domains",1],E.domains.toString=s,(E.domains.__enum__=E).domain=function(e){var t=["domain",2,e];return t.__enum__=E,t.toString=s,t},E.members=function(e){var t=["members",3,e];return t.__enum__=E,t.toString=s,t},E.talks=function(e,t){var n=["talks",4,e,t];return n.__enum__=E,n.toString=s,n},E.actions=function(e){var t=["actions",5,e];return t.__enum__=E,t.toString=s,t},E.settings=function(e){var t=["settings",6,e];return t.__enum__=E,t.toString=s,t},E.announcements=["announcements",7],E.announcements.toString=s,(E.announcements.__enum__=E).error=["error",8],E.error.toString=s,(E.error.__enum__=E).loading=["loading",9],E.loading.toString=s,(E.loading.__enum__=E).environment=function(e){var t=["environment",10,e];return t.__enum__=E,t.toString=s,t},E.unknown=["unknown",11],E.unknown.toString=s,(E.unknown.__enum__=E).__empty_constructs__=[E.auto,E.domains,E.announcements,E.error,E.loading,E.unknown];var A=n["albero.TalkUrlParam"]={__ename__:["albero","TalkUrlParam"],__constructs__:["multi","single"]};A.multi=function(e){var t=["multi",0,e];return t.__enum__=A,t.toString=s,t},A.single=function(e){var t=["single",1,e];return t.__enum__=A,t.toString=s,t},A.__empty_constructs__=[];var b=function(){};(n["albero.TalkUrlParamHelper"]=b).__name__=["albero","TalkUrlParamHelper"],b.getTalkSelectionForSingle=function(e){switch(e[1]){case 0:return rr.None;case 1:var t=e[2];return rr.Some(t)}},b.getTalkSelectionsForMulti=function(e){switch(e[1]){case 0:var t=e[2];return rr.Some(t);case 1:return rr.None}};var N=function(){};(n["albero.UrlConverter"]=N).__name__=["albero","UrlConverter"],N.createUrls=function(e,t){if(null==e)return E.unknown;var n=e.split("/");return""!=n[0]?E.unknown:n.length<2?E.unknown:2==n.length?N.createUrlsWithoutDomain(n,t):N.createUrlsWithDomain(n,t)},N.createUrlsWithoutDomain=function(e,t){switch(e[1]){case"":return E.domains;case"environment":var n=t.getFallbackDomainId();return ke.foreach(n,function(e){g.replaceState("environment",null,"#"+N.createFragment(E.environment(e),t))}),E.environment(ke.orNull(n));case"error":return E.error;case"loading":return E.loading;case"settings":var i=t.getFallbackDomainId();return ke.foreach(i,function(e){g.replaceState("settings",null,"#"+N.createFragment(E.settings(e),t))}),E.settings(ke.orNull(i));default:return E.unknown}},N.createUrlsWithDomain=function(e,t){var n=be.parse(e[1]);if(null==n)return E.unknown;switch(e[2]){case"":return E.domain(n);case"actions":return E.actions(n);case"environment":return E.environment(n);case"members":return E.members(n);case"settings":return E.settings(n);case"talks":if(e.length<4)return E.talks(n,A.single(fn.NotSelected));if("multi"==e[3]||",,"==e[3])return E.talks(n,A.multi([fn.NotSelected,fn.NotSelected,fn.NotSelected]));if("single"==e[3]||""==e[3])return E.talks(n,A.single(fn.NotSelected));var i=e[3].split(",");if(1==i.length){var r=e.length<5?rr.None:ke.option(be.parse(e[4])),a=N.createTalkSelection(i[0],r);return E.talks(n,A.single(a))}if(3==i.length){var o=i.map(function(e){return N.createTalkSelection(e,rr.None)});return E.talks(n,A.multi(o))}}return E.unknown},N.createTalkSelection=function(e,t){if(e==N.ANNOUNCEMENTS_KEY)return fn.AnnouncementsSelected;var n=be.parse(e);return null==n?fn.NotSelected:fn.TalkSelected(n,t)},N.createFragment=function(e,t){switch(e[1]){case 1:return"/";case 2:var n=e[2];return"/"+qi.toString(n)+"/";case 3:var i=e[2];return"/"+qi.toString(i)+"/members";case 4:var r=e[3],a=e[2];switch(r[1]){case 0:var o="/"+r[2].map(N.createTalkPartFragment).join(",");return"/"+qi.toString(a)+"/talks"+o;case 1:var s=r[2],l=N.createTalkPartFragment(s),u=w.isEmpty(l)?"":"/"+l;return"/"+qi.toString(a)+"/talks"+u}break;case 5:var c=e[2];return"/"+qi.toString(c)+"/actions";case 6:var _,h=e[2];switch(ke.option(h)[1]){case 0:_=ke.option(h);break;case 1:_=t.getLastSelectedDomainId()}var d=ke.map(_,function(e){return"/"+qi.toString(e)+"/settings"});switch(d[1]){case 0:return d[2];case 1:return"/settings"}break;case 8:case 9:return"/"+K.string(e);case 10:var f,m=e[2];switch(ke.option(m)[1]){case 0:f=ke.option(m);break;case 1:f=t.getLastSelectedDomainId()}var p=ke.map(f,function(e){return"/"+qi.toString(e)+"/environment"});switch(p[1]){case 0:return p[2];case 1:return"/environment"}break;default:return null}},N.createTalkPartFragment=function(e){switch(e[1]){case 0:return"";case 1:var t,n=e[3],i=e[2],r=ke.map(n,function(e){return"/"+qi.toString(e)});switch(r[1]){case 0:t=r[2];break;case 1:t=""}return qi.toString(i)+t;case 2:return N.ANNOUNCEMENTS_KEY}};var k=function(){};(n["albero.IUrlConverterDelegate"]=k).__name__=["albero","IUrlConverterDelegate"],k.prototype={__class__:k};var D=function(){};(n["puremvc.interfaces.INotifier"]=D).__name__=["puremvc","interfaces","INotifier"],D.prototype={__class__:D};var C=function(){this.facade=u.getInstance()};(n["puremvc.patterns.observer.Notifier"]=C).__name__=["puremvc","patterns","observer","Notifier"],C.__interfaces__=[D],C.prototype={sendNotification:function(e,t,n){this.facade.sendNotification(e,t,n)},__class__:C};var R=function(){};(n["puremvc.interfaces.ICommand"]=R).__name__=["puremvc","interfaces","ICommand"],R.prototype={__class__:R};var O=function(){C.call(this)};(n["puremvc.patterns.command.SimpleCommand"]=O).__name__=["puremvc","patterns","command","SimpleCommand"],O.__interfaces__=[R],O.__super__=C,O.prototype=i(C.prototype,{execute:function(e){},__class__:O});var M=function(){O.call(this),_.getInstance().autoBind(this)};(n["albero.command.AutoBindCommand"]=M).__name__=["albero","command","AutoBindCommand"],M.__super__=O,M.prototype=i(O.prototype,{__class__:M});var x=function(){M.call(this)};(n["albero.command.AccountControlRequestCommand"]=x).__name__=["albero","command","AccountControlRequestCommand"],x.__super__=M,x.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[2];this.api.acceptAccountControlRequest(n);break;case 1:var i=t[2];this.api.rejectAccountControlRequest(i)}},__class__:x});var U=n["albero.command.AccountControlRequestAction"]={__ename__:["albero","command","AccountControlRequestAction"],__constructs__:["ACCEPT_REQUEST","REJECT_REQUEST"]};U.ACCEPT_REQUEST=function(e){var t=["ACCEPT_REQUEST",0,e];return t.__enum__=U,t.toString=s,t},U.REJECT_REQUEST=function(e){var t=["REJECT_REQUEST",1,e];return t.__enum__=U,t.toString=s,t},U.__empty_constructs__=[];var P=function(){M.call(this)};(n["albero.command.ConferenceCommand"]=P).__name__=["albero","command","ConferenceCommand"],P.__super__=M,P.prototype=i(M.prototype,{execute:function(e){var t=this,n=e.getBody();switch(n[1]){case 0:var i=n[3],r=n[2];this.api.joinConference(r,i);break;case 1:var a=n[2];this.api.leaveConference(a);var o=ke.filter(this.conferenceStore.getConference(a),function(e){return e.isExpired()});ke.foreach(o,function(e){t.conferenceStore.removeConference(e),t.sendNotification("notify_close_conference",e)});break;case 2:var s=n[2];this.api.rejectConference(s)}},__class__:P});var F=n["albero.command.ConferenceAction"]={__ename__:["albero","command","ConferenceAction"],__constructs__:["JOIN_CONFERENCE","LEAVE_CONFERENCE","REJECT_CONFERENCE"]};F.JOIN_CONFERENCE=function(e,t){var n=["JOIN_CONFERENCE",0,e,t];return n.__enum__=F,n.toString=s,n},F.LEAVE_CONFERENCE=function(e){var t=["LEAVE_CONFERENCE",1,e];return t.__enum__=F,t.toString=s,t},F.REJECT_CONFERENCE=function(e){var t=["REJECT_CONFERENCE",2,e];return t.__enum__=F,t.toString=s,t},F.__empty_constructs__=[];var L=function(){M.call(this)};(n["albero.command.DeviceCommand"]=L).__name__=["albero","command","DeviceCommand"],L.__super__=M,L.prototype=i(M.prototype,{execute:function(e){e.getBody()},__class__:L});var B=n["albero.command.DeviceAction"]={__ename__:["albero","command","DeviceAction"],__constructs__:["AUTHORIZE"]};B.AUTHORIZE=["AUTHORIZE",0],B.AUTHORIZE.toString=s,(B.AUTHORIZE.__enum__=B).__empty_constructs__=[B.AUTHORIZE];var H=function(){M.call(this)};(n["albero.command.DomainCommand"]=H).__name__=["albero","command","DomainCommand"],H.__super__=M,H.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[2];this.api.acceptDomainInvite(n);break;case 1:var i=t[2];this.api.deleteDomainInvite(i);break;case 2:var r=t[2];this.api.leaveDomain(r)}},__class__:H});var z=n["albero.command.DomainAction"]={__ename__:["albero","command","DomainAction"],__constructs__:["ACCEPT_INVITE","DELETE_INVITE","LEAVE"]};z.ACCEPT_INVITE=function(e){var t=["ACCEPT_INVITE",0,e];return t.__enum__=z,t.toString=s,t},z.DELETE_INVITE=function(e){var t=["DELETE_INVITE",1,e];return t.__enum__=z,t.toString=s,t},z.LEAVE=function(e){var t=["LEAVE",2,e];return t.__enum__=z,t.toString=s,t},z.__empty_constructs__=[];var G=function(){M.call(this)};(n["albero.command.FileCommand"]=G).__name__=["albero","command","FileCommand"],G.__super__=M,G.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[3],i=t[2];this.api.upload(i.domainId,i.id,n);break;case 1:var r=t[4],a=t[3],o=t[2];this.api.uploadMulti(o.domainId,o.id,a,r);break;case 2:var s=t[2];s.deleted=!0,this.api.deleteAttachment(s.id,s.messageId);break;case 3:var l=t[6],u=t[5],c=t[4],_=t[3],h=t[2];this.api.createDownloadAuth(h,_,c,u,l)}},__class__:G});var Y=n["albero.command.FileAction"]={__ename__:["albero","command","FileAction"],__constructs__:["UPLOAD","UPLOAD_MULTI","DELETE","AUTH"]};Y.UPLOAD=function(e,t){var n=["UPLOAD",0,e,t];return n.__enum__=Y,n.toString=s,n},Y.UPLOAD_MULTI=function(e,t,n){var i=["UPLOAD_MULTI",1,e,t,n];return i.__enum__=Y,i.toString=s,i},Y.DELETE=function(e){var t=["DELETE",2,e];return t.__enum__=Y,t.toString=s,t},Y.AUTH=function(e,t,n,i,r){var a=["AUTH",3,e,t,n,i,r];return a.__enum__=Y,a.toString=s,a},Y.__empty_constructs__=[];var V=function(){M.call(this)};(n["albero.command.LoadStampSetCommand"]=V).__name__=["albero","command","LoadStampSetCommand"],V.__super__=M,V.prototype=i(M.prototype,{execute:function(e){},__class__:V});var W=function(){M.call(this)};(n["albero.command.ManageFriendsCommand"]=W).__name__=["albero","command","ManageFriendsCommand"],W.__super__=M,W.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t.action[1]){case 0:for(var n=0,i=t.users;n<i.length;){var r=i[n];++n,this.api.addFriend(r)}break;case 1:for(var a=0,o=t.users;a<o.length;){var s=o[a];++a,this.api.deleteFriend(s)}}},__class__:W});var q=n["albero.command.ManageFriendsAction"]={__ename__:["albero","command","ManageFriendsAction"],__constructs__:["ADD","DELETE"]};q.ADD=["ADD",0],q.ADD.toString=s,(q.ADD.__enum__=q).DELETE=["DELETE",1],q.DELETE.toString=s,(q.DELETE.__enum__=q).__empty_constructs__=[q.ADD,q.DELETE];var Q=function(){M.call(this)};(n["albero.command.MessageCommand"]=Q).__name__=["albero","command","MessageCommand"],Q.__super__=M,Q.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[3],i=t[2];this.api.deleteMessage(i,n);break;case 1:var r=t[3],a=t[2];this.api.forwardMessages(a,r,0)}},__class__:Q});var J=n["albero.command.MessageAction"]={__ename__:["albero","command","MessageAction"],__constructs__:["DELETE","FORWARD"]};J.DELETE=function(e,t){var n=["DELETE",0,e,t];return n.__enum__=J,n.toString=s,n},J.FORWARD=function(e,t){var n=["FORWARD",1,e,t];return n.__enum__=J,n.toString=s,n},J.__empty_constructs__=[];var X=function(){M.call(this)};(n["albero.command.NoteCommand"]=X).__name__=["albero","command","NoteCommand"],X.__super__=M,X.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[3],i=t[2];this.api.getNoteStatuses(i,n);break;case 1:var r=t[2];this.api.getNote(r);break;case 2:var a=t[6],o=t[5],s=t[4],l=t[3],u=t[2];this.api.createNote(u,l,s,o,a);break;case 3:var c=t[4],_=t[3],h=t[2];this.api.updateNoteSetting(h,_,c);break;case 4:var d=t[7],f=t[6],m=t[5],p=t[4],g=t[3],v=t[2];this.api.updateNote(v,g,p,m,f,d);break;case 5:var y=t[2];this.api.deleteNote(y)}},__class__:X});var Z=n["albero.command.NoteAction"]={__ename__:["albero","command","NoteAction"],__constructs__:["GET_NOTE_STATUSES","GET_NOTE","CREATE_NOTE","UPDATE_NOTE_SETTING","UPDATE_NOTE","DELETE_NOTE"]};Z.GET_NOTE_STATUSES=function(e,t){var n=["GET_NOTE_STATUSES",0,e,t];return n.__enum__=Z,n.toString=s,n},Z.GET_NOTE=function(e){var t=["GET_NOTE",1,e];return t.__enum__=Z,t.toString=s,t},Z.CREATE_NOTE=function(e,t,n,i,r){var a=["CREATE_NOTE",2,e,t,n,i,r];return a.__enum__=Z,a.toString=s,a},Z.UPDATE_NOTE_SETTING=function(e,t,n){var i=["UPDATE_NOTE_SETTING",3,e,t,n];return i.__enum__=Z,i.toString=s,i},Z.UPDATE_NOTE=function(e,t,n,i,r,a){var o=["UPDATE_NOTE",4,e,t,n,i,r,a];return o.__enum__=Z,o.toString=s,o},Z.DELETE_NOTE=function(e){var t=["DELETE_NOTE",5,e];return t.__enum__=Z,t.toString=s,t},Z.__empty_constructs__=[];var te=function(){M.call(this)};(n["albero.command.ReadCommand"]=te).__name__=["albero","command","ReadCommand"],te.__super__=M,te.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[3],i=t[2];this.readStatusUpdater.updateReadStatuses(i,n);break;case 1:var r=t[3],a=t[2];this.readStatusUpdater.updateAnnouncementReadStatus(a,r);break;case 2:var o=t[3],s=t[2];this.api.getReadStatus(s,o);break;case 3:var l=t[3],u=t[2];this.keywordWatcher.readKeywordDetection(u,null,l);break;case 4:var c=t[3],_=t[2];this.keywordWatcher.readKeywordDetection(null,_,c)}},__class__:te});var ne=n["albero.command.ReadType"]={__ename__:["albero","command","ReadType"],__constructs__:["TALK","ANNOUNCEMENT","READ_STATUS","KEYWORD_IN_ANNOUNCEMENTS","KEYWORD_IN_MESSAGES"]};ne.TALK=function(e,t){var n=["TALK",0,e,t];return n.__enum__=ne,n.toString=s,n},ne.ANNOUNCEMENT=function(e,t){var n=["ANNOUNCEMENT",1,e,t];return n.__enum__=ne,n.toString=s,n},ne.READ_STATUS=function(e,t){var n=["READ_STATUS",2,e,t];return n.__enum__=ne,n.toString=s,n},ne.KEYWORD_IN_ANNOUNCEMENTS=function(e,t){var n=["KEYWORD_IN_ANNOUNCEMENTS",3,e,t];return n.__enum__=ne,n.toString=s,n},ne.KEYWORD_IN_MESSAGES=function(e,t){var n=["KEYWORD_IN_MESSAGES",4,e,t];return n.__enum__=ne,n.toString=s,n},ne.__empty_constructs__=[];var ie=function(){M.call(this)};(n["albero.command.ReloadDataCommand"]=ie).__name__=["albero","command","ReloadDataCommand"],ie.__super__=M,ie.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:this.api.getDomains();break;case 1:this.api.getFriends(),this.api.getAcquaintances();break;case 2:this.api.getTalks();break;case 3:var n=t[5],i=t[4],r=t[3],a=t[2];this.api.getMessages(a,r,i,n);break;case 4:var o=t[2];this.api.getAllUsers(o);break;case 5:var s=t[3],l=t[2];this.api.getUsers(l,s);break;case 6:var u=t[3],c=t[2];this.api.getProfile(c,u);break;case 7:var _=t[3],h=t[2];this.api.searchDomainUsers(h,_);break;case 8:var d=t[4],f=t[3],m=t[2];this.api.getAnnouncements(m,f,d);break;case 9:var p=t[5],g=t[4],v=t[3],y=t[2];this.api.getQuestions(y,v,g,p);break;case 10:var S=t[3],w=t[2];this.api.getQuestion(w,S);break;case 11:var T=t[3],I=t[2];this.api.getAttachments(I,T);break;case 12:var E=t[3],A=t[2];this.api.getSolutions(A,E);break;case 13:this.api.getMe();break;case 14:var b=t[2];this.api.getDepartmentTree(b);break;case 15:var N=t[3],k=t[2];this.api.getDepartmentUsers(k,N);break;case 16:var D=t[2];this.api.getDepartmentAllUsers(D);break;case 17:var C=t[3],R=t[2];this.api.getDepartmentUserCount(R,C)}},__class__:ie});var De=n["albero.command.ReloadDataType"]={__ename__:["albero","command","ReloadDataType"],__constructs__:["Domains","Friends","Talks","Messages","AllUsers","GetUsers","GetProfile","SearchDomainUsers","Announcements","Questions","Question","Files","Solutions","Me","DepartmentTree","DepartmentUsers","DepartmentAllUsers","DepartmentUserCount"]};De.Domains=["Domains",0],De.Domains.toString=s,(De.Domains.__enum__=De).Friends=["Friends",1],De.Friends.toString=s,(De.Friends.__enum__=De).Talks=["Talks",2],De.Talks.toString=s,(De.Talks.__enum__=De).Messages=function(e,t,n,i){var r=["Messages",3,e,t,n,i];return r.__enum__=De,r.toString=s,r},De.AllUsers=function(e){var t=["AllUsers",4,e];return t.__enum__=De,t.toString=s,t},De.GetUsers=function(e,t){var n=["GetUsers",5,e,t];return n.__enum__=De,n.toString=s,n},De.GetProfile=function(e,t){var n=["GetProfile",6,e,t];return n.__enum__=De,n.toString=s,n},De.SearchDomainUsers=function(e,t){var n=["SearchDomainUsers",7,e,t];return n.__enum__=De,n.toString=s,n},De.Announcements=function(e,t,n){var i=["Announcements",8,e,t,n];return i.__enum__=De,i.toString=s,i},De.Questions=function(e,t,n,i){var r=["Questions",9,e,t,n,i];return r.__enum__=De,r.toString=s,r},De.Question=function(e,t){var n=["Question",10,e,t];return n.__enum__=De,n.toString=s,n},De.Files=function(e,t){var n=["Files",11,e,t];return n.__enum__=De,n.toString=s,n},De.Solutions=function(e,t){var n=["Solutions",12,e,t];return n.__enum__=De,n.toString=s,n},De.Me=["Me",13],De.Me.toString=s,(De.Me.__enum__=De).DepartmentTree=function(e){var t=["DepartmentTree",14,e];return t.__enum__=De,t.toString=s,t},De.DepartmentUsers=function(e,t){var n=["DepartmentUsers",15,e,t];return n.__enum__=De,n.toString=s,n},De.DepartmentAllUsers=function(e){var t=["DepartmentAllUsers",16,e];return t.__enum__=De,t.toString=s,t},De.DepartmentUserCount=function(e,t){var n=["DepartmentUserCount",17,e,t];return n.__enum__=De,n.toString=s,n},De.__empty_constructs__=[De.Domains,De.Friends,De.Talks,De.Me];var re=function(){M.call(this)};(n["albero.command.SearchCommand"]=re).__name__=["albero","command","SearchCommand"],re.__super__=M,re.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[4],i=t[3],r=t[2];if(this.searchService.isSearching())return;switch(null==n&&this.searchService.saveParams(r),r.searchType[1]){case 0:this.api.searchMessages(r.copy(),i,n);break;case 1:this.api.searchAttachments(r.copy(),i,n)}break;case 1:this.searchService.clearEditingParams(),this.searchService.clearRecentParams(),this.searchService.clearSearching(),this.sendNotification("notify_search_clear",{})}},__class__:re});var ae=n["albero.command.SearchAction"]={__ename__:["albero","command","SearchAction"],__constructs__:["SEARCH","CLEAR"]};ae.SEARCH=function(e,t,n){var i=["SEARCH",0,e,t,n];return i.__enum__=ae,i.toString=s,i},ae.CLEAR=["CLEAR",1],ae.CLEAR.toString=s,(ae.CLEAR.__enum__=ae).__empty_constructs__=[ae.CLEAR];var oe=function(){M.call(this)};(n["albero.command.SelectTalkCommand"]=oe).__name__=["albero","command","SelectTalkCommand"],oe.__super__=M,oe.prototype=i(M.prototype,{execute:function(e){var t=this,n=e.getBody();switch(n[1]){case 0:var i=n[3],r=n[2],a=new _n(r,fn.NotSelected);this.sendNotification("Url",ge.REDIRECT(a.createUrls(i,this.settings)));break;case 1:var o=n[4],s=n[3],l=n[2],u=new _n(l,fn.TalkSelected(s.id,rr.Some(o)));this.sendNotification("Url",ge.REDIRECT(u.createUrls(s.domainId,this.settings)));break;case 2:var c=n[3],_=n[2],h=new _n(_,fn.TalkSelected(c.id,rr.None));this.sendNotification("Url",ge.REDIRECT(h.createUrls(c.domainId,this.settings)));break;case 3:var d=n[3],f=n[2],m=new _n(f,fn.AnnouncementsSelected);this.sendNotification("Url",ge.REDIRECT(m.createUrls(d,this.settings)));break;case 4:var p=n[4],g=n[3],v=n[2],y=this.getFallbackUrls(v,Ae.array(g));if(ke.foreach(y,function(e){t.sendNotification("Url",ge.REDIRECT(e))}),ke.isEmpty(y)){var S=Lr(this,this.updateSelectionIfNeed),w=v,T=p;Ae.iter(g,function(e){S(w,T,e)})}}},updateSelectionIfNeed:function(e,t,n){if(t||!this.isSelectionParametersNotChanged(e,n)){var i=n.talkSelection;switch(i[1]){case 0:this.settings.clearSelectedTalk(n.paneType);break;case 1:var r=i[3],a=i[2];this.settings.selectTalk(n.paneType,e,a,r);break;case 2:this.settings.selectAnnouncement(n.paneType)}}},isSelectionParametersNotChanged:function(e,t){var n=this.settings.getSelectedDomainIdOnTalkSelectionChanged();return null!=e&&null!=n&&e.high==n.high&&e.low==n.low&&mn.eqTalkSelection(t.talkSelection,this.settings.getTalkSelection(e,t.paneType))},getFallbackUrls:function(e,t){var n=Lr(this,this.getValidTalkSelection),i=e,r=t.map(function(e){return n(i,e)});if(!Ae.exists(r,ke.isEmpty))return rr.None;var a=r.map(Lr(this,this.getOrNotSelected)),o=1==r.length?A.single(a[0]):A.multi(a);return rr.Some(E.talks(e,o))},getOrNotSelected:function(e){switch(e[1]){case 0:return e[2];case 1:return fn.NotSelected}},getValidTalkSelection:function(e,t){var n=t.talkSelection;switch(n[1]){case 0:break;case 1:n[3];var i,r=n[2],a=this.dataStore.getTalk(r);if(null!=a){var o=a.domainId;i=!(null!=o&&null!=e&&o.high==e.high&&o.low==e.low)}else i=!0;if(i)return rr.None;break;case 2:var s=this.dataStore.getDomain(e),l=this.dataStore.getAnnouncementStatus(e);if(!xe.hasAnnouncement(s,l))return rr.None}return rr.Some(t.talkSelection)},__class__:oe});var se=n["albero.command.SelectTalkAction"]={__ename__:["albero","command","SelectTalkAction"],__constructs__:["SelectNone","SelectTalkAndMessage","SelectTalk","SelectAnnouncement","UpdateSelection"]};se.SelectNone=function(e,t){var n=["SelectNone",0,e,t];return n.__enum__=se,n.toString=s,n},se.SelectTalkAndMessage=function(e,t,n){var i=["SelectTalkAndMessage",1,e,t,n];return i.__enum__=se,i.toString=s,i},se.SelectTalk=function(e,t){var n=["SelectTalk",2,e,t];return n.__enum__=se,n.toString=s,n},se.SelectAnnouncement=function(e,t){var n=["SelectAnnouncement",3,e,t];return n.__enum__=se,n.toString=s,n},se.UpdateSelection=function(e,t,n){var i=["UpdateSelection",4,e,t,n];return i.__enum__=se,i.toString=s,i},se.__empty_constructs__=[];var le=function(){M.call(this)};(n["albero.command.SendCommand"]=le).__name__=["albero","command","SendCommand"],le.__super__=M,le.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();this.api.createMessage(t.talkId,t.type,t.content)},__class__:le});var ue=function(){M.call(this)};(n["albero.command.SignInCommand"]=ue).__name__=["albero","command","SignInCommand"],ue.__super__=M,ue.prototype=i(M.prototype,{execute:function(e){this.accessTokenResolver.asyncGetAccessToken(e.getBody(),Lr(Pr=this.session,Pr.start))},__class__:ue});var ce=function(){M.call(this)};(n["albero.command.SignOutCommand"]=ce).__name__=["albero","command","SignOutCommand"],ce.__super__=M,ce.prototype=i(M.prototype,{execute:function(e){this.api.deleteSession(),this.settings.clearInputTextForAll(),this.dataStore.clear(!0)},__class__:ce});var _e=function(){M.call(this)};(n["albero.command.TalkCommand"]=_e).__name__=["albero","command","TalkCommand"],_e.__super__=M,_e.prototype=i(M.prototype,{execute:function(e){var t=this,n=e.getBody();switch(n[1]){case 0:var i=n[4],r=n[3],a=n[2],o=this.dataStore.getValidPairTalk(r,a);null!=o?this.sendNotification("SelectTalk",se.SelectTalk(i,o)):this.api.createPairTalk(a,r,i);break;case 1:var s=n[5],l=n[4],u=n[3],c=n[2];this.api.createGroupTalk(c,u,l,s);break;case 2:var _=n[4],h=n[3],d=n[2];this.api.addTalkers(d,h,_);break;case 3:var f=n[3],m=n[2];null==f&&(f=this.dataStore.me.id),this.api.deleteTalker(m,f);break;case 4:var p=n[6],g=n[5],v=n[4],y=n[3],S=n[2];if(S.type!=sn.GroupTalk)return;null==p&&(p=vr.__cast(S,an).isSystemMessageVisibled()),this.prepareIconUrl(S.domainId,v,g,function(e){t.api.updateGroupTalk(S,y,e,p)});break;case 5:var w=n[3],T=n[2];this.api.addFavoriteTalk(T,w);break;case 6:var I=n[3],E=n[2];this.api.deleteFavoriteTalk(E,I);break;case 7:var A=n[3],b=n[2];this.api.disablePushNotification(b,A);break;case 8:var N=n[3],k=n[2];this.api.enablePushNotification(k,N)}},prepareIconUrl:function(e,t,n,i){var r=this;null==n&&null!=t?this.api.uploadFile(t,e,wn.TALK_ICON,function(e){i(e.get_url)},function(e){r.sendNotification("notify_update_group_talk_ERRORED")}):i(n)},__class__:_e});var he=n["albero.command.TalkAction"]={__ename__:["albero","command","TalkAction"],__constructs__:["OPEN_PAIR_TALK","OPEN_GROUP_TALK","ADD","DELETE","UPDATE","ADD_FAVORITE","DELETE_FAVORITE","DISABLE_PUSH_NOTIFICATION","ENABLE_PUSH_NOTIFICATION"]};he.OPEN_PAIR_TALK=function(e,t,n){var i=["OPEN_PAIR_TALK",0,e,t,n];return i.__enum__=he,i.toString=s,i},he.OPEN_GROUP_TALK=function(e,t,n,i){var r=["OPEN_GROUP_TALK",1,e,t,n,i];return r.__enum__=he,r.toString=s,r},he.ADD=function(e,t,n){var i=["ADD",2,e,t,n];return i.__enum__=he,i.toString=s,i},he.DELETE=function(e,t){var n=["DELETE",3,e,t];return n.__enum__=he,n.toString=s,n},he.UPDATE=function(e,t,n,i,r){var a=["UPDATE",4,e,t,n,i,r];return a.__enum__=he,a.toString=s,a},he.ADD_FAVORITE=function(e,t){var n=["ADD_FAVORITE",5,e,t];return n.__enum__=he,n.toString=s,n},he.DELETE_FAVORITE=function(e,t){var n=["DELETE_FAVORITE",6,e,t];return n.__enum__=he,n.toString=s,n},he.DISABLE_PUSH_NOTIFICATION=function(e,t){var n=["DISABLE_PUSH_NOTIFICATION",7,e,t];return n.__enum__=he,n.toString=s,n},he.ENABLE_PUSH_NOTIFICATION=function(e,t){var n=["ENABLE_PUSH_NOTIFICATION",8,e,t];return n.__enum__=he,n.toString=s,n},he.__empty_constructs__=[];var de=function(){M.call(this)};(n["albero.command.UpdateProfileCommand"]=de).__name__=["albero","command","UpdateProfileCommand"],de.__super__=M,de.prototype=i(M.prototype,{execute:function(e){var t=e.getBody().domainId,n=e.getBody().profileItemValues,i=e.getBody().copyToAllDomains,r=this.dataStore.getDomain(t);if(null!=r&&null!=r.profileDefinition.itemDefinitions){var a=[];if(i){for(var o=[],s=0;s<n.length;){var l=n[s];++s;var u=Ut.findById(r.profileDefinition.itemDefinitions,l.profileItemId);null!=u&&o.push({name:u.name,value:l.value})}for(var c=0,_=this.dataStore.getDomains();c<_.length;){var h=_[c];if(++c,!h.domainInfo.frozen){for(var d=[],f=0,m=h.profileDefinition.itemDefinitions;f<m.length;){var p=m[f];if(++f,p.visible&&!p.locked)for(var g=0;g<o.length;){var v=o[g];if(++g,v.name==p.name){var y=new Pt;y.profileItemId=p.profileItemId,y.value=v.value,d.push(y);break}}}0<d.length&&a.push(new Ft(h.id,d))}}}else{for(var S=[],w=(Ee.iter(n),0);w<n.length;){var T=n[w];++w;var I=Ut.findById(r.profileDefinition.itemDefinitions,T.profileItemId);null!=I&&I.visible&&!I.locked&&S.push(T)}0<S.length&&a.push(new Ft(r.id,S))}0==a.length?this.sendNotification("update_profile_responsed",this.dataStore.me):this.api.updateProfile(a)}},__class__:de});var fe=function(){M.call(this)};(n["albero.command.UpdateUserCommand"]=fe).__name__=["albero","command","UpdateUserCommand"],fe.__super__=M,fe.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();(null==t.profileImage||I.startsWith(t.profileImage.type,"image/"))&&this.api.updateUser(t.displayName,t.profileImage,t.profileImageUrl,t.phoneticDisplayName,t.status)},__class__:fe});var me=function(){M.call(this)};(n["albero.command.UpdateUserPresencesCommand"]=me).__name__=["albero","command","UpdateUserPresencesCommand"],me.__super__=M,me.prototype=i(M.prototype,{execute:function(e){var t=e.getBody().domainId,n=e.getBody().userIds;if(null!=t&&null!=n){var i=this.filterOnlyExpired(be.unique(n));0!=i.length&&this.updateIfNeedPerSub(t,i)}},filterOnlyExpired:function(e){var n=this,i=f.nowAsInt64(),t=this.settings.getConfiguration().presenceExpiration,r=new En(t>>31,t);return e.filter(function(e){var t=ke.map(n.userPresences.getUserPresence(e),function(e){return e.isExpired(i,r)});switch(t[1]){case 0:return t[2];case 1:return!0}})},updateIfNeedPerSub:function(e,t){var n=t.splice(0,100);0!=n.length&&this.api.getPresences(e,n),0!=t.length&&this.updateIfNeedPerSub(e,t)},__class__:me});var pe=function(){M.call(this)};(n["albero.command.UrlCommand"]=pe).__name__=["albero","command","UrlCommand"],pe.__super__=M,pe.prototype=i(M.prototype,{execute:function(e){var t=e.getBody();switch(t[1]){case 0:var n=t[2];this.routing.forward(n);break;case 1:var i=t[2];this.routing.redirect(i);break;case 2:this.routing.back()}},__class__:pe});var ge=n["albero.command.UrlAction"]={__ename__:["albero","command","UrlAction"],__constructs__:["FORWARD","REDIRECT","BACK"]};ge.FORWARD=function(e){var t=["FORWARD",0,e];return t.__enum__=ge,t.toString=s,t},ge.REDIRECT=function(e){var t=["REDIRECT",1,e];return t.__enum__=ge,t.toString=s,t},ge.BACK=["BACK",2],ge.BACK.toString=s,(ge.BACK.__enum__=ge).__empty_constructs__=[ge.BACK];var ve=function(e,t,n){this.email=e,this.pass=t,this.accessToken=n};(n["albero.entity.Account"]=ve).__name__=["albero","entity","Account"],ve.prototype={__class__:ve};var Ce=function(e){null!=e&&(this.id=e.id,this.group=new ye(e.group),this.profilePolicy=new Se(e.profile_policy))};(n["albero.entity.AccountControlGroup"]=Ce).__name__=["albero","entity","AccountControlGroup"],Ce.prototype={isAllowedUpdateProfileImage:function(){return null==this.profilePolicy||this.profilePolicy.allowUpdateProfileImage},isAllowedUpdateDisplayName:function(){return null==this.profilePolicy||this.profilePolicy.allowUpdateDisplayName},__class__:Ce};var ye=function(e){null!=e&&(this.name=e.name,this.alias=e.alias,this.ownerName=e.owner_name,this.version=e.version)};(n["albero.entity.AccountControlGroupGroup"]=ye).__name__=["albero","entity","AccountControlGroupGroup"],ye.prototype={__class__:ye};var Se=function(e){null!=e&&(this.allowUpdateDisplayName=e.allow_update_display_name,this.allowUpdateProfileImage=e.allow_update_profile_image,this.version=e.version)};(n["albero.entity.AccountControlGroupProfilePolicy"]=Se).__name__=["albero","entity","AccountControlGroupProfilePolicy"],Se.prototype={__class__:Se};var Re=function(e){null!=e&&(this.id=e.id,null!=e.group&&(this.group=new ye(e.group)),null!=e.profile_policy&&(this.profilePolicy=new Se(e.profile_policy)))};(n["albero.entity.AccountControlGroupPartialUpdate"]=Re).__name__=["albero","entity","AccountControlGroupPartialUpdate"],Re.prototype={__class__:Re};var Oe=function(e){null!=e&&(this.id=be.fromIntOrInt64(e.id),this.groupName=e.group_name,this.groupOwnerName=e.group_owner_name,this.groupOwnerEmail=e.group_owner_email,this.hasDomainInvite=e.has_domain_invite,this.updatedAt=e.updated_at,this.version=e.version)};(n["albero.entity.AccountControlRequest"]=Oe).__name__=["albero","entity","AccountControlRequest"],Oe.prototype={__class__:Oe};var we=n["albero.entity.AllowAttachmentTypeValue"]={__ename__:["albero","entity","AllowAttachmentTypeValue"],__constructs__:["ng","ok","image","imageOrVideo","imageOrVideoOrAudio","other"]};we.ng=["ng",0],we.ng.toString=s,(we.ng.__enum__=we).ok=["ok",1],we.ok.toString=s,(we.ok.__enum__=we).image=["image",2],we.image.toString=s,(we.image.__enum__=we).imageOrVideo=["imageOrVideo",3],we.imageOrVideo.toString=s,(we.imageOrVideo.__enum__=we).imageOrVideoOrAudio=["imageOrVideoOrAudio",4],we.imageOrVideoOrAudio.toString=s,(we.imageOrVideoOrAudio.__enum__=we).other=["other",5],we.other.toString=s,(we.other.__enum__=we).__empty_constructs__=[we.ng,we.ok,we.image,we.imageOrVideo,we.imageOrVideoOrAudio,we.other];var Te=function(e){this.value=e};(n["albero.entity.AllowAttachmentType"]=Te).__name__=["albero","entity","AllowAttachmentType"],Te.fromInt=function(e){if(null==e)return new Te(we.other);var t;if(null==e)t=we.other;else switch(e){case 0:t=we.ng;break;case 1:t=we.ok;break;case 2:t=we.image;break;case 3:t=we.imageOrVideo;break;case 4:t=we.imageOrVideoOrAudio;break;default:t=we.other}return new Te(t)},Te.fromValue=function(e){return new Te(e)},Te.createAttachmentErrorMessage=function(e,t,n){return null==n&&(n=""),0<e.compareStrongness(t)?e.createAttachmentErrorMessageByNetwork(n):t.createAttachmentErrorMessageByDomain(n)},Te.prototype={compareStrongness:function(e){return this.getStrongness()-e.getStrongness()},getStrongness:function(){switch(this.value[1]){case 0:return 40;case 2:return 30;case 3:return 20;case 4:return 10;case 1:case 5:return 0}},createAttachmentErrorMessageByDomain:function(e){switch(null==e&&(e=""),this.value[1]){case 0:return qn.localize("AllowAttachmentType.ban_attach_file")+e;case 2:return qn.localize("AllowAttachmentType.ban_attach_file_without_img")+e;case 3:return qn.localize("AllowAttachmentType.ban_attach_file_without_img_movie")+e;case 4:return qn.localize("AllowAttachmentType.ban_attach_file_without_img_movie_sound")+e;default:return""}},createAttachmentErrorMessageByNetwork:function(e){switch(null==e&&(e=""),this.value[1]){case 0:return qn.localize("AllowAttachmentType.network_ban_attach_file")+e;case 2:return qn.localize("AllowAttachmentType.network_ban_attach_file_without_img")+e;case 3:return qn.localize("AllowAttachmentType.network_ban_attach_file_without_img_movie")+e;case 4:return qn.localize("AllowAttachmentType.network_ban_attach_file_without_img_movie_sound")+e;default:return""}},__class__:Te};var Me=function(e){null!=e&&(this.id=e.announcement_id,this.domainId=e.domain_id,this.groupId=e.group_id,this.groupName=e.group_name,this.type=St.typeOf(e.type),this.content=e.content,this.userId=e.user_id,this.userName=e.user_name,this.createdAt=e.created_at)};(n["albero.entity.Announcement"]=Me).__name__=["albero","entity","Announcement"],Me.prototype={__class__:Me};var Ie=function(e){this.unreadCount=0,null!=e&&(this.domainId=e.domain_id,this.unreadCount=null!=e.unread_count?e.unread_count:0,this.maxAnnouncementId=e.max_announcement_id,null!=e.max_announcement&&(this.maxAnnouncement=new Me(e.max_announcement)),this.maxReadAnnouncementId=e.max_read_announcement_id)};(n["albero.entity.AnnouncementStatus"]=Ie).__name__=["albero","entity","AnnouncementStatus"],Ie.prototype={updateReadWithStatusUpdate:function(e){var t=0,n=null;if(null!=e.readAnnouncementIds)for(var i=0,r=e.readAnnouncementIds;i<r.length;){var a,o=r[i];if(++i,null!=this.maxReadAnnouncementId){var s=this.maxReadAnnouncementId,l=o.high-s.high|0;l=0!=l?l:Wi.ucompare(o.low,s.low),a=0<(o.high<0?s.high<0?l:-1:0<=s.high?l:1)}else a=!0;if(a){var u;if(null!=n){var c=o.high-n.high|0;c=0!=c?c:Wi.ucompare(o.low,n.low),u=0<(o.high<0?n.high<0?c:-1:0<=n.high?c:1)}else u=!0;u&&(n=o),++t}}null!=n&&this.read(n,t)},read:function(e,t){this.maxReadAnnouncementId=e,this.unreadCount-=t,this.unreadCount<0&&(this.unreadCount=0);this.domainId,this.maxReadAnnouncementId,this.unreadCount},readAll:function(){this.maxReadAnnouncementId=this.maxAnnouncementId,this.unreadCount=0},__class__:Ie};var xe=function(){};(n["albero.entity.AnnouncementStatusHelper"]=xe).__name__=["albero","entity","AnnouncementStatusHelper"],xe.isUnreadAnnouncementExisted=function(e){if(null==e)return!1;if(null==e.maxAnnouncement)return!1;if(null==e.maxReadAnnouncementId)return!0;var t=e.maxAnnouncement.id,n=e.maxReadAnnouncementId,i=t.high-n.high|0;return i=0!=i?i:Wi.ucompare(t.low,n.low),0<(t.high<0?n.high<0?i:-1:0<=n.high?i:1)},xe.isUnread=function(e,t){if(null!=e.maxReadAnnouncementId){var n=e.maxReadAnnouncementId,i=n.high-t.high|0;return i=0!=i?i:Wi.ucompare(n.low,t.low),(n.high<0?t.high<0?i:-1:0<=t.high?i:1)<0}return!0},xe.isNewMax=function(e,t){if(null!=e.maxAnnouncementId){var n=e.maxAnnouncementId,i=n.high-t.high|0;return i=0!=i?i:Wi.ucompare(n.low,t.low),(n.high<0?t.high<0?i:-1:0<=t.high?i:1)<0}return!0},xe.isMax=function(e,t){if(null!=e.maxAnnouncementId){var n=e.maxAnnouncementId;return null!=n&&null!=t&&n.high==t.high&&n.low==t.low}return!1},xe.hasAnnouncement=function(e,t){return!(null==e||!e.role.allowReadAnnouncements||null==t)&&null!=t.maxAnnouncementId};var Ue=function(e){null!=e&&(this.domainId=e.domain_id,this.readAnnouncementIds=e.read_announcement_ids)};(n["albero.entity.AnnouncementStatusUpdate"]=Ue).__name__=["albero","entity","AnnouncementStatusUpdate"],Ue.prototype={__class__:Ue};var Pe=function(e){if(this.notificationInvisibleTalkSound=!0,this.notificationInvisibleTalkPopup=!1,this.notificationVisibleTalkSound=!1,this.notificationVisibleTalkPopup=!1,this.talkAutoScroll=1,this.keywordWatchingText="",this.keywordWatchingEmphasis=!1,this.keywordWatchingSelfMessage=!1,this.keywordWatchingActionReply=!1,this.userDataContainer=[],this.language="ja",this.conferenceIncomingSound=!0,null!=e){if(null!=e.notificationInvisibleTalkSound&&(this.notificationInvisibleTalkSound=e.notificationInvisibleTalkSound),null!=e.notificationInvisibleTalkPopup&&(this.notificationInvisibleTalkPopup=e.notificationInvisibleTalkPopup),null!=e.notificationVisibleTalkSound&&(this.notificationVisibleTalkSound=e.notificationVisibleTalkSound),null!=e.notificationVisibleTalkPopup&&(this.notificationVisibleTalkPopup=e.notificationVisibleTalkPopup),null!=e.notificationVisibleTalkAutoScroll&&(this.talkAutoScroll=e.notificationVisibleTalkAutoScroll?1:3),null!=e.talkAutoScroll&&(this.talkAutoScroll=e.talkAutoScroll),null!=e.keywordWatchingText&&(this.keywordWatchingText=e.keywordWatchingText),null!=e.keywordWatchingEmphasis&&(this.keywordWatchingEmphasis=e.keywordWatchingEmphasis),null!=e.keywordWatchingSelfMessage&&(this.keywordWatchingSelfMessage=e.keywordWatchingSelfMessage),null!=e.keywordWatchingActionReply&&(this.keywordWatchingActionReply=e.keywordWatchingActionReply),null!=e.userDataContainer)for(var t=0,n=vr.__cast(e.userDataContainer,Array);t<n.length;){var i=n[t];++t,this.userDataContainer.push(Fe.fromJson(i))}null!=e.language&&(this.language=e.language),null!=e.conferenceIncomingSound&&(this.conferenceIncomingSound=e.conferenceIncomingSound)}};(n["albero.entity.BrowserSettings"]=Pe).__name__=["albero","entity","BrowserSettings"],Pe.fromJson=function(e){return new Pe(e)},Pe.prototype={createCopy:function(){var e=new Pe(null);return this.copyTo(e),e},equalNotificationSettings:function(e){return e.notificationInvisibleTalkSound==this.notificationInvisibleTalkSound&&e.notificationInvisibleTalkPopup==this.notificationInvisibleTalkPopup&&e.notificationVisibleTalkSound==this.notificationVisibleTalkSound&&e.notificationVisibleTalkPopup==this.notificationVisibleTalkPopup},equalTalkSettings:function(e){return e.talkAutoScroll==this.talkAutoScroll},equalKeywordWatching:function(e){return e.keywordWatchingText==this.keywordWatchingText&&e.keywordWatchingEmphasis==this.keywordWatchingEmphasis&&e.keywordWatchingSelfMessage==this.keywordWatchingSelfMessage&&e.keywordWatchingActionReply==this.keywordWatchingActionReply},equalLanguageSettings:function(e){return e.language==this.language},equalConferenceSettings:function(e){return e.conferenceIncomingSound==this.conferenceIncomingSound},equalUserData:function(e,t){var n=e.getUserData(t),i=this.getUserData(t);if(null==n||null==n)return!0;var r=i.stampHistories.length;if(n.stampHistories.length!=r)return!0;for(var a=0,o=r;a<o;){var s=a++;if(n.stampHistories[s]!=i.stampHistories[s])return!0}return!1},copyTo:function(e){this.copyNotificationSettingsTo(e),this.copyKeywordSettingsTo(e),this.copyTalkSettingsTo(e),this.copyUserDataContainerTo(e),this.copyLanguageSettingsTo(e),this.copyConferenceSettingsTo(e)},copyNotificationSettingsTo:function(e){e.notificationInvisibleTalkSound=this.notificationInvisibleTalkSound,e.notificationInvisibleTalkPopup=this.notificationInvisibleTalkPopup,e.notificationVisibleTalkSound=this.notificationVisibleTalkSound,e.notificationVisibleTalkPopup=this.notificationVisibleTalkPopup},copyKeywordSettingsTo:function(e){e.keywordWatchingText=this.keywordWatchingText,e.keywordWatchingEmphasis=this.keywordWatchingEmphasis,e.keywordWatchingSelfMessage=this.keywordWatchingSelfMessage,e.keywordWatchingActionReply=this.keywordWatchingActionReply},copyTalkSettingsTo:function(e){e.talkAutoScroll=this.talkAutoScroll},copyUserDataContainerTo:function(e){e.userDataContainer=this.userDataContainer},getUserData:function(t){return Ae.find(this.userDataContainer,function(e){return e.userIdString==t})},copyLanguageSettingsTo:function(e){e.language=this.language},copyConferenceSettingsTo:function(e){e.conferenceIncomingSound=this.conferenceIncomingSound},assureUserData:function(e){var t=this.getUserData(e);return null==t&&(t=Fe.fromUserIdString(e),this.userDataContainer.push(t)),t},__class__:Pe};var Fe=function(){};(n["albero.entity.UserData"]=Fe).__name__=["albero","entity","UserData"],Fe.fromUserIdString=function(e){var t=new Fe;return t.userIdString=e,t.stampHistories=[],t.useThumbnailExpansion=!1,t},Fe.fromJson=function(e){var t=new Fe;return null!=e&&(null!=e.userIdString&&(t.userIdString=e.userIdString),null!=e.stampHistories&&(t.stampHistories=e.stampHistories),null!=e.useThumbnailExpansion&&(t.useThumbnailExpansion=e.useThumbnailExpansion)),t},Fe.prototype={__class__:Fe};var Le=function(e){null!=e&&(this.userId=e.user_id,this.id=e.conference_id,this.domainId=e.domain_id,this.talkId=e.talk_id,this.messageId=e.message_id,this.createdAt=e.created_at,this.expiredAt=e.expired_at,this.participants=e.participants)};(n["albero.entity.Conference"]=Le).__name__=["albero","entity","Conference"],Le.prototype={isIncomingExpired:function(){var e=this.createdAt,t=4294967296,n=e.high,i=e.low;return n*t+(0<=i?i:i+t)+Le.INCOMING_TIME<(new Date).getTime()},isExpired:function(){var e=this.expiredAt,t=4294967296,n=e.high,i=e.low;return n*t+(0<=i?i:i+t)<(new Date).getTime()},__class__:Le};var Be=function(e){null!=e&&(this.maxFriends=e.max_friends,this.maxTalks=e.max_talks,this.maxTalkers=e.max_talkers,this.maxMessageContentLength=e.max_message_content_length,this.botExpiredVersion=e.bot_expired_version,this.presenceExpiration=null!=e.presence_expiration?e.presence_expiration:Be.DEFAULT_PRESENCE_EXPIRATION,this.allowAttachmentType=Te.fromInt(e.allow_attachment_type))};(n["albero.entity.Configuration"]=Be).__name__=["albero","entity","Configuration"],Be.prototype={__class__:Be};var He=function(e){this.contractConference=rr.None,null!=e&&(this.id=e.contract_id,this.plan=new Ot(e.plan),this.quota=new Kt(e.quota),this.solutionIds=e.solution_ids,null!=e.conference&&(this.contractConference=rr.Some(new ze(e.conference))))};(n["albero.entity.Contract"]=He).__name__=["albero","entity","Contract"],He.prototype={getMaxMessageContentLength:function(){return ke.map(ke.option(this.quota),function(e){return e.maxMessageContentLength})},getMaxTalkers:function(){return ke.flatMap(ke.option(this.quota),function(e){return ke.option(e.maxTalkers)})},isConferenceEnalbed:function(){return ke.isDefined(this.contractConference)},isVideoEnalbed:function(){var e=ke.map(this.contractConference,function(e){return e.videoEnabled});switch(e[1]){case 0:return e[2];case 1:return!1}},getConferenceTtl:function(){return ke.map(this.contractConference,function(e){return e.ttl})},getConferenceMaxParticipants:function(){return ke.map(this.contractConference,function(e){return e.maxConferenceParticipants})},__class__:He};var ze=function(e){this.maxConferenceParticipants=ze.DEFAULT_MAX_PARTICIPANTS,this.ttl=ze.DEFAULT_TTL,this.videoEnabled=!1,null!=e&&(this.videoEnabled=e.video_enabled,this.ttl=e.ttl,this.maxConferenceParticipants=e.max_conference_participants)};(n["albero.entity.ContractConference"]=ze).__name__=["albero","entity","ContractConference"],ze.prototype={__class__:ze};var Ge=function(e){if(null!=e){switch(this.id=e.department_id,this.order=e.order,this.parentId=e.parent,this.nodeType=null==e.node?Ke.Normal:this.parseDepartmentNodeType(e.node),this.nodeType[1]){case 0:this.name=e.name;break;case 1:this.name=Ge.getLabelRoot();break;case 2:this.name=Ge.getLabelFree()}this.depth=0,this.childrenIds=null,this.userCount=null,this.userIds=null,this.userCountLoading=!1}};(n["albero.entity.Department"]=Ge).__name__=["albero","entity","Department"],Ge.getLabelFree=function(){return qn.localize("Department.label_free")},Ge.getLabelRoot=function(){return qn.localize("Department.label_root")},Ge.prototype={addChild:function(e){null==this.childrenIds&&(this.childrenIds=[]),this.childrenIds.push(e)},isRoot:function(){return this.nodeType==Ke.Root},isFree:function(){return this.nodeType==Ke.Free},parseDepartmentNodeType:function(e){switch(e){case 1:return Ke.Root;case 2:return Ke.Free;default:return Ke.Normal}},__class__:Ge};var je=function(){};(n["albero.entity.DepartmentHelper"]=je).__name__=["albero","entity","DepartmentHelper"],je.getName=function(e){return null==e?null:e.name};var Ke=n["albero.entity.DepartmentNodeType"]={__ename__:["albero","entity","DepartmentNodeType"],__constructs__:["Normal","Root","Free"]};Ke.Normal=["Normal",0],Ke.Normal.toString=s,(Ke.Normal.__enum__=Ke).Root=["Root",1],Ke.Root.toString=s,(Ke.Root.__enum__=Ke).Free=["Free",2],Ke.Free.toString=s,(Ke.Free.__enum__=Ke).__empty_constructs__=[Ke.Normal,Ke.Root,Ke.Free];var Ye=function(e){null!=e&&(this.domainId=e.domain_id,this.departments=this.getDepartments(e.departments))};(n["albero.entity.DepartmentList"]=Ye).__name__=["albero","entity","DepartmentList"],Ye.prototype={getDepartments:function(e){return null==e?[]:e.map(function(e){return new Ge(e)})},__class__:Ye};var Ve=function(e){null!=e&&(this.departmentId=e.department_id,this.all=e.all,this.partial=e.partial)};(n["albero.entity.DepartmentUserCount"]=Ve).__name__=["albero","entity","DepartmentUserCount"],Ve.prototype={__class__:Ve};var We=function(e){null!=e&&(this.departments=this.getDepartmentUserCounts(e.departments))};(n["albero.entity.DepartmentUserCountList"]=We).__name__=["albero","entity","DepartmentUserCountList"],We.prototype={getDepartmentUserCounts:function(e){return null==e?[]:e.map(function(e){return new Ve(e)})},__class__:We};var qe=function(e){null!=e&&(this.id=e.domain_id,this.updatedAt=e.updated_at,this.domainInfo=new Qe(e.domain),this.contract=new He(e.contract),this.profileDefinition=new xt(e.profile_definition),this.setting=new Je(e.setting),this.role=new Ze(e.role),this.closed=!1)};(n["albero.entity.Domain"]=qe).__name__=["albero","entity","Domain"],qe.isChangedContractTreeEnabled=function(e,t){return qe.isDepartmentEnabled(e)!=qe.isDepartmentEnabled(t)},qe.isDepartmentEnabled=function(e){return null!=e&&(!!qe.isAllowListUser(e)&&!!e.setting.contactTreeEnabled)},qe.isAllowListUser=function(e){return null==e||e.role.allowListUsers},qe.isChangedRoleType=function(e,t){return(null==e?$e.user:e.role.type)!=(null==t?$e.user:t.role.type)},qe.isChangedMaxTalkers=function(e,t){var n,i,r=ke.flatMap(ke.option(e),function(e){return e.getMaxTalkers()});switch(r[1]){case 0:n=r[2];break;case 1:n=0}var a=ke.flatMap(ke.option(t),function(e){return e.getMaxTalkers()});switch(a[1]){case 0:i=a[2];break;case 1:i=0}return n!=i},qe.isAllowReadAnnouncement=function(e){return null!=e&&!!e.role.allowReadAnnouncements},qe.prototype={getMaxMessageContentLengthOrElse:function(e){var t=ke.flatMap(ke.option(this.contract),function(e){return e.getMaxMessageContentLength()});switch(t[1]){case 0:return t[2];case 1:return e}},getMaxTalkers:function(){return ke.flatMap(ke.option(this.contract),function(e){return e.getMaxTalkers()})},__class__:qe};var Qe=function(e){null!=e&&(this.name=e.domain_name,this.logoUrl=e.logo_url,this.frozen=e.frozen)};(n["albero.entity.DomainInfo"]=Qe).__name__=["albero","entity","DomainInfo"],Qe.prototype={__class__:Qe};var Je=function(e){null!=e&&(this.allowAttachmentType=Te.fromInt(e.allow_attachment_type),this.allowSaveAttachmentsToDevice=e.allow_save_attachments_to_device,null!=e.allow_save_attachments&&(this.allowSaveAttachments=new Xe(e.allow_save_attachments)),this.allowForwardMessageType=this.allowForwardMessageTypeOf(e.allow_forward_message_type),this.contactTreeEnabled=!!e.contact_tree_enabled)};(n["albero.entity.DomainSetting"]=Je).__name__=["albero","entity","DomainSetting"],Je.prototype={allowForwardMessageTypeOf:function(e){switch(e){case 0:return et.ng;case 1:return et.ok;case 2:return et.onlyTextOrStamp;default:return et.other}},__class__:Je};var Xe=function(e){null!=e&&(this.web=null==e.web||e.web,this.ios=null==e.ios||e.ios,this.android=null==e.android||e.android,this.desktop=null==e.desktop||e.desktop)};(n["albero.entity.DomainSettingAllowSaveAttachments"]=Xe).__name__=["albero","entity","DomainSettingAllowSaveAttachments"],Xe.prototype={__class__:Xe};var Ze=function(e){if(null!=e){this.type=this.typeOf(e.type);var t=e.allow_guests;this.allowGuests=t||!0;var n=e.allow_create_attachments;this.allowCreateAttachments=n||!0;var i=e.allow_read_attachments;this.allowReadAttachments=i||!0;var r=e.allow_create_announcement;this.allowCreateAnnouncement=r&&r,this.allowReadAnnouncements=e.allow_read_announcements,null==this.allowReadAnnouncements&&(this.allowReadAnnouncements=!0),this.allowListUsers=e.allow_list_users,null==this.allowListUsers&&(this.allowListUsers=!0)}};(n["albero.entity.DomainRole"]=Ze).__name__=["albero","entity","DomainRole"],Ze.prototype={def:function(e,t){return e||t},typeOf:function(e){switch(e){case 10:return $e.owner;case 20:return $e.manager;case 30:return $e.user;default:return $e.guest}},__class__:Ze};var $e=n["albero.entity.DomainRoleType"]={__ename__:["albero","entity","DomainRoleType"],__constructs__:["owner","manager","user","guest"]};$e.owner=["owner",0],$e.owner.toString=s,($e.owner.__enum__=$e).manager=["manager",1],$e.manager.toString=s,($e.manager.__enum__=$e).user=["user",2],$e.user.toString=s,($e.user.__enum__=$e).guest=["guest",3],$e.guest.toString=s,($e.guest.__enum__=$e).__empty_constructs__=[$e.owner,$e.manager,$e.user,$e.guest];var et=n["albero.entity.DomainAllowForwardMessageType"]={__ename__:["albero","entity","DomainAllowForwardMessageType"],__constructs__:["ng","ok","onlyTextOrStamp","other"]};et.ng=["ng",0],et.ng.toString=s,(et.ng.__enum__=et).ok=["ok",1],et.ok.toString=s,(et.ok.__enum__=et).onlyTextOrStamp=["onlyTextOrStamp",2],et.onlyTextOrStamp.toString=s,(et.onlyTextOrStamp.__enum__=et).other=["other",3],et.other.toString=s,(et.other.__enum__=et).__empty_constructs__=[et.ng,et.ok,et.onlyTextOrStamp,et.other];var tt=function(e){null!=e&&(this.domainId=e.domain_id,this.departments=e.departments)};(n["albero.entity.DomainDepartmentPath"]=tt).__name__=["albero","entity","DomainDepartmentPath"],tt.prototype={__class__:tt};var nt=function(e){null!=e&&(this.id=e.domain_id,this.name=e.domain_name,this.accountControlRequestId=be.fromIntOrInt64(e.account_control_request_id),this.updatedAt=e.updated_at)};(n["albero.entity.DomainInvite"]=nt).__name__=["albero","entity","DomainInvite"],nt.prototype={__class__:nt};var it=function(e){null!=e&&(this.id=e.user_id,this.status=e.status,this.displayName=e.display_name,this.canonicalDisplayName=e.canonical_display_name,this.phoneticDisplayName=e.phonetic_display_name,this.canonicalPhoneticDisplayName=e.canonical_phonetic_display_name,this.profileImageUrl=e.profile_image_url,this.updatedAt=e.updated_at)};(n["albero.entity.User"]=it).__name__=["albero","entity","User"],it.prototype={__class__:it};var rt=function(e){it.call(this,e),null!=e&&(this.domainId=e.domain_id,null!=e.profile_contact&&(this.profileContact=vr.__cast(e.profile_contact,Array).map(function(e){return new Pt(e)})),this.departments=e.departments)};(n["albero.entity.DomainUser"]=rt).__name__=["albero","entity","DomainUser"],rt.__super__=it,rt.prototype=i(it.prototype,{match:function(e,t,n){if(this.matchNameOrPhonetic(e,n))return!0;if(null!=this.profileContact&&null!=t.profileDefinition.itemDefinitions)for(var i=0,r=this.profileContact;i<r.length;){var a=r[i];++i;for(var o=0,s=t.profileDefinition.itemDefinitions;o<s.length;){var l=s[o];if(++o,l.profileItemId==a.profileItemId){if(l.visible&&10==l.group&&-1<a.canonicalValue.indexOf(e))return!0;break}}}return!1},matchNameOrPhonetic:function(e,t){if(w.isEmpty(e))return!0;if(w.isEmpty(this.canonicalDisplayName)){this.canonicalDisplayName=Zn.canonicalize(this.displayName,t);this.canonicalDisplayName,this.displayName}return-1<this.canonicalDisplayName.indexOf(e)||null!=this.canonicalPhoneticDisplayName&&-1<this.canonicalPhoneticDisplayName.indexOf(e)},matchNameOrPhoneticRoman:function(e,t){if(this.matchNameOrPhonetic(e,t))return!0;if(w.isEmpty(this.canonicalDisplayNameRoman)){this.canonicalDisplayNameRoman=Zn.canonicalizeForRoman(this.displayName,t);this.canonicalDisplayNameRoman,this.displayName}return-1<this.canonicalDisplayNameRoman.indexOf(e)||null!=this.canonicalPhoneticDisplayName&&(w.isEmpty(this.canonicalPhoneticDisplayNameRoman)&&(this.canonicalPhoneticDisplayNameRoman=Zn.canonicalizeForRoman(this.canonicalPhoneticDisplayName,t)),-1<this.canonicalPhoneticDisplayNameRoman.indexOf(e))},__class__:rt});var at=function(e){this.values=e};(n["albero.entity.Domains"]=at).__name__=["albero","entity","Domains"],at.prototype={orderByName:function(e){var t=e,n=Ne.sortAndReturn(this.values.map(function(e){return ot.fromDomain(e,t)}),ot.compare).map(ot.toDomain);return new at(n)},getOldestDomain:function(){return null==this.values||0==this.values.length?rr.None:Ae.fold(this.values,function(r,e){switch(ke.filter(e,function(e){var t=e.id,n=r.id,i=t.high-n.high|0;return i=0!=i?i:Wi.ucompare(t.low,n.low),(t.high<0?n.high<0?i:-1:0<=n.high?i:1)<=0})[1]){case 0:return ke.filter(e,function(e){var t=e.id,n=r.id,i=t.high-n.high|0;return i=0!=i?i:Wi.ucompare(t.low,n.low),(t.high<0?n.high<0?i:-1:0<=n.high?i:1)<=0});case 1:return rr.Some(r)}},rr.None)},__class__:at};var ot=function(e,t){this.domain=e,this.name=e.domainInfo.name,this.canonicalizedName=Zn.canonicalize(this.name,t)};(n["albero.entity.DomainForSort"]=ot).__name__=["albero","entity","DomainForSort"],ot.fromDomain=function(e,t){return new ot(e,t)},ot.toDomain=function(e){return e.domain},ot.compare=function(e,t){var n=w.compare(e.canonicalizedName,t.canonicalizedName);return 0!=n?n:w.compare(e.name,t.name)},ot.prototype={__class__:ot};var st=function(e){null!=e&&(this.fileId=e.file_id,this.url=e.get_url,this.headers=new lt(e.get_headers))};(n["albero.entity.DownloadAuth"]=st).__name__=["albero","entity","DownloadAuth"],st.prototype={__class__:st};var lt=function(e){this.rawData=e};(n["albero.entity.DownloadAuthHeaders"]=lt).__name__=["albero","entity","DownloadAuthHeaders"],lt.prototype={createGetRequest:function(e){var t=new XMLHttpRequest;t.open("GET",e);for(var n=0,i=j.fields(this.rawData);n<i.length;){var r=i[n];++n;var a=j.field(this.rawData,r);t.setRequestHeader(r,a)}return t},__class__:lt};var ut=function(e){null!=e&&(this.domainId=e.domain_id,this.talkId=e.talk_id,this.orderInFavorites=e.order_in_favorites,this.favoriteVersion=e.favorite_version)};(n["albero.entity.FavoriteTalkEvent"]=ut).__name__=["albero","entity","FavoriteTalkEvent"],ut.prototype={__class__:ut};var ct=function(e){this.thumbnailDimension=rr.None,null!=e&&(this.attachmentId=e.attachment_id,this.messageId=e.message_id,this.talkId=e.talk_id,this.id=e.file_id,this.userId=e.user_id,this.name=e.name,this.contentType=e.content_type,this.contentSize=e.content_size,this.url=e.url,this.thumbUrl=e.thumbnail_url,this.updatedAt=e.updated_at,this.file=e.file,this.thumbFile=e.thumbnail_file,this.thumbnailDimension=rr.None,this.deleted=null!=e.deleted&&e.deleted)};(n["albero.entity.FileInfo"]=ct).__name__=["albero","entity","FileInfo"],ct.fromMessageAndFile=function(e,t){var n=new ct;return n.messageId=e.id,n.talkId=e.talkId,n.userId=e.userId,n.updatedAt=e.createdAt,n.id=t.file_id,n.name=t.name,n.contentType=t.content_type,n.contentSize=t.content_size,n.url=t.url,n.thumbUrl=t.thumbnail_url,n.thumbnailDimension=null==t.thumbnail_dimension?rr.None:rr.Some(new Sn(t.thumbnail_dimension)),n.deleted=null!=t.deleted&&t.deleted,n.file=t.file,n},ct.fromMessageAndFileWithFileId=function(e,t,n){var i=ct.fromMessageAndFile(e,t);return i.id=n,i},ct.prototype={hasThumb:function(){return null!=this.thumbUrl||null!=this.thumbFile},isImage:function(){return I.startsWith(this.contentType,"image/")},isImageGif:function(){return I.startsWith(this.contentType,"image/gif")},isPdf:function(){return I.startsWith(this.contentType,"application/pdf")},isVideo:function(){return I.startsWith(this.contentType,"video/")},canDisplayAsThumb:function(){return!!this.hasThumb()||this.isImage()},getNoThumbText:function(){return null!=this.name?this.name:this.url},setDummyThumbnail:function(e){this.thumbFile=e.file,this.thumbnailDimension=rr.Some(e.dimension)},__class__:ct};var _t=function(e){null!=e&&(this.messageId=e[0],this.talkId=e[1],this.fileId=e[2])};(n["albero.entity.FileInfoDeletion"]=_t).__name__=["albero","entity","FileInfoDeletion"],_t.prototype={__class__:_t};var ht=function(e){null!=e&&(this.talkId=e.talk_id,null!=e.messages&&(this.messages=vr.__cast(e.messages,Array).map(function(e){return new dt(e)})))};(n["albero.entity.HitContext"]=ht).__name__=["albero","entity","HitContext"],ht.prototype={findHitMessage:function(n){return Ae.find(this.messages,function(e){var t=e.id;return null!=t&&null!=n&&t.high==n.high&&t.low==n.low})},__class__:ht};var dt=function(e){null!=e&&(this.id=e.message_id,this.talkId=e.talk_id,this.userId=e.user_id,this.type=St.typeOf(e.type),this.content=e.content,this.createdAt=e.created_at,this.hit=e.hit)};(n["albero.entity.HitMessage"]=dt).__name__=["albero","entity","HitMessage"],dt.prototype={__class__:dt};var ft=function(){};(n["albero.entity.IdValue"]=ft).__name__=["albero","entity","IdValue"],ft.prototype={__class__:ft};var mt=function(e){null!=e&&(this.conferenceId=e.conference_id,this.roomName=e.room_name,this.credential=e.credential,this.mode=this.parseMode(e.mode),this.timestamp=e.timestamp)};(n["albero.entity.JoinConference"]=mt).__name__=["albero","entity","JoinConference"],mt.prototype={parseMode:function(e){return"sfu"==e?pt.sfu:"fullMesh"==e?pt.fullMesh:pt.unknown},isSfu:function(e){switch(this.mode[1]){case 0:return!0;case 1:return!1;case 2:return e.type==sn.GroupTalk}},getEllaspedSecOnJoin:function(){var e=be.fromIntOrInt64(this.credential.timestamp),t=be.fromIntOrInt64(this.timestamp),n=t.high-e.high|0,i=t.low-e.low|0;if(Wi.ucompare(t.low,e.low)<0){n--;n|=0}var r=new En(n,i);return r.high<0?0:0<r.high||this.credential.ttl<r.low?this.credential.ttl:r.low},__class__:mt};var pt=n["albero.entity.JoinConferenceMode"]={__ename__:["albero","entity","JoinConferenceMode"],__constructs__:["sfu","fullMesh","unknown"]};pt.sfu=["sfu",0],pt.sfu.toString=s,(pt.sfu.__enum__=pt).fullMesh=["fullMesh",1],pt.fullMesh.toString=s,(pt.fullMesh.__enum__=pt).unknown=["unknown",2],pt.unknown.toString=s,(pt.unknown.__enum__=pt).__empty_constructs__=[pt.sfu,pt.fullMesh,pt.unknown];var gt=n["albero.entity.LocalErrorType"]={__ename__:["albero","entity","LocalErrorType"],__constructs__:["TalksCountOvered","TalkersCountOvered","SendingMessageConflicted","DeletingMessageConflicted","UploadSizeOvered","StorageSizeOvered","AddingSomeUsersFailure"]};gt.TalksCountOvered=function(e){var t=["TalksCountOvered",0,e];return t.__enum__=gt,t.toString=s,t},gt.TalkersCountOvered=function(e){var t=["TalkersCountOvered",1,e];return t.__enum__=gt,t.toString=s,t},gt.SendingMessageConflicted=["SendingMessageConflicted",2],gt.SendingMessageConflicted.toString=s,(gt.SendingMessageConflicted.__enum__=gt).DeletingMessageConflicted=["DeletingMessageConflicted",3],gt.DeletingMessageConflicted.toString=s,(gt.DeletingMessageConflicted.__enum__=gt).UploadSizeOvered=function(e){var t=["UploadSizeOvered",4,e];return t.__enum__=gt,t.toString=s,t},gt.StorageSizeOvered=function(e){var t=["StorageSizeOvered",5,e];return t.__enum__=gt,t.toString=s,t},gt.AddingSomeUsersFailure=["AddingSomeUsersFailure",6],gt.AddingSomeUsersFailure.toString=s,(gt.AddingSomeUsersFailure.__enum__=gt).__empty_constructs__=[gt.SendingMessageConflicted,gt.DeletingMessageConflicted,gt.AddingSomeUsersFailure];var vt=function(){};(n["albero.entity.LocalErrorTypeMixin"]=vt).__name__=["albero","entity","LocalErrorTypeMixin"],vt.toMessage=function(e){switch(e[1]){case 0:var t=e[2];return rr.Some(qn.localize("LocalErrorType.number_of_talks",{limitMax:t}));case 1:var n=e[2];return rr.Some(qn.localize("LocalErrorType.number_of_talkers",{limitMax:n}));case 2:return rr.Some(qn.localize("LocalErrorType.retry_sending"));case 3:return rr.Some(qn.localize("LocalErrorType.retry_deletion"));case 4:var i=e[2],r=p.createByteSizeStringWithUnit(i);return rr.Some(qn.localize("LocalErrorType.file_size",{sizeString:r}));case 5:var a=e[2],o=p.createByteSizeStringWithUnit(a);return rr.Some(qn.localize("LocalErrorType.storage_size",{sizeString:o}));case 6:return rr.Some(qn.localize("LocalErrorType.adding_users"))}};var yt=function(e){it.call(this,e),null!=e&&(this.email=e.email,this.signinId=e.signin_id,null!=e.profiles&&(this.profiles=vr.__cast(e.profiles,Array).map(function(e){return new Mt(e)})),null!=e.departments&&(this.departments=vr.__cast(e.departments,Array).map(function(e){return new tt(e)})))};(n["albero.entity.Me"]=yt).__name__=["albero","entity","Me"],yt.__super__=it,yt.prototype=i(it.prototype,{toDomainUser:function(e){var t=new rt;if(t.id=this.id,t.status=this.status,t.domainId=e,t.displayName=this.displayName,t.canonicalDisplayName=this.canonicalDisplayName,t.phoneticDisplayName=this.phoneticDisplayName,t.canonicalPhoneticDisplayName=this.canonicalPhoneticDisplayName,t.profileImageUrl=this.profileImageUrl,t.updatedAt=this.updatedAt,t.email=this.email,null!=this.profiles)for(var n=0,i=this.profiles;n<i.length;){var r=i[n];++n;var a=r.domainId;if(null!=a&&null!=e&&a.high==e.high&&a.low==e.low){t.profileContact=r.itemValues;break}}if(null!=this.departments)for(var o=0,s=this.departments;o<s.length;){var l=s[o];++o;var u=l.domainId;if(null!=u&&null!=e&&u.high==e.high&&u.low==e.low){t.departments=l.departments;break}}return t},__class__:yt});var St=function(e){null!=e&&(this.id=e.message_id,this.talkId=e.talk_id,this.userId=e.user_id,this.type=St.typeOf(e.type),this.content=e.content,this.createdAt=e.created_at,this.readCount=e.read_count,this.readUserIds=e.read_user_ids,this.isUnreadCountTarget=null==e.is_unread_count_target||e.is_unread_count_target,this.isBotMessage=null!=e.bot_message&&e.bot_message)};(n["albero.entity.Message"]=St).__name__=["albero","entity","Message"],St.typeOf=function(e){switch(e){case 0:return wt.system;case 1:return wt.text;case 2:return wt.stamp;case 3:return wt.geo;case 4:return wt.file;case 5:return wt.textMultipleFile;case 7:return wt.deleted;case 8:return wt.noteShared;case 9:return wt.noteDeleted;case 10:return wt.noteCreated;case 11:return wt.noteUpdated;case 500:return wt.yesOrNo;case 501:return wt.yesOrNoReply;case 502:return wt.selectOne;case 503:return wt.selectOneReply;case 504:return wt.todo;case 505:return wt.todoDone;case 506:return wt.yesOrNoClosed;case 507:return wt.selectOneClosed;case 508:return wt.todoClosed;case 509:return wt.openConference;case 600:return wt.phoneCall;case 601:return wt.phoneReceive;default:return wt.unknown}},St.enumIndex=function(e){switch(e[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return e[1];case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:return 500+e[1]-11;case 21:case 22:return 600+e[1]-21;default:return-1}},St.typeString=function(e){return K.string(e)},St.getDisplayTextWithoutEscape=function(e,t){switch(e[1]){case 1:return t;case 6:return St.getDeletedText();default:return Qn._e("["+Ee.dateStr(new Date)+"] ","Unsupported message.type is detected.",e,"","",""),St.getUnsupportText()}},St.getDeletedText=function(){return qn.localize("MessageHelper.deleted")},St.getUnsupportText=function(){return qn.localize("MessageHelper.not_support")},St.prototype={getFilesDynamic:function(){switch(this.type[1]){case 4:return[this.content];case 5:return this.content.files;default:return[]}},isDummy:function(){return null!=this.id&&this.id.high<0},messageStringForKeywordDetection:function(e){switch(this.type[1]){case 0:return"";case 1:return this.content;case 2:return null!=this.content.text&&0<this.content.text.length?this.content.text:"";case 3:case 4:return"";case 5:return null!=this.content.text&&0<this.content.text.length?this.content.text:"";case 6:return"";case 11:return[this.content.question,qn.localize("MessageStringMaker.yes"),qn.localize("MessageStringMaker.no")].join(" ");case 12:return e&&null!=this.content.response?this.content.response?qn.localize("MessageStringMaker.yes"):qn.localize("MessageStringMaker.no"):"";case 13:return null!=this.content.options?K.string(this.content.question)+" "+K.string(this.content.options.join(" ")):this.content.question;case 14:return e&&null!=this.content.response&&null!=this.content.options&&this.content.options.length>this.content.response?this.content.options[this.content.response]:"";case 15:return[this.content.title,qn.localize("MessageStringMaker.achieve"),qn.localize("MessageStringMaker.remand")].join(" ");case 16:return e&&null!=this.content.done?this.content.done?qn.localize("MessageStringMaker.achieve"):qn.localize("MessageStringMaker.remand"):"";case 17:case 18:case 19:default:return""}},getContentsForNote:function(){switch(this.type[1]){case 7:case 9:case 10:return rr.Some(new Tt(this.content));default:return rr.None}},getContentsForNoteDelete:function(){return 8==this.type[1]?rr.Some(new It(this.content)):rr.None},__class__:St};var wt=n["albero.entity.MessageType"]={__ename__:["albero","entity","MessageType"],__constructs__:["system","text","stamp","geo","file","textMultipleFile","deleted","noteShared","noteDeleted","noteCreated","noteUpdated","yesOrNo","yesOrNoReply","selectOne","selectOneReply","todo","todoDone","yesOrNoClosed","selectOneClosed","todoClosed","openConference","phoneCall","phoneReceive","unknown"]};wt.system=["system",0],wt.system.toString=s,(wt.system.__enum__=wt).text=["text",1],wt.text.toString=s,(wt.text.__enum__=wt).stamp=["stamp",2],wt.stamp.toString=s,(wt.stamp.__enum__=wt).geo=["geo",3],wt.geo.toString=s,(wt.geo.__enum__=wt).file=["file",4],wt.file.toString=s,(wt.file.__enum__=wt).textMultipleFile=["textMultipleFile",5],wt.textMultipleFile.toString=s,(wt.textMultipleFile.__enum__=wt).deleted=["deleted",6],wt.deleted.toString=s,(wt.deleted.__enum__=wt).noteShared=["noteShared",7],wt.noteShared.toString=s,(wt.noteShared.__enum__=wt).noteDeleted=["noteDeleted",8],wt.noteDeleted.toString=s,(wt.noteDeleted.__enum__=wt).noteCreated=["noteCreated",9],wt.noteCreated.toString=s,(wt.noteCreated.__enum__=wt).noteUpdated=["noteUpdated",10],wt.noteUpdated.toString=s,(wt.noteUpdated.__enum__=wt).yesOrNo=["yesOrNo",11],wt.yesOrNo.toString=s,(wt.yesOrNo.__enum__=wt).yesOrNoReply=["yesOrNoReply",12],wt.yesOrNoReply.toString=s,(wt.yesOrNoReply.__enum__=wt).selectOne=["selectOne",13],wt.selectOne.toString=s,(wt.selectOne.__enum__=wt).selectOneReply=["selectOneReply",14],wt.selectOneReply.toString=s,(wt.selectOneReply.__enum__=wt).todo=["todo",15],wt.todo.toString=s,(wt.todo.__enum__=wt).todoDone=["todoDone",16],wt.todoDone.toString=s,(wt.todoDone.__enum__=wt).yesOrNoClosed=["yesOrNoClosed",17],wt.yesOrNoClosed.toString=s,(wt.yesOrNoClosed.__enum__=wt).selectOneClosed=["selectOneClosed",18],wt.selectOneClosed.toString=s,(wt.selectOneClosed.__enum__=wt).todoClosed=["todoClosed",19],wt.todoClosed.toString=s,(wt.todoClosed.__enum__=wt).openConference=["openConference",20],wt.openConference.toString=s,(wt.openConference.__enum__=wt).phoneCall=["phoneCall",21],wt.phoneCall.toString=s,(wt.phoneCall.__enum__=wt).phoneReceive=["phoneReceive",22],wt.phoneReceive.toString=s,(wt.phoneReceive.__enum__=wt).unknown=["unknown",23],wt.unknown.toString=s,(wt.unknown.__enum__=wt).__empty_constructs__=[wt.system,wt.text,wt.stamp,wt.geo,wt.file,wt.textMultipleFile,wt.deleted,wt.noteShared,wt.noteDeleted,wt.noteCreated,wt.noteUpdated,wt.yesOrNo,wt.yesOrNoReply,wt.selectOne,wt.selectOneReply,wt.todo,wt.todoDone,wt.yesOrNoClosed,wt.selectOneClosed,wt.todoClosed,wt.openConference,wt.phoneCall,wt.phoneReceive,wt.unknown];var Tt=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.title=e.title,this.revision=e.revision,this.deleted=e.deleted)};(n["albero.entity.MessageContentForNote"]=Tt).__name__=["albero","entity","MessageContentForNote"],Tt.prototype={__class__:Tt};var It=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.title=e.title)};(n["albero.entity.MessageContentForNoteDeleted"]=It).__name__=["albero","entity","MessageContentForNoteDeleted"],It.prototype={__class__:It};var Et=function(e){null!=e&&(this.talkId=e[0],this.messageId=e[1])};(n["albero.entity.MessageDeletion"]=Et).__name__=["albero","entity","MessageDeletion"],Et.prototype={__class__:Et};var At=function(e){null!=e&&(this.id=e.message_id,this.talkId=e.talk_id,this.readUserIds=e.read_user_ids,this.unreadUserIds=e.unread_user_ids)};(n["albero.entity.MessageReadStatus"]=At).__name__=["albero","entity","MessageReadStatus"],At.prototype={__class__:At};var bt=function(e){null!=e&&(this.talkId=e.talk_id,this.messageIds=e.message_ids,this.readUserIds=e.read_user_ids,this.messageIdsExcludingUnreadCountTargets=e.message_ids_excluding_unread_count_targets,null==this.messageIdsExcludingUnreadCountTargets&&(this.messageIdsExcludingUnreadCountTargets=[]))};(n["albero.entity.MessageReadStatusesUpdate"]=bt).__name__=["albero","entity","MessageReadStatusesUpdate"],bt.prototype={__class__:bt};var Nt=n["albero.entity.MessagesOrder"]={__ename__:["albero","entity","MessagesOrder"],__constructs__:["asc","desc"]};Nt.asc=["asc",0],Nt.asc.toString=s,(Nt.asc.__enum__=Nt).desc=["desc",1],Nt.desc.toString=s,(Nt.desc.__enum__=Nt).__empty_constructs__=[Nt.asc,Nt.desc];var kt=function(){};(n["albero.entity.MessagesOrderProc"]=kt).__name__=["albero","entity","MessagesOrderProc"],kt.orderToInt=function(e){switch(e[1]){case 0:return 1;case 1:return 2}};var Dt=n["albero.entity.PaneType"]={__ename__:["albero","entity","PaneType"],__constructs__:["SingleTalkPane","MultiTalkPane1","MultiTalkPane2","MultiTalkPane3"]};Dt.SingleTalkPane=["SingleTalkPane",0],Dt.SingleTalkPane.toString=s,(Dt.SingleTalkPane.__enum__=Dt).MultiTalkPane1=["MultiTalkPane1",1],Dt.MultiTalkPane1.toString=s,(Dt.MultiTalkPane1.__enum__=Dt).MultiTalkPane2=["MultiTalkPane2",2],Dt.MultiTalkPane2.toString=s,(Dt.MultiTalkPane2.__enum__=Dt).MultiTalkPane3=["MultiTalkPane3",3],Dt.MultiTalkPane3.toString=s,(Dt.MultiTalkPane3.__enum__=Dt).__empty_constructs__=[Dt.SingleTalkPane,Dt.MultiTalkPane1,Dt.MultiTalkPane2,Dt.MultiTalkPane3];var Ct=function(){};(n["albero.entity.PaneTypeHelper"]=Ct).__name__=["albero","entity","PaneTypeHelper"],Ct.toPanePrefix=function(e){switch(e[1]){case 0:return"";case 1:return"multi1-";case 2:return"multi2-";case 3:return"multi3-"}},Ct.getPaneType=function(e){switch(e){case 0:return Dt.SingleTalkPane;case 1:return Dt.MultiTalkPane1;case 2:return Dt.MultiTalkPane2;case 3:return Dt.MultiTalkPane3;default:return null}},Ct.getMultiPaneType=function(e){switch(e){case 0:return Dt.MultiTalkPane1;case 1:return Dt.MultiTalkPane2;case 2:return Dt.MultiTalkPane3;default:return Dt.MultiTalkPane1}},Ct.getMultiPaneTypes=function(){return[Dt.MultiTalkPane1,Dt.MultiTalkPane2,Dt.MultiTalkPane3]};var Rt=function(e){null!=e&&(this.expiration=e.expiration,this.warning=e.warning)};(n["albero.entity.PasswordExpiration"]=Rt).__name__=["albero","entity","PasswordExpiration"],Rt.prototype={isExpired:function(e){return this.timeOvered(this.expiration,e)},needWarning:function(e,t){return!!this.timeOveredOrNotExist(t,e)&&this.timeOvered(this.warning,e)},timeOvered:function(e,t){if(null!=e){var n=t.high-e.high|0;return n=0!=n?n:Wi.ucompare(t.low,e.low),0<(t.high<0?e.high<0?n:-1:0<=e.high?n:1)}return!1},timeOveredOrNotExist:function(e,t){return null==e||this.timeOvered(e,t)},__class__:Rt};var Ot=function(e){null!=e&&(this.name=e.plan_name,this.trial=e.trial)};(n["albero.entity.Plan"]=Ot).__name__=["albero","entity","Plan"],Ot.prototype={__class__:Ot};var Mt=function(e){null!=e&&(this.domainId=e.domain_id,this.userId=e.user_id,(this.itemValues=null)!=e.item_values&&(this.itemValues=vr.__cast(e.item_values,Array).map(function(e){return new Pt(e)})))};(n["albero.entity.Profile"]=Mt).__name__=["albero","entity","Profile"],Mt.prototype={__class__:Mt};var xt=function(e){if(null!=e&&(this.domainId=e.domain_id,null!=e.item_definitions)){this.itemDefinitions=[];for(var t=0,n=vr.__cast(e.item_definitions,Array);t<n.length;){var i=n[t];++t,this.itemDefinitions.push(new Ut(i))}}};(n["albero.entity.ProfileDefinition"]=xt).__name__=["albero","entity","ProfileDefinition"],xt.isSameProfileItemDefinitions=function(e,t){if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;){var r=n++;if(t[r].profileItemId!=e[r].profileItemId)return!1}return!0},xt.prototype={getVisibleItemDefinitions:function(t,n){return null==n&&(n=!1),null==t&&(t=!1),null==this.itemDefinitions?[]:this.itemDefinitions.filter(function(e){return!!e.visible&&(!(!t&&10!=e.group)&&(!n||1!=e.profileItemId&&2!=e.profileItemId))})},__class__:xt};var Ut=function(e){this.locked=!1,this.visible=!0,null!=e&&(this.profileItemId=e.profile_item_id,this.group=e.group,this.name=e.name,this.valueType=e.value_type,null!=e.visible&&(this.visible=e.visible),null!=e.locked&&(this.locked=e.locked))};(n["albero.entity.ProfileItemDefinition"]=Ut).__name__=["albero","entity","ProfileItemDefinition"],Ut.findById=function(e,t){for(var n=0;n<e.length;){var i=e[n];if(++n,i.profileItemId==t)return i}return null},Ut.prototype={__class__:Ut};var Pt=function(e){null!=e&&(this.profileItemId=e.profile_item_id,this.value=e.value,this.canonicalValue=e.canonical_value)};(n["albero.entity.ProfileItemValue"]=Pt).__name__=["albero","entity","ProfileItemValue"],Pt.findById=function(e,t){for(var n=0;n<e.length;){var i=e[n];if(++n,i.profileItemId==t)return i}return null},Pt.prototype={__class__:Pt};var Ft=function(e,t){this.domainId=e,this.profileItemValues=t};(n["albero.entity.ProfileItemValuesPerDomain"]=Ft).__name__=["albero","entity","ProfileItemValuesPerDomain"],Ft.convertToApiParams=function(e){return e.map(function(e){return e.convertToApiParamsPerDomain()})},Ft.prototype={convertToApiParamsPerDomain:function(){return[this.domainId,this.profileItemValues.map(function(e){return{profile_item_id:e.profileItemId,value:e.value}})]},__class__:Ft};var Lt=function(e){if(null==e)return this.enabled=!0,void(this.version=0);this.enabled=null==e.enabled||e.enabled,this.version=e.version};(n["albero.entity.PushNotificationSetting"]=Lt).__name__=["albero","entity","PushNotificationSetting"],Lt.createWithParams=function(e,t){var n=new Lt;return n.enabled=e,n.version=t,n},Lt.prototype={__class__:Lt};var Bt=function(e){null!=e&&(this.id=e.message_id,this.talkId=e.talk_id,this.type=St.typeOf(e.type),this.content=e.content,this.userId=e.user_id,this.recipientIds=e.assigned_user_ids,this.responses=Bt.createResponses(e.responses),this.listing=e.listing,this.closingType=Bt.closeingTypeOf(e.closing_type),this.maxResponseId=e.max_response_id,this.lastResponse=e.last_response,this.lastResponseUserId=e.last_response_user_id,this.createdAt=e.created_at,this.updatedAt=e.updated_at,this.responded=e.responded,this.closed=e.closed)};(n["albero.entity.Question"]=Bt).__name__=["albero","entity","Question"],Bt.createResponses=function(e){var t,n=ke.option(e);switch(n[1]){case 0:t=n[2];break;case 1:t=[]}return t.map(function(e){return new Ht(e)})},Bt.createResponsesFromStrings=function(e){var t,n=ke.option(e);switch(n[1]){case 0:t=n[2];break;case 1:t=[]}return t.map(function(e){var t=new Ht;return t.content=e,t})},Bt.closeingTypeOf=function(e){switch(e){case 0:return zt.any;case 1:return zt.all;default:return zt.unknown}},Bt.createResponseTexts=function(e,t){switch(e[1]){case 11:return["YES","NO"];case 13:return t;case 15:return["DONE","UNDONE"];default:return[]}},Bt.fromMessageAndTalk=function(e,t){var n=new Bt;n.id=e.id,n.talkId=e.talkId,n.type=e.type;var i,r=ke.option(e.content.title);switch(r[1]){case 0:i=r[2];break;case 1:i=e.content.question}n.content=i,n.userId=e.userId,n.recipientIds=t.userIds,n.responses=Bt.createResponsesFromStrings(Bt.createResponseTexts(e.type,e.content.options));var a,o=ke.option(e.content.listing);switch(o[1]){case 0:a=o[2];break;case 1:a=!0}n.listing=a,n.closingType=Bt.closeingTypeOf(e.content.closing_type),n.maxResponseId=null,n.lastResponse=null,n.lastResponseUserId=null,n.updatedAt=n.createdAt=e.createdAt,n.responded=!1;var s,l=ke.option(e.content.closed);switch(l[1]){case 0:s=l[2];break;case 1:s=!1}return n.closed=s,n},Bt.createTodoDoneMessageWithParams=function(e,t,n){var i=new St;return i.talkId=e,i.type=wt.todoDone,i.content={in_reply_to:t,done:n},i},Bt.createYesOrNoReplyMessageWithParams=function(e,t,n){var i=new St;return i.talkId=e,i.content={in_reply_to:t,response:n},i.type=wt.yesOrNoReply,i},Bt.createSelectOneReplyMessageWithParams=function(e,t,n){var i=new St;return i.talkId=e,i.content={in_reply_to:t,response:n},i.type=wt.selectOneReply,i},Bt.fromTypeToInt=function(e){switch(e[1]){case 0:return 0;case 1:return 1}},Bt.filterToOpBool=function(e){switch(e[1]){case 0:return rr.Some(!0);case 1:return rr.Some(!1);case 2:return rr.None}},Bt.isDoneResponse=function(e){return"DONE"==e.content},Bt.prototype={isCompleted:function(e){if(ee.enumEq(this.type,wt.todo)){if(ee.enumEq(this.closingType,zt.any)){if(null!=this.lastResponse&&"DONE"==this.responses[this.lastResponse].content)return!0}else{if(!this.responded)return!1;for(var t=0,n=this.responses;t<n.length;){var i=n[t];if(++t,be.contains(i.userIds,e))return"DONE"==i.content}}return!1}return ee.enumEq(this.closingType,zt.any)?null!=this.lastResponse:this.responded},createTodoDoneMessage:function(e){return Bt.createTodoDoneMessageWithParams(this.talkId,this.id,e)},createYesOrNoReplyMessage:function(e){return Bt.createYesOrNoReplyMessageWithParams(this.talkId,this.id,e)},createSelectOneReplyMessage:function(e){return Bt.createSelectOneReplyMessageWithParams(this.talkId,this.id,e)},createActionCloseMessage:function(){var e=new St;switch(e.talkId=this.talkId,e.content={in_reply_to:this.id},this.type[1]){case 11:e.type=wt.yesOrNoClosed;break;case 13:e.type=wt.selectOneClosed;break;case 15:e.type=wt.todoClosed;break;default:Qn._e("["+Ee.dateStr(new Date)+"] ","message type is not action.","","","","")}return e},getLastResponse:function(){var t=this;return ke.map(ke.option(this.lastResponse),function(e){return t.responses[e]})},getLastDoneResponse:function(){return ke.filter(this.getLastResponse(),Bt.isDoneResponse)},getDoneResponse:function(){return ke.option(Ae.find(this.responses,Bt.isDoneResponse))},__class__:Bt};var Ht=function(e){null!=e&&(this.content=e.content,this.count=e.count,this.userIds=e.user_ids)};(n["albero.entity.QuestionResponse"]=Ht).__name__=["albero","entity","QuestionResponse"],Ht.prototype={__class__:Ht};var zt=n["albero.entity.QuestionClosingType"]={__ename__:["albero","entity","QuestionClosingType"],__constructs__:["any","all","unknown"]};zt.any=["any",0],zt.any.toString=s,(zt.any.__enum__=zt).all=["all",1],zt.all.toString=s,(zt.all.__enum__=zt).unknown=["unknown",2],zt.unknown.toString=s,(zt.unknown.__enum__=zt).__empty_constructs__=[zt.any,zt.all,zt.unknown];var Gt=n["albero.entity.QuestionFromType"]={__ename__:["albero","entity","QuestionFromType"],__constructs__:["fromSelf","fromOther"]};Gt.fromSelf=["fromSelf",0],Gt.fromSelf.toString=s,(Gt.fromSelf.__enum__=Gt).fromOther=["fromOther",1],Gt.fromOther.toString=s,(Gt.fromOther.__enum__=Gt).__empty_constructs__=[Gt.fromSelf,Gt.fromOther];var jt=n["albero.entity.QuestionFilter"]={__ename__:["albero","entity","QuestionFilter"],__constructs__:["onlyClosed","onlyUnclosed","noFilter"]};jt.onlyClosed=["onlyClosed",0],jt.onlyClosed.toString=s,(jt.onlyClosed.__enum__=jt).onlyUnclosed=["onlyUnclosed",1],jt.onlyUnclosed.toString=s,(jt.onlyUnclosed.__enum__=jt).noFilter=["noFilter",2],jt.noFilter.toString=s,(jt.noFilter.__enum__=jt).__empty_constructs__=[jt.onlyClosed,jt.onlyUnclosed,jt.noFilter];var Kt=function(e){null!=e&&(this.msgRetentionPeriod=e.msg_retention_period,this.msgFileSize=e.msg_file_size,this.maxMessageContentLength=e.max_message_content_length,this.maxTalkers=e.max_talkers,this.maxTalks=e.max_talks)};(n["albero.entity.Quota"]=Kt).__name__=["albero","entity","Quota"],Kt.prototype={__class__:Kt};var Yt=function(e){if(null!=e&&(this.total=e.total,this.marker=e.marker,this.nextMarker=e.next_marker,this.contents=[],null!=e.contents))for(var t=0,n=vr.__cast(e.contents,Array);t<n.length;){var i=n[t];++t,this.contents.push(new ct(i))}};(n["albero.entity.SearchAttachmentsResult"]=Yt).__name__=["albero","entity","SearchAttachmentsResult"],Yt.prototype={__class__:Yt};var Vt=function(e){null!=e&&(this.total=e.total,this.marker=e.marker,this.nextMarker=e.next_marker,this.contents=[],null!=e.contents&&(this.contents=vr.__cast(e.contents,Array).map(function(e){return new ht(e)})))};(n["albero.entity.SearchMessagesResult"]=Vt).__name__=["albero","entity","SearchMessagesResult"],Vt.prototype={__class__:Vt};var Wt=function(e){null!=e&&(null!=e.domain_id_str&&(this.domainId=be.makeFromIdStr(e.domain_id_str)),null!=e.talk_id_str&&(this.talkId=be.makeFromIdStr(e.talk_id_str)),this.keyword=e.keyword,null==e.search_type||e.search_type==Qt.toLocalizeText(qt.MESSAGES)?this.searchType=qt.MESSAGES:this.searchType=qt.ATTACHMENTS,this.sinceText=e.since,this.untilText=e.until,null!=e.from_id_str&&(this.fromUserId=be.makeFromIdStr(e.from_id_str)))};(n["albero.entity.SearchParams"]=Wt).__name__=["albero","entity","SearchParams"],Wt.dateQueryToText=function(e,t){if(null==e)return t;switch(e){case"-1d":return qn.localize("SearchParams.text_date_yesterday");case"-3d":return qn.localize("SearchParams.text_date_three_days_before");case"t":return qn.localize("SearchParams.text_date_today");default:return I.replace(e,"-","/")}},Wt.prototype={toProps:function(){var e={};if(null!=this.domainId){var t=this.domainId;e.domain_id_str="_"+t.high+"_"+t.low}if(null!=this.talkId){var n=this.talkId;e.talk_id_str="_"+n.high+"_"+n.low}if(e.keyword=this.keyword,e.search_type=Qt.toLocalizeText(this.searchType),e.since=this.sinceText,e.until=this.untilText,null!=this.fromUserId){var i=this.fromUserId;e.from_id_str="_"+i.high+"_"+i.low}return e},copy:function(){return new Wt(this.toProps())},eq:function(e){return!!this.isSameInt64(this.domainId,e.domainId)&&(!!this.isSameInt64(this.talkId,e.talkId)&&(this.keyword==e.keyword&&(!!ee.enumEq(this.searchType,e.searchType)&&(this.sinceText==e.sinceText&&(this.untilText==e.untilText&&!!this.isSameInt64(this.fromUserId,e.fromUserId))))))},isSameInt64:function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.high==t.high&&e.low==t.low},getQueryText:function(){var e=[];return null!=this.keyword&&0!=this.keyword.length&&e.push(this.keyword),null!=this.sinceText&&e.push("since:"+this.sinceText),null!=this.untilText&&e.push("until:"+this.untilText),null!=this.fromUserId&&e.push("from:"+qi.toString(this.fromUserId)),e.join(" ")},getPeriodText:function(){return Wt.dateQueryToText(this.sinceText,"")+"~"+Wt.dateQueryToText(this.untilText,"")},__class__:Wt};var qt=n["albero.entity.SearchType"]={__ename__:["albero","entity","SearchType"],__constructs__:["MESSAGES","ATTACHMENTS"]};qt.MESSAGES=["MESSAGES",0],qt.MESSAGES.toString=s,(qt.MESSAGES.__enum__=qt).ATTACHMENTS=["ATTACHMENTS",1],qt.ATTACHMENTS.toString=s,(qt.ATTACHMENTS.__enum__=qt).__empty_constructs__=[qt.MESSAGES,qt.ATTACHMENTS];var Qt=function(){};(n["albero.entity.SearchTypeUtil"]=Qt).__name__=["albero","entity","SearchTypeUtil"],Qt.toLocalizeText=function(e){switch(e[1]){case 0:return qn.localize("SearchParams.text_type_messages");case 1:return qn.localize("SearchParams.text_type_attachments")}};var Jt=n["albero.entity.SearchDate"]={__ename__:["albero","entity","SearchDate"],__constructs__:["DATE_NONE","DATE_TODAY","DATE_YESTERDAY","DATE_THREE_DAYS_BEFORE","DATE_CALENDAR"]};Jt.DATE_NONE=["DATE_NONE",0],Jt.DATE_NONE.toString=s,(Jt.DATE_NONE.__enum__=Jt).DATE_TODAY=["DATE_TODAY",1],Jt.DATE_TODAY.toString=s,(Jt.DATE_TODAY.__enum__=Jt).DATE_YESTERDAY=["DATE_YESTERDAY",2],Jt.DATE_YESTERDAY.toString=s,(Jt.DATE_YESTERDAY.__enum__=Jt).DATE_THREE_DAYS_BEFORE=["DATE_THREE_DAYS_BEFORE",3],Jt.DATE_THREE_DAYS_BEFORE.toString=s,(Jt.DATE_THREE_DAYS_BEFORE.__enum__=Jt).DATE_CALENDAR=["DATE_CALENDAR",4],Jt.DATE_CALENDAR.toString=s,(Jt.DATE_CALENDAR.__enum__=Jt).__empty_constructs__=[Jt.DATE_NONE,Jt.DATE_TODAY,Jt.DATE_YESTERDAY,Jt.DATE_THREE_DAYS_BEFORE,Jt.DATE_CALENDAR];var Xt=function(){};(n["albero.entity.SearchDateUtil"]=Xt).__name__=["albero","entity","SearchDateUtil"],Xt.createSearchDateArray=function(e){return e?[Jt.DATE_TODAY,Jt.DATE_YESTERDAY,Jt.DATE_THREE_DAYS_BEFORE,Jt.DATE_CALENDAR]:[Jt.DATE_YESTERDAY,Jt.DATE_THREE_DAYS_BEFORE,Jt.DATE_CALENDAR]},Xt.toLocalizeText=function(e){switch(e[1]){case 0:return qn.localize("SearchParams.text_date_none");case 1:return qn.localize("SearchParams.text_date_today");case 2:return qn.localize("SearchParams.text_date_yesterday");case 3:return qn.localize("SearchParams.text_date_three_days_before");case 4:return qn.localize("SearchParams.text_date_calendar")}};var Zt=function(e){null!=e&&(this.user=new yt(e.user),this.device=e.device,this.notification=e.notification,this.passwordExpiration=new Rt(e.password_expiration),this.configuration=new Be(e.configuration))};(n["albero.entity.Session"]=Zt).__name__=["albero","entity","Session"],Zt.prototype={__class__:Zt};var $t=function(e){null!=e&&(this.solutionId=e.solution_id,this.name=e.name,null!=e.link&&(this.link=new en(e.link)),null!=e.plugin&&(this.plugin=new tn(e.plugin)))};(n["albero.entity.Solution"]=$t).__name__=["albero","entity","Solution"],$t.getSolutionType=function(e){switch(e){case 1:return nn.PhotoViewTrial;case 2:return nn.PhotoView;case 3:return nn.MultiView;case 4:return nn.KeywordWatching;default:return nn.Unknown}},$t.prototype={__class__:$t};var en=function(e){null!=e&&(this.iconUrl=e.icon_url,this.url=e.url)};(n["albero.entity.SolutionLink"]=en).__name__=["albero","entity","SolutionLink"],en.prototype={__class__:en};var tn=function(e){null!=e&&(this.url=e.url,this.loaded=!1)};(n["albero.entity.SolutionPlugin"]=tn).__name__=["albero","entity","SolutionPlugin"],tn.prototype={__class__:tn};var nn=n["albero.entity.SolutionType"]={__ename__:["albero","entity","SolutionType"],__constructs__:["PhotoViewTrial","PhotoView","MultiView","KeywordWatching","Unknown"]};nn.PhotoViewTrial=["PhotoViewTrial",0],nn.PhotoViewTrial.toString=s,(nn.PhotoViewTrial.__enum__=nn).PhotoView=["PhotoView",1],nn.PhotoView.toString=s,(nn.PhotoView.__enum__=nn).MultiView=["MultiView",2],nn.MultiView.toString=s,(nn.MultiView.__enum__=nn).KeywordWatching=["KeywordWatching",3],nn.KeywordWatching.toString=s,(nn.KeywordWatching.__enum__=nn).Unknown=["Unknown",4],nn.Unknown.toString=s,(nn.Unknown.__enum__=nn).__empty_constructs__=[nn.PhotoViewTrial,nn.PhotoView,nn.MultiView,nn.KeywordWatching,nn.Unknown];var rn=function(){};(n["albero.entity.StampSet"]=rn).__name__=["albero","entity","StampSet"],rn.prototype={__class__:rn};var an=function(e){null!=e&&(this.id=e.talk_id,this.domainId=e.domain_id,this.type=this.typeOf(e.type),this.name=e.talk_name,this.iconUrl=e.icon_url,this.userIds=e.user_ids,this.updatedAt=e.updated_at,this.leftUsers=this.getUsers(e.left_users),this.groupTalkSettings=this.getGroupTalkSetting(e.settings))};(n["albero.entity.Talk"]=an).__name__=["albero","entity","Talk"],an.prototype={typeOf:function(e){switch(e){case 1:return sn.PairTalk;case 2:return sn.GroupTalk;default:return sn.Unknown}},getUsers:function(e){return null==e?null:e.map(function(e){return new rt(e)})},getGroupTalkSetting:function(e){return null==e?rr.None:rr.Some(new on(e))},isSystemMessageVisibled:function(){var e=ke.map(this.groupTalkSettings,function(e){return e.systemMessageVisible});switch(e[1]){case 0:return e[2];case 1:return!0}},isAllowDisplayPastMessages:function(){var e=ke.map(this.groupTalkSettings,function(e){return e.allowDisplayPastMessages});switch(e[1]){case 0:return e[2];case 1:return!1}},__class__:an};var on=function(e){null!=e&&(this.allowDisplayPastMessages=!!e.allow_display_past_messages,this.systemMessageVisible=null==e.system_message_visible||e.system_message_visible)};(n["albero.entity.GroupTalkSettings"]=on).__name__=["albero","entity","GroupTalkSettings"],on.createDefault=function(){var e=new on;return e.allowDisplayPastMessages=!0,e.systemMessageVisible=!0,e},on.prototype={__class__:on};var sn=n["albero.entity.TalkType"]={__ename__:["albero","entity","TalkType"],__constructs__:["Unknown","PairTalk","GroupTalk"]};sn.Unknown=["Unknown",0],sn.Unknown.toString=s,(sn.Unknown.__enum__=sn).PairTalk=["PairTalk",1],sn.PairTalk.toString=s,(sn.PairTalk.__enum__=sn).GroupTalk=["GroupTalk",2],sn.GroupTalk.toString=s,(sn.GroupTalk.__enum__=sn).__empty_constructs__=[sn.Unknown,sn.PairTalk,sn.GroupTalk];var ln=n["albero.entity.TalkOrAnnoucements"]={__ename__:["albero","entity","TalkOrAnnoucements"],__constructs__:["talk","annoucements"]};ln.talk=function(e){var t=["talk",0,e];return t.__enum__=ln,t.toString=s,t},ln.annoucements=["annoucements",1],ln.annoucements.toString=s,(ln.annoucements.__enum__=ln).__empty_constructs__=[ln.annoucements];var un=function(){};(n["albero.entity.TalkOrAnncounementsHelper"]=un).__name__=["albero","entity","TalkOrAnncounementsHelper"],un.getTalkId=function(e){switch(e[1]){case 0:var t=e[2];return rr.Some(t);case 1:return rr.None}};var cn=function(e,t){this.talk=e,this.status=t};(n["albero.entity.TalkPack"]=cn).__name__=["albero","entity","TalkPack"],cn.compareTalkOrderingTimestamp=function(e,t){var n=e.getTalkOrderingTimestamp(),i=t.getTalkOrderingTimestamp(),r=n.high-i.high|0;return r=0!=r?r:Wi.ucompare(n.low,i.low),n.high<0?i.high<0?r:-1:0<=i.high?r:1},cn.compareTalkConsideredFavorite=function(e,t){var n=e.getTalkOrderInFavorites(),i=t.getTalkOrderInFavorites();return null!=n&&null!=i?cn.compareTalkOrderingTimestamp(e,t):null!=n?1:null!=i?-1:cn.compareTalkOrderingTimestamp(e,t)},cn.prototype={getTalkOrderingTimestamp:function(){return null!=this.status&&null!=this.status.talkOrderingTimestamp?this.status.talkOrderingTimestamp:this.talk.updatedAt},getTalkOrderInFavorites:function(){return null!=this.status?this.status.orderInFavorites:null},__class__:cn};var _n=function(e,t){this.paneType=e,this.talkSelection=t};(n["albero.entity.TalkPaneSelection"]=_n).__name__=["albero","entity","TalkPaneSelection"],_n.createArrayForMultiPanes=function(e){return Ae.mapi(e,function(e,t){return new _n(Ct.getMultiPaneType(e),t)})},_n.prototype={createUrls:function(e,t){switch(this.paneType[1]){case 0:return E.talks(e,A.single(this.talkSelection));case 1:var n=Lr(t,t.getTalkSelection),i=e,r=Ct.getMultiPaneTypes().map(function(e){return n(i,e)});return r[0]=this.talkSelection,E.talks(e,A.multi(r));case 2:var a=Lr(t,t.getTalkSelection),o=e,s=Ct.getMultiPaneTypes().map(function(e){return a(o,e)});return s[1]=this.talkSelection,E.talks(e,A.multi(s));case 3:var l=Lr(t,t.getTalkSelection),u=e,c=Ct.getMultiPaneTypes().map(function(e){return l(u,e)});return c[2]=this.talkSelection,E.talks(e,A.multi(c))}},__class__:_n};var hn=function(){};(n["albero.entity.ITalkSelectionGetter"]=hn).__name__=["albero","entity","ITalkSelectionGetter"],hn.prototype={__class__:hn};var dn=function(e){null!=e&&(this.domainId=e.domain_id,this.talkId=e.talk_id,this.version=e.version)};(n["albero.entity.TalkPushNotificationEvent"]=dn).__name__=["albero","entity","TalkPushNotificationEvent"],dn.prototype={__class__:dn};var fn=n["albero.entity.TalkSelection"]={__ename__:["albero","entity","TalkSelection"],__constructs__:["NotSelected","TalkSelected","AnnouncementsSelected"]};fn.NotSelected=["NotSelected",0],fn.NotSelected.toString=s,(fn.NotSelected.__enum__=fn).TalkSelected=function(e,t){var n=["TalkSelected",1,e,t];return n.__enum__=fn,n.toString=s,n},fn.AnnouncementsSelected=["AnnouncementsSelected",2],fn.AnnouncementsSelected.toString=s,(fn.AnnouncementsSelected.__enum__=fn).__empty_constructs__=[fn.NotSelected,fn.AnnouncementsSelected];var mn=function(){};(n["albero.entity.TalkSelectionHelper"]=mn).__name__=["albero","entity","TalkSelectionHelper"],mn.eqTalkSelection=function(e,t){var n;if(e[0]==t[0]){var i=mn.getTalkIdOrNull(e),r=mn.getTalkIdOrNull(t);n=null==i&&null==r||null!=i&&null!=r&&i.high==r.high&&i.low==r.low}else n=!1;if(n){var a=mn.getMessageIdOrNull(e),o=mn.getMessageIdOrNull(t);return null==a&&null==o||null!=a&&null!=o&&a.high==o.high&&a.low==o.low}return!1},mn.isSelected=function(e,t){switch(e[1]){case 0:return!1;case 1:e[3];var n=e[2],i=ke.orNull(un.getTalkId(t));return null!=n&&null!=i&&n.high==i.high&&n.low==i.low;case 2:return t==ln.annoucements}},mn.getTalkIdOrNull=function(e){switch(e[1]){case 0:return null;case 1:return e[2];case 2:return null}},mn.getMessageIdOrNull=function(e){switch(e[1]){case 0:return null;case 1:var t=e[3];return ke.orNull(t);case 2:return null}};var pn=function(e){this.unreadCount=0,null!=e&&(this.id=e.talk_id,this.unreadCount=null!=e.unread_count?e.unread_count:0,this.maxMessageId=e.max_message_id,null!=e.max_message?this.maxMessage=new St(e.max_message):this.maxMessage=null,this.maxReadMessageId=e.max_read_message_id,this.maxEveryoneReadMessageId=e.max_everyone_read_message_id,this.talkOrderingTimestamp=e.talk_ordering_timestamp,this.orderInFavorites=e.order_in_favorites,this.favoriteVersion=e.favorite_version,this.pushNotificationSetting=new Lt(e.push_notification))};(n["albero.entity.TalkStatus"]=pn).__name__=["albero","entity","TalkStatus"],pn.prototype={update:function(e){var t=this,n=!1;return this.needIdUpdate(this.maxEveryoneReadMessageId,e.maxEveryoneReadMessageId)&&(this.maxEveryoneReadMessageId=e.maxEveryoneReadMessageId,n=!0),ke.foreach(e.maxReadMessageId,function(e){t.needIdUpdate(t.maxReadMessageId,e)&&(t.maxReadMessageId=e,n=!0)}),n},needIdUpdate:function(e,t){if(null!=t){if(null!=e){var n=e.high-t.high|0;return n=0!=n?n:Wi.ucompare(e.low,t.low),(e.high<0?t.high<0?n:-1:0<=t.high?n:1)<0}return!0}return!1},read:function(e,t){this.maxReadMessageId=e,this.unreadCount-=t,this.unreadCount<0&&(this.unreadCount=0)},readAll:function(){this.maxReadMessageId=this.maxMessageId,this.unreadCount=0},__class__:pn};var gn=function(){};(n["albero.entity.TalkStatusHelper"]=gn).__name__=["albero","entity","TalkStatusHelper"],gn.isNotificationDisabled=function(e){return null!=e&&null!=e.pushNotificationSetting&&!e.pushNotificationSetting.enabled},gn.isFavoriteTalk=function(e){return null!=e&&null!=e.orderInFavorites},gn.isUnreadMesasgeExisted=function(e){return null!=e&&(null!=e.maxMessage&&gn.isUnread(e,e.maxMessage.id))},gn.isUnread=function(e,t){if(null!=e.maxReadMessageId){var n=e.maxReadMessageId,i=n.high-t.high|0;return i=0!=i?i:Wi.ucompare(n.low,t.low),(n.high<0?t.high<0?i:-1:0<=t.high?i:1)<0}return!0},gn.isNewMax=function(e,t){if(null!=e.maxMessageId){var n=e.maxMessageId,i=n.high-t.high|0;return i=0!=i?i:Wi.ucompare(n.low,t.low),(n.high<0?t.high<0?i:-1:0<=t.high?i:1)<0}return!0},gn.isMax=function(e,t){if(null!=e.maxMessageId){var n=e.maxMessageId;return null!=n&&null!=t&&n.high==t.high&&n.low==t.low}return!1};var vn=function(e){null!=e&&(this.talkId=e.talk_id,this.maxEveryoneReadMessageId=e.max_everyone_read_message_id,this.maxReadMessageId=ke.option(e.max_read_message_id))};(n["albero.entity.TalkStatusUpdate"]=vn).__name__=["albero","entity","TalkStatusUpdate"],vn.prototype={__class__:vn};var yn=function(e,t,n){this.file=e,this.dimension=Sn.createWithSize(t,n),this.auth=null};(n["albero.entity.ThumbInfo"]=yn).__name__=["albero","entity","ThumbInfo"],yn.prototype={setAuth:function(e){this.auth=e},__class__:yn};var Sn=function(e){null!=e&&(this.width=e.width,this.height=e.height)};(n["albero.entity.ThumbDimension"]=Sn).__name__=["albero","entity","ThumbDimension"],Sn.createWithSize=function(e,t){var n=new Sn;return n.width=e,n.height=t,n},Sn.prototype={toObject:function(){return{width:this.width,height:this.height}},__class__:Sn};var wn=n["albero.entity.UploadUseType"]={__ename__:["albero","entity","UploadUseType"],__constructs__:["PROFILE_IMAGE","MESSAGE","TALK_ICON","THUMBNAIL"]};wn.PROFILE_IMAGE=["PROFILE_IMAGE",0],wn.PROFILE_IMAGE.toString=s,(wn.PROFILE_IMAGE.__enum__=wn).MESSAGE=["MESSAGE",1],wn.MESSAGE.toString=s,(wn.MESSAGE.__enum__=wn).TALK_ICON=["TALK_ICON",2],wn.TALK_ICON.toString=s,(wn.TALK_ICON.__enum__=wn).THUMBNAIL=["THUMBNAIL",3],wn.THUMBNAIL.toString=s,(wn.THUMBNAIL.__enum__=wn).__empty_constructs__=[wn.PROFILE_IMAGE,wn.MESSAGE,wn.TALK_ICON,wn.THUMBNAIL];var Tn=function(){};(n["albero.entity.UploadUseTypeHelper"]=Tn).__name__=["albero","entity","UploadUseTypeHelper"],Tn.getUseTypeInt=function(e){switch(e[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 4}};var In=function(e){null!=e&&(null!=e.user_id&&(this.userId=e.user_id),null!=e.email&&(this.email=e.email),null!=e.sub_email&&(this.subEmail=e.sub_email),null!=e.group_alias&&(this.groupAlias=e.group_alias),null!=e.signin_id&&(this.signinId=e.signin_id))};(n["albero.entity.UserIdentifier"]=In).__name__=["albero","entity","UserIdentifier"],In.prototype={__class__:In};var En=function(e,t){this.high=e,this.low=t};(n["haxe._Int64.___Int64"]=En).__name__=["haxe","_Int64","___Int64"],En.prototype={__class__:En};var An=function(e,t){this.lastUpdatedAt=t,null!=e&&(this.userId=e.user_id,this.lastUsedAtOpt=ke.option(e.last_used_at))};(n["albero.entity.UserPresence"]=An).__name__=["albero","entity","UserPresence"],An.createUserPresenceState=function(e,t){var n=t.high-e.high|0,i=t.low-e.low|0;if(Wi.ucompare(t.low,e.low)<0){n--;n|=0}var r=new En(n,i),a=An.SIXTY_MINUTES,o=r.high-a.high|0;if(o=0!=o?o:Wi.ucompare(r.low,a.low),0<(r.high<0?a.high<0?o:-1:0<=a.high?o:1))return bn.GT_60;var s=An.FIFTEEN_MINUTES,l=r.high-s.high|0;return l=0!=l?l:Wi.ucompare(r.low,s.low),0<(r.high<0?s.high<0?l:-1:0<=s.high?l:1)?bn.LT_OR_EQ_60:bn.LT_OR_EQ_15},An.prototype={toState:function(e){var t=e,n=ke.map(this.lastUsedAtOpt,function(e){return An.createUserPresenceState(e,t)});switch(n[1]){case 0:return n[2];case 1:return bn.GT_60}},isExpired:function(e,t){var n=this.lastUpdatedAt,i=e.high-n.high|0,r=e.low-n.low|0;if(Wi.ucompare(e.low,n.low)<0){i--;i|=0}var a=new En(i,r),o=a.high-t.high|0;return o=0!=o?o:Wi.ucompare(a.low,t.low),0<(a.high<0?t.high<0?o:-1:0<=t.high?o:1)},__class__:An};var bn=n["albero.entity.UserPresenceState"]={__ename__:["albero","entity","UserPresenceState"],__constructs__:["LT_OR_EQ_15","LT_OR_EQ_60","GT_60"]};bn.LT_OR_EQ_15=["LT_OR_EQ_15",0],bn.LT_OR_EQ_15.toString=s,(bn.LT_OR_EQ_15.__enum__=bn).LT_OR_EQ_60=["LT_OR_EQ_60",1],bn.LT_OR_EQ_60.toString=s,(bn.LT_OR_EQ_60.__enum__=bn).GT_60=["GT_60",2],bn.GT_60.toString=s,(bn.GT_60.__enum__=bn).__empty_constructs__=[bn.LT_OR_EQ_15,bn.LT_OR_EQ_60,bn.GT_60];var Nn=function(e){this.note=new Mn(e)};(n["albero.entity.api.note.CreateNoteResult"]=Nn).__name__=["albero","entity","api","note","CreateNoteResult"],Nn.prototype={__class__:Nn};var kn=function(e){this.result=e};(n["albero.entity.api.note.DeleteNoteResult"]=kn).__name__=["albero","entity","api","note","DeleteNoteResult"],kn.prototype={__class__:kn};var Dn=function(e){this.note=new Mn(e)};(n["albero.entity.api.note.GetNoteResult"]=Dn).__name__=["albero","entity","api","note","GetNoteResult"],Dn.prototype={getNoteId:function(){return this.note.noteId},getNoteCreateUserId:function(){return this.note.createdBy},getRevisionCreateUserId:function(){return this.note.getRevisionCreateUserId()},getNoteCreateDate:function(){return this.note.createdAt},getRevisionCreateDate:function(){return this.note.getRevisionCreateDate()},__class__:Dn};var Cn=function(e){null!=e&&(this.marker=e.marker,this.nextMarker=e.next_marker,this.noteStatuses=Ne.asArray(e.contents).map(function(e){return new Gn(e)}))};(n["albero.entity.api.note.GetNoteStatusesResult"]=Cn).__name__=["albero","entity","api","note","GetNoteStatusesResult"],Cn.prototype={isNotEmptyNoteStatuses:function(){return 0<this.noteStatuses.length},__class__:Cn};var Rn=function(e){this.note=new Mn(e)};(n["albero.entity.api.note.UpdateNoteResult"]=Rn).__name__=["albero","entity","api","note","UpdateNoteResult"],Rn.prototype={__class__:Rn};var On=function(e){this.note=new Mn(e)};(n["albero.entity.api.note.UpdateNoteSettingResult"]=On).__name__=["albero","entity","api","note","UpdateNoteSettingResult"],On.prototype={__class__:On};var Mn=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.talkId=e.talk_id,this.createdBy=e.created_by,this.createdAt=e.created_at,this.setting=new zn(e.setting),this.noteRevision=new Bn(e.note_revision))};(n["albero.entity.note.Note"]=Mn).__name__=["albero","entity","note","Note"],Mn.prototype={isSameNoteId:function(e){return this.noteId.equals(e)},getRevisionCreateUserId:function(){return this.noteRevision.createdBy},getRevisionCreateDate:function(){return this.noteRevision.createdAt},compareRevision:function(e){return this.noteRevision.compareRevision(e)},__class__:Mn};var xn=n["albero.entity.note.NoteContentType"]={__ename__:["albero","entity","note","NoteContentType"],__constructs__:["TEXT"]};xn.TEXT=["TEXT",0],xn.TEXT.toString=s,(xn.TEXT.__enum__=xn).__empty_constructs__=[xn.TEXT];var Un=function(){};(n["albero.entity.note.NoteContentTypeHelper"]=Un).__name__=["albero","entity","note","NoteContentTypeHelper"],Un.createNoteContentType=function(e){return null==e?(Qn._e("["+Ee.dateStr(new Date)+"] ","no value.","","","",""),null):1==e?xn.TEXT:(Qn._e("["+Ee.dateStr(new Date)+"] ","value is not expected.","","","",""),null)},Un.getValue=function(e){return null==e?(Qn._e("["+Ee.dateStr(new Date)+"] ","no content type.","","","",""),null):1};var Pn=function(e){this.value=e};(n["albero.entity.note.NoteId"]=Pn).__name__=["albero","entity","note","NoteId"],Pn.__interfaces__=[ft],Pn.prototype={toString:function(){var e=this.value;return"_"+e.high+"_"+e.low},equals:function(e){if(null==e)return!1;var t=this.value,n=e.value;return null!=t&&null!=n&&t.high==n.high&&t.low==n.low},getHtmlAttributeId:function(){return"note-"+this.toString()},__class__:Pn};var Fn=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.talkId=e.talk_id,this.setting=new zn(e.setting))};(n["albero.entity.note.NotePartialUpdateForSetting"]=Fn).__name__=["albero","entity","note","NotePartialUpdateForSetting"],Fn.prototype={__class__:Fn};var Ln=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.talkId=e.talk_id,this.noteRevisionSummary=new Hn(e.note_revision_summary))};(n["albero.entity.note.NotePartialUpdateForSummary"]=Ln).__name__=["albero","entity","note","NotePartialUpdateForSummary"],Ln.prototype={getRevision:function(){return this.noteRevisionSummary.revision},getUpdatedBy:function(){return this.noteRevisionSummary.createdBy},getUpdatedAt:function(){return this.noteRevisionSummary.createdAt},__class__:Ln};var Bn=function(e){null!=e&&(this.revision=e.revision,this.title=e.title,this.contentType=Un.createNoteContentType(e.content_type),this.content=e.content,this.createdBy=e.created_by,this.createdAt=e.created_at)};(n["albero.entity.note.NoteRevision"]=Bn).__name__=["albero","entity","note","NoteRevision"],Bn.prototype={isEmptyTitle:function(){return""==this.title||null==this.title},compareRevision:function(e){return this.revision==e?0:this.revision<e?-1:1},__class__:Bn};var Hn=function(e){null!=e&&(this.revision=e.revision,this.title=e.title,this.contentType=Un.createNoteContentType(e.content_type),this.contentSummary=e.content_summary,this.createdBy=e.created_by,this.createdAt=e.created_at)};(n["albero.entity.note.NoteRevisionSummary"]=Hn).__name__=["albero","entity","note","NoteRevisionSummary"],Hn.prototype={isEmptyTitle:function(){return""==this.title||null==this.title},compareRevision:function(e){return this.revision==e?0:this.revision<e?-1:1},getContentSummaryWithEllipsis:function(){return this.contentSummary.length<100?this.contentSummary:this.contentSummary.substring(0,99)+""},__class__:Hn};var zn=function(e){null!=e&&(this.collaborativeEditing=e.collaborative_editing,this.version=e.version)};(n["albero.entity.note.NoteSetting"]=zn).__name__=["albero","entity","note","NoteSetting"],zn.prototype={__class__:zn};var Gn=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.noteSummary=new jn(e.note_summary),this.commentIds=e.comment_ids,this.readUserIds=e.read_user_ids)};(n["albero.entity.note.NoteStatus"]=Gn).__name__=["albero","entity","note","NoteStatus"],Gn.prototype={getNoteRevisionSummary:function(){return this.noteSummary.noteRevisionSummary},__class__:Gn};var jn=function(e){null!=e&&(this.noteId=new Pn(e.note_id),this.talkId=e.talk_id,this.createdBy=e.created_by,this.createdAt=e.created_at,this.setting=new zn(e.setting),this.noteRevisionSummary=new Hn(e.note_revision_summary))};(n["albero.entity.note.NoteSummary"]=jn).__name__=["albero","entity","note","NoteSummary"],jn.prototype={getNoteIdByString:function(){return this.noteId.toString()},getRevisionCreatedAt:function(){return this.noteRevisionSummary.createdAt},getRevisionContentSummary:function(){return this.noteRevisionSummary.contentSummary},getRevisionTitle:function(){return this.noteRevisionSummary.isEmptyTitle()?"":this.noteRevisionSummary.title},getNoteIdJQueryId:function(){return this.noteId.getHtmlAttributeId()},__class__:jn};var Kn=function(){};(n["albero.js.Base64"]=Kn).__name__=["albero","js","Base64"],Kn.initCodes=function(){for(var e=[],t=0,n=Kn.BASE64.length;t<n;){var i=t++;e[Kn.BASE64.charCodeAt(i)]=i}return e},Kn.encode=function(e){for(var t=e,n=0,i=t.length-2,r="",a=Kn.BASE64;n<i;){var o=t.b[n++],s=t.b[n++],l=t.b[n++];r+=K.string(a.charAt(o>>2)),r+=K.string(a.charAt(63&(o<<4|s>>4))),r+=K.string(a.charAt(63&(s<<2|l>>6))),r+=K.string(a.charAt(63&l))}if(n==i){var u=t.b[n++],c=t.b[n++];r+=K.string(a.charAt(u>>2)),r+=K.string(a.charAt(63&(u<<4|c>>4))),r+=K.string(a.charAt(c<<2&63))}else if(n==i+1){var _=t.b[n++];r+=K.string(a.charAt(_>>2)),r+=K.string(a.charAt(_<<4&63))}var h=r;switch(h.length%4){case 2:h+="==";break;case 3:h+="="}return h},Kn.decode=function(e){var t=e.length-1;"="==e.charAt(t)&&("="==e.charAt(t-1)&&--t,e=Ee.substr(e,0,t));var n=e.length,i=e,r=Kn.CODES;null==r&&(r=Kn.initCodes(),Kn.CODES=r);for(var a=0,o=3&n,s=a+(n-o),l=new sr(new ea(3*(n>>2)+(2<=o?o-1:0))),u=0;a<s;){var c=r[i.charCodeAt(a++)],_=r[i.charCodeAt(a++)];l.b[u++]=255&(c<<2|_>>4);var h=r[i.charCodeAt(a++)];l.b[u++]=255&(_<<4|h>>2);var d=r[i.charCodeAt(a++)];l.b[u++]=255&(h<<6|d)}if(2<=o){var f=r[i.charCodeAt(a++)],m=r[i.charCodeAt(a++)];if(l.b[u++]=255&(f<<2|m>>4),3==o){var p=r[i.charCodeAt(a++)];l.b[u++]=255&(m<<4|p>>2)}}return l};var Yn=function(){};(n["albero.js.KatakanaToRoman"]=Yn).__name__=["albero","js","KatakanaToRoman"],Yn.assureConvertTable=function(){return null!=Yn.convertTable||(Yn.convertTable=new or,Ae.iter([["","A"],["","I"],["","U"],["","E"],["","O"],["","KA"],["","KI"],["","KU"],["","KE"],["","KO"],["","KYA"],["","KYU"],["","KYO"],["","SA"],["","SI"],["","SU"],["","SE"],["","SO"],["","SHA"],["","SHU"],["","SHO"],["","TA"],["","TI"],["","TU"],["","TE"],["","TO"],["","THA"],["","THU"],["","THO"],["","NA"],["","NI"],["","NU"],["","NE"],["","NO"],["","NYA"],["","NYU"],["","NYO"],["","HA"],["","HI"],["","FU"],["","HE"],["","HO"],["","HYA"],["","HYU"],["","HYO"],["","MA"],["","MI"],["","MU"],["","ME"],["","MO"],["","MYA"],["","MYU"],["","MYO"],["","YA"],["","YU"],["","YO"],["","RA"],["","RI"],["","RU"],["","RE"],["","RO"],["","RYA"],["","RYU"],["","RYO"],["","WA"],["","O"],["","N"],["","GA"],["","GI"],["","GU"],["","GE"],["","GO"],["","GYA"],["","GYU"],["","GYO"],["","ZA"],["","JI"],["","ZU"],["","ZE"],["","ZO"],["","ZYA"],["","ZYU"],["","ZYO"],["","DA"],["","JI"],["","ZU"],["","DE"],["","DO"],["","BA"],["","BI"],["","BU"],["","BE"],["","BO"],["","BYA"],["","BYU"],["","BYO"],["","PA"],["","PI"],["","PU"],["","PE"],["","PO"],["","PYA"],["","PYU"],["","PYO"],["",""],["",""]],function(e){var t=Yn.convertTable,n=e[0],i=e[1];null!=$r[n]?t.setReserved(n,i):t.h[n]=i})),Yn.convertTable},Yn.matchNext=function(e,t){var n=Yn.assureConvertTable();if(t+1<e.length){var i=e.substring(t,t+2),r=null!=$r[i]?n.getReserved(i):n.h[i];if(null!=r)return Vn.MatchedToTwoCharsKey(r)}if(t<e.length){var a=e.substring(t,t+1),o=null!=$r[a]?n.getReserved(a):n.h[a];if(null!=o)return Vn.MatchedToOneCharKey(o)}var s=t<e.length?e.substring(t,t+1):"";return Vn.NotMatched(s)},Yn.prototype={convert:function(e){for(var t=0,n="";t<e.length;){var i=Yn.matchNext(e,t);switch(i[1]){case 0:t+=2,n+=i[2];break;case 1:++t,n+=i[2];break;case 2:++t,n+=i[2]}}return n=(n=n.replace(Yn.TU_REG.r,"$1$1")).replace(Yn.XTU_REG.r,"XTU")},__class__:Yn};var Vn=n["albero.js.ResultOfMatchNext"]={__ename__:["albero","js","ResultOfMatchNext"],__constructs__:["MatchedToTwoCharsKey","MatchedToOneCharKey","NotMatched"]};Vn.MatchedToTwoCharsKey=function(e){var t=["MatchedToTwoCharsKey",0,e];return t.__enum__=Vn,t.toString=s,t},Vn.MatchedToOneCharKey=function(e){var t=["MatchedToOneCharKey",1,e];return t.__enum__=Vn,t.toString=s,t},Vn.NotMatched=function(e){var t=["NotMatched",2,e];return t.__enum__=Vn,t.toString=s,t},Vn.__empty_constructs__=[];var Wn=function(e){this.isDirty=!1,this.key=e};(n["albero.js.LocalStorage"]=Wn).__name__=["albero","js","LocalStorage"],Wn.getLocalStorage=function(){return yr.getLocalStorage()},Wn.prototype={load:function(){var e=this.val();if(null==e||""==e)return null;var t=null;try{t=Zi.run(e),this.isDirty=!1}catch(e){e instanceof gr&&(e=e.val),Qn._w("["+Ee.dateStr(new Date)+"] ",e,"","","","")}return t},save:function(e){try{this.val(Qi.run(e)),this.isDirty=!1}catch(e){e instanceof gr&&(e=e.val),Qn._w("["+Ee.dateStr(new Date)+"] ",e,"","","","")}},setDirtyFlag:function(){if(!this.isDirty)try{this.val(""),this.isDirty=!0}catch(e){e instanceof gr&&(e=e.val),Qn._w("["+Ee.dateStr(new Date)+"] ",e,"","","","")}},val:function(e){var t=Wn.getLocalStorage();return null!=t&&(null==e?e=t.getItem(this.key):""==e?t.removeItem(this.key):t.setItem(this.key,e)),e},__class__:Wn};var qn=function(){};(n["albero.js.Localizer"]=qn).__name__=["albero","js","Localizer"],qn.runOrReserve=function(e){e()},qn.localize=function(e,t){return""};var Qn=e.AlberoLog=function(){};(n.AlberoLog=Qn).__name__=["AlberoLog"],Qn._nop=function(){},Qn.dateStr=function(){return"["+Ee.dateStr(new Date)+"] "};var Jn=function(e,t,n){this.ignoreCase=t,this.normalizeFunc=n,t&&(e=e.toUpperCase()),this.normalizedPattern=n(e)};(n["albero.js.NFKCTextSearch"]=Jn).__name__=["albero","js","NFKCTextSearch"],Jn.prototype={search:function(e){var t=new T,n=[];this.ignoreCase&&(e=e.toUpperCase()),this.normalize(e,t,n);for(var i,r=0,a=[],o=t.b;-1!=(i=o.indexOf(this.normalizedPattern,r));){r=i+this.normalizedPattern.length;for(var s=n[i],l=n[r-1],u=null,c=r,_=n.length;c<_;){if(l!=(u=n[c++]))break;u=null}null==u&&(u=e.length),a.push(new Xn(s,u))}return a},normalize:function(e,t,n){for(var i=e.length,r=new T,a=0,o=0,s=i;o<s;){var l=o++,u=r.b.length,c=r.b,_=c+e.charAt(l),h=this.normalizeFunc(_);if(_!=h)if(I.startsWith(h,c)){var d=c.substring(0,u);t.b+=K.string(d),r=new T;var f=h.substring(u,h.length);r.b+=K.string(f);for(var m=0,p=u;m<p;){m++;n.push(a)}a=l}else(r=new T).b+=null==h?"null":""+h;else{t.b+=K.string(r),r=new T;var g=e.charAt(l);r.b+=K.string(g);for(var v=0,y=u;v<y;){v++;n.push(a)}a=l}}t.b+=K.string(r.b);for(var S=0,w=r.b.length;S<w;){S++;n.push(a)}},__class__:Jn};var Xn=function(e,t){this.start=e,this.end=t};(n["albero.js.HitSpan"]=Xn).__name__=["albero","js","HitSpan"],Xn.prototype={__class__:Xn};var Zn=function(){};(n["albero.js.TextCanonicalizer"]=Zn).__name__=["albero","js","TextCanonicalizer"],Zn.canonicalize=function(e,t){return Zn.basicLatinAlphabetToUpperCase(Zn.hiraganaToKatakana(t(Zn.eraseInvisible(e))))},Zn.canonicalizeForRoman=function(e,t){return Zn.basicLatinAlphabetToUpperCase(Zn.katakanaToRoman(Zn.hiraganaToKatakana(t(Zn.eraseInvisible(e)))))},Zn.basicLatinAlphabetToUpperCase=function(e){return e.toUpperCase()},Zn.hiraganaToKatakana=function(e){for(var t=0,n="",i=0,r=e.length;i<r;){var a=i++,o=Ee.cca(e,a);o>=Zn.HIRAGANA_SMALL_A&&o<=Zn.HIRAGANA_NN&&(n+=e.substring(t,a),n+=String.fromCharCode(o+(Zn.KATAKANA_SMALL_A-Zn.HIRAGANA_SMALL_A)),t=a+1)}return n+=e.substring(t,e.length)},Zn.katakanaToRoman=function(e){return(new Yn).convert(e)},Zn.normalize=function(e){return new $n(null).normalize(e)},Zn.assureNormalize=function(e){e(Zn.normalize)},Zn.eraseInvisible=function(e){var t=new RegExp("[\\u0000-\\u0020]","g".split("u").join(""));return e.replace(t,"")};var $n=function(e){this.beforeTask=null,this.beforeTask=e};(n["albero.js.Normalizer"]=$n).__name__=["albero","js","Normalizer"],$n.prototype={normalize:function(e){try{return null!=this.beforeTask&&this.beforeTask(),e.normalize("NFKC")}catch(e){return e instanceof gr&&(e=e.val),Qn._e("["+Ee.dateStr(new Date)+"] ","invalid character:",e,"","",""),qn.localize("TextCanonicalizer.invalid")}},__class__:$n};var ei=function(e){this.ws=new WebSocket(e),Zr.websocketsbinary&&(this.ws.binaryType="arraybuffer"),this.ws.onopen=Lr(this,this.onOpen),this.ws.onmessage=Lr(this,this.onMessage),this.ws.onerror=Lr(this,this.onError),this.ws.onclose=Lr(this,this.onClose)};(n["albero.js.WebSocket"]=ei).__name__=["albero","js","WebSocket"],ei.prototype={onOpen:function(e){Qn._i("["+Ee.dateStr(new Date)+"] ","WebSocket opened.","","","",""),null!=this.onopen&&this.onopen()},onMessage:function(e){if(null!=this.onmessage){var t=null;t=Zr.websocketsbinary?sr.ofData(new ta(e.data)):Kn.decode(e.data),this.onmessage(t)}},onPong:function(e){null!=this.onpong&&this.onpong(e)},onError:function(e){Qn._e("["+Ee.dateStr(new Date)+"] ","WebSocket error. event:",e,"","",""),null!=this.onerror&&this.onerror()},onClose:function(e){var t=e.code,n=e.reason,i=e.wasClean;Qn._i("["+Ee.dateStr(new Date)+"] ","WebSocket closed. event:%s reason:%s wasClean:%s",t,n,i,""),null!=this.onclose&&this.onclose(e.code,e.reason,e.wasClean)},close:function(){this.ws.close()},send:function(e){Zr.websocketsbinary?this.ws.send(new ta(e.b.bufferValue).buffer):this.ws.send(Kn.encode(e))},ping:function(e){this.send(new sr(new ea(0)))},isClosed:function(){return null==this.ws||3==this.ws.readyState},__class__:ei};var ti=function(){};(n["puremvc.interfaces.IProxy"]=ti).__name__=["puremvc","interfaces","IProxy"],ti.prototype={__class__:ti};var ni=function(){};(n["albero.proxy.AccessTokenResolverProxy"]=ni).__name__=["albero","proxy","AccessTokenResolverProxy"],ni.__interfaces__=[ti],ni.prototype={__class__:ni};var ii=function(){};(n["albero.proxy.AccessTokenResolverProxyFactory"]=ii).__name__=["albero","proxy","AccessTokenResolverProxyFactory"],ii.newInstance=function(){return new ai("accessTokenResolver")};var ri=function(e,t){C.call(this),this.proxyName=null!=e?e:ri.NAME,null!=t&&this.setData(t)};(n["puremvc.patterns.proxy.Proxy"]=ri).__name__=["puremvc","patterns","proxy","Proxy"],ri.__interfaces__=[ti],ri.__super__=C,ri.prototype=i(C.prototype,{getProxyName:function(){return this.proxyName},setData:function(e){this.data=e},getData:function(){return this.data},onRegister:function(){},onRemove:function(){},__class__:ri});var ai=function(e){ri.call(this,e)};(n["albero.proxy.AccessTokenResolverProxyForDirectJs"]=ai).__name__=["albero","proxy","AccessTokenResolverProxyForDirectJs"],ai.__interfaces__=[ni],ai.__super__=ri,ai.prototype=i(ri.prototype,{asyncGetAccessToken:function(e,t){var n=this.settings.getAccessToken();if(null==n){var i=null!=Br.account?Br.account.split(":"):null;null!=i&&2==i.length&&this.api.createAccessToken(i[0],i[1],t)}else t(n)},__class__:ai});var oi=function(){ri.call(this,"broadcast")};(n["albero.proxy.AlberoBroadcastProxy"]=oi).__name__=["albero","proxy","AlberoBroadcastProxy"],oi.__super__=ri,oi.prototype=i(ri.prototype,{handleNotification:function(n,e,i){var r=this;switch(n){case"notify_add_account_control_request":var t=new Oe(e);this.dataStore.setAccountControlRequest(t),this.sendNotification(n,t),i();break;case"notify_add_acquaintance":var a=this.dataFactory.newAcquaintance(e[1]);this.sendNotification(n,a),i();break;case"notify_add_domain_invite":var o=new nt(e);this.dataStore.setDomainInvite(o),this.sendNotification(n,o),i();break;case"notify_add_favorite_talk":var s=new ut(e);this.updateTalkStatusByFavoriteTalkEvent(s),this.sendNotification(n,s),i();break;case"notify_add_friend":var l=this.dataFactory.newFriend(e[1]);this.sendNotification(n,l),i();break;case"notify_add_talkers":var u=new an(e);null==this.dataStore.getTalk(u.id)&&this.sendNotification("notify_add_talkers_including_me",u),this.dataStore.setTalk(u),this.sendNotification(n,u),i();break;case"notify_close_conference":var c=new Le(e);this.conferenceStore.removeConference(c),this.updateTalkStatusByConferenceClosedEvent(c),this.sendNotification(n,c),i();break;case"notify_conference_participant_join":var _,h=e[3],d=e[4],f=this.dataStore;if(null!=f.me){var m=f.me.id;_=null!=m&&null!=d&&m.high==d.high&&m.low==d.low}else _=!1;_&&this.dataStore.addReactedConfereceId(h),this.sendNotification(n,e),i();break;case"notify_conference_participant_reject":var p=e[3];this.dataStore.addReactedConfereceId(p),this.sendNotification(n,e),i();break;case"notify_create_announcement":var g=new Me(e);this.keywordWatcher.onAnnouncementCreated(g),this.sendNotification("notify_update_announcement_status",this.newAnnouncementStatus(g)),this.sendNotification(n,g),i();break;case"notify_create_message":var v=new St(e);this.messageStore.setMessage(v),this.keywordWatcher.onMessageCreated(v);var y=this.newTalkStatusByMessage(v);switch(null!=y&&this.sendNotification("notify_update_local_talk_status",y),v.type[1]){case 0:var S=v.content,w=null;switch(S.type){case"delete_talker":w=S.deleted_user_id;break;case"hide_pair_talk":w=S.user_id}if(null==w)return this.sendNotification(n,v),void i();for(var T=v.talkId,I=this.dataStore.getQuestions(T,w),E=0;E<I.length;){var A=I[E];++E,A.closed=!0,this.sendNotification("notify_update_question",A)}this.sendNotification(n,v),i();break;case 4:if(null!=v.content.file_id){var b=[ct.fromMessageAndFile(v,v.content)];this.fileInfoStore.setMessageFileInfos(v.id,b),Ae.iter(b,function(e){r.fileInfoStore.setTalkFileInfo(e,!1),r.sendNotification("notify_create_attachment",e)})}this.sendNotification(n,v),i();break;case 5:var N=v,k=Ne.asArray(v.content.files).map(function(e){return ct.fromMessageAndFile(N,e)});this.fileInfoStore.setMessageFileInfos(v.id,k),Ae.iter(k,function(e){r.fileInfoStore.setTalkFileInfo(e,!1),r.sendNotification("notify_create_attachment",e)}),this.sendNotification(n,v),i();break;case 11:case 13:case 15:Ji.delay(function(){var e=r.dataStore.getTalk(v.talkId);if(null!=e){var t=r.dataStore.setQuestion(Bt.fromMessageAndTalk(v,e));r.sendNotification("notify_update_question",t)}r.sendNotification(n,v),i()},500);break;case 12:case 14:case 16:case 17:case 18:case 19:Ji.delay(function(){var e=v.content.in_reply_to;if(null!=r.dataStore.getTalk(v.talkId)&&null!=r.dataStore.getQuestion(e)){var t=De.Question(e,function(e){r.sendNotification(n,v),i()});r.sendNotification("ReloadData",t)}else r.sendNotification(n,v),i()},500);break;default:this.sendNotification(n,v),i()}break;case"notify_create_note":var D=new jn(e);this.sendNotification(n,D),i();break;case"notify_create_group_talk":case"notify_create_pair_talk":var C=new an(e);this.dataStore.setTalk(C),this.newTalkStatusByTalk(C),this.sendNotification(n,C),i();break;case"notify_delete_account_control_request":var R=be.fromIntOrInt64(e);this.dataStore.removeAccountControlRequest(R),this.sendNotification(n,R),i();break;case"notify_delete_acquaintance":this.dataStore.removeAcquaintance(e[0],e[1]),this.sendNotification(n,e),i();break;case"notify_delete_announcement":var O=e[0],M=e[1],x=this.dataStore.getAnnouncementStatus(O);if(null!=x){var U;if(xe.isUnread(x,M)&&(x.unreadCount-=1,x.unreadCount<0&&(x.unreadCount=0)),null!=x.maxAnnouncementId){var P=x.maxAnnouncementId;U=null!=P&&null!=M&&P.high==M.high&&P.low==M.low}else U=!1;U&&null!=x.maxAnnouncement&&(x.maxAnnouncement.type=wt.deleted,x.maxAnnouncement.content=""),this.dataStore.setAnnouncementStatus(x)}this.sendNotification(n,e),i();break;case"notify_delete_attachment":var F=new _t(e);this.messageStore.onFileDeleted(F),this.fileInfoStore.onFileDeleted(F),this.sendNotification(n,F),i();break;case"notify_delete_domain_invite":var L=e;this.dataStore.removeDomainInvite(L),this.sendNotification(n,L),i();break;case"notify_delete_favorite_talk":var B=new ut(e);this.updateTalkStatusByFavoriteTalkEvent(B),this.sendNotification(n,B),i();break;case"notify_delete_friend":this.dataStore.removeFriend(e[0],e[1]),this.sendNotification(n,e),i();break;case"notify_delete_message":var H=new Et(e);ke.foreach(this.messageStore.getMessage(H.messageId),function(e){e.type=wt.deleted,e.content=""});var z=this.updateTalkStatusOnMessageDelete(H);null!=z&&this.sendNotification("notify_update_local_talk_status",z),this.sendNotification(n,H),i();break;case"notify_delete_note":var G=new Pn(e);this.dataStore.setNote(G,null),this.sendNotification(n,G),i();break;case"notify_delete_talk":var j=e;this.dataStore.removeTalk(j),this.dataStore.removeTalkStatus(j),this.conferenceStore.removeConferencesOnLeaveTalk(j),this.sendNotification("brand_badge_changed"),this.sendNotification(n,e),i();break;case"notify_disable_push_notification":var K=new dn(e);this.updateTalkStatusByTalkPushNotificationEvent(!1,K),this.sendNotification(n,K),i();break;case"notify_enable_push_notification":var Y=new dn(e);this.updateTalkStatusByTalkPushNotificationEvent(!0,Y),this.sendNotification(n,Y),i();break;case"notify_join_account_control_group":var V=new Ce(e);this.dataStore.setAccountControlGroup(V),this.dataStore.removeAccountControlRequests(),this.sendNotification("brand_badge_changed"),this.sendNotification(n,V),i();break;case"notify_join_domain":var W=this.dataStore.setDomainIfLatest(new qe(e));qe.isAllowReadAnnouncement(W)&&Ji.delay(function(){r.api.getAnnouncementStatus(W.id)},500),this.sendNotification(n,[null,W]),i();break;case"notify_leave_account_control_group":var q=e;this.dataStore.removeAccountControlGroup(q),this.sendNotification(n,q),i();break;case"notify_leave_domain":var Q=e;this.dataStore.removeDomain(Q),this.conferenceStore.removeConferencesOnLeaveDomain(Q),this.sendNotification(n,Q),i();break;case"notify_open_conference":var J=this.dataFactory.newConference(e);this.sendNotification(n,J),i();break;case"notify_update_account_control_group_partially":var X=new Re(e);this.dataStore.updateAccountControlGroup(X),this.sendNotification(n,X),i();break;case"notify_update_announcement_status":var Z=new Ue(e),$=this.dataStore.getAnnouncementStatus(Z.domainId);null==$&&($=this.assureAnnouncementStatus(Z.domainId)),$.updateReadWithStatusUpdate(Z),this.dataStore.setAnnouncementStatus($),this.sendNotification(n,Z),i();break;case"notify_update_department_tree":var ee=e;this.departmentStore.clearDomainDepartment(ee),this.api.getDepartmentTree(ee),this.sendNotification(n,ee),i();break;case"notify_update_department_users":var te=e;this.departmentStore.clearDomainDepartmentUsers(te),this.api.getUsers(te,this.dataStore.getFriendsOrAcquaintances(te).map(function(e){return e.id})),this.api.getMe(),this.sendNotification(n,te),i();break;case"notify_update_domain":var ne=new qe(e),ie=this.dataStore.getDomain(ne.id),re=this.dataStore.setDomainIfLatest(ne);if(null!=ie&&qe.isAllowReadAnnouncement(ie)&&!qe.isAllowReadAnnouncement(re)){this.dataStore.removeAnnouncementStatus(ie.id);var ae=new Ue;ae.domainId=re.id,this.sendNotification("notify_update_announcement_status",ae)}if(!qe.isAllowReadAnnouncement(ie)&&qe.isAllowReadAnnouncement(re)&&this.api.getAnnouncementStatus(re.id),qe.isChangedContractTreeEnabled(ie,re)&&!qe.isDepartmentEnabled(re)){var oe=re.id;this.departmentStore.clearDomainDepartment(oe),this.dataStore.clearUsersDepartments(oe)}this.sendNotification(n,[ie,re]),i();break;case"notify_update_domain_users":for(var se=e,le=0;le<se.length;){var ue=se[le];++le;var ce=this.dataStore.getDomain(ue);null!=ce&&ce.setting.contactTreeEnabled&&this.departmentStore.clearDomainDepartmentUsers(ue)}this.sendNotification(n,e),i();break;case"notify_delete_talker":case"notify_update_group_talk":var _e=new an(e);this.dataStore.setTalk(_e),this.sendNotification(n,_e),i();break;case"notify_update_note_partially":if(null==e)return void Qn._e("["+Ee.dateStr(new Date)+"] ","notePartiallyUpdate is null.","","","","");if(null==e.note_id)return void Qn._e("["+Ee.dateStr(new Date)+"] ","noteId is null.","","","","");var he=new Pn(e.note_id),de=this.dataStore.getNote(he);if(null!=de&&null!=e.note_revision_summary&&de.compareRevision(e.note_revision_summary.revision)<=-1&&this.dataStore.setNote(he,null),null==e.note_revision_summary&&null==e.setting)return void Qn._e("["+Ee.dateStr(new Date)+"] ","noteSetting and noteRevisionSummary are null.","","","","");null!=e.setting&&this.sendNotification("notify_update_note_for_setting",new Fn(e)),null!=e.note_revision_summary&&this.sendNotification("notify_update_note_for_revision",new Ln(e)),i();break;case"notify_update_read_statuses":var fe=new bt(e),me=this.updateTalkStatus(fe);null!=me&&this.sendNotification("notify_update_local_talk_status",me),this.sendNotification(n,fe),i();break;case"notify_update_talk_status":var pe=new vn(e),ge=this.dataStore.getTalkStatus(pe.talkId);null!=ge&&ge.update(pe)&&(this.dataStore.setTalkStatus(ge),this.sendNotification("notify_update_local_talk_status",ge)),this.sendNotification(n,pe),i();break;case"notify_update_user":if(e instanceof Array&&null==e.__enum__){var ve=this.dataFactory.newDomainUser(e[1]);this.dataStore.setUserIfLatest(null,ve)}else{var ye=new yt(e);Qn._d("["+Ee.dateStr(new Date)+"] ","Current user updated. user:",ye,"","","");var Se=this.dataStore;Se.me=ye;for(var we=0,Te=Se.getDomains();we<Te.length;){var Ie=Te[we];++we,Se.sendNotification("notify_update_user",Se.me.toDomainUser(Ie.id))}Se.sendNotification("current_user_changed",ye),Se.storage.setDirtyFlag()}i();break;default:this.sendNotification(n,e),i()}},updateTalkStatusByFavoriteTalkEvent:function(e){var t=this.dataStore.getTalkStatus(e.talkId);if(null==t){var n=this.dataStore.getTalk(e.talkId);if(null==n)return void Qn._e("["+Ee.dateStr(new Date)+"] ","talk not found on change favorite talk.","","","","");(t=new pn).id=e.talkId,t.talkOrderingTimestamp=n.updatedAt}(null==t.favoriteVersion||e.favoriteVersion>t.favoriteVersion)&&(t.favoriteVersion=e.favoriteVersion,t.orderInFavorites=e.orderInFavorites,this.dataStore.setTalkStatus(t))},updateTalkStatusByConferenceClosedEvent:function(e){var t=this.dataStore.getTalkStatus(e.talkId);if(null!=t&&null!=t.maxMessage){var n=t.maxMessage.id,i=e.messageId;null!=n&&null!=i&&n.high==i.high&&n.low==i.low&&(t.maxMessage.content.closed=!0,this.dataStore.setTalkStatus(t))}},updateTalkStatusByTalkPushNotificationEvent:function(e,t){var n=this.dataStore.getTalkStatus(t.talkId);if(null==n){var i=this.dataStore.getTalk(t.talkId);if(null==i)return void Qn._e("["+Ee.dateStr(new Date)+"] ","talk not found on change favorite talk.","","","","");(n=new pn).id=t.talkId,n.talkOrderingTimestamp=i.updatedAt}(null==n.pushNotificationSetting||t.version>n.pushNotificationSetting.version)&&(n.pushNotificationSetting=Lt.createWithParams(e,t.version),this.dataStore.setTalkStatus(n))},newTalkStatusByTalk:function(e){var t=this.dataStore.getTalkStatus(e.id);return null==t&&((t=new pn).id=e.id),null==t.talkOrderingTimestamp&&(t.talkOrderingTimestamp=e.updatedAt),this.dataStore.setTalkStatus(t),t},newTalkStatusByMessage:function(e){var t=this.dataStore.getTalkStatus(e.talkId);if(null==t&&((t=new pn).id=e.talkId),gn.isNewMax(t,e.id)&&(t.maxMessageId=e.id,t.maxMessage=e),e.isUnreadCountTarget){var n,i=this.dataStore,r=e.userId;if(null!=i.me){var a=i.me.id;n=null!=a&&null!=r&&a.high==r.high&&a.low==r.low}else n=!1;n||t.unreadCount++,t.talkOrderingTimestamp=e.createdAt}return this.dataStore.setTalkStatus(t),t},updateTalkStatusOnMessageDelete:function(e){var t=this.dataStore.getTalkStatus(e.talkId);return null!=t&&(gn.isUnread(t,e.messageId)&&(t.unreadCount-=1,t.unreadCount<0&&(t.unreadCount=0)),gn.isMax(t,e.messageId)&&null!=t.maxMessage&&(t.maxMessage.type=wt.deleted),this.dataStore.setTalkStatus(t)),t},updateTalkStatus:function(e){var i=this;if(!Ae.exists(e.readUserIds,function(e){var t=i.dataStore;if(null!=t.me){var n=t.me.id;return null!=n&&null!=e&&n.high==e.high&&n.low==e.low}return!1}))return null;var t=this.dataStore.getTalkStatus(e.talkId);if(null==t)return Qn._e("["+Ee.dateStr(new Date)+"] ","talkStatus is not found.","","","",""),null;for(var n=e.messageIds[0],r=0,a=e.messageIds;r<a.length;){var o=a[r];if(++r,gn.isUnread(t,o)){var s=n.high-o.high|0;s=0!=s?s:Wi.ucompare(n.low,o.low),(n.high<0?o.high<0?s:-1:0<=o.high?s:1)<0&&(n=o),be.notContains(e.messageIdsExcludingUnreadCountTargets,o)&&t.unreadCount--}}return gn.isUnread(t,n)&&(t.maxReadMessageId=n,this.dataStore.setTalkStatus(t)),t},newAnnouncementStatus:function(e){var t=this.dataStore.getAnnouncementStatus(e.domainId);return null==t&&((t=new Ie).domainId=e.domainId),xe.isNewMax(t,e.id)&&(t.maxAnnouncementId=e.id,t.maxAnnouncement=e),null==t.unreadCount&&(t.unreadCount=0),t.unreadCount++,this.dataStore.setAnnouncementStatus(t),t},assureAnnouncementStatus:function(e){var t=this.dataStore.getAnnouncementStatus(e);return null==t&&(t=this.dataFactory.newAnnouncementStatusForDomain(e)),t},__class__:oi});var si=function(){ri.call(this,"api")};(n["albero.proxy.AlberoServiceProxy"]=si).__name__=["albero","proxy","AlberoServiceProxy"],si.__super__=ri,si.prototype=i(ri.prototype,{getOSString:function(){return"bot"},createAccessToken:function(e,t,n){var i,r,a=this,o=this.settings.getOs(),s=this.settings.getIDFV(),l=e.split("$");-1==e.indexOf("@")&&2==l.length?(i="create_access_token_by_id",r=[l[1],l[0],t,s,o,""]):(i="create_access_token",r=[e,t,s,o,""]),this.apiCaller.callImmediately(i,r,function(e){a.settings.setAccessToken(e),n(e)},function(e){a.sendNotification("Url",ge.FORWARD(E.error))})},authorizeDevice:function(e,t){var n=this.settings.getIDFV();this.apiCaller.call("authorize_device",[e,n],function(e){t()})},createSession:function(e,i){var r=this,t=[e,"1.104"];this.apiCaller.callCreateSession(t,function(e){var t=new Zt(e),n=f.nowAsInt64();t.passwordExpiration.isExpired(n)?r.sendNotification("password_expiration_overed"):(t.passwordExpiration.needWarning(n,r.settings.getPasswordWarningSkipUntil())&&(r.settings.setPasswordWarningSkipUntil(f.oneDayAfterAsInt64()),r.sendNotification("password_expiration_warned")),i(t))},function(e){if(null!=e){if(401==e.code&&"expired password"==e.message)return void r.sendNotification("password_expiration_overed");if(401==e.code&&"deleted account"==e.message)return void r.sendNotification("SignOut");if(401==e.code&&"unauthorized device"==e.message)return void r.sendNotification("Device",B.AUTHORIZE);r.apiCaller.handleServerErrorDefault(e)}r.settings.clearAccessToken(),r.sendNotification("Url",ge.FORWARD(E.error))})},startNotification:function(){var t=this;this.apiCaller.call("start_notification",[],function(e){e||(t.dataStore.clear(!0),Qn._e("["+Ee.dateStr(new Date)+"] ","start_notification failed.","","","",""))})},resetNotification:function(e){this.apiCaller.call("reset_notification",[],e)},sendDomainNotifications:function(e){for(var t=0;t<e.length;){var n=e[t];++t,this.sendNotification("notify_update_domain",[null,n])}},sendAnnouncementStatusNotification:function(e){var t=new Ue;t.domainId=e.domainId,this.sendNotification("notify_update_announcement_status",t)},sendTalkNotification:function(e){var t=e.type==sn.PairTalk?"notify_create_pair_talk":"notify_create_group_talk";this.sendNotification(t,e)},sendTalkNotifications:function(e){Ae.iter(e,Lr(this,this.sendTalkNotification))},sendTalkStatusNotifications:function(e){for(var t=0;t<e.length;){var n=e[t];++t,this.sendNotification("notify_update_local_talk_status",n)}},deleteSession:function(){this.settings.clearSelectedStampTabId(),this.settings.clearDomainSelection(),this.settings.clearAccessToken(),this.apiCaller.restart()},updateUser:function(t,e,n,i,r){var o=this,a=function(e){o.sendNotification("update_user_errored",o.dataStore.me)},s=function(e){o.apiCaller.call("update_user",[t,e,i,r],function(e){var t=o.dataStore,n=new yt(e);t.me=n;for(var i=0,r=t.getDomains();i<r.length;){var a=r[i];++i,t.sendNotification("notify_update_user",t.me.toDomainUser(a.id))}t.sendNotification("current_user_changed",n),t.storage.setDirtyFlag(),o.sendNotification("update_user_responsed",o.dataStore.me)},function(e){a(),o.apiCaller.handleServerErrorDefault(e)})};null!=n?s(n):null!=e?this.uploadFile(e,null,wn.PROFILE_IMAGE,function(e){s(e.get_url)},a):s()},updateProfile:function(e){var o=this,t=Ft.convertToApiParams(e);this.apiCaller.call("update_profile",[t],function(e){var t=o.dataStore,n=new yt(e);t.me=n;for(var i=0,r=t.getDomains();i<r.length;){var a=r[i];++i,t.sendNotification("notify_update_user",t.me.toDomainUser(a.id))}t.sendNotification("current_user_changed",n),t.storage.setDirtyFlag(),o.sendNotification("update_profile_responsed",o.dataStore.me)},function(e){o.sendNotification("update_profile_errored",o.dataStore.me),o.apiCaller.handleServerErrorDefault(e)})},addFriend:function(e){var t=this.settings.getSelectedDomainId();this.apiCaller.call("add_friend",[t,e.id])},deleteFriend:function(e){var t=this.settings.getSelectedDomainId();this.apiCaller.call("delete_friend",[t,e.id])},getFriends:function(r){var a=this;this.apiCaller.call("get_friends",[],function(e){for(var t=0;t<e.length;){var n=e[t];++t;n[0];var i=n[1];Ae.iter(i,function(e){var t=a.dataFactory.newFriend(e);a.sendNotification("notify_add_friend",t)})}null!=r&&r()})},getAcquaintances:function(r){var a=this;this.apiCaller.call("get_acquaintances",[],function(e){for(var t=0;t<e.length;){var n=e[t];++t;var i=n[1];Ae.iter(i,function(e){var t=a.dataFactory.newAcquaintance(e);a.sendNotification("notify_add_acquaintance",t)})}null!=r&&r()})},getAllUsers:function(e){var n=this,i=this.settings.getSelectedDomainId();this.apiCaller.call("get_domain_users",[i,14,40,e],function(e){var t=Ne.asArray(e.contents).map(Lr(Pr=n.dataFactory,Pr.newDomainUser));n.dataStore.setUsersIfLatest(i,t),n.sendNotification("get_domain_users_responsed",[i,e.marker,e.next_marker,t])})},getUsers:function(e,t){this._getUsers(e,t.slice())},_getUsers:function(n,i){var r=this,e=i.splice(0,100);0!=e.length&&this.apiCaller.call("get_users",[n,e],function(e){var t=e.map(Lr(Pr=r.dataFactory,Pr.newDomainUser));r.dataStore.setUsersIfLatest(n,t),r.sendNotification("get_users_responsed",[n,t]),r._getUsers(n,i)})},getProfile:function(e,t){var n=this;this.apiCaller.call("get_profile",[e,t],function(e){var t=new Mt(e);n.sendNotification("get_profile_responsed",t)},function(e){403==e.code&&"invalid user"==e.message?null!=e.detail&&null!=e.detail.invalid_user_ids&&n.sendNotification("get_profile_errored",e.detail.invalid_user_ids):n.apiCaller.handleServerErrorDefault(e)})},searchDomainUsers:function(n,e){var i=this,r=this.settings.getSelectedDomainId();this.apiCaller.call("search_domain_users",[r,n,14,40,e],function(e){var t=Ne.asArray(e.contents).map(Lr(Pr=i.dataFactory,Pr.newDomainUser));i.dataStore.setUsersIfLatest(r,t),i.sendNotification("get_domain_users_responsed",[r,e.marker,e.next_marker,t,n])})},getDepartmentTree:function(n){var i=this;this.apiCaller.call("get_department_tree",[n],function(e){Ae.iter(new Ye(e).departments,function(e){e.isRoot()&&i.departmentStore.setRootDepartmentId(n,e.id),i.departmentStore.setDepartment(e)});var t=i.settings.getSelectedDepartmentId(n);null!=t&&null==i.departmentStore.getDepartment(t)&&i.settings.setSelectedDepartmentId(n,null),i.sendNotification("get_department_tree_responsed",[n])},function(e){403!=e.code||"forbidden"!=e.message?i.apiCaller.handleServerErrorDefault(e):i.sendNotification("get_department_tree_canceled",[n])})},getDepartmentUsers:function(e,t){this._getDepartmentUsers(e,t,null)},getDepartmentAllUsers:function(s){var l=this,e=this.departmentStore.getDepartment(s);if(null==e||null==e.userIds){var u=new or,c=null;c=function(e,t,n){if(Ae.iter(n,function(e){var t=e.id,n="_"+t.high+"_"+t.low,i=e.id;null!=$r[n]?u.setReserved(n,i):u.h[n]=i}),null==t){for(var i=[],r=u.arrayKeys(),a=new ar(u,r);a.hasNext();){var o=a.next();i.push(o)}i.length;l.departmentStore.setDepartmentUsers(s,i),l.sendNotification("department_user_ids_prepared",i)}else l._getDepartmentUsers(s,t,c)},this._getDepartmentUsers(s,null,c)}else this.sendNotification("department_user_ids_prepared",e.userIds)},_getDepartmentUsers:function(n,e,i){var r=this,a=this.settings.getSelectedDomainId(),t=this.departmentStore.getDepartment(n),o=null!=t&&null!=t.childrenIds;this.apiCaller.call("get_department_users",[a,n,o,100,e],function(e){var t=Ne.asArray(e.contents).map(Lr(Pr=r.dataFactory,Pr.newDomainUser));r.dataStore.setUsersIfLatest(a,t),r.sendNotification("get_department_users_responsed",[a,e.marker,e.next_marker,t,n]),null!=i&&i(e.marker,e.next_marker,t)},function(e){403!=e.code||"forbidden"!=e.message?r.apiCaller.handleServerErrorDefault(e):r.sendNotification("get_department_users_canceled",[a])})},getMe:function(){var o=this;this.apiCaller.call("get_me",[],function(e){var t=o.dataStore,n=new yt(e);t.me=n;for(var i=0,r=t.getDomains();i<r.length;){var a=r[i];++i,t.sendNotification("notify_update_user",t.me.toDomainUser(a.id))}t.sendNotification("current_user_changed",n),t.storage.setDirtyFlag(),o.sendNotification("get_me_responsed")},function(e){o.apiCaller.handleServerErrorDefault(e)})},getDepartmentUserCount:function(e,t){var n=t.filter(Lr(Pr=this.departmentStore,Pr.needUserCountLoading));this._getDepartmentUserCount(e,n)},_getDepartmentUserCount:function(n,i){var r=this,a=i.splice(0,100);0!=a.length&&(Ae.iter(a,function(e){r.departmentStore.setUserCountLoading(e,!0)}),this.apiCaller.call("get_department_user_count",[n,a],function(e){var t=new We(e);Ae.iter(t.departments,Lr(Pr=r.departmentStore,Pr.setDepartmentUserCount)),r.sendNotification("get_department_user_count_responsed",{completed:a,remaining:i}),r._getDepartmentUserCount(n,i)},function(e){Ae.iter(a,function(e){r.departmentStore.setUserCountLoading(e,!1)}),r.apiCaller.handleServerErrorDefault(e)}))},getDomains:function(n){var i=this;this.apiCaller.call("get_domains",[],function(e){Ae.iter(e,Lr(Pr=i.dataFactory,Pr.newDomain));var t=i.dataStore.getDomains();i.sendDomainNotifications(t),null!=n&&n()})},leaveDomain:function(e){var t=this;this.apiCaller.call("leave_domain",[e.id],function(e){t.dataStore.removeDomain(e)})},getDomainInvites:function(t){var e;e=null==t?function(e){}:function(e){t()},this._getDomainInvites(e)},_getDomainInvites:function(n){var i=this;this.apiCaller.call("get_domain_invites",[],function(e){var t=e.map(Lr(Pr=i.dataFactory,Pr.newDomainInvite));Ae.iter(t,function(e){i.sendNotification("notify_add_domain_invite",e)}),n(t)})},acceptDomainInvite:function(e){this.apiCaller.callApiReliable("accept_domain_invite",[e],function(e){})},deleteDomainInvite:function(e){this.apiCaller.callApiReliable("delete_domain_invite",[e],function(e){})},getAccountControlRequests:function(t){var n=this;this.apiCaller.call("get_account_control_requests",[],function(e){Ae.iter(e.map(Lr(Pr=n.dataFactory,Pr.newAccountControlRequest)),function(e){n.sendNotification("notify_add_account_control_request",e)}),null!=t&&t()})},acceptAccountControlRequest:function(e){if(null!=e){var t=this.dataStore.getAccountControlRequest(e);null!=t&&this.apiCaller.call("accept_account_control_request",[t.id,t.version],function(e){})}},rejectAccountControlRequest:function(e){if(null!=e){var t=this.dataStore.getAccountControlRequest(e);null!=t&&this.apiCaller.call("reject_account_control_request",[t.id,t.version],function(e){})}},getJoinedAccountControlGroup:function(t){var n=this;this.apiCaller.call("get_joined_account_control_group",[],function(e){Ae.iter(e.map(Lr(Pr=n.dataFactory,Pr.newAccountControlGroup)),function(e){n.sendNotification("notify_join_account_control_group",e)}),null!=t&&t()})},getTalks:function(i){var r=this;this.apiCaller.call("get_talks",[],function(e){Ae.iter(e,Lr(Pr=r.dataFactory,Pr.newTalk)),r.apiCaller.call("get_talk_statuses",[],function(e){Ae.iter(e,Lr(Pr=r.dataFactory,Pr.newTalkStatus));var t=r.dataStore.getTalks();r.sendTalkNotifications(t);var n=r.dataStore.getTalkStatuses();r.sendTalkStatusNotifications(n),null!=i&&i()})})},getReadStatus:function(e,t){var n=this;this.apiCaller.call("get_read_status",[e,t],function(e){n.sendNotification("notify_get_message_status",new At(e))})},createGroupTalk:function(e,t,n,i){var o=this;null==e&&(e=this.settings.getSelectedDomainId()),0!=t.length&&this.apiCaller.call("create_group_talk",[e,t,n.allowDisplayPastMessages,!0],function(e){var t=o.dataFactory.newTalk(e);o.sendNotification("notify_create_group_talk",t),o.sendNotification("SelectTalk",se.SelectTalk(i,t))},function(e){if(null!=e&&500==e.code&&null!=e.detail&&"failure in adding some users"==e.message){var t=ki.toLocalError(gt.AddingSomeUsersFailure,e);o.sendNotification("error_occurred",t)}else if(null!=e&&502==e.code&&null!=e.detail&&"talks"==e.detail.limit_target){var n=e.detail.limit_max,i=ki.toLocalError(gt.TalksCountOvered(n),e);o.sendNotification("error_occurred",i)}else if(null!=e&&502==e.code&&null!=e.detail&&"talkers"==e.detail.limit_target){var r=e.detail.limit_max,a=ki.toLocalError(gt.TalkersCountOvered(r),e);o.sendNotification("error_occurred",a)}else o.apiCaller.handleServerErrorDefault(e)})},createPairTalk:function(e,t,n){var i=this;null==e&&(e=this.settings.getSelectedDomainId()),this.apiCaller.call("create_pair_talk",[e,t],function(e){var t=i.dataFactory.newTalk(e);i.sendNotification("notify_create_pair_talk",t),i.sendNotification("SelectTalk",se.SelectTalk(n,t))},function(e){if(null!=e&&502==e.code&&null!=e.detail&&"talks"==e.detail.limit_target){var t=e.detail.limit_max,n=ki.toLocalError(gt.TalksCountOvered(t),e);i.sendNotification("error_occurred",n)}else i.apiCaller.handleServerErrorDefault(e)})},updateGroupTalk:function(e,t,n,i){var r=this;this.apiCaller.call("update_group_talk",[e.id,t,n,i],function(e){var t=r.dataFactory.newTalk(e);r.sendNotification("notify_update_group_talk",t)},function(e){r.sendNotification("notify_update_group_talk_ERRORED"),r.apiCaller.handleServerErrorDefault(e)})},addTalkers:function(e,t,n){var r=this;if(e.type!=sn.PairTalk)0!=t.length&&this.apiCaller.call("add_talkers",[e.id,t,!0],function(e){var t=r.dataFactory.newTalk(e);r.sendNotification("notify_add_talkers",t)},function(e){if(null!=e&&500==e.code&&null!=e.detail&&"failure in adding some users"==e.message){var t=ki.toLocalError(gt.AddingSomeUsersFailure,e);r.sendNotification("error_occurred",t)}else if(null!=e&&502==e.code&&null!=e.detail&&"talkers"==e.detail.limit_target){var n=e.detail.limit_max,i=ki.toLocalError(gt.TalkersCountOvered(n),e);r.sendNotification("error_occurred",i)}else r.apiCaller.handleServerErrorDefault(e)});else{var i=e.userIds.concat(t);be.remove(i,this.dataStore.me.id);var a=this.settings.getSelectedDomainId();this.createGroupTalk(a,i,on.createDefault(),n)}},deleteTalker:function(t,n){var i,r=this,a=null,o=null,e=this.dataStore;if(null!=e.me){var s=e.me.id;i=null!=s&&null!=n&&s.high==n.high&&s.low==n.low}else i=!1;i&&(a=t,o=this.dataStore.getTalkStatus(t.id),this.dataStore.removeTalk(t.id),this.dataStore.removeTalkStatus(t.id)),this.apiCaller.call("delete_talker",[t.id,n],function(e){be.remove(t.userIds,n),i||r.dataStore.setTalk(t),i&&r.conferenceStore.removeConferencesOnLeaveTalk(t.id),r.sendNotification("notify_delete_talker",t)},function(e){null!=a&&r.dataStore.setTalk(a),null!=o&&r.dataStore.setTalkStatus(o),r.sendNotification("error_occurred",e)})},getMessages:function(n,e,i,r){var a=this;e=null==e?{sinceId:null,maxId:null}:e,null==i&&(i=Nt.desc);var t=this.apiCaller,o=e.sinceId,s=e.maxId,l=kt.orderToInt(i);t.call("get_messages",[n,20,o,s,l],function(e){var t=e.map(Lr(Pr=a.dataFactory,Pr.newMessage));a.sendNotification("notify_get_messages",{talkId:n,messages:t,sortOrder:i,callerKey:r})})},createMessage:function(e,t,n){var i=this,r=this.dataFactory.newDummyMessage(e,t,n);if(null==this.dataStore.getTalk(e)){var a={code:400,message:"invalid talk_id (deleted talk)"};return Qn._w("["+Ee.dateStr(new Date)+"] ","WARNING method: create_message",a,"","",""),void this.sendNotification("create_message_fail",[a,r])}this.sendNotification("create_message_start",r),this.apiCaller.call("create_message",[e,St.enumIndex(t),n],function(e){i.fileInfoStore.removeMessageFileInfos(r.id);var t=i.dataFactory.newMessage(e);i.sendNotification("create_message_complete",[t,r.id])},function(e){if(i.sendNotification("create_message_fail",[e,r]),null!=e&&409==e.code){var t=ki.toLocalError(gt.SendingMessageConflicted,e);i.sendNotification("error_occurred",t)}else i.sendNotification("error_occurred",e)})},forwardMessages:function(n,i,r){null==r&&(r=0);var a=this;if(!(r>=i.length)){var e=i[r],t=n.id,o=this.dataFactory.newDummyMessage(t,e.type,e.content);this.sendNotification("create_message_start",o),this.apiCaller.call("create_message",[t,St.enumIndex(e.type),e.content],function(e){var t=a.dataFactory.newMessage(e);a.sendNotification("create_message_complete",[t,o.id]),a.forwardMessages(n,i,r+1)},function(e){if(a.sendNotification("create_message_fail",[e,o]),null!=e&&409==e.code){var t=ki.toLocalError(gt.SendingMessageConflicted,e);a.sendNotification("error_occurred",t)}else a.sendNotification("error_occurred",e)})}},deleteMessage:function(n,i){var r=this;this.apiCaller.call("delete_message",[n,i],function(e){var t=new Et;t.talkId=n,t.messageId=i,r.sendNotification("notify_delete_message",t)},function(e){if(null!=e){if(403==e.code&&"frozen domain"==e.message)return void r.sendNotification("error_occurred",e);if(409==e.code&&"conflict"==e.message){var t=ki.toLocalError(gt.DeletingMessageConflicted,e);return void r.sendNotification("error_occurred",t)}r.sendNotification("error_occurred",e)}})},updateReadStatuses:function(r,a){var o=this;this.apiCaller.callApiReliable("update_read_statuses",[r,a],function(e){var t,n=o.dataStore.getTalkStatus(r);if(null!=n){var i=n.maxReadMessageId;t=null!=i&&null!=a&&i.high==a.high&&i.low==a.low}else t=!1;t&&o.sendNotification("notify_update_local_talk_status",n)},null,function(e){return 429==e.code&&"too many requests"==e.message?rr.Some(1e3*o.asInt(e.detail.retry_after)):rr.None})},upload:function(n,i,r){var a=this;Zn.assureNormalize(function(e){var t=a.dataFactory.newDummyFileMessage(i,r,e);a.prepareFileMessage(r,n,i,t,e,function(e){a.createMessageReliable(i,wt.file,e,t)},function(e){a.sendNotification("create_message_fail",[e,t])})})},uploadMulti:function(s,l,u,c){var _=this;Zn.assureNormalize(function(n){var i=_.dataFactory.newDummyMultipleFileMessage(l,u,c,n);_.sendNotification("create_message_start",i);var r=function(e){_.sendNotification("create_message_fail",[e,i])},a=[],o=null;o=function(t){if(t.hasNext()){var e=t.next();_.prepareFileMessage(e,s,l,null,n,function(e){a.push(e),o(t)},r)}else!function(){if(a.length==c.length){var e={files:a};null!=u&&0<u.length&&(e.text=u),_.createMessageReliable(l,wt.textMultipleFile,e,i)}}()};var e=Ee.iter(c);o(e)})},prepareFileMessage:function(r,e,t,n,a,o,s){var l=this;this.uploadThumbnail(r,e,t,null,function(i){l.uploadFile(r,e,wn.MESSAGE,function(e){var t=a(r.name),n=m.createFileInfoDynamic(r,t,i,e);o(n)},s)},s)},createMessageReliable:function(e,t,n,i){var r=this;this.apiCaller.callApiReliable("create_message",[e,St.enumIndex(t),n],function(e){var t=r.dataFactory.newMessage(e);r.sendNotification("create_message_complete",[t,i.id])},function(e){if(r.sendNotification("create_message_fail",[e,i]),null!=e&&409==e.code){var t=ki.toLocalError(gt.SendingMessageConflicted,e);r.sendNotification("error_occurred",t)}else r.sendNotification("error_occurred",e)},function(e){return 500==e.code&&"Internal Error (IllegalStateException)"==e.message?rr.Some(1e3):rr.None})},uploadThumbnail:function(e,i,t,r,a,o){var s=this,n=pi.getBlobFromUpdatableFile(e);this.fileService.createThumbnail(n,function(n){null!=r&&(ke.foreach(n,function(t){ke.foreach(s.fileInfoStore.getMessageFileInfos(r.id),function(e){e[0].setDummyThumbnail(t)})}),s.sendNotification("create_message_start",r)),ke.foreach(n,function(t){s.uploadFile(t.file,i,wn.THUMBNAIL,function(e){t.setAuth(e),a(n)},o)}),ke.isEmpty(n)&&a(rr.None)})},uploadFile:function(o,s,l,u,c){var _=this;Zn.assureNormalize(function(e){var t=e(o.name),n=_.apiCaller,i=o.type,r=o.size,a=Tn.getUseTypeInt(l);n.call("create_upload_auth",[t,i,r,s,a],function(e){var t=u,n=e;_.fileService.upload(e,o.type,o,function(){t(n)},c)},function(e){if(null!=e)if(502==e.code&&null!=e.detail){var t=e.detail.limit_max;if("file_size"==e.detail.limit_target){var n=ki.toLocalError(gt.UploadSizeOvered(t),e);_.sendNotification("error_occurred",n)}else if("storage_size"==e.detail.limit_target){var i=ki.toLocalError(gt.StorageSizeOvered(t),e);_.sendNotification("error_occurred",i)}}else _.sendNotification("error_occurred",e);c(e)})})},createDownloadAuth:function(e,t,n,i,r){var a=this;this.apiCaller.callApiReliable("create_download_auth",[e,t,n],function(e){i(new st(e))},function(e){r(e)},function(e){return 429==e.code&&"too many requests"==e.message?rr.Some(1e3*a.asInt(e.detail.retry_after)):rr.None})},deleteAttachment:function(e,t){this.apiCaller.call("delete_attachment",[e,t])},getAttachments:function(n,e){var i=this;null==e&&(e={sinceId:null,maxId:null}),this.apiCaller.call("get_attachments",[n,20,e.sinceId,e.maxId],function(e){var t=e.map(Lr(Pr=i.dataFactory,Pr.newFileInfo));i.sendNotification("get_file_responsed",{talkId:n,files:t})})},createAnnouncement:function(e,t,n){var i=this;if(null!=e||null!=(e=this.settings.getSelectedDomainId())){var r=this.dataFactory.newDummyMessage(null,t,n);this.sendNotification("create_announcement_start",r),this.apiCaller.call("create_announcement",[e,St.enumIndex(t),n],function(e){var t=i.dataFactory.newAnnouncement(e);i.sendNotification("create_announcement_complete",[t,r.id])},function(e){i.sendNotification("create_announcement_fail",r),i.sendNotification("error_occurred",e)})}},getAnnouncements:function(e,n,i){var r=this,a=this.settings.getSelectedDomainId();if(null!=a){e=null==e?{sinceId:null,maxId:null}:e;var t=this.apiCaller,o=e.sinceId,s=e.maxId,l=kt.orderToInt(n);t.call("get_announcements",[a,20,o,s,l],function(e){var t=e.map(Lr(Pr=r.dataFactory,Pr.newAnnouncement));r.sendNotification("notify_get_announcements",{domainId:a,announcements:t,sortOrder:n,callerKey:i})})}},getAnnouncementStatuses:function(r){var a=this;this.apiCaller.call("get_announcement_statuses",[],function(e){for(var t=0;t<e.length;){var n=e[t];++t;var i=a.dataFactory.newAnnouncementStatus(n);a.sendAnnouncementStatusNotification(i),null!=r&&r()}})},getAnnouncementStatus:function(e,n){var i=this;this.apiCaller.callApiReliable("get_announcement_status",[e],function(e){var t=i.dataFactory.newAnnouncementStatus(e);i.sendAnnouncementStatusNotification(t),null!=n&&n()},null,function(e){return 400==e.code&&"invalid domain_id"==e.message?rr.Some(1e3):rr.None})},updateAnnouncementReadStatus:function(r,a){var o=this;this.apiCaller.call("update_announcement_status",[r,a],function(e){var t,n=o.dataStore.getAnnouncementStatus(r);if(null!=n){var i=n.maxReadAnnouncementId;t=null!=i&&null!=a&&i.high==a.high&&i.low==a.low}else t=!1;t&&o.sendAnnouncementStatusNotification(n)})},getQuestions:function(e,n,i,t){var r=this,a=this.settings.getSelectedDomainId(),o=null;null!=e&&(a=e.domainId,o=e.id);var s=Bt.fromTypeToInt(n),l=ke.orNull(Bt.filterToOpBool(i));t=null==t?{sinceId:null,maxId:null}:t,this.apiCaller.call("get_actions",[a,o,s,l,20,t.sinceId,t.maxId],function(e){var t=e.map(Lr(Pr=r.dataFactory,Pr.newQuestion));r.sendNotification("get_questions_responsed",{domainId:a,talkId:o,questions:t,fromType:n,filter:i})})},getQuestion:function(e,n){var i=this;this.apiCaller.callApiReliable("get_action",[e],function(e){var t=i.dataFactory.newQuestion(e);i.sendNotification("notify_update_question",t),null!=n&&n(t)})},searchMessages:function(t,n,i,r){var a=this;this.searchService.prepareForSearching(t,i),this.apiCaller.call("search_messages",[t.domainId,t.talkId,t.getQueryText(),n,i],function(e){a.searchService.isRecentParams(t)&&a.searchService.isSearching()&&a.searchService.saveSearchMessagesResult(new Vt(e)),null!=r&&r()},function(e){a.searchService.notifySearchMessagesFail(),400!=e.code||null==i?a.sendNotification("error_occurred",e):a.searchMessages(t,n,null,r)})},searchAttachments:function(t,n,i,r){var a=this;this.searchService.prepareForSearching(t,i),this.apiCaller.call("search_attachments",[t.domainId,t.talkId,t.getQueryText(),n,i],function(e){a.searchService.isRecentParams(t)&&a.searchService.isSearching()&&a.searchService.saveSearchAttachmentsResult(new Yt(e)),null!=r&&r()},function(e){a.searchService.notifySearchAttachmentsFail(),400!=e.code||null==i?a.sendNotification("error_occurred",e):a.searchAttachments(t,n,null,r)})},startUpdateLastUsedAtIfNeed:function(){if(null==this.lastUsedExpiredAtTimer){var e,t=this.settings.getLastUsedExpiredAt();if(null==t)e=0;else{var n=4294967296,i=t.high,r=t.low;e=i*n+(0<=r?r:r+n)-(new Date).getTime()|0}e<=0?(this.updateLastUsedAt(),this.lastUsedExpiredAtTimer=new Ji(6e5),this.lastUsedExpiredAtTimer.run=Lr(this,this.updateLastUsedAt)):Ji.delay(Lr(this,this.startUpdateLastUsedAtIfNeed),e)}},updateLastUsedAt:function(){var t=this;this.apiCaller.call("update_last_used_at",[],function(e){t.settings.setLastUsedExpiredAt(f.afterAsInt64(6e5))})},addFavoriteTalk:function(e,t){this.apiCaller.call("add_favorite_talk",[e,t])},deleteFavoriteTalk:function(e,t){this.apiCaller.call("delete_favorite_talk",[e,t])},disablePushNotification:function(e,t){this.apiCaller.call("disable_push_notification",[e,t])},enablePushNotification:function(e,t){this.apiCaller.call("enable_push_notification",[e,t])},getSolutions:function(e,t){var n=this;this.apiCaller.call("get_solutions",[e,t],function(e){Ae.iter(e,Lr(Pr=n.dataFactory,Pr.newSolution)),n.sendNotification("solutions_loaded")})},getPresences:function(e,r){var a=this;this.apiCaller.call("get_presences",[e,r],function(e){var t=f.nowAsInt64(),n=Lr(Pr=a.dataFactory,Pr.newUserPresence),i=t;Ae.iter(e,function(e){return n(e,i)}),a.sendNotification("presences_updated",r)})},joinConference:function(n,e){var i=this;this.apiCaller.call("join_conference",[n,e],function(e){var t=new mt(e);i.sendNotification("join_conference_responsed",{talkId:n,joinConference:t})},function(e){i.sendNotification("join_conference_canceled",e)})},rejectConference:function(e){var t=this;this.apiCaller.call("reject_conference",[e],function(e){},function(e){404!=e.code&&409!=e.code&&t.sendNotification("error_occurred",e)})},leaveConference:function(e){var t=this;this.apiCaller.call("leave_conference",[e],function(e){},function(e){404!=e.code&&t.sendNotification("error_occurred",e)})},getConferences:function(){var n=this;this.apiCaller.call("get_conferences",[],function(e){var t=e.map(Lr(Pr=n.dataFactory,Pr.newConference));Ae.iter(t,function(e){n.sendNotification("notify_open_conference",e)}),n.dataStore.filterReactedConferenceIds(t.filter(function(e){return!n.dataStore.isReactedConferenceId(e.id)}).map(function(e){return e.id}))})},getConferenceParticipants:function(e){var n=this;this.apiCaller.call("get_conference_participants",[e],function(t){ke.foreach(n.conferenceStore.getConference(e),function(e){e.participants=t})})},getNoteStatuses:function(t,e){var n=this,i=this.settings.getSelectedDomainId();this.apiCaller.call("get_note_statuses",[i,t,60,e],function(e){n.sendNotification("get_note_statuses_loaded",{talkId:t,result:new Cn(e)})},function(e){e.code;n.sendNotification("error_occurred",e)})},getNote:function(t){var n=this;this.apiCaller.call("get_note",[t.value],function(e){var t=new Dn(e);n.dataStore.setNote(t.getNoteId(),t.note),n.sendNotification("get_note_loaded",t)},function(e){if(404==e.code)return n.dataStore.setNote(t,null),void n.sendNotification("get_note_failed_by_note_not_found",t);400==e.code&&n.sendNotification("error_occurred",e)})},createNote:function(e,t,n,i,r){var a=this;this.apiCaller.call("create_note",[e,t,Un.getValue(n),i,r],function(e){a.sendNotification("create_note_completed",new Nn(e))},function(e){e.code;a.sendNotification("error_occurred",e)})},updateNoteSetting:function(t,e,n){var i=this;this.apiCaller.call("update_note_setting",[t.value,e,n],function(e){i.sendNotification("update_note_setting_completed",new On(e))},function(e){if(404==e.code)return i.dataStore.setNote(t,null),void i.sendNotification("update_note_setting_failed_by_not_found",t);if(409==e.code)return i.dataStore.setNote(t,null),void i.sendNotification("update_note_setting_failed_by_conflict",t);e.code,e.code;i.sendNotification("error_occurred",e)})},updateNote:function(n,e,t,i,r,a){var o=this,s=Un.getValue(i);this.apiCaller.call("update_note",[n.value,e,t,s,r,a],function(e){var t=new Rn(e);o.dataStore.setNote(n,t.note),o.sendNotification("update_note_completed",t)},function(e){if(404==e.code)return o.dataStore.setNote(n,null),void o.sendNotification("update_note_failed_by_not_found",n);if(409==e.code)return o.dataStore.setNote(n,null),void o.sendNotification("update_note_failed_by_conflict",n);e.code,e.code;o.sendNotification("error_occurred",e)})},deleteNote:function(t){var n=this;this.apiCaller.call("delete_note",[t.value],function(e){n.sendNotification("delete_note_completed",new kn(e))},function(e){404==e.code&&n.dataStore.setNote(t,null);e.code,e.code;n.sendNotification("error_occurred",e)})},asInt:function(e){return vr.__cast(e,Kr)},__class__:si});var li=function(){this.callbacksWhenCreateSessionSucceed=[],this.createSessionSucceed=!1,ri.call(this,"apiCaller")};(n["albero.proxy.ApiCallerProxy"]=li).__name__=["albero","proxy","ApiCallerProxy"],li.__super__=ri,li.prototype=i(ri.prototype,{callCreateSession:function(e,t,n){var i=this;this.createSessionSucceed=!1,this.rpc.call("create_session",e,function(e){i.createSessionSucceed=!0,null!=t&&t(e),Ae.iter(i.callbacksWhenCreateSessionSucceed,function(e){e()}),i.callbacksWhenCreateSessionSucceed.splice(0,i.callbacksWhenCreateSessionSucceed.length)},n)},callImmediately:function(e,t,n,i){this.rpc.call(e,t,n,i)},call:function(e,t,n,i){var r=Lr(Pr=this.rpc,Pr.call),a=e,o=t,s=n,l=i,u=function(){r(a,o,s,l)};this.createSessionSucceed?u():this.callbacksWhenCreateSessionSucceed.push(u)},callApiReliable:function(t,n,i,r,a,o){null==o&&(o=3);var s=this,e=this.createOnErrorReliable(o,r,a,function(e){Ji.delay(function(){s.callApiReliable(t,n,i,r,a,o-1)},e)});this.call(t,n,i,e)},createOnErrorReliable:function(n,i,r,a){return null==r&&(r=function(e){return 404==e.code?rr.Some(1e3):rr.None}),null==i&&(i=Lr(this,this.handleServerErrorDefault)),function(e){if(0!=n){var t=r(e);ke.isEmpty(t)?i(e):ke.foreach(t,a)}else i(e)}},handleServerErrorDefault:function(e){this.rpc.onServerError(e)},restart:function(){this.rpc.restart()},__class__:li});var ui=function(){ri.call(this,"appState")};(n["albero.proxy.AppStateProxy"]=ui).__name__=["albero","proxy","AppStateProxy"],ui.__super__=ri,ui.prototype=i(ri.prototype,{start:function(){this.updateLastActivityAt(),this.checkInactiveInterval()},activateAppIfNeed:function(){this.updateLastActivityAt(),this.appState==h.Inactive&&this.setAppState(h.Active)},setAppState:function(e){this.appState=e,this.sendNotification("app_state_changed",this.appState)},updateLastActivityAt:function(){this.lastActivityAt=new Date},checkInactiveInterval:function(){var e=this;this.checkInactive(),Ji.delay(function(){e.checkInactiveInterval()},500)},checkInactive:function(){this.appState!=h.Inactive&&((new Date).getTime()-this.lastActivityAt.getTime()<2e3||this.setAppState(h.Inactive))},__class__:ui});var ci=function(){ri.call(this,"conferenceStore"),this.conferencesMap=new or,this.talkIdConferenceIdMap=new or};(n["albero.proxy.ConferenceStoreProxy"]=ci).__name__=["albero","proxy","ConferenceStoreProxy"],ci.__super__=ri,ci.prototype=i(ri.prototype,{addConference:function(e){var t=e.id,n="_"+t.high+"_"+t.low,i=this.conferencesMap;null!=$r[n]?i.setReserved(n,e):i.h[n]=e;var r=e.talkId,a="_"+r.high+"_"+r.low,o=this.talkIdConferenceIdMap;null!=$r[a]?o.setReserved(a,n):o.h[a]=n},removeConference:function(e){this.dataStore.removeReactedConfereceId(e.id);var t=e.id,n="_"+t.high+"_"+t.low;this.conferencesMap.remove(n);var i=e.talkId,r="_"+i.high+"_"+i.low,a=this.talkIdConferenceIdMap;(null!=$r[r]?a.getReserved(r):a.h[r])==n&&this.talkIdConferenceIdMap.remove(r),this.messageStore.onConferenceClose(e)},getConference:function(e){var t="_"+e.high+"_"+e.low,n=this.conferencesMap;return ke.option(null!=$r[t]?n.getReserved(t):n.h[t])},hasConference:function(e){if(null!=e){var t="_"+e.high+"_"+e.low,n=this.talkIdConferenceIdMap;return null!=$r[t]?n.existsReserved(t):n.h.hasOwnProperty(t)}return!1},hasConferenceInDomain:function(n){return null!=Ae.find(this.getConferenceTalkIds().map(be.makeFromIdStr).map(Lr(Pr=this.dataStore,Pr.getTalk)),function(e){if(null!=e){var t=e.domainId;return null!=t&&null!=n&&t.high==n.high&&t.low==n.low}return!1})},getConferenceTalkIds:function(){for(var e=[],t=this.talkIdConferenceIdMap.keys();t.hasNext();){var n=t.next();e.push(n)}return e},hasConferenceInAllDomains:function(i){return ke.isEmpty(i)?this.talkIdConferenceIdMap.keys().hasNext():null!=Ae.find(this.getConferenceTalkIds().map(be.makeFromIdStr).map(Lr(Pr=this.dataStore,Pr.getTalk)),function(e){if(null!=e){var t=e.domainId,n=ke.get(i);return!(null!=t&&null!=n&&t.high==n.high&&t.low==n.low)}return!1})},removeConferencesOnLeaveDomain:function(e){for(var t=this.conferencesMap,n=new ar(t,t.arrayKeys());n.hasNext();){var i=n.next(),r=i.domainId;null!=r&&null!=e&&r.high==e.high&&r.low==e.low&&(this.removeConference(i),this.sendNotification("notify_close_conference",i))}},removeConferencesOnLeaveTalk:function(e){for(var t=this.conferencesMap,n=new ar(t,t.arrayKeys());n.hasNext();){var i=n.next(),r=i.talkId;null!=r&&null!=e&&r.high==e.high&&r.low==e.low&&(this.removeConference(i),this.sendNotification("notify_close_conference",i))}},__class__:ci});var _i=function(){var e=new En(-1,-1);this.dummyFileId=e;var t=new En(-1,-1);this.dummyMsgId=t,ri.call(this,"dataFactory")};(n["albero.proxy.DataFactoryProxy"]=_i).__name__=["albero","proxy","DataFactoryProxy"],_i.__super__=ri,_i.prototype=i(ri.prototype,{onRegister:function(){},newAcquaintance:function(e){return this.dataStore.addAcquaintance(this.newDomainUser(e))},newFriend:function(e){return this.dataStore.addFriend(this.newDomainUser(e))},newDomainUser:function(e){return new rt(e)},newDomain:function(e){return this.dataStore.setDomainIfLatest(new qe(e))},newDomainInvite:function(e){return this.dataStore.setDomainInvite(new nt(e))},newTalk:function(e){return this.dataStore.setTalk(new an(e))},newTalkStatus:function(e){return this.dataStore.setTalkStatus(new pn(e))},newMessage:function(e){var t=new St(e);switch(t.type[1]){case 4:this.fileInfoStore.setMessageFileInfos(t.id,[ct.fromMessageAndFile(t,t.content)]);break;case 5:var n=t;this.fileInfoStore.setMessageFileInfos(t.id,Ne.asArray(t.content.files).map(function(e){return ct.fromMessageAndFile(n,e)}))}return this.messageStore.setMessage(t),t},newDummyMessage:function(e,t,n){var i=this,r=new St;r.id=this.dummyMsgId,r.userId=this.dataStore.me.id,r.talkId=e,r.type=t,r.content=n;var a,o=this.dummyMsgId;if(null==o)a=null;else{var s=new En(0,1),l=o.high-s.high|0,u=o.low-s.low|0;if(Wi.ucompare(o.low,s.low)<0){l--;l|=0}a=new En(l,u)}switch(this.dummyMsgId=a,r.type[1]){case 4:var c=[this.createDummyFileInfo(r,r.content)];this.fileInfoStore.setMessageFileInfos(r.id,c);break;case 5:var _=vr.__cast(r.content.files,Array).map(function(e){return i.createDummyFileInfo(r,e)});this.fileInfoStore.setMessageFileInfos(r.id,_)}return this.messageStore.setMessage(r),r},newDummyFileMessage:function(e,t,n){var i=this.createFileInfoDynamic(t,n);return this.newDummyMessage(e,wt.file,i)},newDummyMultipleFileMessage:function(e,t,n,i){var r=Lr(this,this.createFileInfoDynamic),a=i,o=Ae.array(n.filter(function(e){return null!=e}).map(function(e){return r(e,a)}));return this.newDummyMessage(e,wt.textMultipleFile,{text:t,files:o})},createFileInfoDynamic:function(e,t){return{content_type:e.type,content_size:e.size,name:t(e.name),file:e}},createDummyFileInfo:function(e,t){var n,i=ct.fromMessageAndFileWithFileId(e,t,this.dummyFileId),r=this.dummyFileId;if(null==r)n=null;else{var a=new En(0,1),o=r.high-a.high|0,s=r.low-a.low|0;if(Wi.ucompare(r.low,a.low)<0){o--;o|=0}n=new En(o,s)}return this.dummyFileId=n,i},newQuestion:function(e){return this.dataStore.setQuestion(new Bt(e))},newFileInfo:function(e){var t=new ct(e);return this.fileInfoStore.setTalkFileInfo(t,!0),t},newAnnouncement:function(e){return new Me(e)},newAnnouncementStatus:function(e){return this.dataStore.setAnnouncementStatus(new Ie(e))},newAnnouncementStatusForDomain:function(e){var t=new Ie;return t.domainId=e,t.unreadCount=0,this.dataStore.setAnnouncementStatus(t)},newAccountControlRequest:function(e){return this.dataStore.setAccountControlRequest(new Oe(e))},newAccountControlGroup:function(e){return this.dataStore.setAccountControlGroup(new Ce(e))},newSolution:function(e){var t=new $t(e);return this.solutionsStore.setSolution(t),t},newUserPresence:function(e,t){var n=new An(e,t);return this.dataStore.setUserPresence(n),n},newConference:function(e){var t=new Le(e);return this.conferenceStore.addConference(t),t},__class__:_i});var hi=function(){ri.call(this,"dataStore")};(n["albero.proxy.DataStoreProxy"]=hi).__name__=["albero","proxy","DataStoreProxy"],hi.__super__=ri,hi.prototype=i(ri.prototype,{onRegister:function(){this.init()},setMe:function(e){this.me=e;for(var t=0,n=this.getDomains();t<n.length;){var i=n[t];++t,this.sendNotification("notify_update_user",this.me.toDomainUser(i.id))}this.sendNotification("current_user_changed",e),this.storage.setDirtyFlag()},getMe:function(){return this.me},isMe:function(e){if(null!=this.me){var t=this.me.id;return null!=t&&null!=e&&t.high==e.high&&t.low==e.low}return!1},getFriendsOrAcquaintances:function(e){var t="_"+e.high+"_"+e.low,n=this.users,i=null!=$r[t]?n.getReserved(t):n.h[t],r=[];if(null!=i)for(var a=new ar(i,i.arrayKeys());a.hasNext();){var o=a.next();0!=o.type&&1!=o.type||r.push(o.user)}return r},getFriends:function(e){var t="_"+e.high+"_"+e.low,n=this.users,i=null!=$r[t]?n.getReserved(t):n.h[t],r=[];if(null!=i)for(var a=new ar(i,i.arrayKeys());a.hasNext();){var o=a.next();0==o.type&&r.push(o.user)}return r},getAcquaintances:function(e){var t="_"+e.high+"_"+e.low,n=this.users,i=null!=$r[t]?n.getReserved(t):n.h[t],r=[];if(null!=i)for(var a=new ar(i,i.arrayKeys());a.hasNext();){var o=a.next();1==o.type&&r.push(o.user)}return r},isFriend:function(e,t){var n="_"+e.high+"_"+e.low,i=this.users,r=null!=$r[n]?i.getReserved(n):i.h[n];if(null!=r){var a="_"+t.high+"_"+t.low,o=null!=$r[a]?r.getReserved(a):r.h[a];return null!=o&&0==o.type}return!1},addFriend:function(e){var t=this.ensureDomainUserMap(e.domainId),n=e.id,i="_"+n.high+"_"+n.low,r={type:0,user:e};return null!=$r[i]?t.setReserved(i,r):t.h[i]=r,this.storage.setDirtyFlag(),e},addAcquaintance:function(e){var t=this.ensureDomainUserMap(e.domainId),n=e.id,i="_"+n.high+"_"+n.low,r={type:1,user:e};return null!=$r[i]?t.setReserved(i,r):t.h[i]=r,this.storage.setDirtyFlag(),e},ensureDomainUserMap:function(e){var t="_"+e.high+"_"+e.low,n=this.users,i=null!=$r[t]?n.getReserved(t):n.h[t];if(null==i){i=new or;var r=this.users;null!=$r[t]?r.setReserved(t,i):r.h[t]=i}return i},setUserIfLatest:function(e,t){null==e&&(e=this.ensureDomainUserMap(t.domainId));var n=t.id,i="_"+n.high+"_"+n.low,r=null!=$r[i]?e.getReserved(i):e.h[i];if(null!=r){var a=t.updatedAt,o=r.user.updatedAt,s=a.high-o.high|0;s=0!=s?s:Wi.ucompare(a.low,o.low);var l=a.high<0?o.high<0?s:-1:0<=o.high?s:1;(1<l||2==r.type&&0!=l)&&(r.user=t,this.sendNotification("notify_update_user",t))}else{var u={type:2,user:t};null!=$r[i]?e.setReserved(i,u):e.h[i]=u}this.storage.setDirtyFlag()},setUserPresence:function(e){null==this.userPresences&&(this.userPresences=new or);var t=e.userId,n="_"+t.high+"_"+t.low,i=this.userPresences;null!=$r[n]?i.setReserved(n,e):i.h[n]=e,this.storage.setDirtyFlag()},getUserPresence:function(e){if(null==this.userPresences)return null;var t="_"+e.high+"_"+e.low,n=this.userPresences;return null!=$r[t]?n.getReserved(t):n.h[t]},isDepartmentsChanged:function(e,t){return!be.eqArray(e.departments,t.departments)},setUsersIfLatest:function(e,t){var n=this.ensureDomainUserMap(e),i=Lr(this,this.setUserIfLatest),r=n;Ae.iter(t,function(e){i(r,e)})},clearUsersDepartments:function(e){var t="_"+e.high+"_"+e.low,n=this.users,i=null!=$r[t]?n.getReserved(t):n.h[t];if(null!=i)for(var r=new ar(i,i.arrayKeys());r.hasNext();){var a=r.next();a.user.departments=null,this.sendNotification("notify_update_user",a.user)}this.storage.setDirtyFlag()},removeFriend:function(e,t){var n="_"+e.high+"_"+e.low,i=this.users,r=null!=$r[n]?i.getReserved(n):i.h[n];if(null!=r){var a="_"+t.high+"_"+t.low,o=null!=$r[a]?r.getReserved(a):r.h[a];null!=o&&(o.type=2)}this.storage.setDirtyFlag()},removeAcquaintance:function(e,t){this.removeFriend(e,t)},getUser:function(e,t){if(null==t)return null;var n,i=new En(0,0);if(t.high==i.high&&t.low==i.low)return null;if(null!=this.me){var r=this.me.id;n=null!=r&&null!=t&&r.high==t.high&&r.low==t.low}else n=!1;if(n)return this.me.toDomainUser(e);var a="_"+e.high+"_"+e.low,o=this.users,s=null!=$r[a]?o.getReserved(a):o.h[a];if(null!=s){var l="_"+t.high+"_"+t.low,u=null!=$r[l]?s.getReserved(l):s.h[l];if(null!=u)return u.user}return null},getUsers:function(e,t){var l=this,n=function(a,e){var t="_"+a.high+"_"+a.low,n=l.users,o=null!=$r[t]?n.getReserved(t):n.h[t];if(null!=o){if(null!=e)return e.map(function(e){var t=new En(0,0);if(e.high==t.high&&e.low==t.low)return null;var n=l.me.id;if(null!=n&&null!=e&&n.high==e.high&&n.low==e.low)return l.me.toDomainUser(a);var i="_"+e.high+"_"+e.low,r=null!=$r[i]?o.getReserved(i):o.h[i];return null!=r?r.user:null});for(var i=[],r=o.arrayKeys(),s=new ar(o,r);s.hasNext();)i.push(s.next().user);return i}return[]};if(null!=e)return n(e,t);for(var i=this.domains,r=new ar(i,i.arrayKeys()),a=null;r.hasNext();)a=null==a?n(r.next().id,t):a.concat(n(r.next().id,t));return null==a?[]:a},getTalk:function(e){var t="_"+e.high+"_"+e.low,n=this.talks;return null!=$r[t]?n.getReserved(t):n.h[t]},getValidPairTalk:function(n,i){var r=this;return null==this.me?null:Ae.find(this.getTalks(),function(e){if(!ee.enumEq(e.type,sn.PairTalk))return!1;var t=e.domainId;return null!=t&&null!=i&&t.high==i.high&&t.low==i.low&&(!!Ae.exists(e.userIds,function(e){return null!=e&&null!=n&&e.high==n.high&&e.low==n.low})&&!!Ae.exists(e.userIds,function(e){var t=r.me.id;return null!=e&&null!=t&&e.high==t.high&&e.low==t.low}))})},setTalk:function(e){var t=e.id,n="_"+t.high+"_"+t.low,i=this.talks;if(null!=$r[n]?i.setReserved(n,e):i.h[n]=e,null!=e.leftUsers)for(var r=this.ensureDomainUserMap(e.domainId),a=0,o=e.leftUsers;a<o.length;){var s=o[a];++a;var l=s.id,u="_"+l.high+"_"+l.low,c=null!=$r[u]?r.getReserved(u):r.h[u];if(null!=c){var _;if(2==c.type){var h=s.updatedAt,d=c.user.updatedAt,f=h.high-d.high|0;f=0!=f?f:Wi.ucompare(h.low,d.low),_=0<(h.high<0?d.high<0?f:-1:0<=d.high?f:1)}else _=!1;_&&(c.user=s,this.sendNotification("notify_update_user",s))}else{var m={type:2,user:s};null!=$r[u]?r.setReserved(u,m):r.h[u]=m,this.sendNotification("notify_update_user",s)}}return this.storage.setDirtyFlag(),e},getTalks:function(){for(var e=[],t=this.talks.keys();t.hasNext();){var n=t.next(),i=this.talks;e.push(null!=$r[n]?i.getReserved(n):i.h[n])}return e},setTalks:function(e){Ae.iter(e,Lr(this,this.setTalk))},removeTalk:function(e){if(null!=this.domainUnreadCounts){var t="_"+e.high+"_"+e.low,n=this.talks,i=null!=$r[t]?n.getReserved(t):n.h[t];if(null!=i){var r=i.domainId;this.domainUnreadCounts.remove("_"+r.high+"_"+r.low)}}if(null!=this.questions)for(var a=this.getQuestions(e),o=0;o<a.length;){var s=a[o];++o;var l=s.id;this.questions.remove("_"+l.high+"_"+l.low)}this.talks.remove("_"+e.high+"_"+e.low),this.storage.setDirtyFlag()},getTalkStatuses:function(){for(var e=[],t=this.talkStatuses.keys();t.hasNext();){var n=t.next(),i=this.talks;if(null!=$r[n]?i.existsReserved(n):i.h.hasOwnProperty(n)){var r=this.talkStatuses;e.push(null!=$r[n]?r.getReserved(n):r.h[n])}}return e},getTalkStatus:function(e){var t="_"+e.high+"_"+e.low,n=this.talkStatuses;return null!=$r[t]?n.getReserved(t):n.h[t]},setTalkStatus:function(e){var t=e.id,n="_"+t.high+"_"+t.low;if(null!=this.domainUnreadCounts){var i=this.talks,r=null!=$r[n]?i.getReserved(n):i.h[n];if(null!=r){var a=r.domainId;this.domainUnreadCounts.remove("_"+a.high+"_"+a.low)}}var o=this.talkStatuses;return null!=$r[n]?o.setReserved(n,e):o.h[n]=e,this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),e},removeTalkStatus:function(e){var t="_"+e.high+"_"+e.low;if(null!=this.domainUnreadCounts){var n=this.talks,i=null!=$r[t]?n.getReserved(t):n.h[t];if(null!=i){var r=i.domainId;this.domainUnreadCounts.remove("_"+r.high+"_"+r.low)}}this.talkStatuses.remove(t),this.storage.setDirtyFlag()},getDomains:function(){for(var e=[],t=this.domains,n=new ar(t,t.arrayKeys());n.hasNext();){var i=n.next();e.push(i)}return e},getDomain:function(e){var t="_"+e.high+"_"+e.low,n=this.domains;return null!=$r[t]?n.getReserved(t):n.h[t]},setDomainIfLatest:function(e){var t,n=e.id,i="_"+n.high+"_"+n.low,r=this.domains,a=null!=$r[i]?r.getReserved(i):r.h[i];if(null!=a){var o=e.updatedAt,s=a.updatedAt,l=o.high-s.high|0;l=0!=l?l:Wi.ucompare(o.low,s.low),t=0<=(o.high<0?s.high<0?l:-1:0<=s.high?l:1)}else t=!0;if(t){var u=this.domains;return null!=$r[i]?u.setReserved(i,e):u.h[i]=e,this.storage.setDirtyFlag(),e}return a},removeDomain:function(n){this.domains.remove("_"+n.high+"_"+n.low),this.storage.setDirtyFlag();for(var e=this.getTalks().filter(function(e){var t=e.domainId;return null!=t&&null!=n&&t.high==n.high&&t.low==n.low}),t=0;t<e.length;){var i=e[t];++t,this.removeTalk(i.id),this.removeTalkStatus(i.id)}},getUnreadCount:function(){for(var e=0,t=this.domains.keys();t.hasNext();){var n=t.next();e+=this._getDomainUnreadCount(n)}return e+=this.getDomainInvitesCount()},_getDomainUnreadCount:function(e){var t;if(null!=this.domainUnreadCounts){var n=this.domainUnreadCounts;t=null!=$r[e]?n.existsReserved(e):n.h.hasOwnProperty(e)}else t=!1;if(t){var i=this.domainUnreadCounts;return null!=$r[e]?i.getReserved(e):i.h[e]}null==this.domainUnreadCounts&&(this.domainUnreadCounts=new or);for(var r=0,a=this.talkStatuses,o=new ar(a,a.arrayKeys());o.hasNext();){var s=o.next();if(null!=s.unreadCount&&0!=s.unreadCount){var l,u=s.id,c="_"+u.high+"_"+u.low,_=this.talks,h=null!=$r[c]?_.getReserved(c):_.h[c];if(null!=h){var d=h.domainId;l="_"+d.high+"_"+d.low==e}else l=!1;l&&(r+=s.unreadCount)}}var f=this.announcementStatuses,m=null!=$r[e]?f.getReserved(e):f.h[e];if(null!=m&&null!=m.unreadCount){var p=this.domains,g=null!=$r[e]?p.getReserved(e):p.h[e];null!=g&&g.role.allowReadAnnouncements&&(r+=m.unreadCount)}var v=this.domainUnreadCounts;return null!=$r[e]?v.setReserved(e,r):v.h[e]=r,r},getDomainUnreadCount:function(e){return null==e?0:this._getDomainUnreadCount("_"+e.high+"_"+e.low)},getDomainInvites:function(){for(var e=[],t=this.domainInvites.keys();t.hasNext();){var n=t.next(),i=this.domainInvites;e.push(null!=$r[n]?i.getReserved(n):i.h[n])}return e},getDomainInvitesCount:function(){var e=0;if(null==this.accountControlGroup)for(var t=this.domainInvites,n=new ar(t,t.arrayKeys());n.hasNext();){var i=n.next();null!=i.accountControlRequestId&&null!=this.getAccountControlRequest(i.accountControlRequestId)||++e}else for(var r=this.domainInvites,a=new ar(r,r.arrayKeys());a.hasNext();){a.next();++e}return e},getDomainInvite:function(e){var t="_"+e.high+"_"+e.low,n=this.domainInvites;return null!=$r[t]?n.getReserved(t):n.h[t]},setDomainInvite:function(e){var t=e.id,n="_"+t.high+"_"+t.low,i=this.domainInvites;return null!=$r[n]?i.setReserved(n,e):i.h[n]=e,this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),e},removeDomainInvite:function(e){this.domainInvites.remove("_"+e.high+"_"+e.low),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag()},getQuestions:function(e,t){var n=[];if(null!=this.questions)for(var i=this.questions,r=new ar(i,i.arrayKeys());r.hasNext();){var a=r.next(),o=a.talkId;if(null!=o&&null!=e&&o.high==e.high&&o.low==e.low){var s;if(null!=t){var l=a.userId;s=!(null!=t&&null!=l&&t.high==l.high&&t.low==l.low)}else s=!1;s||n.push(a)}}return n},getQuestion:function(e){var t="_"+e.high+"_"+e.low,n=this.questions;return null!=$r[t]?n.getReserved(t):n.h[t]},setQuestion:function(e){return e},getAnnouncementStatus:function(e){var t="_"+e.high+"_"+e.low,n=this.announcementStatuses;return null!=$r[t]?n.getReserved(t):n.h[t]},setAnnouncementStatus:function(e){var t=e.domainId,n="_"+t.high+"_"+t.low,i=this.announcementStatuses;return null!=$r[n]?i.setReserved(n,e):i.h[n]=e,null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(n),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag(),e},removeAnnouncementStatus:function(e){var t="_"+e.high+"_"+e.low;this.announcementStatuses.remove(t),null!=this.domainUnreadCounts&&this.domainUnreadCounts.remove(t),this.sendNotification("brand_badge_changed"),this.storage.setDirtyFlag()},getAccountControlRequests:function(){for(var e=[],t=this.accountControlRequests,n=new ar(t,t.arrayKeys());n.hasNext();){var i=n.next();e.push(i)}return e},getAccountControlRequest:function(e){var t="_"+e.high+"_"+e.low,n=this.accountControlRequests;return null!=$r[t]?n.getReserved(t):n.h[t]},setAccountControlRequest:function(e){var t=e.id,n="_"+t.high+"_"+t.low,i=this.accountControlRequests,r=null!=$r[n]?i.getReserved(n):i.h[n];if(null!=r&&r.version>e.version)return r;var a=this.accountControlRequests;return null!=$r[n]?a.setReserved(n,e):a.h[n]=e,this.storage.setDirtyFlag(),e},removeAccountControlRequest:function(e){var t="_"+e.high+"_"+e.low;this.accountControlRequests.remove(t),this.storage.setDirtyFlag()},removeAccountControlRequests:function(){this.accountControlRequests=new or,this.storage.setDirtyFlag()},getAccountControlGroup:function(){return this.accountControlGroup},setAccountControlGroup:function(e){return this.accountControlGroup=e,this.storage.setDirtyFlag(),this.accountControlGroup},updateAccountControlGroup:function(e){if(null!=this.accountControlGroup){var t=this.accountControlGroup.id,n=e.id;if(null!=t&&null!=n&&t.high==n.high&&t.low==n.low){var i=e.group;null!=i&&this.accountControlGroup.group.version<i.version&&(this.accountControlGroup.group=i,this.storage.setDirtyFlag());var r=e.profilePolicy;null!=r&&this.accountControlGroup.profilePolicy.version<r.version&&(this.accountControlGroup.profilePolicy=r,this.storage.setDirtyFlag())}}},removeAccountControlGroup:function(e){var t;if(null!=this.accountControlGroup){var n=this.accountControlGroup.id;t=null!=n&&null!=e&&n.high==e.high&&n.low==e.low}else t=!1;t&&(this.accountControlGroup=null,this.storage.setDirtyFlag())},addReactedConfereceId:function(e){var t="_"+e.high+"_"+e.low,n=this.reactedConferenceIds;null!=$r[t]?n.setReserved(t,!0):n.h[t]=!0,this.storage.setDirtyFlag()},removeReactedConfereceId:function(e){this.reactedConferenceIds.remove("_"+e.high+"_"+e.low),this.storage.setDirtyFlag()},isReactedConferenceId:function(e){var t="_"+e.high+"_"+e.low,n=this.reactedConferenceIds;return null!=$r[t]?n.existsReserved(t):n.h.hasOwnProperty(t)},filterReactedConferenceIds:function(e){var n=this,t=new or;Ae.iter(e.map(function(e){return"_"+e.high+"_"+e.low}).filter(function(e){var t=n.reactedConferenceIds;return null!=$r[e]?t.existsReserved(e):t.h.hasOwnProperty(e)}),function(e){null!=$r[e]?t.setReserved(e,!0):t.h[e]=!0}),this.reactedConferenceIds=t},getNote:function(e){if(null==this.notes)return null;var t=this.notes,n=e.toString(),i=t;return null!=$r[n]?i.getReserved(n):i.h[n]},setNote:function(e,t){if(null==this.notes&&(this.notes=new or),null==t)return this.notes.remove(e.toString()),t;var n=this.notes,i=e.toString(),r=n;return null!=$r[i]?r.setReserved(i,t):r.h[i]=t,t},clear:function(e){this.users=new or,this.talks=new or,this.talkStatuses=new or,this.domains=new or,this.domainInvites=new or,this.questions=new or,this.announcementStatuses=new or,this.accountControlRequests=new or,this.accountControlGroup=null,this.reactedConferenceIds=new or,e&&(this.me=null),this.storage.setDirtyFlag()},init:function(){this.storage=new Wn("dataStore");var e=this.storage.load();if(null!=e&&"1.104_1"==e.shift())return this.me=e.shift(),this.users=e.shift(),this.talks=e.shift(),this.talkStatuses=e.shift(),this.domains=e.shift(),this.domainInvites=e.shift(),this.questions=e.shift(),this.announcementStatuses=e.shift(),this.accountControlRequests=e.shift(),this.accountControlGroup=e.shift(),this.reactedConferenceIds=e.shift(),void Qn._d("["+Ee.dateStr(new Date)+"] ","dataStore is loaded.","","","","");this.clear(!0),Qn._d("["+Ee.dateStr(new Date)+"] ","dataStore is initialized.","","","","")},saveIfNeeded:function(){this.storage.isDirty&&(this.storage.save(["1.104_1",this.me,this.users,this.talks,this.talkStatuses,this.domains,this.domainInvites,this.questions,this.announcementStatuses,this.accountControlRequests,this.accountControlGroup,this.reactedConferenceIds]),Qn._d("["+Ee.dateStr(new Date)+"] ","dataStore is saved.","","","",""))},__class__:hi});var di=function(){ri.call(this,"departmentStore"),this.departmentMap=new or,this.rootDepartmentIdMap=new or};(n["albero.proxy.DepartmentStoreProxy"]=di).__name__=["albero","proxy","DepartmentStoreProxy"],di.__super__=ri,di.prototype=i(ri.prototype,{getDepartment:function(e){if(null==e)return null;var t="_"+e.high+"_"+e.low,n=this.departmentMap;return null!=$r[t]?n.getReserved(t):n.h[t]},setDepartment:function(e){if(null!=e.parentId){var t=this.getDepartment(e.parentId);null!=t&&(t.addChild(e.id),e.depth=t.depth+1)}var n=e.id,i="_"+n.high+"_"+n.low,r=this.departmentMap;null!=$r[i]?r.setReserved(i,e):r.h[i]=e},clearDomainDepartment:function(e){var n=this,t="_"+e.high+"_"+e.low,i=this.rootDepartmentIdMap,r=null!=$r[t]?i.getReserved(t):i.h[t];null!=r&&(Ae.iter(this.getDepartmentsDescendantOrSelf(r),function(e){var t=e.id;n.departmentMap.remove("_"+t.high+"_"+t.low)}),this.rootDepartmentIdMap.remove(t))},getRootDepartmentId:function(e){var t="_"+e.high+"_"+e.low,n=this.rootDepartmentIdMap;return null!=$r[t]?n.getReserved(t):n.h[t]},setRootDepartmentId:function(e,t){var n="_"+e.high+"_"+e.low,i=this.rootDepartmentIdMap;null!=$r[n]?i.setReserved(n,t):i.h[n]=t},setDepartmentUserCount:function(e){var t=this.getDepartment(e.departmentId);null!=t&&(t.userCount=e,t.userCountLoading=!1)},setUserCountLoading:function(e,t){var n=this.getDepartment(e);null!=n&&(n.userCountLoading=t)},needUserCountLoading:function(e){var t=this.getDepartment(e);return null==t||null==t.userCount&&!t.userCountLoading},clearDomainDepartmentUsers:function(e){var t=this.getRootDepartmentId(e);null!=t&&(Ae.iter(this.getDepartmentsDescendantOrSelf(t),function(e){e.userCount=null,e.userIds=null,e.userCountLoading=!1}),this.sendNotification("department_user_count_cleared",e))},setDepartmentUsers:function(e,t){var n=this.getDepartment(e);null!=n&&(n.userIds=t)},getDepartmentPath:function(e){return this.getDepartmentsAncestorOrSelf(e)},getDepartmentPathWithoutRoot:function(e){return this.getDepartmentPath(e).filter(function(e){return!e.isRoot()})},getDepartmentsAncestorOrSelf:function(e){var t=[];return this._getDepartmentsAncestorOrSelf(e,t),t},_getDepartmentsAncestorOrSelf:function(e,t){var n=this.getDepartment(e);null!=n&&(null!=n.parentId&&this._getDepartmentsAncestorOrSelf(n.parentId,t),t.push(n))},getDepartmentsDescendantOrSelf:function(e){var t=[];return this._getDepartmentsDescendantOrSelf(e,t),t},_getDepartmentsDescendantOrSelf:function(e,t){var n=this,i=this.getDepartment(e);null!=i&&(t.push(i),null!=i.childrenIds&&Ae.iter(i.childrenIds,function(e){n._getDepartmentsDescendantOrSelf(e,t)}))},__class__:di});var fi=function(){ri.call(this,"features")};(n["albero.proxy.FeaturesProxy"]=fi).__name__=["albero","proxy","FeaturesProxy"],fi.__super__=ri,fi.prototype=i(ri.prototype,{canSendMessageOnMultiView:function(e){return!!this.settings.isOnPremises()||this.selectedDomainHasSolution(e,nn.MultiView)},canDetectKeyword:function(e){return!!this.settings.isOnPremises()||this.selectedDomainHasSolution(e,nn.KeywordWatching)},selectedDomainHasSolution:function(e,t){if(null==e)return!1;var n=this.dataStore.getDomain(e);return null!=n&&null!=n.contract&&null!=n.contract.solutionIds&&Ae.exists(n.contract.solutionIds,function(e){return $t.getSolutionType(e)==t})},canConference:function(e){if(null==e)return!1;var t=this.dataStore.getDomain(e);return null!=t&&null!=t.contract&&t.contract.isConferenceEnalbed()},__class__:fi});var mi=function(){ri.call(this,"fileInfoStore"),this.fileInfoMap=new or,this.fileIdStrsMap=new or,this.messageFileIdStrsMap=new or,this.stagedFileInfosMaxId=0};(n["albero.proxy.FileInfoStoreProxy"]=mi).__name__=["albero","proxy","FileInfoStoreProxy"],mi.__super__=ri,mi.prototype=i(ri.prototype,{getStagedFileIdsKey:function(e,t){return"staged__"+e.high+"_"+e.low+Ct.toPanePrefix(t)},ensureStagedFileInfos:function(e,t){return this.ensureStagedFileIdStrs(e,t).map(be.makeFromIdStr).filter(function(e){return null!=e}).map(Lr(this,this.getFileInfo))},moveStagedFile:function(e,t,n,i){var r=this.ensureStagedFileIdStrs(e,t);if(null!=r){var a=r[n];Ee.remove(r,a),r.splice(i,0,a)}},ensureStagedFileIdStrs:function(e,t){var n=this.getStagedFileIdsKey(e,t),i=this.fileIdStrsMap,r=null!=$r[n]?i.getReserved(n):i.h[n];if(null==r){r=[];var a=this.fileIdStrsMap;null!=$r[n]?a.setReserved(n,r):a.h[n]=r}return r},addStagedFileInfo:function(e,t,n,i){var r=new ct,a=new En(0,--this.stagedFileInfosMaxId);r.id=a,r.talkId=e,null!=n&&(r.contentType=n.type,r.contentSize=n.size,r.url=URL.createObjectURL(pi.getBlobFromUpdatableFile(n)),r.file=n,r.name=n.name),null!=i&&(r.thumbUrl=URL.createObjectURL(i.blob));var o=r.id,s="_"+o.high+"_"+o.low,l=this.fileInfoMap;null!=$r[s]?l.setReserved(s,r):l.h[s]=r;var u=r.id,c="_"+u.high+"_"+u.low;return this.ensureStagedFileIdStrs(e,t).push(c),r},removeStagedFileInfo:function(e,t,n){var i="_"+n.high+"_"+n.low;Ee.remove(this.ensureStagedFileIdStrs(e,t),i),this.fileInfoMap.remove(i)},removeStagedFileInfos:function(e,t){for(var n=0,i=this.ensureStagedFileIdStrs(e,t);n<i.length;){var r=i[n];++n,this.fileInfoMap.remove(r)}this.fileIdStrsMap.remove(this.getStagedFileIdsKey(e,t))},ensureTalkFileInfos:function(e){return this.ensureTalkFileIds(e).map(Lr(this,this.fileInfoGetter))},ensureTalkFileIds:function(e){var t="_"+e.high+"_"+e.low,n=this.fileIdStrsMap,i=null!=$r[t]?n.getReserved(t):n.h[t];if(null==i){i=[];var r=this.fileIdStrsMap;null!=$r[t]?r.setReserved(t,i):r.h[t]=i}return i},getTalkFileInfo:function(e,t,n){return this.getFileInfo(n)},setTalkFileInfo:function(e,t){var n=e.id,i="_"+n.high+"_"+n.low,r=this.fileInfoMap;null!=$r[i]?r.setReserved(i,e):r.h[i]=e;var a=this.ensureTalkFileIds(e.talkId);-1==a.indexOf(i)&&a.push(i)},onFileDeleted:function(e){var t=this.getTalkFileInfo(e.talkId,e.messageId,e.fileId);null!=t&&(t.deleted=!0)},getFileInfo:function(e){var t="_"+e.high+"_"+e.low,n=this.fileInfoMap;return null!=$r[t]?n.getReserved(t):n.h[t]},getMessageFileInfos:function(e){var t=this,n="_"+e.high+"_"+e.low,i=this.messageFileIdStrsMap;return ke.map(ke.option(null!=$r[n]?i.getReserved(n):i.h[n]),function(e){return e.map(Lr(t,t.fileInfoGetter))})},setMessageFileInfos:function(e,t){for(var n=0;n<t.length;){var i=t[n];++n;var r=i.id,a="_"+r.high+"_"+r.low,o=this.fileInfoMap;null!=$r[a]?o.setReserved(a,i):o.h[a]=i}var s=this.messageFileIdStrsMap,l="_"+e.high+"_"+e.low,u=t.map(Lr(this,this.fileIdStrGetter)),c=s;null!=$r[l]?c.setReserved(l,u):c.h[l]=u},removeMessageFileInfos:function(e){this.messageFileIdStrsMap.remove("_"+e.high+"_"+e.low)},isAllFileDeletedOnMessage:function(e){var t,n=this.getMessageFileInfos(e);switch(n[1]){case 0:t=n[2];break;case 1:t=[]}return!Ae.exists(t,function(e){return!e.deleted})},fileIdStrGetter:function(e){var t=e.id;return"_"+t.high+"_"+t.low},fileInfoGetter:function(e){var t=this.fileInfoMap;return null!=$r[e]?t.getReserved(e):t.h[e]},__class__:mi});var pi=function(){ri.call(this,"fileService"),this.validHost=this.getValidHost()};(n["albero.proxy.FileServiceProxy"]=pi).__name__=["albero","proxy","FileServiceProxy"],pi.createByteSizeStringWithUnit=function(e){return p.createByteSizeStringWithUnit(e)},pi.convertUploadableFile=function(e){if(null==e)return e;var t=!1,n=e.name;w.isEmpty(n)&&(n="clipboard_"+f.getDateStringForFile()+".png",t=!0);var i=pi.getContentTypeByFileName(n,e.type);return i!=e.type&&(t=!0),t?{name:n,type:i,file:n,blob:e,size:e.size}:e},pi.getBlobFromUpdatableFile=function(e){return null==e.blob?e:e.blob},pi.getContentTypeByFileName=function(e,t){if(w.isNotEmpty(t))return"csv"==pi.getExtension(e)?"text/csv":t;switch(pi.getExtension(e)){case"csv":return"text/csv";case"doc":return"application/msword";case"docm":return"application/vnd.ms-word.document.macroenabled.12";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"gif":return"image/gif";case"htm":case"html":return"text/html";case"jpeg":case"jpg":return"image/jpeg";case"md":return"text/markdown";case"pdf":return"application/pdf";case"png":return"image/png";case"ppt":return"application/vnd.ms-powerpoint";case"pptm":return"application/vnd.ms-powerpoint.presentation.macroenabled.12";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsb":return"application/vnd.ms-excel.sheet.binary.macroenabled.12";case"xlsm":return"application/vnd.ms-excel.sheet.macroenabled.12";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xml":return"text/xml";default:return"application/octet-stream"}},pi.getExtension=function(e){if(null==e)return"";var t=e.split("."),n=t.length;return 0==n?"":t[n-1]},pi.__super__=ri,pi.prototype=i(ri.prototype,{getValidHost:function(){return"https://"+Br.host},downloadUrl:function(e,t){if(null==t&&(t=!1),null==e||0==e.length)return"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(I.startsWith(e,this.validHost)){var n=this.settings.getAccessToken(),i=e;return-1!=e.indexOf("?")?i+="&":i+="?",i+="Authorization=ALB%20"+n,t&&(i+="&download=true"),i}return e},download:function(e,t,n){},upload:function(e,t,n,i,r){for(var a=this,o={},s=0,l=j.fields(e.post_form);s<l.length;){var u=l[s];++s;var c=u,_=j.field(e.post_form,u);o[c]=_}var h=e.post_url;Xr.upload({url:h,headers:{},data:o,files:{file:n},complete:function(e,t){e?a.uploadFailed(t,r):i()},cache:!0})},uploadFailed:function(e,t){this.sendNotification("error_occurred",{message:qn.localize("FileServiceProxy.failed_send_file")}),t(null)},createDummyFile:function(e,t,n){var i=I.replace(e,"/","\\").split("\\");if(0==i.length)return null;var r=i[i.length-1];if(null!=t&&(r=t),0==r.length)return null;return{name:r,size:1,type:pi.getContentTypeByFileName(r,n)}},createThumbnail:function(e,t){t(rr.None)},captureVideo:function(e,t,n){var i=e.width,r=e.height,a=t.videoWidth,o=t.videoHeight;o<a?i<a&&(o*=i/a,a=i):r<o&&(a*=r/o,o=r),o<1&&(o=1),a<1&&(a=1),e.height=0|o,e.width=0|a,e.getContext("2d").drawImage(t,0,0,a,o),this.craeteThumbFromCanvas(e,n)},normalizeImage:function(e,t,n){var i=e.width,r=e.height,a=t.width,o=t.height;o<a?i<a&&(o*=i/a,a=i):r<o&&(a*=r/o,o=r),o<1&&(o=1),a<1&&(a=1),e.height=0|o,e.width=0|a,this.drawImageWithAntialias(e,t),this.craeteThumbFromCanvas(e,n)},craeteThumbFromCanvas:function(i,r){try{i.toBlob(function(e){var t={name:"thumb.jpeg",type:"image/jpeg",file:"thumb.jpeg",blob:e,size:e.size},n=rr.Some(new yn(t,i.width,i.height));r(n)},"image/jpeg",.6)}catch(e){e instanceof gr&&(e=e.val),Qn._e("["+Ee.dateStr(new Date)+"] ","failed to create thumbnail. error:",e,"","",""),r(rr.None)}},drawImageWithAntialias:function(e,t){var n=e.width,i=e.height,r=0|t.width,a=0|t.height;r<1&&(r=1),a<1&&(a=1),Qn._d("["+Ee.dateStr(new Date)+"] ","drawImageWithAntialias",r,n,a,i);var o=window.document.createElement("canvas"),s=o.getContext("2d");o.width=r,o.height=a,s.drawImage(t,0,0);var l=window.document.createElement("canvas"),u=l.getContext("2d");l.width=r,l.height=a;for(var c=this.getOptSize(r,n),_=this.getOptSize(a,i);n<c||i<_;)Qn._d("["+Ee.dateStr(new Date)+"] ","downsize",r,c,a,_),u.clearRect(0,0,r,a),u.drawImage(o,0,0,r,a,0,0,c,_),s.clearRect(0,0,r,a),s.drawImage(l,0,0,c,_,0,0,c,_),r=c,c=this.getOptSize(r,n),a=_,_=this.getOptSize(a,i);var h=e.getContext("2d");h.fillStyle="rgb(255, 255, 255)",h.fillRect(0,0,n,i),h.drawImage(o,0,0,r,a,0,0,n,i)},getOptSize:function(e,t){return t*Math.ceil(Math.log(e/t)/Math.log(2))},__class__:pi});var gi=function(){ri.call(this,"keywordWatcher")};(n["albero.proxy.KeywordWatcherProxy"]=gi).__name__=["albero","proxy","KeywordWatcherProxy"],gi.__super__=ri,gi.prototype=i(ri.prototype,{onMessageCreated:function(e){if(null!=e){var t,n=ke.map(ke.option(this.dataStore.getTalk(e.talkId)),function(e){return e.domainId});switch(n[1]){case 0:t=n[2];break;case 1:t=this.settings.getSelectedDomainId()}if(this.features.canDetectKeyword(t)){var i;if(this.settings.getBrowserSettings().keywordWatchingSelfMessage)i=!1;else{var r=this.dataStore,a=e.userId;if(null!=r.me){var o=r.me.id;i=null!=o&&null!=a&&o.high==a.high&&o.low==a.low}else i=!1}if(!i){var s=e.messageStringForKeywordDetection(this.settings.getBrowserSettings().keywordWatchingActionReply);this.detectKeyword(s,e.type,e.id,t,e.talkId)}}}},onAnnouncementCreated:function(e){if(null!=e&&this.features.canDetectKeyword(e.domainId)){var t=St.getDisplayTextWithoutEscape(e.type,e.content);this.detectKeyword(t,e.type,e.id,e.domainId,null)}},detectKeyword:function(o,s,l,u,c){var _=this;this.reserveOnNormalizedKeywordPrepared(function(e){for(var t=e.keys();t.hasNext();){var n=t.next(),i=e.get(n);if(null!=i&&0!=i.length&&wi.match(s,n))for(var r=0;r<i.length;){var a=i[r];if(++r,0!=a.search(o).length)return void _.addkeywordDetection(u,c,l)}}})},reserveOnNormalizedKeywordPrepared:function(l){var u=this;Zn.assureNormalize(function(e){var t=u.settings.getBrowserSettings().keywordWatchingText;if(u.cachedKeyword!=t){u.cachedKeyword=t,u.cachedNormalizedKeywordsMap=new tr;for(var n=0,i=Si.__empty_constructs__;n<i.length;){var r=i[n];++n,u.cachedNormalizedKeywordsMap.set(r,[])}for(var a=0,o=vi.parse(t);a<o.length;){var s=o[a];++a,u.cachedNormalizedKeywordsMap.get(s.type).push(new Jn(s.word,!0,e))}}l(u.cachedNormalizedKeywordsMap)})},addkeywordDetection:function(e,t,n){null==this.detectedDomainTalkIdStrings&&(this.detectedDomainTalkIdStrings=new or);var i=this.getKey(e,t);if(null!=i)if(this.hasKeywordDetection(e,t)){var r=this.detectedDomainTalkIdStrings;null!=$r[i]?r.setReserved(i,n):r.h[i]=n}else{var a=this.detectedDomainTalkIdStrings;null!=$r[i]?a.setReserved(i,n):a.h[i]=n;var o=this.settings.getBrowserSettings().keywordWatchingEmphasis;this.sendNotification("keyword_detaction_updated",{domainId:e,talkId:t,detected:!0,emphasis:o})}},readKeywordDetection:function(e,t,n){if(!this.settings.getBrowserSettings().keywordWatchingEmphasis){var i,r=this.getDetectId(e,t);if(null!=r){var a=n.high-r.high|0;a=0!=a?a:Wi.ucompare(n.low,r.low),i=0<=(n.high<0?r.high<0?a:-1:0<=r.high?a:1)}else i=!1;i&&this.removeKeywordDetection(e,t)}},removeKeywordDetection:function(e,t){if(null!=this.detectedDomainTalkIdStrings){var n=this.getKey(e,t);if(null!=n){this.detectedDomainTalkIdStrings.remove(n);var i=this.settings.getBrowserSettings().keywordWatchingEmphasis;this.sendNotification("keyword_detaction_updated",{domainId:e,talkId:t,detected:!1,emphasis:i})}}},removeKeywordDetectionAll:function(){if(null!=this.detectedDomainTalkIdStrings)for(var e=this.settings.getBrowserSettings().keywordWatchingEmphasis,t=this.detectedDomainTalkIdStrings.keys();t.hasNext();){var n=t.next();if(I.startsWith(n,"talk_")){var i=n.substring("talk_".length),r=be.makeFromIdStr(i);this.sendNotification("keyword_detaction_updated",{domainId:null,talkId:r,detected:!1,emphasis:e})}else if(I.startsWith(n,"announcement_")){var a=n.substring("announcement_".length),o=be.makeFromIdStr(a);this.sendNotification("keyword_detaction_updated",{domainId:o,talkId:null,detected:!1,emphasis:e})}this.detectedDomainTalkIdStrings.remove(n)}},getDetectId:function(e,t){if(null==this.detectedDomainTalkIdStrings)return null;var n=this.getKey(e,t);if(null==n)return null;var i=this.detectedDomainTalkIdStrings;return null!=$r[n]?i.getReserved(n):i.h[n]},hasKeywordDetection:function(e,t){return null!=this.getDetectId(e,t)},getKey:function(e,t){return null==e&&null==t?null:null!=t?"talk__"+t.high+"_"+t.low:"announcement__"+e.high+"_"+e.low},__class__:gi});var vi=function(){};(n["albero.proxy.KeywordParser"]=vi).__name__=["albero","proxy","KeywordParser"],vi.parse=function(e){var t=I.htmlEscape(e,!0),n=new y("&quot;(.*?)&quot;","g").map(t,function(e){return vi.encodeSpace(e.matched(1))});return new y("[ ]","g").split(n).filter(w.isNotEmpty).map(vi.decodeSpace).map(vi.createParsedKeyword)},vi.encodeSpace=function(e){return I.replace(I.replace(e," ","&SPACE"),"","&FULL_PITCH_SPACE")},vi.decodeSpace=function(e){return I.replace(I.replace(e,"&SPACE"," "),"&FULL_PITCH_SPACE","")},vi.createParsedKeyword=function(e){var t=new y("\\[type:([A-Za-z]+)\\](.*)","g");if(t.match(e)){var n=t.matched(1),i=t.matched(2),r=wi.getKeywordTypeByMessageTypeString(n);if(r!=Si.normal)return new yi(r,i)}return new yi(Si.normal,e)};var yi=function(e,t){this.type=e,this.word=t};(n["albero.proxy.ParsedKeyword"]=yi).__name__=["albero","proxy","ParsedKeyword"],yi.prototype={__class__:yi};var Si=n["albero.proxy.KeywordType"]={__ename__:["albero","proxy","KeywordType"],__constructs__:["normal","selectOneReplyOnly","yesOrNoReplyOnly","todoDoneOnly"]};Si.normal=["normal",0],Si.normal.toString=s,(Si.normal.__enum__=Si).selectOneReplyOnly=["selectOneReplyOnly",1],Si.selectOneReplyOnly.toString=s,(Si.selectOneReplyOnly.__enum__=Si).yesOrNoReplyOnly=["yesOrNoReplyOnly",2],Si.yesOrNoReplyOnly.toString=s,(Si.yesOrNoReplyOnly.__enum__=Si).todoDoneOnly=["todoDoneOnly",3],Si.todoDoneOnly.toString=s,(Si.todoDoneOnly.__enum__=Si).__empty_constructs__=[Si.normal,Si.selectOneReplyOnly,Si.yesOrNoReplyOnly,Si.todoDoneOnly];var wi=function(){};(n["albero.proxy.KeywordTypeHelper"]=wi).__name__=["albero","proxy","KeywordTypeHelper"],wi.getKeywordType=function(e){return null!=e?wi.getKeywordTypeByMessageTypeString(St.typeString(e)):Si.normal},wi.getKeywordTypeByMessageTypeString=function(e){if(null!=e)switch(e){case"selectOneReply":return Si.selectOneReplyOnly;case"todoDone":return Si.todoDoneOnly;case"yesOrNoReply":return Si.yesOrNoReplyOnly}return Si.normal},wi.match=function(e,t){switch(t[1]){case 0:return!0;case 1:return e==wt.selectOneReply;case 2:return e==wt.yesOrNoReply;case 3:return e==wt.todoDone}},wi.createFilterClassStringFromMessageType=function(e){return wi.createFilterClassString(wi.getKeywordType(e))},wi.createFilterClassString=function(e){return"keyword_type_"+K.string(e)};var Ti=function(){ri.call(this,"limitations")};(n["albero.proxy.LimitationsProxy"]=Ti).__name__=["albero","proxy","LimitationsProxy"],Ti.__super__=ri,Ti.prototype=i(ri.prototype,{getMaxTalkers:function(){var t=this,e=ke.flatMap(ke.flatMap(ke.option(this.settings.getSelectedDomainId()),function(e){return ke.option(t.dataStore.getDomain(e))}),function(e){return e.getMaxTalkers()});switch(e[1]){case 0:return e[2];case 1:return this.settings.getConfiguration().maxTalkers}},__class__:Ti});var Ii=function(){ri.call(this,"messageStore")};(n["albero.proxy.MessageStoreProxy"]=Ii).__name__=["albero","proxy","MessageStoreProxy"],Ii.findFileDynamic=function(e,n){return Ae.find(e,function(e){var t=e.file_id;return null!=t&&(null!=t&&null!=n&&t.high==n.high&&t.low==n.low)})},Ii.__super__=ri,Ii.prototype=i(ri.prototype,{onRegister:function(){this.messages=new or},getMessage:function(e){if(null==e)return rr.None;var t="_"+e.high+"_"+e.low,n=this.messages;return ke.option(null!=$r[t]?n.getReserved(t):n.h[t])},setMessage:function(e){},removeMessage:function(e){this.messages.remove("_"+e.high+"_"+e.low)},onFileDeleted:function(i){ke.foreach(this.getMessage(i.messageId),function(e){var t=e.getFilesDynamic();if(0!=t.length){var n=Ii.findFileDynamic(t,i.fileId);null!=n&&(n.deleted=!0)}})},onConferenceClose:function(e){ke.foreach(this.getMessage(e.messageId),function(e){e.content.closed=!0})},__class__:Ii});var Ei=function(){this.connectionStatus=d.Ok,ri.call(this,"rpc"),this.responseHandlers=new nr,this.errorHandler=Lr(this,this.onServerErrorWithMethod),this.connectionKeeper=new Ai(Lr(this,this.ping))};(n["albero.proxy.MsgPackRpcProxy"]=Ei).__name__=["albero","proxy","MsgPackRpcProxy"],Ei.__super__=ri,Ei.prototype=i(ri.prototype,{initWebSocket:function(){null==this.ws&&(this.ws=new ei(Br.endpoint),this.ws.onopen=Lr(this,this.onOpen),this.ws.onmessage=Lr(this,this.onMessage),this.ws.onclose=Lr(this,this.onClose),this.ws.onpong=Lr(this,this.onPong),Ei.pingAt=null)},finishWebSocket:function(){if(null==this.ws)return null;this.ws.onopen=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws.onclose=null,this.ws.onpong=null,this.ws.close();var e=this.ws;return this.ws=null,Ei.pingAt=null,e},onRegister:function(){this.initWebSocket(),this.connectionKeeper.start()},onRemove:function(){this.connectionKeeper.stop(),this.finishWebSocket()},onOpen:function(){this.connectionStatus=d.Ok,this.connectionKeeper.setConnected(!0),this.sendNotification("SignIn")},onPong:function(e){Ei.pingAt=null;K.string(e)},onMessage:function(e){var t=this,n=new Tr(e,!0).o,i=vr.__cast(n[0],Kr);if(1==i&&4==n.length){var r=vr.__cast(n[1],Kr),a=n[2],o=n[3],s=this.responseHandlers.h[r];if(null==s)return void Qn._e("["+Ee.dateStr(new Date)+"] ","No ResponseHandler prepared. msgId:%s error:%s result:",r,a,o,"");s.method;if(null==a){var l=s.onSuccess;null!=l&&l(o)}else{var u=s.method;Qn._e("["+Ee.dateStr(new Date)+"] ","Receive Error Response. method:",u," error:",a,"");var c=s.onError;null!=c?c(a):null!=this.errorHandler&&this.errorHandler(s.method,a)}this.responseHandlers.remove(r)}else if(0==i&&4==n.length)for(var _=vr.__cast(n[1],Kr),h=vr.__cast(n[2],String),d=vr.__cast(n[3],Array),f=0;f<d.length;){var m=d[f];++f,this.broadcast.handleNotification(h,m,function(){t.ws.send(new Ir([1,_,null,!0]).o.getBytes())})}},onClose:function(e,t,n){Qn._i("["+Ee.dateStr(new Date)+"] ","onClose. code:"+e+", reason:"+t+", wasClean:"+(null==n?"null":""+n),"","","",""),1001==e&&n||(this.connectionStatus=1e3!=e&&1005!=e||"concurrent access"!=t?1e3!=e&&1005!=e||"forcibly closed"!=t?d.Error:d.ForcibliyClosedError:d.ConcurrentAccessError,this.connectionStatus==d.ForcibliyClosedError?this.sendNotification("SignOut"):this.sendNotification("Url",ge.FORWARD(E.error))),this.finishWebSocket(),this.connectionKeeper.setConnected(!1)},restart:function(e){null==e&&(e=500);for(var t=this,n=this.finishWebSocket(),i=this.responseHandlers.keys();i.hasNext();){var r=i.next();this.responseHandlers.remove(r)}var a=null;a=function(){null==n||n.isClosed()?t.initWebSocket():Ji.delay(a,100)},Ji.delay(a,e)},call:function(e,t,n,i){if(null!=this.ws){null==t&&(t=[]);var r=Ei.lastMsgId++,a=this.responseHandlers,o=new bi(e,n,i);a.h[r]=o;var s=new Ir([0,r,e,t]).o.getBytes();this.ws.send(s)}else{var l=this.data;Qn._e("["+Ee.dateStr(new Date)+"] ","disconnected. data:",l,"","","")}},ping:function(){switch(this.connectionStatus[1]){case 2:case 3:return}if(null==this.ws||this.ws.isClosed()){this.restart();Ei.pingAt,K.string(null==this.ws||this.ws.isClosed())}else{Ei.pingAt;this.connectionKeeper.isConnected()&&(this.ws.ping("PING"),Ei.pingAt=(new Date).getTime())}},onServerErrorWithMethod:function(e,t){this.onServerError(t)},onServerError:function(e){if(this.sendNotification("error_occurred",e),503==e.code&&"service temporarily unavailable"==e.message){var t=e.detail.retry_after;this.restart(1e3*t)}"invalid session"==e.message&&this.restart()},__class__:Ei});var Ai=function(e){this.connected=!1,this.ping=e};(n["albero.proxy._MsgPackRpcProxy.ConnectionKeeper"]=Ai).__name__=["albero","proxy","_MsgPackRpcProxy","ConnectionKeeper"],Ai.prototype={start:function(){},stop:function(){this.deleteTimer()},setConnected:function(e){this.connected==e&&null!=this.timer||(this.connected=e,this.resetTimer())},isConnected:function(){return this.connected},resetTimer:function(){var i=this;if(this.deleteTimer(),this.connected)this.timer=new Ji(45e3),this.timer.run=this.ping;else{var r=null;(r=function(t){var n=0|Math.min(2*t,45e3);return function(){i.ping();var e=r(n);i.timer=Ji.delay(e,t)}})(3e3)()}},deleteTimer:function(){null!=this.timer&&(this.timer.stop(),this.timer=null)},__class__:Ai};var bi=function(e,t,n){this.method=e,this.onSuccess=t,this.onError=n};(n["albero.proxy._MsgPackRpcProxy.ResponseHandler"]=bi).__name__=["albero","proxy","_MsgPackRpcProxy","ResponseHandler"],bi.prototype={__class__:bi};var Ni=function(e){this.code=e.code,this.message=e.message,this.detail=e.detail};(n["albero.proxy.Error"]=Ni).__name__=["albero","proxy","Error"],Ni.prototype={__class__:Ni};var ki=function(){};(n["albero.proxy.ErrorConverter"]=ki).__name__=["albero","proxy","ErrorConverter"],ki.toLocalError=function(e,t){return{code:t.code,message:t.message,detail:t.detail,localErrorType:e}};var Di=function(){ri.call(this,"readStatusUpdater"),this.updateReadStatusesTimers=new or,this.updateReadAnnouncementStatusesTimers=new or};(n["albero.proxy.ReadStatusUpdaterProxy"]=Di).__name__=["albero","proxy","ReadStatusUpdaterProxy"],Di.__super__=ri,Di.prototype=i(ri.prototype,{updateReadStatuses:function(e,t){var a=this,n=this.dataStore.getTalkStatus(e);if(null!=n){if(null==t||this.canRegardTalkReadCountZero(n,t)){if(!gn.isUnreadMesasgeExisted(n))return;if(null==n.maxMessageId)return;n.readAll(),this.dataStore.setTalkStatus(n)}else{var i=t.filter(function(e){return gn.isUnread(n,e.id)});if(0==i.length)return;var r=i.filter(function(e){if(e.isUnreadCountTarget){var t,n=a.dataStore,i=e.userId;if(null!=n.me){var r=n.me.id;t=null!=r&&null!=i&&r.high==i.high&&r.low==i.low}else t=!1;return!t}return!1}).length;n.read(i[i.length-1].id,r),this.dataStore.setTalkStatus(n)}var o="_"+e.high+"_"+e.low,s=this.updateReadStatusesTimers,l=null!=$r[o]?s.getReserved(o):s.h[o];null!=l&&l.stop();var u=n.maxReadMessageId,c=Ji.delay(function(){a.updateReadStatusesTimers.remove(o),null!=a.dataStore.getTalkStatus(e)&&a.api.updateReadStatuses(e,u)},1e3),_=this.updateReadStatusesTimers;null!=$r[o]?_.setReserved(o,c):_.h[o]=c}},updateAnnouncementReadStatus:function(e,t){var n=this,i=this.dataStore.getAnnouncementStatus(e);if(null!=i){if(null==t||this.canRegardAnnouncementReadCountZero(i,t)){if(!xe.isUnreadAnnouncementExisted(i))return;if(null==i.maxAnnouncementId)return;i.readAll(),this.dataStore.setAnnouncementStatus(i)}else{var r=t.filter(function(e){return xe.isUnread(i,e)});if(0==r.length)return;i.read(r[r.length-1],r.length),this.dataStore.setAnnouncementStatus(i)}var a="_"+e.high+"_"+e.low,o=this.updateReadAnnouncementStatusesTimers,s=null!=$r[a]?o.getReserved(a):o.h[a];null!=s&&s.stop();var l=i.maxReadAnnouncementId;s=Ji.delay(function(){n.updateReadAnnouncementStatusesTimers.remove(a),n.api.updateAnnouncementReadStatus(e,l)},1e3);var u=this.updateReadAnnouncementStatusesTimers;null!=$r[a]?u.setReserved(a,s):u.h[a]=s}},canRegardTalkReadCountZero:function(e,t){return this.canRegardReadCountZero(e.maxMessageId,t.map(function(e){return e.id}))},canRegardAnnouncementReadCountZero:function(e,t){return this.canRegardReadCountZero(e.maxAnnouncementId,t)},canRegardReadCountZero:function(e,t){var n=ke.orNull(Ne.lastOption(t));return null!=e&&null!=n&&e.high==n.high&&e.low==n.low},__class__:Di});var Ci=function(){ri.call(this,"routing")};(n["albero.proxy.RoutingProxy"]=Ci).__name__=["albero","proxy","RoutingProxy"],Ci.__super__=ri,Ci.prototype=i(ri.prototype,{onRegister:function(){},init:function(){null==this.router&&(this.router=new Ri(this,this.settings,this.dataStore),this.router.start())},forward:function(e){this.init(),this.router.forward(e)},redirect:function(e,t){this.init(),this.router.redirect(e,t)},back:function(){null!=this.router&&this.router.back()},stop:function(){null!=this.router&&this.router.started&&this.router.stop()},__class__:Ci});var Ri=function(e,t,n){this.proxy=e,this.settings=t,this.dataStore=n,this.started=!1,this.urlConverterDelegate=new Oi(t,n)};(n["albero.proxy._RoutingProxy.LocalRouter"]=Ri).__name__=["albero","proxy","_RoutingProxy","LocalRouter"],Ri.prototype={notify:function(e){var t=this.getDomainId(e);this.settings.setSelectedDomainId(t),this.proxy.sendNotification("current_page_changed",e)},start:function(){this.started=!0},forward:function(e){0!=e[1]&&this.notify(e)},redirect:function(e,t){},redirectWithHash:function(){},back:function(){this.notify(this.prev)},stop:function(){this.started=!1},getDomainId:function(e){switch(e[1]){case 2:return e[2];case 3:return e[2];case 4:return e[2];case 5:return e[2];case 6:return e[2];case 10:return e[2];default:return null}},parseFragment:function(e){return N.createUrls(e,this.urlConverterDelegate)},toFragment:function(e){return N.createFragment(e,this.urlConverterDelegate)},__class__:Ri};var Oi=function(e,t){this.settings=e,this.dataStore=t};(n["albero.proxy.UrlConverterDelegate"]=Oi).__name__=["albero","proxy","UrlConverterDelegate"],Oi.__interfaces__=[k],Oi.prototype={isMultiViewMode:function(){return this.settings.isMultiViewMode()},getLastSelectedDomainId:function(){return ke.option(this.settings.getLastSelectedDomainId())},getFallbackDomainId:function(){var e;switch(ke.flatMap(this.getLastSelectedDomainId(),Lr(this,this.getDomain))[1]){case 0:e=ke.flatMap(this.getLastSelectedDomainId(),Lr(this,this.getDomain));break;case 1:e=this.getOldestDomain()}return ke.map(e,function(e){return e.id})},getDomain:function(e){return ke.option(this.dataStore.getDomain(e))},getOldestDomain:function(){return new at(this.dataStore.getDomains()).getOldestDomain()},__class__:Oi};var Mi=function(){ri.call(this,"searchService")};(n["albero.proxy.SearchServiceProxy"]=Mi).__name__=["albero","proxy","SearchServiceProxy"],Mi.__super__=ri,Mi.prototype=i(ri.prototype,{isSearching:function(){return this.searching},clearSearching:function(){this.searching=!1},isRecentParams:function(e){return null!=this.recentParams&&null!=e&&this.recentParams.eq(e)},clearRecentParams:function(){this.recentParams=null},clearEditingParams:function(){this.editingParams=null},saveParams:function(e){this.editingParams=e,this.recentParams=e.copy()},updateTalkIdParam:function(e){this.assureParams(),this.editingParams.talkId=e},updateSearchTypeParam:function(e){this.assureParams(),this.editingParams.searchType=e},updateFromUserIdParam:function(e){this.assureParams(),this.editingParams.fromUserId=e},updateKeywordParam:function(e){this.assureParams(),this.editingParams.keyword=e},updateDomainIdParam:function(e){this.assureParams(),this.editingParams.domainId=e},updateSinceTextParam:function(e){this.assureParams(),this.editingParams.sinceText=e},updateUntilTextParam:function(e){this.assureParams(),this.editingParams.untilText=e},assureParams:function(){if(null==this.editingParams){var e=this.settings.getSelectedDomainId(),t={domain_id_str:"_"+e.high+"_"+e.low};this.editingParams=new Wt(t)}},prepareForSearching:function(e,t){this.searching=!0,null==t&&this.sendNotification("notify_search_prepare",{searching:!0,params:e})},notifySearchMessagesFail:function(){this.searching=!1,this.sendNotification("notify_search_messages_fail",{})},notifySearchAttachmentsFail:function(){this.searching=!1,this.sendNotification("notify_search_attachments_fail",{})},saveSearchMessagesResult:function(e){null==this.contextMap&&(this.contextMap=new or),this.messagesNextMarker=e.nextMarker,null==e.marker&&(this.hitMessageIdSet=new or);for(var t=0,n=e.contents;t<n.length;){var i=n[t];++t;var r=i.messages[0].id,a="_"+r.high+"_"+r.low,o=this.contextMap;null!=$r[a]?o.setReserved(a,i):o.h[a]=i,this.hitMessageIdSet=Ae.fold(i.messages,function(e,t){if(e.hit){var n=e.id,i="_"+n.high+"_"+n.low;null!=$r[i]?t.setReserved(i,1):t.h[i]=1}return t},this.hitMessageIdSet)}this.searching=!1,this.sendNotification("notify_search_messages",e)},saveSearchAttachmentsResult:function(e){null==this.attachmentsMap&&(this.attachmentsMap=new or),this.attachmentsNextMarker=e.nextMarker;for(var t=0,n=e.contents;t<n.length;){var i=n[t];++t;var r=i.attachmentId,a="_"+r.high+"_"+r.low,o=this.attachmentsMap;null!=$r[a]?o.setReserved(a,i):o.h[a]=i}this.searching=!1,this.sendNotification("notify_search_attachments",e)},getHitContext:function(e){var t=this.contextMap;return null!=$r[e]?t.getReserved(e):t.h[e]},getFileInfo:function(e){var t=this.attachmentsMap;return null!=$r[e]?t.getReserved(e):t.h[e]},isHitMessage:function(e){var t="_"+e.high+"_"+e.low,n=this.hitMessageIdSet;return null!=$r[t]?n.existsReserved(t):n.h.hasOwnProperty(t)},reserveOnNormalizedKeywordPrepared:function(i){var r=this;null!=this.recentParams&&null!=this.recentParams.keyword&&Zn.assureNormalize(function(t){var e=null==r.recentParams?"":r.recentParams.keyword;if(r.cachedKeyword!=e){r.cachedKeyword=e,null==r.cachedNormalizedKeywords?r.cachedNormalizedKeywords=[]:r.cachedNormalizedKeywords.splice(0,r.cachedNormalizedKeywords.length);var n=new y("[ ]","g").split(I.htmlEscape(e,!0));Ae.iter(n.filter(w.isNotEmpty),function(e){r.cachedNormalizedKeywords.push(new Jn(e,!0,t))})}i(r.cachedNormalizedKeywords)})},__class__:Mi});var xi=function(){ri.call(this,"session"),this.createSessionCount=0};(n["albero.proxy.SessionProxy"]=xi).__name__=["albero","proxy","SessionProxy"],xi.__super__=ri,xi.prototype=i(ri.prototype,{start:function(e){this.api.createSession(e,Lr(this,this.onSessionCreated))},onSessionCreated:function(e){var t,n=this;if(e.notification){var i=this.dataStore,r=e.user.id;if(null!=i.me){var a=i.me.id;t=null!=a&&null!=r&&a.high==r.high&&a.low==r.low}else t=!1}else t=!1;var o=this.dataStore,s=e.user;o.me=s;for(var l=0,u=o.getDomains();l<u.length;){var c=u[l];++l,o.sendNotification("notify_update_user",o.me.toDomainUser(c.id))}o.sendNotification("current_user_changed",s),o.storage.setDirtyFlag(),this.settings.setConfiguration(e.configuration),this.sendNotification("data_recovering"),qn.runOrReserve(function(){t?n.prepareNecessaryDataFromCache():(n.dataStore.clear(!1),n.prepareNecessaryDataFromServer()),n.createSessionCount++})},prepareNecessaryDataFromServer:function(){var a=this;this.api.resetNotification(function(e){var t=0,r=function(){5==(t+=1)&&a.onNecessaryDataPrepared()};a.api.getDomains(function(){var e=a.dataStore.getDomains(),t=0;0<e.length?a.api.getAnnouncementStatuses(function(){(t+=1)==e.length&&r()}):r();var n=0,i=function(){2==(n+=1)&&a.api.getTalks(r)};a.api.getFriends(i),a.api.getAcquaintances(i)}),a.api.getDomainInvites(r),a.api.getAccountControlRequests(r),a.api.getJoinedAccountControlGroup(r)})},prepareNecessaryDataFromCache:function(){var e=Ne.sortAndReturn(this.dataStore.getDomains(),function(e,t){var n=t.id,i=e.id,r=n.high-i.high|0;return r=0!=r?r:Wi.ucompare(n.low,i.low),n.high<0?i.high<0?r:-1:0<=i.high?r:1});this.api.sendDomainNotifications(e);for(var t=0;t<e.length;){var n=e[t];++t;var i=this.dataStore.getAnnouncementStatus(n.id);null==i&&(i=this.dataFactory.newAnnouncementStatusForDomain(n.id)),this.api.sendAnnouncementStatusNotification(i);for(var r=0,a=this.dataStore.getFriends(n.id);r<a.length;){var o=a[r];++r,this.sendNotification("notify_add_friend",o)}for(var s=0,l=this.dataStore.getAcquaintances(n.id);s<l.length;){var u=l[s];++s,this.sendNotification("notify_add_acquaintance",u)}}this.api.sendTalkNotifications(this.dataStore.getTalks()),this.api.sendTalkStatusNotifications(this.dataStore.getTalkStatuses());for(var c=0,_=this.dataStore.getDomainInvites();c<_.length;){var h=_[c];++c,this.sendNotification("notify_add_domain_invite",h)}for(var d=0,f=this.dataStore.getAccountControlRequests();d<f.length;){var m=f[d];++d,this.sendNotification("notify_add_account_control_request",m)}var p=this.dataStore.getAccountControlGroup();null!=p&&this.sendNotification("notify_join_account_control_group",p),this.onNecessaryDataPrepared()},onNecessaryDataPrepared:function(){this.sendNotification("data_recovered"),this.api.startNotification(),this.api.startUpdateLastUsedAtIfNeed(),this.api.getConferences()},__class__:xi});var Ui=function(){this.selectedDomainIdOnTalkSelectionChanged=null,this.selectedDomainId=null,this.remember=!0,ri.call(this,"settings")};(n["albero.proxy.SettingsProxy"]=Ui).__name__=["albero","proxy","SettingsProxy"],Ui.__interfaces__=[hn],Ui.__super__=ri,Ui.prototype=i(ri.prototype,{onRegister:function(){this.loadBrowserSettings()},setAccessTokenRemember:function(e){this.remember=e},setAccessToken:function(e){this.remember&&(this.accessToken=e,this.sendNotification("access_token_changed",e))},getAccessToken:function(){return null==this.accessToken&&(this.accessToken=Br.accessToken),this.accessToken},clearAccessToken:function(){this.accessToken=null},getOs:function(){return"bot"},getIDFV:function(){var e=S.getItem("idfv");return null!=e&&""!=e||(e=w.randomString(),S.setItem("idfv",e)),e},setConfiguration:function(e){this.configuration=e,this.sendNotification("configuration_changed",e)},getConfiguration:function(){return this.configuration},setSelectedDomainId:function(e){var t=this.selectedDomainId;null!=t&&null!=e&&t.high==e.high&&t.low==e.low||(null!=e?(S.setItem("selected_domain_id_h",K.string(e.high)),S.setItem("selected_domain_id_l",K.string(e.low))):(S.removeItem("selected_domain_id_h"),S.removeItem("selected_domain_id_l")),this.selectedDomainId=e,this.sendNotification("domain_selection_changed",e))},getLastSelectedDomainId:function(){var e,t=S.getItemAsInt("selected_domain_id_h"),n=S.getItemAsInt("selected_domain_id_l");null!=t&&null!=n?e=new En(t,n):e=null;return e},getSelectedDomainId:function(){return this.selectedDomainId},getSelectedDomainIdOnTalkSelectionChanged:function(){return this.selectedDomainIdOnTalkSelectionChanged},clearDomainSelection:function(){this.selectedDomainId=null,S.removeItem("selected_domain_id_h"),S.removeItem("selected_domain_id_l")},clearSelectedTalk:function(e){null==e&&(e=Dt.SingleTalkPane);var t=this.selectedDomainId;this.assureTalkSelectionMap("_"+t.high+"_"+t.low).remove(e),this.selectedDomainIdOnTalkSelectionChanged=this.selectedDomainId,this.sendNotification("talk_selection_changed",new _n(e,fn.NotSelected))},selectTalk:function(e,t,n,i){var r="_"+t.high+"_"+t.low;if(null==r)return!1;var a=this.assureTalkSelectionMap(r),o=fn.TalkSelected(n,i);a.set(e,o);var s=this.selectedDomainId;return null!=t&&null!=s&&t.high==s.high&&t.low==s.low&&(this.selectedDomainIdOnTalkSelectionChanged=this.selectedDomainId,this.sendNotification("talk_selection_changed",new _n(e,o)),!0)},selectAnnouncement:function(e){if(null==this.selectedDomainId)return!1;var t=this.selectedDomainId,n="_"+t.high+"_"+t.low;return this.assureTalkSelectionMap(n).set(e,fn.AnnouncementsSelected),this.selectedDomainIdOnTalkSelectionChanged=this.selectedDomainId,this.sendNotification("talk_selection_changed",new _n(e,fn.AnnouncementsSelected)),!0},hasSelectedTalkOrAnnouncements:function(e){null==e&&(e=Dt.SingleTalkPane);var t=this.getTalkSelectionMap(this.selectedDomainId);return null!=t&&t.get(e)!=fn.NotSelected},hasSelectedTalk:function(e){null==e&&(e=Dt.SingleTalkPane);var t=this.getTalkSelectionMap(this.selectedDomainId);if(null==t)return!1;var n=t.get(e);return null!=n&&0!=n[1]},getTalkSelectionMap:function(e){if(null==this.paneTalkSelections)return null;if(null==e)return null;var t="_"+e.high+"_"+e.low,n=this.paneTalkSelections;return null!=$r[t]?n.getReserved(t):n.h[t]},assureTalkSelectionMap:function(e){null==this.paneTalkSelections&&(this.paneTalkSelections=new or);var t=this.paneTalkSelections,n=null!=$r[e]?t.getReserved(e):t.h[e];if(null==n){n=new tr;var i=this.paneTalkSelections;null!=$r[e]?i.setReserved(e,n):i.h[e]=n}return n},getSelectedTalkId:function(){var e=this.getTalkSelection(this.selectedDomainId,Dt.SingleTalkPane);if(1==e[1]){e[3];return e[2]}return null},isSelectedTalkOrAnnouncements:function(e,t){return mn.isSelected(this.getTalkSelection(this.selectedDomainId,e),t)},getTalkSelection:function(e,t){if(null==this.paneTalkSelections)return fn.NotSelected;var n=this.getTalkSelectionMap(e);if(null==n)return fn.NotSelected;var i=n.get(t);return null==i?fn.NotSelected:i},isSendByEnter:function(){return null==this.sendByEnter&&(this.sendByEnter=!0),this.sendByEnter},setSendByEnter:function(e){e!=this.sendByEnter&&(this.sendByEnter=e,this.sendNotification("send_by_enter_changed",e))},setSelectedStampTabId:function(e){S.setItem("selected_stamp_tab_id",null==e?"null":""+e)},getSelectedStampTabId:function(){var e=S.getItemAsInt("selected_stamp_tab_id");return null==e?0:e},clearSelectedStampTabId:function(){S.removeItem("selected_stamp_tab_id")},setInputTextForTalkId:function(e,t){null==e||0==e.length?this.clearInputTextForTalkId(t):(this.loadInputTextForAll(),this.inputTexts["_"+t.high+"_"+t.low]=e)},getInputTextForTalkId:function(e){this.loadInputTextForAll();var t=this.inputTexts["_"+e.high+"_"+e.low];return null!=t?t:""},clearInputTextForTalkId:function(e){this.loadInputTextForAll(),delete this.inputTexts["_"+e.high+"_"+e.low]},loadInputTextForAll:function(){null==this.inputTexts&&(this.inputTexts=S.getItemAsJson("input_text"),null==this.inputTexts&&(this.inputTexts={}))},saveInputTextForAll:function(){if(null!=this.inputTexts){var e=JSON.stringify(this.inputTexts);S.setItem("input_text",e)}},clearInputTextForAll:function(){S.removeItem("input_text"),this.inputTexts=null},setCopyProfileToAllDomains:function(e){e?S.setItem("copy_profile_to_all_domains","true"):S.removeItem("copy_profile_to_all_domains")},isCopyProfileToAllDomains:function(){return null!=S.getItem("copy_profile_to_all_domains")},setSearchHistoriesForSelectedDomain:function(e){if(null!=this.selectedDomainId){if(this.loadSearchHistoryForAll(),null==e){var t=this.selectedDomainId;delete this.searchHistories["_"+t.high+"_"+t.low]}else{var n=this.selectedDomainId;this.searchHistories["_"+n.high+"_"+n.low]=e}this.saveSearchHistoryForAll()}},getSearchHistoriesForSelectedDomain:function(){if(null==this.selectedDomainId)return null;this.loadSearchHistoryForAll();var e=this.selectedDomainId;return this.searchHistories["_"+e.high+"_"+e.low]},loadSearchHistoryForAll:function(){null==this.searchHistories&&(this.searchHistories=S.getItemAsJson("search_histories"),null==this.searchHistories&&(this.searchHistories={}))},saveSearchHistoryForAll:function(){if(null!=this.searchHistories){var e=JSON.stringify(this.searchHistories);S.setItem("search_histories",e)}},setSelectedDepartmentId:function(e,t){if(null!=e){if(this.loadSelectedDepartmentIdsForAll(),null==t)this.selectedDepartmentIds.remove("_"+e.high+"_"+e.low);else{var n="_"+e.high+"_"+e.low,i=this.selectedDepartmentIds;null!=$r[n]?i.setReserved(n,t):i.h[n]=t}this.saveSelectedDepartmentIdsForAll()}},getSelectedDepartmentId:function(e){if(null==e)return null;this.loadSelectedDepartmentIdsForAll();var t="_"+e.high+"_"+e.low,n=this.selectedDepartmentIds;return null!=$r[t]?n.getReserved(t):n.h[t]},loadSelectedDepartmentIdsForAll:function(){null==this.selectedDepartmentIds&&(this.selectedDepartmentIds=S.getItemWithUnserialize("selected_department_ids"),null==this.selectedDepartmentIds&&(this.selectedDepartmentIds=new or))},saveSelectedDepartmentIdsForAll:function(){null!=this.selectedDepartmentIds&&S.setItemWithSerialize("selected_department_ids",this.selectedDepartmentIds)},setRightPanelOpened:function(e){e?S.removeItem("right_panel_opened"):S.setItem("right_panel_opened","false")},isRightPanelOpened:function(){return null==S.getItem("right_panel_opened")},setMultiViewMode:function(e){e?S.setItem("multi_view_mode","true"):S.removeItem("multi_view_mode")},isMultiViewMode:function(){return null!=S.getItem("multi_view_mode")},setPasswordWarningSkipUntil:function(e){null==e?S.removeItem("password_warning_skip_until"):S.setItem("password_warning_skip_until","_"+e.high+"_"+e.low)},getPasswordWarningSkipUntil:function(){var e=S.getItem("password_warning_skip_until");return null==e?null:be.makeFromIdStr(e)},setLastUsedExpiredAt:function(e){null==e?S.removeItem("last_used_expired_at"):S.setItem("last_used_expired_at","_"+e.high+"_"+e.low)},getLastUsedExpiredAt:function(){var e=S.getItem("last_used_expired_at");return null==e?null:be.makeFromIdStr(e)},setOnPremise:function(e){this.onPremises=e},isOnPremises:function(){return this.onPremises},getBrowserSettings:function(){return this.browserSettings},applyNotificationSettings:function(e){return e.copyNotificationSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyKeywordWatchingSettings:function(e){return e.copyKeywordSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyTalkSettings:function(e){return e.copyTalkSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyUserDataSettings:function(e){return e.copyUserDataContainerTo(this.browserSettings),this.saveBrowserSettings()},applyLanguageSettings:function(e){return e.copyLanguageSettingsTo(this.browserSettings),this.saveBrowserSettings()},applyConferenceSettings:function(e){return e.copyConferenceSettingsTo(this.browserSettings),this.saveBrowserSettings()},loadBrowserSettings:function(){this.browserSettings=Pe.fromJson(S.getItemAsJson(Pe.NAME))},saveBrowserSettings:function(){var e=S.getItemAsJson(Pe.NAME);return null==e&&(e={}),this.browserSettings.copyTo(e),S.setItem(Pe.NAME,JSON.stringify(e))},__class__:Ui});var Pi=function(){ri.call(this,"solutionsStore")};(n["albero.proxy.SolutionsStoreProxy"]=Pi).__name__=["albero","proxy","SolutionsStoreProxy"],Pi.__super__=ri,Pi.prototype=i(ri.prototype,{getSolutions:function(e){var t=this;return null==this.solutionsMap?[]:this.getSolutionIds(e).map(function(e){return t.solutionsMap.h[e]}).filter(function(e){return null!=e})},getSolution:function(e){return null==this.solutionsMap?null:this.solutionsMap.h[e]},getSolutionIds:function(e){return null==e?[]:null==e.contract?[]:null==e.contract.solutionIds?[]:e.contract.solutionIds},getSolutionIdsNotLoaded:function(e){var t=this;return this.getSolutionIds(e).filter(function(e){return null==t.solutionsMap||!t.solutionsMap.h.hasOwnProperty(e)})},setSolution:function(e){null==this.solutionsMap&&(this.solutionsMap=new nr),this.solutionsMap.h[e.solutionId]=e},__class__:Pi});var Fi=function(){ri.call(this,"talksService")};(n["albero.proxy.TalksServiceProxy"]=Fi).__name__=["albero","proxy","TalksServiceProxy"],Fi.__super__=ri,Fi.prototype=i(ri.prototype,{getDomainTalksOrderedByTimestamp:function(e){return Ne.sortAndReturn(this.getDomainTalks(e).map(Lr(this,this.createTalkPack)),cn.compareTalkOrderingTimestamp).map(Lr(this,this.getTalkFromTalkPack))},hasConference:function(e){return null!=e&&this.conferenceStore.hasConference(e.id)},isFavoriteTalk:function(e){var t=this.dataStore.getTalkStatus(e.id);return null!=t&&null!=t.orderInFavorites},getTalkFromTalkPack:function(e){return e.talk},getTalkIdFromTalk:function(e){return e.id},getDomainTalks:function(n){return null==n?[]:this.dataStore.getTalks().filter(function(e){var t=e.domainId;return null!=t&&null!=n&&t.high==n.high&&t.low==n.low})},createTalkPack:function(e){return new cn(e,this.dataStore.getTalkStatus(e.id))},__class__:Fi});var Li=function(){ri.call(this,"ThumbnailExpansion")};(n["albero.proxy.ThumbnailExpansionProxy"]=Li).__name__=["albero","proxy","ThumbnailExpansionProxy"],Li.__super__=ri,Li.prototype=i(ri.prototype,{onRegister:function(){var e=this;Ji.delay(function(){e.workingBrowserSettings=e.settings.getBrowserSettings().createCopy()},0)},updateThumbnailExpansionEnabled:function(e){if(null!=this.workingBrowserSettings){var t=this.dataStore.me;if(null!=t){var n=t.id;this.workingBrowserSettings.assureUserData("_"+n.high+"_"+n.low).useThumbnailExpansion=e,this.settings.applyUserDataSettings(this.workingBrowserSettings)}}},isThumbnailExpansionEnabled:function(){if(null==this.workingBrowserSettings)return!1;var e=this.dataStore.me;if(null==e)return!1;var t=e.id;return this.workingBrowserSettings.assureUserData("_"+t.high+"_"+t.low).useThumbnailExpansion},__class__:Li});var Bi=function(){ri.call(this,"userPresences")};(n["albero.proxy.UserPresencesProxy"]=Bi).__name__=["albero","proxy","UserPresencesProxy"],Bi.__super__=ri,Bi.prototype=i(ri.prototype,{getUserPresenceState:function(e,t){var n=ke.map(this.getUserPresence(e),function(e){return e.toState(t)});switch(n[1]){case 0:return n[2];case 1:return bn.GT_60}},getUserPresence:function(e){return ke.option(this.dataStore.getUserPresence(e))},getLastUsedAtString:function(e){var t=ke.map(ke.flatMap(this.getUserPresence(e),function(e){return e.lastUsedAtOpt}),function(e){return f.datetimeString(e)});switch(t[1]){case 0:return t[2];case 1:return" - "}},__class__:Bi});var Hi=function(){};(n["albero.proxy.helper.AnnouncementHelper"]=Hi).__name__=["albero","proxy","helper","AnnouncementHelper"],Hi.getDisplayTextWithoutEscape=function(e){return 1==e.type[1]?e.content:""};var zi=function(){};(n["albero.proxy.helper.DomainHelper"]=zi).__name__=["albero","proxy","helper","DomainHelper"],zi.isAllowReadAnnouncement=function(e){return null!=e&&!!e.role.allowReadAnnouncements};var Gi=function(){};(n["albero.proxy.helper.MessageStringMaker"]=Gi).__name__=["albero","proxy","helper","MessageStringMaker"],Gi.messageStringForKeywordDetection=function(e,t){return null==e?"":1==e.type[1]?e.content:""};var ji=function(){};(n["puremvc.interfaces.IMediator"]=ji).__name__=["puremvc","interfaces","IMediator"],ji.prototype={__class__:ji};var Ki=function(e,t){C.call(this),this.mediatorName=null!=e?e:Ki.NAME,null!=t&&(this.viewComponent=t)};(n["puremvc.patterns.mediator.Mediator"]=Ki).__name__=["puremvc","patterns","mediator","Mediator"],Ki.__interfaces__=[ji],Ki.__super__=C,Ki.prototype=i(C.prototype,{getMediatorName:function(){return this.mediatorName},setViewComponent:function(e){this.viewComponent=e},getViewComponent:function(){return this.viewComponent},listNotificationInterests:function(){return[]},handleNotification:function(e){},onRegister:function(){},onRemove:function(){},__class__:Ki});var Yi=function(){Ki.call(this,"commandline",null)};(n["albero_cli.mediator.CommandLineMediator"]=Yi).__name__=["albero_cli","mediator","CommandLineMediator"],Yi.__super__=Ki,Yi.prototype=i(Ki.prototype,{onRegister:function(){this.getViewComponent();this.eventEmitter=r.getInstance(),this.dataRecovered=!1,this.startDataSaver()},listNotificationInterests:function(){return["app_state_changed","access_token_changed","current_user_changed","configuration_changed","domain_selection_changed","talk_selection_changed","talk_list_scroll_to_talk_top_needed","user_selection_needed","user_selection_changed","friend_selection_needed","stamp_set_changed","stamp_selection_started","stamp_selection_ended","stamp_selection_changed","action_selection_changed","current_page_changed","current_page_not_changed","fileinfo_selection_changed","message_fileinfo_selection_changed","staged_fileinfo_selection_changed","staged_fileinfos_added","staged_fileinfos_moved","error_occurred","brand_badge_changed","send_form_top_changed","solutions_loaded","right_pane_opened","right_pane_closed","password_expiration_overed","password_expiration_warned","photo_editor_saved","mc_authenticated_user_received","keyword_watching_updated","keyword_detaction_updated","send_by_enter_changed","department_selection_changed_for_members_page","presences_updated","noteinfo_selection_changed","start_note_editing","data_recovering","data_recovered","notify_update_user","notify_add_friend","notify_add_acquaintance","notify_delete_friend","notify_delete_acquaintance","notify_update_domain_users","get_domain_users_responsed","get_users_responsed","get_profile_responsed","get_profile_errored","update_user_responsed","update_user_errored","update_profile_responsed","update_profile_errored","notify_update_department_tree","notify_update_department_users","get_department_tree_responsed","get_department_tree_canceled","get_department_users_responsed","get_department_users_canceled","get_department_user_count_responsed","get_me_responsed","department_user_count_cleared","department_user_ids_prepared","notify_add_domain_invite","notify_accept_domain_invite","notify_delete_domain_invite","notify_join_domain","notify_update_domain","notify_leave_domain","notify_create_pair_talk","notify_create_group_talk","notify_update_group_talk","notify_update_group_talk_ERRORED","notify_add_talkers","notify_add_talkers_including_me","notify_delete_talker","notify_delete_talk","notify_create_message","notify_delete_message","notify_update_read_statuses","notify_update_talk_status","notify_update_local_talk_status","notify_get_messages","notify_get_message_status","notify_add_favorite_talk","notify_delete_favorite_talk","notify_disable_push_notification","notify_enable_push_notification","create_message_start","create_message_complete","create_message_fail","notify_create_announcement","notify_delete_announcement","notify_update_announcement_status","notify_get_announcements","create_announcement_start","create_announcement_complete","create_announcement_fail","notify_update_question","get_questions_responsed","notify_create_attachment","notify_delete_attachment","get_note_statuses_loaded","get_note_loaded","get_note_failed_by_note_not_found","create_note_completed","update_note_setting_completed","update_note_setting_failed_by_not_found","update_note_setting_failed_by_conflict","update_note_completed","update_note_failed_by_not_found","update_note_failed_by_conflict","delete_note_completed","notify_create_note","notify_update_note_partially","notify_delete_note","notify_update_note_for_setting","notify_update_note_for_revision","create_note_button_clicked","get_file_responsed","notify_search_messages","notify_search_attachments","notify_search_messages_fail","notify_search_attachments_fail","notify_search_prepare","notify_search_clear","notify_filter_box_text_changed","notify_search_box_popup","notify_add_account_control_request","notify_delete_account_control_request","notify_join_account_control_group","notify_update_account_control_group_partially","notify_leave_account_control_group","prepare_conference_from_message","join_conference_responsed","join_conference_canceled","notify_open_conference","notify_close_conference","notify_conference_participant_join","notify_conference_participant_limit","notify_conference_participant_reject","notify_all_talk_members_rejected_conference"]},handleNotification:function(e){var t=e.getName();switch(t){case"current_page_changed":var n=e.getBody();ee.enumEq(n,E.error)&&(this.dataRecovered=!1),this.eventEmitter.emit(e.getName(),e.getBody());break;case"data_recovered":if(this.dataRecovered)return;this.dataRecovered=!0,this.eventEmitter.emit(e.getName());break;case"data_recovering":this.dataRecovered=!1,this.eventEmitter.emit(e.getName());break;case"error_occurred":this.eventEmitter.emit(e.getName(),new Error("AdapterError"),e.getBody());break;default:this.eventEmitter.emit(e.getName(),e.getBody())}},startDataSaver:function(){var e=this;Ji.delay(function(){e.dataRecovered&&e.dataStore.saveIfNeeded(),e.startDataSaver()},5e3)},__class__:Yi});var Vi=function(){};(n["haxe.IMap"]=Vi).__name__=["haxe","IMap"];var Wi={};(n["haxe._Int32.Int32_Impl_"]=Wi).__name__=["haxe","_Int32","Int32_Impl_"],Wi.ucompare=function(e,t){return e<0?t<0?~t-~e|0:1:t<0?-1:e-t|0};var qi={};(n["haxe._Int64.Int64_Impl_"]=qi).__name__=["haxe","_Int64","Int64_Impl_"],qi.toString=function(e){var t=e,n=new En(0,0);if(t.high==n.high&&t.low==n.low)return"0";var i="",r=!1;t.high<0&&(r=!0);for(var a=new En(0,10);;){var o=new En(0,0);if(t.high==o.high&&t.low==o.low)break;var s=qi.divMod(t,a);if(s.modulus.high<0){var l=s.modulus,u=~l.high,c=-l.low;if(0==c){u++;u|=0}i=new En(u,c).low+i;var _=s.quotient,h=~_.high,d=-_.low;if(0==d){h++;h|=0}t=new En(h,d)}else i=s.modulus.low+i,t=s.quotient}return r&&(i="-"+i),i},qi.divMod=function(e,t){if(0==t.high)switch(t.low){case 0:throw new gr("divide by zero");case 1:return{quotient:new En(e.high,e.low),modulus:new En(0,0)}}var n,i=e.high<0!=t.high<0;if(e.high<0){var r=~e.high,a=-e.low;if(0==a){r++;r|=0}n=new En(r,a)}else{n=new En(e.high,e.low)}if(t.high<0){var o=~t.high,s=-t.low;if(0==s){o++;o|=0}t=new En(o,s)}else t=t;for(var l=new En(0,0),u=new En(0,1);!(t.high<0);){var c=Wi.ucompare(t.high,n.high),_=0!=c?c:Wi.ucompare(t.low,n.low);63,t=new En(t.high<<1|t.low>>>31,t.low<<1);if(63,u=new En(u.high<<1|u.low>>>31,u.low<<1),0<=_)break}for(;;){var h=new En(0,0);if(u.high==h.high&&u.low==h.low)break;var d=Wi.ucompare(n.high,t.high);if(0<=(0!=d?d:Wi.ucompare(n.low,t.low))){l=new En(l.high|u.high,l.low|u.low);var f=n.high-t.high|0,m=n.low-t.low|0;if(Wi.ucompare(n.low,t.low)<0){f--;f|=0}n=new En(f,m)}63,u=new En(u.high>>>1,u.high<<31|u.low>>>1);63,t=new En(t.high>>>1,t.high<<31|t.low>>>1)}if(i){var p=~l.high,g=-l.low;if(0==g){p++;p|=0}l=new En(p,g)}if(e.high<0){var v=~n.high,y=-n.low;if(0==y){v++;v|=0}n=new En(v,y)}return{quotient:l,modulus:n}};var Qi=function(){this.buf=new T,this.cache=[],this.useCache=Qi.USE_CACHE,this.useEnumIndex=Qi.USE_ENUM_INDEX,this.shash=new or,this.scount=0};(n["haxe.Serializer"]=Qi).__name__=["haxe","Serializer"],Qi.run=function(e){var t=new Qi;return t.serialize(e),t.toString()},Qi.prototype={toString:function(){return this.buf.b},serializeString:function(e){var t=this.shash,n=null!=$r[e]?t.getReserved(e):t.h[e];if(null!=n)return this.buf.b+="R",void(this.buf.b+=null==n?"null":""+n);var i=this.shash,r=this.scount++;null!=$r[e]?i.setReserved(e,r):i.h[e]=r,this.buf.b+="y",e=encodeURIComponent(e),this.buf.b+=K.string(e.length),this.buf.b+=":",this.buf.b+=null==e?"null":""+e},serializeRef:function(e){for(var t=typeof e,n=0,i=this.cache.length;n<i;){var r=n++,a=this.cache[r];if(typeof a==t&&a==e)return this.buf.b+="r",this.buf.b+=null==r?"null":""+r,!0}return this.cache.push(e),!1},serializeFields:function(e){for(var t=0,n=j.fields(e);t<n.length;){var i=n[t];++t,this.serializeString(i),this.serialize(j.field(e,i))}this.buf.b+="g"},serialize:function(e){var t=ee.typeof(e);switch(t[1]){case 0:this.buf.b+="n";break;case 1:var n=e;if(0==n)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==n?"null":""+n;break;case 2:var i=e;isNaN(i)?this.buf.b+="k":isFinite(i)?(this.buf.b+="d",this.buf.b+=null==i?"null":""+i):this.buf.b+=i<0?"m":"p";break;case 3:this.buf.b+=e?"t":"f";break;case 4:if(vr.__instanceof(e,Qr)){var r=ee.getClassName(e);this.buf.b+="A",this.serializeString(r)}else if(vr.__instanceof(e,Jr))this.buf.b+="B",this.serializeString(ee.getEnumName(e));else{if(this.useCache&&this.serializeRef(e))return;this.buf.b+="o",this.serializeFields(e)}break;case 5:throw new gr("Cannot serialize function");case 6:var a=t[2];if(a==String)return void this.serializeString(e);if(this.useCache&&this.serializeRef(e))return;switch(a){case Array:var o=0;this.buf.b+="a";for(var s=0,l=e.length;s<l;){var u=s++;null==e[u]?++o:(0<o&&(1==o?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==o?"null":""+o),o=0),this.serialize(e[u]))}0<o&&(1==o?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==o?"null":""+o)),this.buf.b+="h";break;case Date:var c=e;this.buf.b+="v",this.buf.b+=K.string(c.getTime());break;case $:this.buf.b+="l";for(var _=e.h;null!=_;){var h=_.item;_=_.next;var d=h;this.serialize(d)}this.buf.b+="h";break;case nr:this.buf.b+="q";for(var f=e,m=f.keys();m.hasNext();){var p=m.next();this.buf.b+=":",this.buf.b+=null==p?"null":""+p,this.serialize(f.h[p])}this.buf.b+="h";break;case ir:this.buf.b+="M";for(var g=e,v=g.keys();v.hasNext();){var y=v.next(),S=j.field(y,"__id__");j.deleteField(y,"__id__"),this.serialize(y),y.__id__=S,this.serialize(g.h[y.__id__])}this.buf.b+="h";break;case or:this.buf.b+="b";for(var w=e,T=w.keys();T.hasNext();){var I=T.next();this.serializeString(I),this.serialize(null!=$r[I]?w.getReserved(I):w.h[I])}this.buf.b+="h";break;case sr:var E=e;this.buf.b+="s",this.buf.b+=K.string(Math.ceil(8*E.length/6)),this.buf.b+=":";var A=0,b=E.length-2,N=Qi.BASE64_CODES;if(null==N){var k=Qi.BASE64.length;N=new Array(k);for(var D=0,C=Qi.BASE64.length;D<C;){var R=D++;N[R]=Ee.cca(Qi.BASE64,R)}Qi.BASE64_CODES=N}for(;A<b;){var O=E.b[A++],M=E.b[A++],x=E.b[A++];this.buf.b+=String.fromCharCode(N[O>>2]),this.buf.b+=String.fromCharCode(N[63&(O<<4|M>>4)]),this.buf.b+=String.fromCharCode(N[63&(M<<2|x>>6)]),this.buf.b+=String.fromCharCode(N[63&x])}if(A==b){var U=E.b[A++],P=E.b[A++];this.buf.b+=String.fromCharCode(N[U>>2]),this.buf.b+=String.fromCharCode(N[63&(U<<4|P>>4)]),this.buf.b+=String.fromCharCode(N[P<<2&63])}else if(A==b+1){var F=E.b[A++];this.buf.b+=String.fromCharCode(N[F>>2]),this.buf.b+=String.fromCharCode(N[F<<4&63])}break;default:this.useCache&&this.cache.pop(),null!=e.hxSerialize?(this.buf.b+="C",this.serializeString(ee.getClassName(a)),this.useCache&&this.cache.push(e),e.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(ee.getClassName(a)),this.useCache&&this.cache.push(e),this.serializeFields(e))}break;case 7:var L=t[2];if(this.useCache){if(this.serializeRef(e))return;this.cache.pop()}this.buf.b+=K.string(this.useEnumIndex?"j":"w"),this.serializeString(ee.getEnumName(L)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=K.string(e[1])):this.serializeString(e[0]),this.buf.b+=":";var B=e.length;this.buf.b+=K.string(B-2);for(var H=2,z=B;H<z;){var G=H++;this.serialize(e[G])}this.useCache&&this.cache.push(e);break;default:throw new gr("Cannot serialize "+K.string(e))}},__class__:Qi};var Ji=function(e){var t=this;this.id=setInterval(function(){t.run()},e)};(n["haxe.Timer"]=Ji).__name__=["haxe","Timer"],Ji.delay=function(e,t){var n=new Ji(t);return n.run=function(){n.stop(),e()},n},Ji.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Ji};var Xi=function(){};(n["haxe._Unserializer.DefaultResolver"]=Xi).__name__=["haxe","_Unserializer","DefaultResolver"],Xi.prototype={resolveClass:function(e){return ee.resolveClass(e)},resolveEnum:function(e){return ee.resolveEnum(e)},__class__:Xi};var Zi=function(e){this.buf=e,this.length=e.length,this.pos=0,this.scache=[],this.cache=[];var t=Zi.DEFAULT_RESOLVER;null==t&&(t=new Xi,Zi.DEFAULT_RESOLVER=t),this.resolver=t};(n["haxe.Unserializer"]=Zi).__name__=["haxe","Unserializer"],Zi.initCodes=function(){for(var e=[],t=0,n=Zi.BASE64.length;t<n;){var i=t++;e[Zi.BASE64.charCodeAt(i)]=i}return e},Zi.run=function(e){return new Zi(e).unserialize()},Zi.prototype={readDigits:function(){for(var e=0,t=!1,n=this.pos;;){var i=this.buf.charCodeAt(this.pos);if(i!=i)break;if(45!=i){if(i<48||57<i)break;e=10*e+(i-48),this.pos++}else{if(this.pos!=n)break;t=!0,this.pos++}}return t&&(e*=-1),e},readFloat:function(){for(var e=this.pos;;){var t=this.buf.charCodeAt(this.pos);if(t!=t)break;if(!(43<=t&&t<58||101==t||69==t))break;this.pos++}return parseFloat(Ee.substr(this.buf,e,this.pos-e))},unserializeObject:function(e){for(;;){if(this.pos>=this.length)throw new gr("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var t=this.unserialize();if("string"!=typeof t)throw new gr("Invalid object key");var n=this.unserialize();e[t]=n}this.pos++},unserializeEnum:function(e,t){if(58!=this.buf.charCodeAt(this.pos++))throw new gr("Invalid enum format");var n=this.readDigits();if(0==n)return ee.createEnum(e,t);for(var i=[];0<n--;)i.push(this.unserialize());return ee.createEnum(e,t,i)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var e=this.unserialize(),t=this.resolver.resolveClass(e);if(null==t)throw new gr("Class not found "+e);return t;case 66:var n=this.unserialize(),i=this.resolver.resolveEnum(n);if(null==i)throw new gr("Enum not found "+n);return i;case 67:var r=this.unserialize(),a=this.resolver.resolveClass(r);if(null==a)throw new gr("Class not found "+r);var o=ee.createEmptyInstance(a);if(this.cache.push(o),o.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new gr("Invalid custom data");return o;case 77:var s=new ir;this.cache.push(s);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var l=this.unserialize();s.set(l,this.unserialize())}return this.pos++,s;case 82:var u=this.readDigits();if(u<0||u>=this.scache.length)throw new gr("Invalid string reference");return this.scache[u];case 97:this.buf;var c=[];for(this.cache.push(c);;){var _=this.buf.charCodeAt(this.pos);if(104==_){this.pos++;break}if(117==_){this.pos++;var h=this.readDigits();c[c.length+h-1]=null}else c.push(this.unserialize())}return c;case 98:var d=new or;this.cache.push(d);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var f=this.unserialize(),m=this.unserialize();null!=$r[f]?d.setReserved(f,m):d.h[f]=m}return this.pos++,d;case 99:var p=this.unserialize(),g=this.resolver.resolveClass(p);if(null==g)throw new gr("Class not found "+p);var v=ee.createEmptyInstance(g);return this.cache.push(v),this.unserializeObject(v),v;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var y=this.unserialize(),S=this.resolver.resolveEnum(y);if(null==S)throw new gr("Enum not found "+y);this.pos++;var w=this.readDigits(),T=S.__constructs__.slice()[w];if(null==T)throw new gr("Unknown enum index "+y+"@"+w);var I=this.unserializeEnum(S,T);return this.cache.push(I),I;case 107:return NaN;case 108:var E=new $;this.cache.push(E);for(this.buf;104!=this.buf.charCodeAt(this.pos);)E.add(this.unserialize());return this.pos++,E;case 109:return-1/0;case 110:return null;case 111:var A={};return this.cache.push(A),this.unserializeObject(A),A;case 112:return 1/0;case 113:var b=new nr;this.cache.push(b);this.buf;for(var N=this.buf.charCodeAt(this.pos++);58==N;){var k=this.readDigits(),D=this.unserialize();b.h[k]=D,N=this.buf.charCodeAt(this.pos++)}if(104!=N)throw new gr("Invalid IntMap format");return b;case 114:var C=this.readDigits();if(C<0||C>=this.cache.length)throw new gr("Invalid reference");return this.cache[C];case 115:var R=this.readDigits(),O=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<R)throw new gr("Invalid bytes length");var M=Zi.CODES;null==M&&(M=Zi.initCodes(),Zi.CODES=M);for(var x=this.pos,U=3&R,P=x+(R-U),F=new sr(new ea(3*(R>>2)+(2<=U?U-1:0))),L=0;x<P;){var B=M[O.charCodeAt(x++)],H=M[O.charCodeAt(x++)];F.b[L++]=255&(B<<2|H>>4);var z=M[O.charCodeAt(x++)];F.b[L++]=255&(H<<4|z>>2);var G=M[O.charCodeAt(x++)];F.b[L++]=255&(z<<6|G)}if(2<=U){var j=M[O.charCodeAt(x++)],K=M[O.charCodeAt(x++)];if(F.b[L++]=255&(j<<2|K>>4),3==U){var Y=M[O.charCodeAt(x++)];F.b[L++]=255&(K<<4|Y>>2)}}return this.pos+=R,this.cache.push(F),F;case 116:return!0;case 118:var V;if(48<=this.buf.charCodeAt(this.pos)&&this.buf.charCodeAt(this.pos)<=57&&48<=this.buf.charCodeAt(this.pos+1)&&this.buf.charCodeAt(this.pos+1)<=57&&48<=this.buf.charCodeAt(this.pos+2)&&this.buf.charCodeAt(this.pos+2)<=57&&48<=this.buf.charCodeAt(this.pos+3)&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4))V=Ee.strDate(Ee.substr(this.buf,this.pos,19)),this.pos+=19;else{var W=this.readFloat();V=new Date(W)}return this.cache.push(V),V;case 119:var q=this.unserialize(),Q=this.resolver.resolveEnum(q);if(null==Q)throw new gr("Enum not found "+q);var J=this.unserializeEnum(Q,this.unserialize());return this.cache.push(J),J;case 120:throw gr.wrap(this.unserialize());case 121:var X=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<X)throw new gr("Invalid string length");var Z=Ee.substr(this.buf,this.pos,X);return this.pos+=X,Z=decodeURIComponent(Z.split("+").join(" ")),this.scache.push(Z),Z;case 122:return 0}throw this.pos--,new gr("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:Zi};var $i=function(){};(n["haxe.ds.BalancedTree"]=$i).__name__=["haxe","ds","BalancedTree"],$i.prototype={set:function(e,t){this.root=this.setLoop(e,t,this.root)},get:function(e){for(var t=this.root;null!=t;){var n=this.compare(e,t.key);if(0==n)return t.value;t=n<0?t.left:t.right}return null},remove:function(e){try{return this.root=this.removeLoop(e,this.root),!0}catch(e){if(e instanceof gr&&(e=e.val),vr.__instanceof(e,String))return!1;throw e}},keys:function(){var e=[];return this.keysLoop(this.root,e),Ee.iter(e)},setLoop:function(e,t,n){if(null==n)return new er(null,e,t,null);var i=this.compare(e,n.key);if(0==i)return new er(n.left,e,t,n.right,null==n?0:n._height);if(i<0){var r=this.setLoop(e,t,n.left);return this.balance(r,n.key,n.value,n.right)}var a=this.setLoop(e,t,n.right);return this.balance(n.left,n.key,n.value,a)},removeLoop:function(e,t){if(null==t)throw new gr("Not_found");var n=this.compare(e,t.key);return 0==n?this.merge(t.left,t.right):n<0?this.balance(this.removeLoop(e,t.left),t.key,t.value,t.right):this.balance(t.left,t.key,t.value,this.removeLoop(e,t.right))},keysLoop:function(e,t){null!=e&&(this.keysLoop(e.left,t),t.push(e.key),this.keysLoop(e.right,t))},merge:function(e,t){if(null==e)return t;if(null==t)return e;var n=this.minBinding(t);return this.balance(e,n.key,n.value,this.removeMinBinding(t))},minBinding:function(e){if(null==e)throw new gr("Not_found");return null==e.left?e:this.minBinding(e.left)},removeMinBinding:function(e){return null==e.left?e.right:this.balance(this.removeMinBinding(e.left),e.key,e.value,e.right)},balance:function(e,t,n,i){var r=null==e?0:e._height,a=null==i?0:i._height;if(a+2<r){var o=e.left,s=e.right;return(null==o?0:o._height)>=(null==s?0:s._height)?new er(e.left,e.key,e.value,new er(e.right,t,n,i)):new er(new er(e.left,e.key,e.value,e.right.left),e.right.key,e.right.value,new er(e.right.right,t,n,i))}if(r+2<a){var l=i.right,u=i.left;return(null==l?0:l._height)>(null==u?0:u._height)?new er(new er(e,t,n,i.left),i.key,i.value,i.right):new er(new er(e,t,n,i.left.left),i.left.key,i.left.value,new er(i.left.right,i.key,i.value,i.right))}return new er(e,t,n,i,(a<r?r:a)+1)},compare:function(e,t){return j.compare(e,t)},__class__:$i};var er=function(e,t,n,i,r){if(null==r&&(r=-1),this.left=e,this.key=t,this.value=n,this.right=i,-1==r){var a,o=this.left,s=this.right;if((null==o?0:o._height)>(null==s?0:s._height)){var l=this.left;a=null==l?0:l._height}else{var u=this.right;a=null==u?0:u._height}this._height=a+1}else this._height=r};(n["haxe.ds.TreeNode"]=er).__name__=["haxe","ds","TreeNode"],er.prototype={__class__:er};var tr=function(){$i.call(this)};(n["haxe.ds.EnumValueMap"]=tr).__name__=["haxe","ds","EnumValueMap"],tr.__interfaces__=[Vi],tr.__super__=$i,tr.prototype=i($i.prototype,{compare:function(e,t){var n=e[1]-t[1];if(0!=n)return n;var i=e.slice(2),r=t.slice(2);return 0==i.length&&0==r.length?0:this.compareArgs(i,r)},compareArgs:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(var i=0,r=e.length;i<r;){var a=i++,o=this.compareArg(e[a],t[a]);if(0!=o)return o}return 0},compareArg:function(e,t){return j.isEnumValue(e)&&j.isEnumValue(t)?this.compare(e,t):e instanceof Array&&null==e.__enum__&&t instanceof Array&&null==t.__enum__?this.compareArgs(e,t):j.compare(e,t)},__class__:tr});var nr=function(){this.h={}};(n["haxe.ds.IntMap"]=nr).__name__=["haxe","ds","IntMap"],nr.__interfaces__=[Vi],nr.prototype={remove:function(e){return!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return Ee.iter(e)},__class__:nr};var ir=function(){this.h={__keys__:{}}};(n["haxe.ds.ObjectMap"]=ir).__name__=["haxe","ds","ObjectMap"],ir.__interfaces__=[Vi],ir.assignId=function(e){return e.__id__=++ir.count},ir.getId=function(e){return e.__id__},ir.prototype={set:function(e,t){var n=e.__id__||(e.__id__=++ir.count);this.h[n]=t,this.h.__keys__[n]=e},keys:function(){var e=[];for(var t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return Ee.iter(e)},__class__:ir};var rr=n["haxe.ds.Option"]={__ename__:["haxe","ds","Option"],__constructs__:["Some","None"]};rr.Some=function(e){var t=["Some",0,e];return t.__enum__=rr,t.toString=s,t},rr.None=["None",1],rr.None.toString=s,(rr.None.__enum__=rr).__empty_constructs__=[rr.None];var ar=function(e,t){this.map=e,this.keys=t,this.index=0,this.count=t.length};(n["haxe.ds._StringMap.StringMapIterator"]=ar).__name__=["haxe","ds","_StringMap","StringMapIterator"],ar.prototype={hasNext:function(){return this.index<this.count},next:function(){var e=this.map,t=this.keys[this.index++];return null!=$r[t]?e.getReserved(t):e.h[t]},__class__:ar};var or=function(){this.h={}};(n["haxe.ds.StringMap"]=or).__name__=["haxe","ds","StringMap"],or.__interfaces__=[Vi],or.prototype={setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},remove:function(e){return null!=$r[e]?(e="$"+e,!(null==this.rh||!this.rh.hasOwnProperty(e))&&(delete this.rh[e],!0)):!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},keys:function(){return Ee.iter(this.arrayKeys())},arrayKeys:function(){var e=[];for(var t in this.h)this.h.hasOwnProperty(t)&&e.push(t);if(null!=this.rh)for(var t in this.rh)36==t.charCodeAt(0)&&e.push(t.substr(1));return e},iterator:function(){return new ar(this,this.arrayKeys())},__class__:or};var sr=function(e){this.length=e.byteLength,this.b=new ta(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};(n["haxe.io.Bytes"]=sr).__name__=["haxe","io","Bytes"],sr.alloc=function(e){return new sr(new ea(e))},sr.ofString=function(e){for(var t=[],n=0;n<e.length;){var i=e.charCodeAt(n++);55296<=i&&i<=56319&&(i=i-55232<<10|1023&e.charCodeAt(n++)),i<=127?t.push(i):(i<=2047?t.push(192|i>>6):(i<=65535?t.push(224|i>>12):(t.push(240|i>>18),t.push(128|i>>12&63)),t.push(128|i>>6&63)),t.push(128|63&i))}return new sr(new ta(t).buffer)},sr.ofData=function(e){var t=e.hxBytes;return null!=t?t:new sr(e)},sr.fastGet=function(e,t){return e.bytes[t]},sr.prototype={getString:function(e,t){if(e<0||t<0||e+t>this.length)throw new gr(fr.OutsideBounds);for(var n="",i=this.b,r=String.fromCharCode,a=e,o=e+t;a<o;){var s=i[a++];if(s<128){if(0==s)break;n+=r(s)}else if(s<224)n+=r((63&s)<<6|127&i[a++]);else if(s<240){n+=r((31&s)<<12|(127&i[a++])<<6|127&i[a++])}else{var l=(15&s)<<18|(127&i[a++])<<12|(127&i[a++])<<6|127&i[a++];n+=r(55232+(l>>10)),n+=r(1023&l|56320)}}return n},toString:function(){return this.getString(0,this.length)},__class__:sr};var lr=function(){this.b=[]};(n["haxe.io.BytesBuffer"]=lr).__name__=["haxe","io","BytesBuffer"],lr.prototype={getBytes:function(){var e=new sr(new ta(this.b).buffer);return this.b=null,e},__class__:lr};var ur=function(){};(n["haxe.io.Input"]=ur).__name__=["haxe","io","Input"],ur.prototype={readByte:function(){throw new gr("Not implemented")},readBytes:function(e,t,n){var i=n,r=e.b;if(t<0||n<0||t+n>e.length)throw new gr(fr.OutsideBounds);try{for(;0<i;)r[t]=this.readByte(),++t,--i}catch(e){if(e instanceof gr&&(e=e.val),!vr.__instanceof(e,dr))throw e}return n-i},set_bigEndian:function(e){return this.bigEndian=e},read:function(e){for(var t=new sr(new ea(e)),n=0;0<e;){var i=this.readBytes(t,n,e);if(0==i)throw new gr(fr.Blocked);n+=i,e-=i}return t},readFloat:function(){return mr.i32ToFloat(this.readInt32())},readDouble:function(){var e=this.readInt32(),t=this.readInt32();return this.bigEndian?mr.i64ToDouble(t,e):mr.i64ToDouble(e,t)},readInt8:function(){var e=this.readByte();return 128<=e?e-256:e},readInt16:function(){var e=this.readByte(),t=this.readByte(),n=this.bigEndian?t|e<<8:e|t<<8;return 0!=(32768&n)?n-65536:n},readUInt16:function(){var e=this.readByte(),t=this.readByte();return this.bigEndian?t|e<<8:e|t<<8},readInt32:function(){var e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte();return this.bigEndian?i|n<<8|t<<16|e<<24:e|t<<8|n<<16|i<<24},__class__:ur};var cr=function(e,t,n){if(null==t&&(t=0),null==n&&(n=e.length-t),t<0||n<0||t+n>e.length)throw new gr(fr.OutsideBounds);this.b=e.b,this.pos=t,this.len=n,this.totlen=n};(n["haxe.io.BytesInput"]=cr).__name__=["haxe","io","BytesInput"],cr.__super__=ur,cr.prototype=i(ur.prototype,{readByte:function(){if(0==this.len)throw new gr(new dr);return this.len--,this.b[this.pos++]},readBytes:function(e,t,n){if(t<0||n<0||t+n>e.length)throw new gr(fr.OutsideBounds);if(0==this.len&&0<n)throw new gr(new dr);this.len<n&&(n=this.len);for(var i=this.b,r=e.b,a=0,o=n;a<o;){var s=a++;r[t+s]=i[this.pos+s]}return this.pos+=n,this.len-=n,n},__class__:cr});var _r=function(){};(n["haxe.io.Output"]=_r).__name__=["haxe","io","Output"],_r.prototype={writeByte:function(e){throw new gr("Not implemented")},writeBytes:function(e,t,n){if(t<0||n<0||t+n>e.length)throw new gr(fr.OutsideBounds);for(var i=e.b,r=n;0<r;)this.writeByte(i[t]),++t,--r;return n},set_bigEndian:function(e){return this.bigEndian=e},write:function(e){for(var t=e.length,n=0;0<t;){var i=this.writeBytes(e,n,t);if(0==i)throw new gr(fr.Blocked);n+=i,t-=i}},writeFloat:function(e){this.writeInt32(mr.floatToI32(e))},writeDouble:function(e){var t=mr.doubleToI64(e);this.bigEndian?(this.writeInt32(t.high),this.writeInt32(t.low)):(this.writeInt32(t.low),this.writeInt32(t.high))},writeInt8:function(e){if(e<-128||128<=e)throw new gr(fr.Overflow);this.writeByte(255&e)},writeInt16:function(e){if(e<-32768||32768<=e)throw new gr(fr.Overflow);this.writeUInt16(65535&e)},writeUInt16:function(e){if(e<0||65536<=e)throw new gr(fr.Overflow);this.bigEndian?(this.writeByte(e>>8),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8))},writeInt32:function(e){this.bigEndian?(this.writeByte(e>>>24),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)):(this.writeByte(255&e),this.writeByte(e>>8&255),this.writeByte(e>>16&255),this.writeByte(e>>>24))},__class__:_r};var hr=function(){this.b=new lr};(n["haxe.io.BytesOutput"]=hr).__name__=["haxe","io","BytesOutput"],hr.__super__=_r,hr.prototype=i(_r.prototype,{writeByte:function(e){this.b.b.push(e)},writeBytes:function(e,t,n){var i=this.b;if(t<0||n<0||t+n>e.length)throw new gr(fr.OutsideBounds);i.b;for(var r=e.b,a=t,o=t+n;a<o;){var s=a++;i.b.push(r[s])}return n},getBytes:function(){return this.b.getBytes()},__class__:hr});var dr=function(){};(n["haxe.io.Eof"]=dr).__name__=["haxe","io","Eof"],dr.prototype={toString:function(){return"Eof"},__class__:dr};var fr=n["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};fr.Blocked=["Blocked",0],fr.Blocked.toString=s,(fr.Blocked.__enum__=fr).Overflow=["Overflow",1],fr.Overflow.toString=s,(fr.Overflow.__enum__=fr).OutsideBounds=["OutsideBounds",2],fr.OutsideBounds.toString=s,(fr.OutsideBounds.__enum__=fr).Custom=function(e){var t=["Custom",3,e];return t.__enum__=fr,t.toString=s,t},fr.__empty_constructs__=[fr.Blocked,fr.Overflow,fr.OutsideBounds];var mr=function(){};(n["haxe.io.FPHelper"]=mr).__name__=["haxe","io","FPHelper"],mr.i32ToFloat=function(e){var t=e>>>23&255,n=8388607&e;return 0==n&&0==t?0:(1-(e>>>31<<1))*(1+Math.pow(2,-23)*n)*Math.pow(2,t-127)},mr.floatToI32=function(e){if(0==e)return 0;var t=e<0?-e:e,n=Math.floor(Math.log(t)/.6931471805599453);n<-127?n=-127:128<n&&(n=128);var i=Math.round(8388608*(t/Math.pow(2,n)-1));return 8388608==i&&n<128&&(i=0,++n),(e<0?-2147483648:0)|n+127<<23|i},mr.i64ToDouble=function(e,t){var n=(t>>20&2047)-1023,i=4294967296*(1048575&t)+2147483648*(e>>>31)+(2147483647&e);return 0==i&&-1023==n?0:(1-(t>>>31<<1))*(1+Math.pow(2,-52)*i)*Math.pow(2,n)},mr.doubleToI64=function(e){var t=mr.i64tmp;if(0==e)t.low=0,t.high=0;else if(isFinite(e)){var n=e<0?-e:e,i=Math.floor(Math.log(n)/.6931471805599453),r=Math.round(4503599627370496*(n/Math.pow(2,i)-1)),a=0|r,o=r/4294967296|0;t.low=a,t.high=(e<0?-2147483648:0)|i+1023<<20|o}else 0<e?(t.low=0,t.high=2146435072):(t.low=0,t.high=-1048576);return t};var pr=function(){};(n["haxe.rtti.Meta"]=pr).__name__=["haxe","rtti","Meta"],pr.getMeta=function(e){return e.__meta__},pr.getFields=function(e){var t=pr.getMeta(e);return null==t||null==t.fields?{}:t.fields};var gr=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,gr)};(n["js._Boot.HaxeError"]=gr).__name__=["js","_Boot","HaxeError"],gr.wrap=function(e){return e instanceof Error?e:new gr(e)},gr.__super__=Error,gr.prototype=i(Error.prototype,{__class__:gr});var vr=function(){};(n["js.Boot"]=vr).__name__=["js","Boot"],vr.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var n=vr.__nativeClassName(e);return null!=n?vr.__resolveNativeClass(n):null},vr.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var n=typeof e;switch("function"==n&&(e.__name__||e.__ename__)&&(n="object"),n){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var i=e[0]+"(";t+="\t";for(var r=2,a=e.length;r<a;){var o=r++;i+=2!=o?","+vr.__string_rec(e[o],t):vr.__string_rec(e[o],t)}return i+")"}var s="[";t+="\t";for(var l=0,u=e.length;l<u;){var c=l++;s+=(0<c?",":"")+vr.__string_rec(e[c],t)}return s+="]"}var _;try{_=e.toString}catch(e){return"???"}if(null!=_&&_!=Object.toString&&"function"==typeof _){var h=e.toString();if("[object Object]"!=h)return h}var d=null,f="{\n";t+="\t";var m=null!=e.hasOwnProperty;for(var d in e)m&&!e.hasOwnProperty(d)||"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=f.length&&(f+=", \n"),f+=t+d+" : "+vr.__string_rec(e[d],t));return f+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},vr.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var n=e.__interfaces__;if(null!=n)for(var i=0,r=n.length;i<r;){var a=n[i++];if(a==t||vr.__interfLoop(a,t))return!0}return vr.__interfLoop(e.__super__,t)},vr.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Wr:return"boolean"==typeof e;case Yr:return!0;case Vr:return"number"==typeof e;case Kr:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(vr.__interfLoop(vr.getClass(e),t))return!0}else if("object"==typeof t&&vr.__isNativeObj(t)&&e instanceof t)return!0;return t==Qr&&null!=e.__name__||(t==Jr&&null!=e.__ename__||e.__enum__==t)}},vr.__cast=function(e,t){if(vr.__instanceof(e,t))return e;throw new gr("Cannot cast "+K.string(e)+" to "+K.string(t))},vr.__nativeClassName=function(e){var t=vr.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},vr.__isNativeObj=function(e){return null!=vr.__nativeClassName(e)},vr.__resolveNativeClass=function(e){return t[e]};var yr=function(){};(n["js.Browser"]=yr).__name__=["js","Browser"],yr.getLocalStorage=function(){try{var e=window.localStorage;return e.getItem(""),e}catch(e){return null}};var Sr=function(e){if(e instanceof Array&&null==e.__enum__)this.a=e,this.byteLength=e.length;else{var t=e;this.a=[];for(var n=0,i=t;n<i;){var r=n++;this.a[r]=0}this.byteLength=t}};(n["js.html.compat.ArrayBuffer"]=Sr).__name__=["js","html","compat","ArrayBuffer"],Sr.sliceImpl=function(e,t){var n=new ta(this,e,null==t?null:t-e),i=new ea(n.byteLength);return new ta(i).set(n),i},Sr.prototype={slice:function(e,t){return new Sr(this.a.slice(e,t))},__class__:Sr};var wr=function(){};(n["js.html.compat.Uint8Array"]=wr).__name__=["js","html","compat","Uint8Array"],wr._new=function(e,t,n){var i;if("number"==typeof e){i=[];for(var r=0,a=e;r<a;){i[r++]=0}i.byteLength=i.length,i.byteOffset=0,i.buffer=new Sr(i)}else if(vr.__instanceof(e,Sr)){var o=e;null==t&&(t=0),null==n&&(n=o.byteLength-t),(i=0==t?o.a:o.a.slice(t,t+n)).byteLength=i.length,i.byteOffset=t,i.buffer=o}else{if(!(e instanceof Array&&null==e.__enum__))throw new gr("TODO "+K.string(e));(i=e.slice()).byteLength=i.length,i.byteOffset=0,i.buffer=new Sr(i)}return i.subarray=wr._subarray,i.set=wr._set,i},wr._set=function(e,t){if(vr.__instanceof(e.buffer,Sr)){var n=e;if(e.byteLength+t>this.byteLength)throw new gr("set() outside of range");for(var i=0,r=e.byteLength;i<r;){var a=i++;this[a+t]=n[a]}}else{if(!(e instanceof Array&&null==e.__enum__))throw new gr("TODO");var o=e;if(o.length+t>this.byteLength)throw new gr("set() outside of range");for(var s=0,l=o.length;s<l;){var u=s++;this[u+t]=o[u]}}},wr._subarray=function(e,t){var n=wr._new(this.slice(e,t));return n.byteOffset=e,n};var Tr=function(e,t){var n=new cr(e);n.set_bigEndian(!0),this.o=this.decode(n,t)};(n["msgpack.Decoder"]=Tr).__name__=["msgpack","Decoder"],Tr.prototype={decode:function(e,t){try{var n=e.readByte();switch(n){case 192:return null;case 194:return!1;case 195:return!0;case 202:return e.readFloat();case 203:return e.readDouble();case 204:return e.readByte();case 205:return e.readUInt16();case 206:return e.readInt32();case 207:return new En(e.readInt32(),e.readInt32());case 208:return e.readInt8();case 209:return e.readInt16();case 210:return e.readInt32();case 211:return new En(e.readInt32(),e.readInt32());case 218:case 219:return e.read(218==n?e.readUInt16():e.readInt32()).toString();case 220:case 221:return this.readArray(e,220==n?e.readUInt16():e.readInt32(),t);case 222:case 223:return this.readMap(e,222==n?e.readUInt16():e.readInt32(),t);default:if(n<128)return n;if(n<144)return this.readMap(e,15&n,t);if(n<160)return this.readArray(e,15&n,t);if(n<192)return e.read(31&n).toString();if(223<n)return-256|n}}catch(e){if(e instanceof gr&&(e=e.val),!vr.__instanceof(e,dr))throw e}return null},readArray:function(e,t,n){for(var i=[],r=0,a=t;r<a;){r++;i.push(this.decode(e,n))}return i},readMap:function(e,t,n){if(n){for(var i={},r=0,a=t;r<a;){r++;var o=this.decode(e,n),s=this.decode(e,n);i[o]=s}return i}for(var l=new ir,u=0,c=t;u<c;){u++;var _=this.decode(e,n),h=this.decode(e,n);l.set(_,h)}return l},getResult:function(){return this.o},__class__:Tr};var Ir=function(e){this.o=new hr,this.o.set_bigEndian(!0),this.encode(e)};(n["msgpack.Encoder"]=Ir).__name__=["msgpack","Encoder"],Ir.prototype={encode:function(e){var t=ee.typeof(e);switch(t[1]){case 0:this.o.writeByte(192);break;case 1:var n=e;n<-32?n<-32768?(this.o.writeByte(210),this.o.writeInt32(n)):n<-128?(this.o.writeByte(209),this.o.writeInt16(n)):(this.o.writeByte(208),this.o.writeInt8(n)):n<128?this.o.writeByte(255&n):n<256?(this.o.writeByte(204),this.o.writeByte(n)):n<65536?(this.o.writeByte(205),this.o.writeUInt16(n)):(this.o.writeByte(206),this.o.writeInt32(n));break;case 2:var i=e,r=Math.abs(i);1401298464324817e-60<r&&r<34028234663852886e22?(this.o.writeByte(202),this.o.writeFloat(i)):(this.o.writeByte(203),this.o.writeDouble(i));break;case 3:this.o.writeByte(e?195:194);break;case 4:var a=j.fields(e),o=Ae.count(a);o<16?this.o.writeByte(128|o):o<65536?(this.o.writeByte(222),this.o.writeUInt16(o)):(this.o.writeByte(223),this.o.writeInt32(o));for(var s=0;s<a.length;){var l=a[s];++s;var u=sr.ofString(l),c=u.length;c<32?this.o.writeByte(160|c):c<65536?(this.o.writeByte(218),this.o.writeUInt16(c)):(this.o.writeByte(219),this.o.writeInt32(c)),this.o.write(u),this.encode(j.field(e,l))}break;case 5:throw new gr("Error: Function not supported");case 6:var _=t[2];switch(ee.getClassName(_)){case"Array":var h=e,d=h.length;d<16?this.o.writeByte(144|d):d<65536?(this.o.writeByte(220),this.o.writeUInt16(d)):(this.o.writeByte(221),this.o.writeInt32(d));for(var f=0;f<h.length;){var m=h[f];++f,this.encode(m)}break;case"Hash":var p=e,g=Ae.count(p);g<16?this.o.writeByte(128|g):g<65536?(this.o.writeByte(222),this.o.writeUInt16(g)):(this.o.writeByte(223),this.o.writeInt32(g));for(var v=p.keys();v.hasNext();){var y=v.next(),S=sr.ofString(y),w=S.length;w<32?this.o.writeByte(160|w):w<65536?(this.o.writeByte(218),this.o.writeUInt16(w)):(this.o.writeByte(219),this.o.writeInt32(w)),this.o.write(S),this.encode(null!=$r[y]?p.getReserved(y):p.h[y])}break;case"String":var T=sr.ofString(e),I=T.length;I<32?this.o.writeByte(160|I):I<65536?(this.o.writeByte(218),this.o.writeUInt16(I)):(this.o.writeByte(219),this.o.writeInt32(I)),this.o.write(T);break;case"haxe._Int64.___Int64":var E=e;this.o.writeByte(E.high<0?211:207),this.o.writeInt32(E.high),this.o.writeInt32(E.low)}break;case 7:throw new gr("Error: Enum not supported");case 8:throw new gr("Error: Unknown Data Type")}},writeInt:function(e){e<-32?e<-32768?(this.o.writeByte(210),this.o.writeInt32(e)):e<-128?(this.o.writeByte(209),this.o.writeInt16(e)):(this.o.writeByte(208),this.o.writeInt8(e)):e<128?this.o.writeByte(255&e):e<256?(this.o.writeByte(204),this.o.writeByte(e)):e<65536?(this.o.writeByte(205),this.o.writeUInt16(e)):(this.o.writeByte(206),this.o.writeInt32(e))},writeInt64:function(e){this.o.writeByte(e.high<0?211:207),this.o.writeInt32(e.high),this.o.writeInt32(e.low)},writeFloat:function(e){var t=Math.abs(e);1401298464324817e-60<t&&t<34028234663852886e22?(this.o.writeByte(202),this.o.writeFloat(e)):(this.o.writeByte(203),this.o.writeDouble(e))},writeRaw:function(e){var t=e.length;t<32?this.o.writeByte(160|t):t<65536?(this.o.writeByte(218),this.o.writeUInt16(t)):(this.o.writeByte(219),this.o.writeInt32(t)),this.o.write(e)},writeArray:function(e){var t=e.length;t<16?this.o.writeByte(144|t):t<65536?(this.o.writeByte(220),this.o.writeUInt16(t)):(this.o.writeByte(221),this.o.writeInt32(t));for(var n=0;n<e.length;){var i=e[n];++n,this.encode(i)}},writeMapLength:function(e){e<16?this.o.writeByte(128|e):e<65536?(this.o.writeByte(222),this.o.writeUInt16(e)):(this.o.writeByte(223),this.o.writeInt32(e))},writeHashMap:function(e){var t=Ae.count(e);t<16?this.o.writeByte(128|t):t<65536?(this.o.writeByte(222),this.o.writeUInt16(t)):(this.o.writeByte(223),this.o.writeInt32(t));for(var n=e.keys();n.hasNext();){var i=n.next(),r=sr.ofString(i),a=r.length;a<32?this.o.writeByte(160|a):a<65536?(this.o.writeByte(218),this.o.writeUInt16(a)):(this.o.writeByte(219),this.o.writeInt32(a)),this.o.write(r),this.encode(null!=$r[i]?e.getReserved(i):e.h[i])}},writeObjectMap:function(e){var t=j.fields(e),n=Ae.count(t);n<16?this.o.writeByte(128|n):n<65536?(this.o.writeByte(222),this.o.writeUInt16(n)):(this.o.writeByte(223),this.o.writeInt32(n));for(var i=0;i<t.length;){var r=t[i];++i;var a=sr.ofString(r),o=a.length;o<32?this.o.writeByte(160|o):o<65536?(this.o.writeByte(218),this.o.writeUInt16(o)):(this.o.writeByte(219),this.o.writeInt32(o)),this.o.write(a),this.encode(j.field(e,r))}},getBytes:function(){return this.o.getBytes()},__class__:Ir};var Er=function(){};(n["msgpack.MsgPack"]=Er).__name__=["msgpack","MsgPack"],Er.encode=function(e){return new Ir(e).o.getBytes()},Er.decode=function(e,t){return null==t&&(t=!0),new Tr(e,t).o};var Ar=function(){};(n["puremvc.interfaces.IController"]=Ar).__name__=["puremvc","interfaces","IController"],Ar.prototype={__class__:Ar};var br=function(){(br.instance=this).commandMap=new or,this.initializeController()};(n["puremvc.core.Controller"]=br).__name__=["puremvc","core","Controller"],br.__interfaces__=[Ar],br.getInstance=function(){return null==br.instance&&(br.instance=new br),br.instance},br.prototype={initializeController:function(){this.view=Cr.getInstance()},executeCommand:function(e){var t=this.commandMap,n=e.getName(),i=null!=$r[n]?t.getReserved(n):t.h[n];null!=i&&ee.createInstance(i,[]).execute(e)},registerCommand:function(e,t){var n=this.commandMap;(null!=$r[e]?n.existsReserved(e):n.h.hasOwnProperty(e))||this.view.registerObserver(e,new xr(Lr(this,this.executeCommand),this));var i=this.commandMap;null!=$r[e]?i.setReserved(e,t):i.h[e]=t},hasCommand:function(e){var t=this.commandMap;return null!=$r[e]?t.existsReserved(e):t.h.hasOwnProperty(e)},removeCommand:function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap.remove(e))},__class__:br};var Nr=function(){};(n["puremvc.interfaces.IModel"]=Nr).__name__=["puremvc","interfaces","IModel"],Nr.prototype={__class__:Nr};var kr=function(){(kr.instance=this).proxyMap=new or,this.initializeModel()};(n["puremvc.core.Model"]=kr).__name__=["puremvc","core","Model"],kr.__interfaces__=[Nr],kr.getInstance=function(){return null==kr.instance&&(kr.instance=new kr),kr.instance},kr.prototype={initializeModel:function(){},registerProxy:function(e){var t=this.proxyMap,n=e.getProxyName();null!=$r[n]?t.setReserved(n,e):t.h[n]=e,e.onRegister()},retrieveProxy:function(e){var t=this.proxyMap;return null!=$r[e]?t.getReserved(e):t.h[e]},hasProxy:function(e){var t=this.proxyMap;return null!=$r[e]?t.existsReserved(e):t.h.hasOwnProperty(e)},removeProxy:function(e){var t=this.proxyMap,n=null!=$r[e]?t.getReserved(e):t.h[e];return null!=n&&(this.proxyMap.remove(e),n.onRemove()),n},__class__:kr};var Dr=function(){};(n["puremvc.interfaces.IView"]=Dr).__name__=["puremvc","interfaces","IView"],Dr.prototype={__class__:Dr};var Cr=function(){(Cr.instance=this).mediatorMap=new or,this.observerMap=new or,this.initializeView()};(n["puremvc.core.View"]=Cr).__name__=["puremvc","core","View"],Cr.__interfaces__=[Dr],Cr.getInstance=function(){return null==Cr.instance&&(Cr.instance=new Cr),Cr.instance},Cr.prototype={initializeView:function(){},registerObserver:function(e,t){var n=this.observerMap;if(!(null!=$r[e]?n.existsReserved(e):n.h.hasOwnProperty(e))){var i=this.observerMap,r=new $;null!=$r[e]?i.setReserved(e,r):i.h[e]=r}var a=this.observerMap;(null!=$r[e]?a.getReserved(e):a.h[e]).add(t)},notifyObservers:function(e){var t=this.observerMap,n=e.getName();if(null!=$r[n]?t.existsReserved(n):t.h.hasOwnProperty(n)){for(var i=this.observerMap,r=e.getName(),a=null!=$r[r]?i.getReserved(r):i.h[r],o=new $,s=new c(a.h);s.hasNext();){var l=s.next();o.add(l)}for(var u=new c(o.h);u.hasNext();){u.next().notifyObserver(e)}}},removeObserver:function(e,t){for(var n=this.observerMap,i=null!=$r[e]?n.getReserved(e):n.h[e],r=i.h;null!=r;){var a=r.item;r=r.next;var o=a;if(1==o.compareNotifyContext(t)){i.remove(o);break}}i.isEmpty()&&this.observerMap.remove(e)},registerMediator:function(e){var t=this.mediatorMap,n=e.getMediatorName();if(null!=$r[n]?!t.existsReserved(n):!t.h.hasOwnProperty(n)){var i=this.mediatorMap,r=e.getMediatorName();null!=$r[r]?i.setReserved(r,e):i.h[r]=e;var a=e.listNotificationInterests();if(0<a.length)for(var o=new xr(Lr(e,e.handleNotification),e),s=0,l=a.length;s<l;){var u=s++;this.registerObserver(a[u],o)}e.onRegister()}},retrieveMediator:function(e){var t=this.mediatorMap;return null!=$r[e]?t.getReserved(e):t.h[e]},removeMediator:function(e){var t=this.mediatorMap,n=null!=$r[e]?t.getReserved(e):t.h[e];if(null!=n){for(var i=n.listNotificationInterests(),r=0,a=i.length;r<a;){var o=r++;this.removeObserver(i[o],n)}this.mediatorMap.remove(e),n.onRemove()}return n},hasMediator:function(e){var t=this.mediatorMap;return null!=$r[e]?t.existsReserved(e):t.h.hasOwnProperty(e)},__class__:Cr};var Rr=function(){};(n["puremvc.interfaces.INotification"]=Rr).__name__=["puremvc","interfaces","INotification"],Rr.prototype={__class__:Rr};var Or=function(){};(n["puremvc.interfaces.IObserver"]=Or).__name__=["puremvc","interfaces","IObserver"],Or.prototype={__class__:Or};var Mr=function(e,t,n){this.name=e,null!=t&&(this.body=t),null!=n&&(this.type=n)};(n["puremvc.patterns.observer.Notification"]=Mr).__name__=["puremvc","patterns","observer","Notification"],Mr.__interfaces__=[Rr],Mr.prototype={getName:function(){return this.name},setBody:function(e){this.body=e},getBody:function(){return this.body},setType:function(e){this.type=e},getType:function(){return this.type},toString:function(){var e="Notification Name: "+this.getName();return e+="\nBody:"+(null==this.body?"null":this.body.toString()),e+="\nType:"+(null==this.type?"null":this.type)},__class__:Mr};var xr=function(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)};function Ur(e){return e instanceof Array?function(){return Ee.iter(e)}:"function"==typeof e.iterator?Lr(e,e.iterator):e.iterator}(n["puremvc.patterns.observer.Observer"]=xr).__name__=["puremvc","patterns","observer","Observer"],xr.__interfaces__=[Or],xr.prototype={setNotifyMethod:function(e){this.notify=e},setNotifyContext:function(e){this.context=e},getNotifyMethod:function(){return this.notify},getNotifyContext:function(){return this.context},notifyObserver:function(e){this.getNotifyMethod()(e)},compareNotifyContext:function(e){return e==this.context},__class__:xr};var Pr,Fr=0;function Lr(e,t){return null==t?null:(null==t.__id__&&(t.__id__=Fr++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&((n=function(){return n.method.apply(n.scope,arguments)}).scope=e,n.method=t,e.hx__closures__[t.__id__]=n),n);var n}var Br={};function Hr(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function zr(e){return"function"==typeof e}function Gr(e){return"object"==typeof e&&null!==e}function jr(e){return void 0===e}(qr={}).exports=null,((qr.exports=Hr).EventEmitter=Hr).prototype._events=void 0,Hr.prototype._maxListeners=void 0,Hr.defaultMaxListeners=10,Hr.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},Hr.prototype.emit=function(e){var t,n,i,r,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||Gr(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(jr(n=this._events[e]))return!1;if(zr(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(Gr(n))for(r=Array.prototype.slice.call(arguments,1),i=(o=n.slice()).length,a=0;a<i;a++)o[a].apply(this,r);return!0},Hr.prototype.on=Hr.prototype.addListener=function(e,t){var n;if(!zr(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,zr(t.listener)?t.listener:t),this._events[e]?Gr(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Gr(this._events[e])&&!this._events[e].warned&&(n=jr(this._maxListeners)?Hr.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},Hr.prototype.once=function(e,t){if(!zr(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},Hr.prototype.removeListener=function(e,t){var n,i,r,a;if(!zr(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(n=this._events[e]).length,i=-1,n===t||zr(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Gr(n)){for(a=r;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},Hr.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(zr(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},Hr.prototype.listeners=function(e){return this._events&&this._events[e]?zr(this._events[e])?[this._events[e]]:this._events[e].slice():[]},Hr.listenerCount=function(e,t){return e._events&&e._events[t]?zr(e._events[t])?1:e._events[t].length:0};qr.exports;n.Math=Math,String.prototype.__class__=n.String=String,String.__name__=["String"],n.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=n.Date=Date,Date.__name__=["Date"];var Kr=n.Int={__name__:["Int"]},Yr=n.Dynamic={__name__:["Dynamic"]},Vr=n.Float=Number;Vr.__name__=["Float"];var Wr=n.Bool=Boolean;Wr.__ename__=["Bool"];var qr,Qr=n.Class={__name__:["Class"]},Jr={};(qr={}).exports=null,qr.exports={upload:function(e){var t=e.url,n=e.headers,i=e.data,r=e.files,a=e.complete,o=new FormData;for(var s in i)i.hasOwnProperty(s)&&o.append(s,i[s]);for(var s in r)r.hasOwnProperty(s)&&o.append(s,r[s]);var l=new XMLHttpRequest;for(var s in l.open("POST",t,!0),n)n.hasOwnProperty(s)&&l.setRequestHeader(s,n[s]);return l.onload=function(e){4===l.readyState&&a(200===l.status,l)},l.onerror=function(e){a(!1,l)},l.send(o),l}};var Xr=qr.exports,Zr={websocketsbinary:!0,audio:!1},$r={},ea=t.ArrayBuffer||Sr;null==ea.prototype.slice&&(ea.prototype.slice=Sr.sliceImpl);var ta=t.Uint8Array||wr._new;_.APP_STATE_CHANGED="app_state_changed",_.ACCESS_TOKEN_CHANGED="access_token_changed",_.CURRENT_USER_CHANGED="current_user_changed",_.CONFIGURATION_CHANGED="configuration_changed",_.DOMAIN_SELECTION_CHANGED="domain_selection_changed",_.TALK_SELECTION_CHANGED="talk_selection_changed",_.TALK_LIST_SCROLL_TO_TALK_TOP_NEEDED="talk_list_scroll_to_talk_top_needed",_.USER_SELECTION_NEEDED="user_selection_needed",_.USER_SELECTION_CHANGED="user_selection_changed",_.FRIEND_SELECTION_NEEDED="friend_selection_needed",_.STAMP_SET_CHANGED="stamp_set_changed",_.STAMP_SELECTION_STARTED="stamp_selection_started",_.STAMP_SELECTION_ENDED="stamp_selection_ended",_.STAMP_SELECTION_CHANGED="stamp_selection_changed",_.ACTION_SELECTION_CHANGED="action_selection_changed",_.CURRENT_PAGE_CHANGED="current_page_changed",_.CURRENT_PAGE_NOT_CHANGED="current_page_not_changed",_.FILEINFO_SELECTION_CHANGED="fileinfo_selection_changed",_.MESSAGE_FILEINFO_SELECTION_CHANGED="message_fileinfo_selection_changed",_.STAGED_FILEINFO_SELECTION_CHANGED="staged_fileinfo_selection_changed",_.STAGED_FILEINFOS_ADDED="staged_fileinfos_added",_.STAGED_FILEINFOS_MOVED="staged_fileinfos_moved",_.ERROR_OCCURRED="error_occurred",_.UNREAD_COUNT_CHANGED="brand_badge_changed",_.SEND_FORM_TOP_CHANGED="send_form_top_changed",_.SOLUTIONS_LOADED="solutions_loaded",_.RIGHT_PANE_OPENED="right_pane_opened",_.RIGHT_PANE_CLOSED="right_pane_closed",_.PASSWORD_EXPIRATION_OVERED="password_expiration_overed",_.PASSWORD_EXPIRATION_WARNED="password_expiration_warned",_.PHOTO_EDITOR_SAVED="photo_editor_saved",_.MC_AUTHENTICATED_USER_RECEIVED="mc_authenticated_user_received",_.KEYWORD_WATCHING_UPDATED="keyword_watching_updated",_.KEYWORD_DETECTION_UPDATED="keyword_detaction_updated",_.SEND_BY_ENTER_CHANGED="send_by_enter_changed",_.DEPARTMENT_SELECTION_CHANGED_FOR_MEMBERS_PAGE="department_selection_changed_for_members_page",_.PRESENCES_UPDATED="presences_updated",_.NOTEINFO_SELECTION_CHANGED="noteinfo_selection_changed",_.START_NOTE_EDITING="start_note_editing",_.DATA_RECOVERING="data_recovering",_.DATA_RECOVERED="data_recovered",_.NOTIFY_UPDATE_USER="notify_update_user",_.NOTIFY_ADD_FRIEND="notify_add_friend",_.NOTIFY_ADD_ACQUAINTANCE="notify_add_acquaintance",_.NOTIFY_DELETE_FRIEND="notify_delete_friend",_.NOTIFY_DELETE_ACQUAINTANCE="notify_delete_acquaintance",_.NOTIFY_UPDATE_DOMAIN_USERS="notify_update_domain_users",_.GET_DOMAIN_USERS_RESPONSED="get_domain_users_responsed",_.GET_USERS_RESPONSED="get_users_responsed",_.GET_PROFILE_RESPONSED="get_profile_responsed",_.GET_PROFILE_ERRORED="get_profile_errored",_.UPDATE_USER_RESPONSED="update_user_responsed",_.UPDATE_USER_ERRORED="update_user_errored",_.UPDATE_PROFILE_RESPONSED="update_profile_responsed",_.UPDATE_PROFILE_ERRORED="update_profile_errored",_.NOTIFY_UPDATE_DEPARTMENT_TREE="notify_update_department_tree",_.NOTIFY_UPDATE_DEPARTMENT_USERS="notify_update_department_users",_.GET_DEPARTMENT_TREE_RESPONSED="get_department_tree_responsed",_.GET_DEPARTMENT_TREE_CANCELED="get_department_tree_canceled",_.GET_DEPARTMENT_USERS_RESPONSED="get_department_users_responsed",_.GET_DEPARTMENT_USERS_CANCELED="get_department_users_canceled",_.GET_DEPARTMENT_USER_COUNT_RESPONSED="get_department_user_count_responsed",_.GET_ME_RESPONSED="get_me_responsed",_.DEPARTMENT_USER_COUNT_CLEARED="department_user_count_cleared",_.DEPARTMENT_USER_IDS_PREPARED="department_user_ids_prepared",_.NOTIFY_ADD_DOMAIN_INVITE="notify_add_domain_invite",_.NOTIFY_ACCEPT_DOMAIN_INVITE="notify_accept_domain_invite",_.NOTIFY_DELETE_DOMAIN_INVITE="notify_delete_domain_invite",_.NOTIFY_JOIN_DOMAIN="notify_join_domain",_.NOTIFY_UPDATE_DOMAIN="notify_update_domain",_.NOTIFY_LEAVE_DOMAIN="notify_leave_domain",_.NOTIFY_CREATE_PAIR_TALK="notify_create_pair_talk",_.NOTIFY_CREATE_GROUP_TALK="notify_create_group_talk",_.NOTIFY_UPDATE_GROUP_TALK="notify_update_group_talk",_.NOTIFY_UPDATE_GROUP_TALK_ERRORED="notify_update_group_talk_ERRORED",_.NOTIFY_ADD_TALKERS="notify_add_talkers",_.NOTIFY_ADD_TALKERS_INCLUDING_ME="notify_add_talkers_including_me",_.NOTIFY_DELETE_TALKER="notify_delete_talker",_.NOTIFY_DELETE_TALK="notify_delete_talk",_.NOTIFY_CREATE_MESSAGE="notify_create_message",_.NOTIFY_DELETE_MESSAGE="notify_delete_message",_.NOTIFY_UPDATE_READ_STATUSES="notify_update_read_statuses",_.NOTIFY_UPDATE_TALK_STATUS="notify_update_talk_status",_.NOTIFY_UPDATE_LOCAL_TALK_STATUS="notify_update_local_talk_status",_.NOTIFY_GET_MESSAGES="notify_get_messages",_.NOTIFY_GET_MESSAGE_READ_STATUS="notify_get_message_status",_.NOTIFY_ADD_FAVORITE_TALK="notify_add_favorite_talk",_.NOTIFY_DELETE_FAVORITE_TALK="notify_delete_favorite_talk",_.NOTIFY_DISABLE_PUSH_NOTIFICATION="notify_disable_push_notification",_.NOTIFY_ENABLE_PUSH_NOTIFICATION="notify_enable_push_notification",_.CREATE_MESSAGE_START="create_message_start",_.CREATE_MESSAGE_COMPLETE="create_message_complete",_.CREATE_MESSAGE_FAIL="create_message_fail",_.NOTIFY_CREATE_ANNOUNCEMENT="notify_create_announcement",_.NOTIFY_DELETE_ANNOUNCEMENT="notify_delete_announcement",_.NOTIFY_UPDATE_ANNOUNCEMENT_STATUS="notify_update_announcement_status",_.NOTIFY_GET_ANNOUNCEMENTS="notify_get_announcements",_.CREATE_ANNOUNCEMENT_START="create_announcement_start",_.CREATE_ANNOUNCEMENT_COMPLETE="create_announcement_complete",_.CREATE_ANNOUNCEMENT_FAIL="create_announcement_fail",_.NOTIFY_UPDATE_QUESTION="notify_update_question",_.NOTIFY_GET_QUESTIONS="get_questions_responsed",_.NOTIFY_CREATE_ATTACHMENT="notify_create_attachment",_.NOTIFY_DELETE_ATTACHMENT="notify_delete_attachment",_.GET_NOTE_STATUSES_LOADED="get_note_statuses_loaded",_.GET_NOTE_LOADED="get_note_loaded",_.GET_NOTE_FAILED_BY_NOTE_NOT_FOUND="get_note_failed_by_note_not_found",_.CREATE_NOTE_COMPLETED="create_note_completed",_.UPDATE_NOTE_SETTING_COMPLETED="update_note_setting_completed",_.UPDATE_NOTE_SETTING_FAILED_BY_NOT_FOUND="update_note_setting_failed_by_not_found",_.UPDATE_NOTE_SETTING_FAILED_BY_CONFLICT="update_note_setting_failed_by_conflict",_.UPDATE_NOTE_COMPLETED="update_note_completed",_.UPDATE_NOTE_FAILED_BY_NOT_FOUND="update_note_failed_by_not_found",_.UPDATE_NOTE_FAILED_BY_CONFLICT="update_note_failed_by_conflict",_.DELETE_NOTE_COMPLETED="delete_note_completed",_.NOTIFY_CREATE_NOTE="notify_create_note",_.NOTIFY_UPDATE_NOTE_PARTIALLY="notify_update_note_partially",_.NOTIFY_DELETE_NOTE="notify_delete_note",_.NOTIFY_UPDATE_NOTE_FOR_SETTING="notify_update_note_for_setting",_.NOTIFY_UPDATE_NOTE_FOR_SUMMARY="notify_update_note_for_revision",_.CREATE_NOTE_BUTTON_CLICKED="create_note_button_clicked",_.GET_FILE_RESPONSED="get_file_responsed",_.NOTIFY_SEARCH_MESSAGES="notify_search_messages",_.NOTIFY_SEARCH_ATTACHMENTS="notify_search_attachments",_.NOTIFY_SEARCH_MESSAGES_FAIL="notify_search_messages_fail",_.NOTIFY_SEARCH_ATTACHMENTS_FAIL="notify_search_attachments_fail",_.NOTIFY_SEARCH_PREPARE="notify_search_prepare",_.NOTIFY_SEARCH_CLEAR="notify_search_clear",_.NOTIFY_FILTER_BOX_TEXT_CHANGED="notify_filter_box_text_changed",_.NOTIFY_SEARCH_BOX_POPUP="notify_search_box_popup",_.NOTIFY_ADD_ACCOUNT_CONTROL_REQUEST="notify_add_account_control_request",_.NOTIFY_DELETE_ACCOUNT_CONTROL_REQUEST="notify_delete_account_control_request",_.NOTIFY_JOIN_ACCOUNT_CONTROL_GROUP="notify_join_account_control_group",_.NOTIFY_UPDATE_ACCOUNT_CONTROL_GROUP_PARTIALLY="notify_update_account_control_group_partially",_.NOTIFY_LEAVE_ACCOUNT_CONTROL_GROUP="notify_leave_account_control_group",_.PREPARE_CONFERENCE_FROM_MESSAGE="prepare_conference_from_message",_.JOIN_CONFERENCE_RESPONSED="join_conference_responsed",_.JOIN_CONFERENCE_CANCELED="join_conference_canceled",_.NOTIFY_OPEN_CONFERENCE="notify_open_conference",_.NOTIFY_CLOSE_CONFERENCE="notify_close_conference",_.NOTIFY_CONFERENCE_PARTICIPANT_JOIN="notify_conference_participant_join",_.NOTIFY_CONFERENCE_PARTICIPANT_LIMIT="notify_conference_participant_limit",_.NOTIFY_CONFERENCE_PARTICIPANT_REJECT="notify_conference_participant_reject",_.NOTIFY_ALL_TALK_MEMBERS_REJECTED_CONFERENCE="notify_all_talk_members_rejected_conference",N.ANNOUNCEMENTS_KEY="-1",x.__meta__={fields:{api:{inject:null}}},x.NAME="AccountControlRequest",P.__meta__={fields:{api:{inject:null},conferenceStore:{inject:null}}},P.NAME="Conference",L.__meta__={fields:{api:{inject:null}}},L.NAME="Device",H.__meta__={fields:{api:{inject:null}}},H.NAME="Domain",G.__meta__={fields:{api:{inject:null}}},G.NAME="File",V.NAME="LoadStampSet",V.TAB_URL="./json/app_ja.json",V.TAB_PANE_URL="./json/illust_category_ja.json",W.__meta__={fields:{api:{inject:null}}},W.NAME="ManageFriends",Q.__meta__={fields:{api:{inject:null}}},Q.NAME="Message",X.__meta__={fields:{api:{inject:null}}},X.NAME="Note",te.__meta__={fields:{api:{inject:null},keywordWatcher:{inject:null},readStatusUpdater:{inject:null}}},te.NAME="Read",ie.__meta__={fields:{api:{inject:null}}},ie.NAME="ReloadData",re.__meta__={fields:{api:{inject:null},searchService:{inject:null}}},re.NAME="Search",oe.__meta__={fields:{dataStore:{inject:null},settings:{inject:null}}},oe.NAME="SelectTalk",le.__meta__={fields:{api:{inject:null}}},le.NAME="Send",ue.__meta__={fields:{accessTokenResolver:{inject:null},session:{inject:null}}},ue.NAME="SignIn",ce.__meta__={fields:{api:{inject:null},settings:{inject:null},dataStore:{inject:null}}},ce.NAME="SignOut",_e.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},_e.NAME="Talk",de.__meta__={fields:{api:{inject:null},dataStore:{inject:null}}},de.NAME="UpdateProfile",fe.__meta__={fields:{api:{inject:null}}},fe.NAME="UpdateUser",me.__meta__={fields:{userPresences:{inject:null},api:{inject:null},settings:{inject:null}}},me.NAME="UpdateUserPresences",me.MAX_USERS_PER_API=100,pe.__meta__={fields:{routing:{inject:null}}},pe.NAME="Url",Pe.TalkAutoScrollDelay=1,Pe.TalkAutoScrollImmediately=2,Pe.TalkAutoScrollNone=3,Pe.NAME="browser_settings",Le.INCOMING_TIME=6e4,Be.DEFAULT_PRESENCE_EXPIRATION=3e5,ze.DEFAULT_TTL=3600,ze.DEFAULT_MAX_PARTICIPANTS=8,St.MAX_READ_USER_IDS_COUNT=16,Wt.QUERY_DATE_TODAY="t",Wt.QUERY_DATE_YESTERDAY="-1d",Wt.QUERY_DATE_THREE_DAYS_BEFORE="-3d",An.SIXTY_MINUTES=new En(0,36e5),An.FIFTEEN_MINUTES=new En(0,9e5),Pn.PREFIX="note-",Kn.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yn.TU_REG=new y("([BCDFGHIJKLMNOPQRSTUVWYZ])","gm"),Yn.XTU_REG=new y("","gm"),Qn.EMERGENCY=0,Qn.ALERT=1,Qn.CRITICAL=2,Qn.ERROR=3,Qn.WARNING=4,Qn.NOTICE=5,Qn.INFO=6,Qn.DEBUG=7,Qn.level=6,Qn._d=Qn._nop,Qn._i=null!=console?console.info.bind(console):Qn._nop,Qn._w=null!=console?console.warn.bind(console):Qn._nop,Qn._e=null!=console?console.error.bind(console):Qn._nop,Zn.HIRAGANA_SMALL_A=12353,Zn.HIRAGANA_NN=12435,Zn.KATAKANA_SMALL_A=12449,ii.NAME="accessTokenResolver",ri.NAME="Proxy",ai.__meta__={fields:{settings:{inject:null},api:{inject:null}}},oi.__meta__={fields:{api:{inject:null},dataStore:{inject:null},settings:{inject:null},fileInfoStore:{inject:null},departmentStore:{inject:null},messageStore:{inject:null},dataFactory:{inject:null},keywordWatcher:{inject:null},conferenceStore:{inject:null}}},oi.NAME="broadcast",si.__meta__={fields:{apiCaller:{inject:null},settings:{inject:null},dataStore:{inject:null},dataFactory:{inject:null},fileService:{inject:null},searchService:{inject:null},fileInfoStore:{inject:null},departmentStore:{inject:null},conferenceStore:{inject:null}}},si.NAME="api",si.API_VERSION="1.104",si.UPDATE_VERSION="1.104_1",si.ACTIONS_COUNT_PER_API=20,si.UPDATE_LAST_USED_AT_INTERVAL=6e5,li.__meta__={fields:{rpc:{inject:null}}},li.NAME="apiCaller",li.DELAY_FOR_DB_REPLICATION=500,li.DELAY_FOR_DB_REPLICATION_FOR_RETRY=1e3,li.API_TRY_COUNT=3,ui.NAME="appState",ci.__meta__={fields:{dataStore:{inject:null},messageStore:{inject:null}}},ci.NAME="conferenceStore",_i.__meta__={fields:{dataStore:{inject:null},fileInfoStore:{inject:null},messageStore:{inject:null},solutionsStore:{inject:null},conferenceStore:{inject:null}}},_i.NAME="dataFactory",hi.NAME="dataStore",hi.TYPE_FRIEND=0,hi.TYPE_ACQUAINSTANCE=1,hi.TYPE_NONE=2,di.__meta__={fields:{dataStore:{inject:null}}},di.NAME="departmentStore",fi.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},fi.NAME="features",mi.__meta__={fields:{fileService:{inject:null}}},mi.NAME="fileInfoStore",pi.__meta__={fields:{settings:{inject:null}}},pi.NAME="fileService",pi.THUMBNAIL_WIDTH=600,pi.THUMBNAIL_HEIGHT=600,gi.__meta__={fields:{settings:{inject:null},features:{inject:null},dataStore:{inject:null}}},gi.NAME="keywordWatcher",gi.TALK_KEY_PREFIX="talk_",gi.ANNOUNCEMENT_KEY_PREFIX="announcement_",vi.TEMP_HALF_SPACE="&SPACE",vi.TEMP_FULL_SPACE="&FULL_PITCH_SPACE",Ti.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},Ti.NAME="limitations",Ii.NAME="messageStore",Ei.__meta__={fields:{broadcast:{inject:null}}},Ei.NAME="rpc",Ei.lastMsgId=0,Ai.PING_INTERVAL_ON_CONNECTED=45e3,Di.__meta__={fields:{dataStore:{inject:null},api:{inject:null}}},Di.NAME="readStatusUpdater",Ci.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},Ci.NAME="routing",Mi.__meta__={fields:{settings:{inject:null}}},Mi.NAME="searchService",Mi.LOAD_SIZE=20,Mi.DUMMY_VALUE_FOR_SET=1,xi.__meta__={fields:{settings:{inject:null},dataStore:{inject:null},dataFactory:{inject:null},api:{inject:null}}},xi.NAME="session",Ui.NAME="settings",Ui.KEY_ACCESS_TOKEN="access_token",Ui.KEY_ACCESS_TOKEN_WITHOUT_MANAGEMENT_CONSOLE="access_token_without_management_console",Ui.KEY_SELECTED_DOMAIN_ID_H="selected_domain_id_h",Ui.KEY_SELECTED_DOMAIN_ID_L="selected_domain_id_l",Ui.COOKIE_KEY_SEND_BY_ENTER="send-by-enter",Ui.COOKIE_EXPIRES_SEND_BY_ENTER=31536e3,Ui.KEY_SELECTED_STAMP_TAB_ID="selected_stamp_tab_id",Ui.KEY_INPUT_TEXT="input_text",Ui.KEY_COPY_PROFILE_TO_ALL_DOMAINS="copy_profile_to_all_domains",Ui.KEY_SELECTED_DEPARTMENT_IDS="selected_department_ids",Ui.KEY_SEARCH_HISTORIES="search_histories",Ui.KEY_RIGHT_PANEL_OPENED="right_panel_opened",Ui.KEY_MULTI_VIEW_MODE="multi_view_mode",Ui.KEY_PASSWORD_WARNING_SKIP_UNTIL="password_warning_skip_until",Ui.KEY_LAST_USED_EXPIRED_AT="last_used_expired_at",Ui.KEY_IDFV="idfv",Pi.NAME="solutionsStore",Fi.__meta__={fields:{dataStore:{inject:null},conferenceStore:{inject:null}}},Fi.NAME="talksService",Li.__meta__={fields:{settings:{inject:null},dataStore:{inject:null}}},Li.NAME="ThumbnailExpansion",Bi.__meta__={fields:{dataStore:{inject:null}}},Bi.NAME="userPresences",Ki.NAME="Mediator",Yi.__meta__={fields:{dataStore:{inject:null},api:{inject:null}}},Yi.NAME="commandline",Yi.DATA_SAVE_SPAN=5e3,Wi._mul=null!=Math.imul?Math.imul:function(e,t){return e*(65535&t)+(e*(t>>>16)<<16|0)|0},Qi.USE_CACHE=!1,Qi.USE_ENUM_INDEX=!1,Qi.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",Zi.DEFAULT_RESOLVER=new Xi,Zi.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",ir.count=0,mr.i64tmp=new En(0,0),vr.__toStr={}.toString,wr.BYTES_PER_ELEMENT=1,Ir.FLOAT_SINGLE_MIN=1401298464324817e-60,Ir.FLOAT_SINGLE_MAX=34028234663852886e22,Ir.FLOAT_DOUBLE_MIN=5e-324,Ir.FLOAT_DOUBLE_MAX=17976931348623157e292,r.main()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);